(self["webpackChunk_canva_web"] = self["webpackChunk_canva_web"] || []).push([[70490],{

/***/ 532233:
function(_, __, __webpack_require__) {__webpack_require__.n_x = __webpack_require__.n;const __web_req__ = __webpack_require__;__web_req__(905716);__web_req__(764820);self._456c437108d2d2713799e19380be528d = self._456c437108d2d2713799e19380be528d || {};(function(__c) {var M=__c.M;var O=__c.O;var DNd=__c.DNd;var jah=__c.jah;
var Ncw=function(a,b){a.LJa.clearTimeout(b.eQg);b.eQg=void 0},Ocw=function(a,b){const c=b.va,d=a.C$a.get(b.clientId);d?jah({V:a.V,II:"hide_cursor",va:c,fn:()=>a.HZd.hide(d.uVa),RKc:!0}):c?.end("error",new Map([["error_reason","no_cursor_state"]]))},Qcw=function(a,b){const c=new Pcw(a,b);a.l_e.set(b,c);return c},Rcw=function(a,b){a.l_e.get(b)?.C$a.forEach(c=>{c.va?.abort()});a.l_e.delete(b)},Scw=function(a,b){a=__c.Fj(b).transform(a.x,a.y);return`translateX(${a.x}px) translateY(${a.y}px)`},Vcw=function(a,
b){return function(c){return Tcw(()=>{const d=__c.my(c,a);if(!d)return{userId:void 0,displayName:void 0};const e=b.getUser(c);return{userId:__c.ky(d),displayName:e.state==="fulfilled"?e.value.displayName:void 0}},{equals:Ucw.shallow})}},Zcw=function({Ka:a,viewport:b,T6p:c,HZd:d,qxa:e,V:f}){const g=Wcw(({mk:h,uVa:k,F4c:l,Gca:n})=>{const p=Xcw(()=>{n?d.iEl(k):d.J0i(k)},[n,k]),q=Xcw(w=>{l.CLj.set(h,w)},[l,h]);if(a==="responsive"&&!b?.MF||a!=="responsive"&&!b?.uh||a!=="responsive"&&b?.uK)return null;
const r=c(h),{userId:t,displayName:v}=r.get();if(!t)return null;switch(k.mode){case 1:case 2:case 3:return QZ(Ycw,{displayName:v,showName:k.mode===1||k.mode===2,color:e.xUa(t),Fwl:q,qKb:k.style,onMouseMove:p,Gca:n});case 4:return null;default:throw new __c.u(k.mode);}});return __c.cw(g,{iu:"client_cursor_component",E6:!0,V:f})},Ycw=function({displayName:a,showName:b,color:c,qKb:d,onMouseMove:e,Gca:f,Fwl:g}){const h=$cw(null),k=adw(()=>bdw[d],[d]);return cdw("div",{className:k.Zdo,onMouseMove:e,children:[QZ("div",
{className:ddw(k.fli,{_96qi9A:c.effect===DNd}),dangerouslySetInnerHTML:{__html:k.icon},style:{color:c.background}}),(a||f)&&QZ(edw,{in:b,timeout:__c.tb.rd?200:0,classNames:__c.tb.rd?fdw:void 0,unmountOnExit:!0,mountOnEnter:!0,nodeRef:h,children:QZ("span",{className:ddw(k.t1n,{_96qi9A:c.effect===DNd,Ll26Nw:f}),style:{color:c.text,backgroundColor:c.background},ref:h,children:QZ("span",{className:"hmoF7w",children:f?QZ(gdw,{Fwl:g,Gca:f,displayName:a}):QZ(__c.Q,{size:"small",weight:"bold",tone:__c.cr,
lineClamp:1,children:a})})})})]})},hdw=function(a,b,c){return{x:(1-c)*a.x+c*b.x,y:(1-c)*a.y+c*b.y}},idw=function(a,b,c,d){d=[Math.pow(1-d,2),2*(1-d)*d,Math.pow(d,2)];return{x:d[0]*a.x+d[1]*b.x+d[2]*c.x,y:d[0]*a.y+d[1]*b.y+d[2]*c.y}},jdw=function(a,b,c,d,e){e=[Math.pow(1-e,3),3*Math.pow(1-e,2)*e,3*(1-e)*Math.pow(e,2),Math.pow(e,3)];return{x:e[0]*a.x+e[1]*b.x+e[2]*c.x+e[3]*d.x,y:e[0]*a.y+e[1]*b.y+e[2]*c.y+e[3]*d.y}},ldw=function(a,b,c,d=.5){const e=kdw(a,b),f=kdw(b,c),g=d*e/(e+f);d=d*f/(e+f);return[{x:b.x-
g*(c.x-a.x),y:b.y-g*(c.y-a.y)},{x:b.x+d*(c.x-a.x),y:b.y+d*(c.y-a.y)}]},kdw=function(a,b){return Math.sqrt(Math.pow(a.x-b.x,2)+Math.pow(a.y-b.y,2))},pdw=function({EMa:a,V:b}){const c=new mdw,d=new ndw(g=>c.subscribe(g));let e=!1;const f=new mdw;return{connect:function(){if(e)return d;a.connect(1,f).subscribe(g=>{c.next({event:new odw({srh:g.srh,update:g.update}),YVb:g.YVb})});e=!0;return d},WQs:function(g,h){jah({V:b,II:"send_rtc_update",va:h,fn:k=>f.next({message:g,va:k}),kpd:!0,RKc:!0})}}},sdw=function({EOe:a,
bnq:b,$_d:c,HZd:d,V:e,Kjr:f,SWq:g,jMo:h}){const k=({srh:l,update:n},p)=>{var q=qdw(h)?e.wb("update_client_cursor",{Hb:{name:"editor.collaboration.update_client_cursor",type:n.kind}}):void 0;switch(n.kind){case "HIDE":b.d5n(l,{kind:2,va:q},p);break;case "SHOW":let r;n.nh&&(r=g(n.nh));!r&&n.Yb>=0&&(r=f(n.Yb));if(!r&&(n.Yb!==-1||n.nh)){q?.abort();break}b.d5n(l,{kind:1,va:q,page:r,lJf:{x:n.e1l,y:n.m1l},Gca:n.Gca},p);break;case "CURSOR_STYLE":const t=c.C$a.get(l);if(!t){q?.setAttribute("error_reason",
"no_cursor_state");q?.abort();break}if(!q){d.Swl(t.uVa,n.style);break}e.VU("set_cursor_style",q,v=>{d.Swl(t.uVa,n.style);v.setAttribute("cursor_style",rdw(n.style))});q.end();break;default:throw new __c.u(n);}};return a.subscribe(l=>{k(l.event,l.YVb===2?2:1)})},tdw=function(a,b){const c=[[{transform:"rotate(0deg)"},{transform:"rotate(360deg)"}],[{transform:"rotate(0deg)"},{transform:"rotate(-360deg)"}]],d=c[Math.floor(Math.random()*c.length)],e={duration:500,easing:"ease-in-out",iterations:1};a.LJa.requestAnimationFrame(()=>
{b.q0h&&b.q0h.animate&&b.q0h.animate(d,e)})},wdw=function(a,b){a.LJa.addEventListener("mousemove",g=>{a.zUr(g,b)});const c=g=>{a.XBr(g,b)},d=g=>{a.Nlg(g,b)},e=udw(()=>b.H$c,g=>{switch(g){case "init":break;case "ready":break;case "active":vdw.D6h&&(a.LJa.document.documentElement.style.cursor="none",a.N.track(__c.yD,{feature:"cursor_chat",source:"collab_cursors",action:"cursor_icon_active"}));break;case "activate":a.LJa.document.documentElement.style.cursor="none";a.LJa.addEventListener("keydown",c);
a.UWa(b,"focussed");break;case "focussed":a.N.track(__c.yD,{feature:"cursor_chat",source:"collab_cursors",action:"chat_opened"});b.QXc?.addEventListener("blur",d);b.HCo||b.XNj==null?tdw(a,b):(b.XNj.emit(),b.HCo=!0);break;case "blurred":a.UWa(b,"closed");break;case "closed":a.N.track(__c.yD,{feature:"cursor_chat",source:"collab_cursors",action:"chat_closed"});a.LJa.document.documentElement.style.cursor="auto";b.Gca=void 0;b.QXc?.removeEventListener("blur",d);a.LJa.removeEventListener("keydown",c);
a.SNa!=null&&(a.LJa.cancelAnimationFrame(a.SNa),a.SNa=null);break;default:throw Error();}},{fireImmediately:!0}),f=udw(()=>b.$bj,g=>{a.AWj.position&&a.M5s(g,a.AWj.position.clientX,a.AWj.position.clientY)});vdw.D6h&&a.msi&&a.UWa(b,"active");return()=>{a.UWa(b,"closed");a.LJa.document.documentElement.style.cursor="auto";e();f()}},Adw=function({color:a,L:b,store:c,Bwd:d=!1,ENb:e}){if(d){var f=r=>{b.UWa(c,r)},g=r=>{b.Lto(c,r)},h=r=>{b.H0f(c,r)},k=r=>{b.q6e(c,r)},l=r=>{b.mWc(c,r)},n=Tcw(()=>c.$bj),p=r=>
{c.XNj={emit:r}},q=()=>QZ(xdw,{tSs:p});return Wcw(()=>{const r=e?.bab?.GIf;return vdw.D6h?QZ(ydw,{color:a,qKb:r?2:1,mWc:l,UWa:f,Gje:g,H0f:h,q6e:k,Gca:n,p0h:c.p0h,isVisible:c.BLj,CNl:c.QXc,rdg:QZ(q,{})}):QZ(zdw,{color:a,qKb:r?2:1,mWc:l,UWa:f,Gje:g,H0f:h,q6e:k,Gca:n,isVisible:c.BLj,CNl:c.QXc,rdg:QZ(q,{})})})}},Bdw=__webpack_require__(186901),Tcw=Bdw.EW,Cdw=Bdw.h5,Ucw=Bdw.m3,udw=Bdw.mJ,Ddw=Bdw.sH,RZ=Bdw.XI,Edw=Bdw.z7;var Fdw=__webpack_require__(31968),Gdw=Fdw.Fragment,QZ=Fdw.jsx,cdw=Fdw.jsxs;var Wcw=__webpack_require__(647370).PA;var Hdw=__webpack_require__(845212),Idw=Hdw.memo,Xcw=Hdw.useCallback,Jdw=Hdw.useEffect,Kdw=Hdw.useLayoutEffect,adw=Hdw.useMemo,$cw=Hdw.useRef,Ldw=Hdw.useState;var Mdw=__webpack_require__,Ndw=Mdw(208463),ddw=Mdw.n_x(Ndw)();var edw=__webpack_require__(532588).A;var mdw=__webpack_require__(450117).B7;var ndw=__webpack_require__(226260).c;var Odw=__webpack_require__(640598).createPortal;var Pdw='<svg width="14" height="14" viewBox="2.48 2.48 13.98 13.93" xmlns="http://www.w3.org/2000/svg" fill="none"><path d="M15.289 6.83 4.652 3.055c-.992-.351-1.948.605-1.597 1.597L6.813 15.24c.184.518.686.697 1.078.672.391-.025.856-.26 1.002-.768.392-1.372 1.067-3.065 2.134-4.11 1.083-1.06 2.802-1.74 4.172-2.138.505-.146.738-.606.762-.997.023-.392-.159-.887-.672-1.07z" fill="currentColor" stroke="#fff"/></svg>';var Qdw='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><g filter="url(#_1570531570__a)"><path fill-rule="evenodd" clip-rule="evenodd" d="M3.939 18.93A1 1 0 0 0 5.07 20.06l4.29-.613a3 3 0 0 0 1.697-.848l9.428-9.428a3 3 0 0 0 0-4.243l-1.414-1.414a3 3 0 0 0-4.243 0L5.4 12.943a3 3 0 0 0-.848 1.697l-.613 4.29Z" fill="#fff"/><path d="m4.929 19.071 2.475-.354-2.121-2.12-.354 2.474ZM5.46 15.359 8.64 18.54l.578-.083a2 2 0 0 0 1.131-.566l9.428-9.428a1.99 1.99 0 0 0 .537-.973 1.99 1.99 0 0 0-.537-1.855l-1.414-1.414a2 2 0 0 0-2.828 0L6.107 13.65a2 2 0 0 0-.565 1.131l-.083.578Z" fill="currentColor"/></g><defs><filter id="_1570531570__a" x="-2" y="-1" width="28" height="28" filterUnits="userSpaceOnUse" color-interpolation-filters="sRGB"><feFlood flood-opacity="0" result="BackgroundImageFix"/><feColorMatrix in="SourceAlpha" values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 127 0" result="hardAlpha"/><feOffset dy="1"/><feGaussianBlur stdDeviation="1"/><feComposite in2="hardAlpha" operator="out"/><feColorMatrix values="0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0 0.2 0"/><feBlend in2="BackgroundImageFix" result="effect1_dropShadow_3181_2634"/><feBlend in="SourceGraphic" in2="effect1_dropShadow_3181_2634" result="shape"/></filter></defs></svg>';var Rdw=class{static G(a){O(a,{mode:Ddw.ref,style:Ddw.ref})}constructor(){this.mode=(Rdw.G(this),1);this.style=1}},Sdw=class{static G(a){O(a,{Swl:RZ,J0i:RZ,iEl:RZ,ESl:RZ,nOo:RZ,hide:RZ})}Swl(a,b){a.style=b}J0i(a){a.mode=1;Ncw(this,a);a.eQg=this.LJa.setTimeout(()=>this.ESl(a),this.vdi)}iEl(a){a.mode=2;Ncw(this,a);a.eQg=this.LJa.setTimeout(()=>this.ESl(a),this.DLj)}ESl(a){a.mode=3;a.eQg=this.LJa.setTimeout(()=>this.nOo(a),this.hUk)}nOo(a){a.mode=4;a.eQg=void 0}hide(a){a.mode=4;Ncw(this,a)}constructor(a,
b=window){this.I=a;this.LJa=b;this.vdi=(Sdw.G(this),void 0);this.vdi=a.vdi;this.hUk=a.hUk;this.DLj=a.DLj}};var Tdw=class{static G(a){O(a,{C$a:Ddw.shallow,XWl:RZ})}XWl(a){const b=a.clientId,c=a.point,d=a.page,e=a.va;a=a.Gca;var f=this.C$a.get(b);const g=f?.uVa??new Rdw;this.C$a.set(b,{page:d,point:c,uVa:g,va:e,Gca:a});f?.page&&f.page!==d&&this.l_e.get(f.page)?.Vfh(b);if(f=d?this.l_e.get(d):this){var h=f.C$a.get(b),k=f.yWj.get(b),l=f.CLj.get(b);a?this.HZd.iEl(g):this.HZd.J0i(g);l?l.set(a):a&&f.C$a.set(b,{point:c,uVa:g,va:e,Gca:a});k&&d&&(k.style.transform=jah({V:this.V,II:"apply_cursor_transform",va:e,fn:()=>
Scw(c,this.viewport.lT(d))}));k&&h?(h.point.x=c.x,h.point.y=c.y,h.Gca=a,e?.end()):f.C$a.set(b,{point:c,uVa:g,va:e,Gca:a})}else e?.setAttribute("error_reason","page_not_mounted"),e?.abort()}Vfh(a){const b=this.C$a.get(a);this.C$a.delete(a);b&&(Ncw(this.HZd,b.uVa),b.va?.abort(),b.page&&this.l_e.get(b.page)?.Vfh(a))}constructor(a,b,c){this.viewport=a;this.HZd=b;this.V=c;this.C$a=(Tdw.G(this),new Map);this.l_e=new Map;this.yWj=new Map;this.CLj=new Map}},Pcw=class{static G(a){O(a,{C$a:Ddw.shallow,Vfh:RZ.bound})}Vfh(a){this.C$a.get(a)?.va?.abort();
this.C$a.delete(a)}constructor(a,b){this.C$a=(Pcw.G(this),void 0);this.yWj=new Map;this.CLj=new Map;a=Array.from(a.C$a).filter(([,c])=>c.page===b);this.C$a=new Map(a)}};var gdw=Wcw(({Gca:a,displayName:b,Fwl:c})=>{const d=$cw(Ddw.box(a));Jdw(()=>{d.current!=null&&c(d.current)},[c]);a=d.current.get();a=a!=null?a.split("\n"):[];return cdw(Gdw,{children:[QZ(__c.Q,{size:"small",lineClamp:1,tone:__c.cr,children:b}),a.map(e=>QZ(__c.Q,{size:"medium",lineClamp:1,Hla:"unset",tone:__c.cr,children:e},e))]})});var fdw={enter:"YF81rw",enterActive:"BkrRgg",exit:"BxxmMQ",exitActive:"neLF4w"},bdw={[1]:{icon:Pdw,Zdo:"Ka_aXQ",fli:"jYRlpQ",t1n:"_1dIvsQ jAGGmw"},[2]:{icon:Qdw,Zdo:"N6QGWA Ka_aXQ",fli:"ReYtWw",t1n:"EGtHTA jAGGmw"}},Udw=Wcw(function({scale:a,F4c:b,y4o:c,bBp:d}){return cdw("div",{className:"E_6_9g",children:[Array.from(b.C$a).map(([e,f])=>QZ("div",{className:"DrPMNg",style:{transform:Scw(f.point,a)},ref:g=>{g&&b.yWj.set(e,g)},children:QZ(c,{mk:e,uVa:f.uVa,F4c:b,Gca:f.Gca,Uf:{va:f.va,s$:!0}})},e)),
d&&QZ(d,{})]})});var Vdw=class{get T9m(){return Array.from(this.Ycf.values()).some(({Yia:a,Pgb:b})=>b<a.length)}constructor(){this.Ycf=new Map}},Wdw=class{constructor(a){this.Jil=0;this.d5n=(b,c,d)=>{const e=this.store.Ycf.get(b)??{Yia:[],Pgb:0};document.visibilityState==="hidden"&&c.va?.abort();if(!(e.Yia.length<2||c.kind===2)){var f=e.Yia[e.Yia.length-1],g=e.Yia[e.Yia.length-2];f.kind===1&&g.kind===1&&(g=this.rGf.g4q(g.lJf,f.lJf,c.lJf),f.Xym=g[0],c.Wym=g[1])}e.Yia.push({source:d,...c});this.store.Ycf.set(b,e);this.OHl()};
this.OHl=()=>{this.P6n||(this.P6n=requestAnimationFrame(this.Nbr))};this.Nbr=RZ(b=>{this.P6n=void 0;this.Jil++;if(this.Jil%this.FAs!==0)this.OHl();else{for(const [d,e]of this.store.Ycf.entries())if(e.Pgb>=e.Yia.length)e.Yia.forEach(f=>f.va?.abort());else{var c=e.Yia.length-1-e.Pgb;c>2&&(e.Yia.splice(e.Pgb+1,c-1).forEach(f=>f.va?.abort()),c=e.Yia[e.Pgb+1],c.kind===1&&(c.Wym=void 0,c.Xym=void 0));c=e.Yia[e.Pgb];switch(c.kind){case 2:this.Abr(d,c,e);break;case 1:c.startTimestamp!=null?this.qbr(d,e,c,
b):this.$8m(d,e,c,b);break;default:throw new __c.u(c);}}this.store.T9m?this.OHl():this.Jil=0}});this.Abr=(b,c,d)=>{Ocw(this.$_d,{clientId:b,va:c.va});d.Yia=d.Yia.slice(d.Pgb+1);d.Pgb=0};this.$8m=(b,c,d,e)=>{const f=c.Pgb>0?c.Yia[c.Pgb-1]:void 0;if(f&&f.kind!==2&&f.page===d.page){var g=f.lJf,h=d.lJf,k=d.Wym,l=d.Xym;c.Yia[c.Pgb]={...d,startTimestamp:e,interpolate:k&&l?n=>this.rGf.Slq(g,k,l,h,n):k?n=>this.rGf.n6n(g,k,h,n):l?n=>this.rGf.n6n(g,l,h,n):n=>this.rGf.xFr(g,h,n)}}else this.$_d.XWl({clientId:b,
point:d.lJf,page:d.page,va:d.va,Gca:d.Gca}),c.Yia=c.Yia.slice(c.Pgb),c.Pgb=1};this.qbr=(b,c,d,e)=>{let f=Math.min((e-d.startTimestamp)/this.Jbk[d.source],1);if(f===1){c.Yia.length>=3?c.Yia.shift()?.va?.abort():c.Pgb++;const g=c.Pgb<c.Yia.length?c.Yia[c.Pgb]:null;g?.kind===1&&(this.$8m(b,c,g,d.startTimestamp+this.Jbk[d.source]),c=c.Pgb<c.Yia.length?c.Yia[c.Pgb]:null,c?.kind===1&&c.startTimestamp&&(d.va?.abort(),d=c,f=Math.min((e-c.startTimestamp)/this.Jbk[c.source],1)))}e=jah({V:this.V,II:"interpolate",
va:d.va,fn:()=>d.interpolate(f)});this.$_d.XWl({clientId:b,point:e,page:d.page,va:d.va,Gca:d.Gca});d.va&&(b=()=>d.va=void 0,d.va?.wk(b),d.va?.B9a(b))};this.YDs=b=>{b.forEach(c=>{this.$_d.Vfh(c);this.store.Ycf.get(c)?.Yia.forEach(d=>d.va?.abort());this.store.Ycf.delete(c)})};this.hNn=()=>{document.visibilityState==="hidden"&&this.store.T9m&&this.store.Ycf.forEach(b=>b.Yia.forEach(c=>c.va?.abort()))};this.$_d=a.$_d;this.V=a.V;this.Jbk={[1]:a.XQq,[2]:a.YQq};this.store=a.store||new Vdw;this.Bwd=!!a.Bwd;
this.rGf=a.rGf||{g4q:ldw,xFr:hdw,n6n:idw,Slq:jdw};this.FAs=this.Bwd?1:a.SYu||3}};var odw=__c.F(()=>({type:__c.A("A?",1,"UPDATE"),srh:__c.S(1),update:__c.D(2,__c.Kah),INj:__c.U(3)}));var rdw=a=>{switch(a){case 2:return"DRAW";case 1:return"DEFAULT";default:throw new __c.u(a);}},qdw=(a=.05)=>{__c.sa(a>=0&&a<=1);return Math.random()<a};var vdw={get D6h(){return __c.Pb("56cc451d",!1)}},Xdw=class{static G(a){O(a,{H$c:Ddw.ref,p0h:Tcw,BLj:Tcw,Gca:Ddw.ref,$bj:Tcw})}get sOm(){return!!this.NOm}get p0h(){return this.sOm&&(this.H$c==="active"||this.H$c==="focussed")}get BLj(){return this.sOm&&this.H$c==="focussed"}get $bj(){if(this.Gca!=null)return this.Gca.slice(0,this.anq)}constructor(a,b=280){this.NOm=a;this.anq=b;this.zWj=(Xdw.G(this),null);this.XNj=this.QXc=this.q0h=null;this.rwo=!1;this.H$c="init";this.HCo=!1}},Ydw=class{static G(a){O(a,
{msi:Tcw,mWc:RZ,UWa:RZ,H0f:RZ,q6e:RZ,Lto:RZ})}get msi(){return!this.viewport.DU}mWc(a,b){a.H$c!=="closed"&&(a.Gca=b)}UWa(a,b){this.msi&&(a.H$c=b)}H0f(a,b){a.zWj=b}q6e(a,b){a.q0h=b}Lto(a,b){a.QXc=b}constructor(a,b,c,d,e,f,g,h=window){this.viewport=a;this.cnq=b;this.AWj=c;this.M5s=d;this.N=e;this.keyboardShortcuts=f;this.I=g;this.LJa=h;this.SNa=(Ydw.G(this),null);this.gDs=k=>{k.rwo||(this.keyboardShortcuts.register(["\\",()=>{this.msi&&this.UWa(k,"activate")},"cursor chat",["edit","view","comment"]]),
k.rwo=!0)};this.zUr=(k,l)=>{this.SNa==null&&(this.SNa=this.LJa.requestAnimationFrame(()=>{this.SNa=null;const n=this.viewport.ya;n!=null&&l.zWj!=null&&(this.cnq.WYi({clientX:k.x,clientY:k.y,page:n}),l.zWj.style.transform=`translate(${k.x}px, ${k.y}px)`)}))};this.Nlg=(k,l)=>{l.H$c!=="closed"&&this.UWa(l,"blurred")};this.XBr=(k,l)=>{k.key==="Escape"&&this.UWa(l,"closed");k.key==="Enter"&&((k=l.Gca)&&k?.at(-1)!=="\n"||this.UWa(l,"closed"))}}};var Zdw={count:10,Dmg:{min:5,max:25}},xdw=Idw(({tSs:a})=>{const b=$cw(null);Jdw(()=>{a(c=>{b.current?.emit(c??Zdw)})},[b,a]);return QZ(__c.vah,{xHc:b,className:"XndOuA"})}),$dw={exit:"CQBzoQ",enter:"lrq6Mg",exitDone:"q60KMA",enterDone:"jeb7og",exitActive:"RhbmqQ",enterActive:"w7_ITg"},aew=[M("T92Pqg"),M("ZHpZwg"),M("WFQ4BA"),M("r8p/6A"),M("aCpCfA"),M("EC9ROg"),M("WzijJA"),M("y+1heQ"),M("Sy0c5w"),M("EMtWww")],bew=Wcw(({UWa:a,Gca:b,mWc:c,Gje:d})=>{const e=$cw(null),f=$cw(null),g=$cw({hRr:0,XCn:""}),
h=b.get(),k=aew[Math.floor(Math.random()*aew.length)];b=Xcw(p=>p?(p.match(/\n/g)||[]).length+1:1,[]);Jdw(()=>{const p=h?.split("\n");p&&p.length>4&&p.shift()&&c(p.join("\n"))},[h,c]);Kdw(()=>{if(e.current&&f.current){var p=h||k;if(p!==g.current.XCn){var q=document.createElement("div");q.style.position="absolute";q.style.visibility="hidden";q.style.whiteSpace="nowrap";q.style.font=window.getComputedStyle(f.current).font;q.style.padding=window.getComputedStyle(f.current).padding;var r=p.split("\n"),
t=0;document.body.appendChild(q);r.forEach(v=>{q.textContent=v||" ";t=Math.max(t,q.offsetWidth)});document.body.removeChild(q);r=Math.max(136,Math.min(t,400));g.current={XCn:p,hRr:r};e.current.offsetWidth!==r&&(e.current.style.width=`${r}px`)}}},[h,k,c]);const l=Xcw(p=>{c(p.target.value)},[c]),n=Xcw(p=>{p&&(f.current=p,d(p),a("ready"))},[d,a]);return QZ("div",{ref:e,className:"nsh9hA",children:QZ("textarea",{value:h??"",onChange:l,autoFocus:!0,ref:n,placeholder:k,className:"_2nARaQ",autoCorrect:"on",
spellCheck:"true",maxLength:280,rows:b(h)})})}),cew=({isVisible:a,v6r:b,color:c,Gje:d,mWc:e,UWa:f,Gca:g})=>{const h=$cw(null),[k,l]=Ldw(a),n=Xcw(()=>{b()},[b]),p=Xcw(()=>{l(!0)},[]),q=Xcw(()=>{l(!1)},[]);return QZ("div",{className:ddw("_8QSZcg",{MdEXTQ:k,_9Blzjw:!k}),children:QZ(edw,{in:a,timeout:200,classNames:$dw,nodeRef:h,onEnter:p,onEntered:n,onExited:q,children:QZ("span",{className:ddw("qEQKKA",{_96qi9A:c.effect===DNd}),style:{color:c.text,backgroundColor:c.background},ref:h,children:QZ(bew,
{Gje:d,mWc:e,UWa:f,Gca:g})})})})},dew=({qKb:a,color:b,q6e:c})=>{const d=$cw(null),e=adw(()=>bdw[a],[a]);Jdw(()=>{d.current&&c&&c(d.current)},[c]);return a!==1?null:QZ("div",{ref:d,dangerouslySetInnerHTML:{__html:e.icon},className:ddw(e.fli,"_8QSZcg",{_96qi9A:b.effect===DNd}),style:{color:b.background}})},zdw=({color:a,qKb:b,Gje:c,UWa:d,mWc:e,H0f:f,Gca:g,isVisible:h,CNl:k,rdg:l})=>{const n=$cw(null),[p,q]=Ldw(h),r=adw(()=>bdw[b],[b]),t=Xcw(()=>{k?.focus()},[k]),v=Xcw(()=>{q(!0)},[]),w=Xcw(()=>{q(!1)},
[]);return Odw(cdw("div",{ref:f,className:ddw("_8QSZcg","XPtBCg",{MdEXTQ:p,_9Blzjw:!p}),children:[l,b===1&&QZ("div",{dangerouslySetInnerHTML:{__html:r.icon},className:ddw(r.fli,{_96qi9A:a.effect===DNd}),style:{color:a.background}}),QZ(edw,{in:h,timeout:200,classNames:$dw,nodeRef:n,onEnter:v,onEntered:t,onExited:w,children:QZ("span",{className:ddw("qEQKKA",{_96qi9A:a.effect===DNd}),style:{color:a.text,backgroundColor:a.background},ref:n,children:QZ(bew,{Gje:c,mWc:e,UWa:d,Gca:g})})})]}),document.body)},
ydw=({color:a,qKb:b,Gje:c,UWa:d,mWc:e,H0f:f,q6e:g,Gca:h,p0h:k,isVisible:l,CNl:n,rdg:p})=>{const q=Xcw(()=>{n?.focus()},[n]);return Odw(cdw("div",{ref:f,className:ddw("_8QSZcg","XPtBCg"),children:[p,k&&QZ(dew,{qKb:b,color:a,q6e:g}),QZ(cew,{isVisible:l,v6r:q,color:a,Gje:c,mWc:e,UWa:d,Gca:h})]}),document.body)};var eew=class{static G(a){O(a,{position:Ddw.deep})}constructor(){this.position=(eew.G(this),void 0)}},few=class{static G(a){O(a,{reset:RZ,WYi:RZ})}reset(){this.store.position=void 0}WYi({clientX:a,clientY:b,page:c}){this.store.position={clientX:a,clientY:b,page:c}}constructor(a){this.store=a;few.G(this)}};__c.lTe={rnr:function({Xf:a,X:b,session:c,Pa:d,keyboardShortcuts:e,P:f,Ja:g,canvas:h,viewport:k,isDragging:l,ara:n,ENb:p,EMa:q,Ha:r,qxa:t,dyb:v,bOl:w,Bwd:x}){function y(ia,wa){if(qdw())return L.wb("send_cursor_update",{Hb:{name:"editor.collaboration.send_cursor_update",type:wa,attrs:new Map([["action",ia]])}})}function z(ia){const wa=g.pages.toArray();return ia>=0&&ia<wa.length?wa[ia]:void 0}function B(ia){return __c.wQe(g,ia)}function C(ia){na?ia?.abort():(na=!0,W.reset(),ia?.ob().xH("HIDE"),jah({V:L,
II:"send_update",va:ia,fn:wa=>P(new __c.Hah,wa),RKc:!0,kpd:!0}))}function G(ia,wa,Ca,Ha){const Oa=__c.vQe(g,Ca),Ka=g.pages.toArray().indexOf(Ca);!Oa&&Ka<0?(Ha?.setAttribute("error_reason","no_page"),Ha?.abort()):(Ha?.ob().xH("SHOW"),jah({V:L,II:"send_update",va:Ha,fn:Ua=>P(new __c.Gah({e1l:Math.floor(ia),m1l:Math.floor(wa),Yb:Ka,nh:Oa,Gca:aa.$bj}),Ua),RKc:!0,kpd:!0}))}function H(ia,wa,Ca,Ha){try{return k.hm(ia).transform(wa,Ca)}catch(Oa){Ha?.setAttribute("error_reason","no_point"),Ha?.abort()}}function K(){qa=
!0}const L=r.Vd("editor.editing.collaboration.cursors");w=w||100;a=a>=4;const {connect:N,WQs:P}=pdw({EMa:q,V:L}),T=new Sdw({vdi:3E3,hUk:15E3,DLj:25E3},window),V=new eew,W=new few(V),aa=new Xdw(x),ba=new Ydw(k,W,V,function(ia,wa,Ca){const Ha=__c.vQe(g,k.ya),Oa=g.pages.toArray().indexOf(k.ya);wa=H(k.Vg,wa,Ca,void 0);!Ha&&Oa<0||P(new __c.Gah({e1l:Math.floor(wa?.x??0),m1l:Math.floor(wa?.y??0),Yb:Oa,nh:Ha,Gca:ia}))},f,e,{NOm:x},window),da=new Tdw(k,T,L),la=new Wdw({$_d:da,V:L,XQq:w,YQq:w,Bwd:x});v.whk=
async(ia,wa)=>{ia!==b?.user.id&&ia!==c.mk&&(await v.qlg?.(),k.Vg.equals(wa)&&(k.uE(wa,{animate:{from:k.Vg}}),await Edw(()=>k.ya===wa.page)),ia=__c.my(ia,c))&&(ia=da.l_e.get(wa.page)?.C$a.get(ia.mk))&&(k.uh&&k.HC(wa.page,k.lT(wa.page),{center:ia.point,animate:!0}),T.J0i(ia.uVa))};e=({va:ia})=>{if(V.position&&q.rtd.size&&k.uh&&__c.Ic.E$){var wa=V.position.page,Ca=H(k.Vg,V.position.clientX,V.position.clientY,ia);Ca&&jah({V:L,II:"show_cursor",va:ia,fn:Ha=>G(Ca.x,Ca.y,wa,Ha),RKc:!0,kpd:!0})}else ia?.abort()};
f=({clientX:ia,clientY:wa,page:Ca,va:Ha})=>{if(q.rtd.size&&__c.Ic.E$&&!qa){var Oa=H(Ca,ia,wa,Ha);Oa&&(l()?(jah({V:L,II:"hide_cursor",va:Ha,fn:Ka=>{Ka?.setAttribute("hide_reason","dragging");C(Ka)},RKc:!0,kpd:!0}),ba.UWa(aa,"closed")):(na=!1,W.WYi({clientX:ia,clientY:wa,page:Ca.ia}),jah({V:L,II:"show_cursor",va:Ha,fn:Ka=>G(Oa.x,Oa.y,Ca.ia,Ka),RKc:!0,kpd:!0})))}else qa?jah({V:L,II:"hide_cursor",va:Ha,fn:Ka=>{Ka?.setAttribute("hide_reason","scrolling_whiteboard");C(Ka)},RKc:!0,kpd:!0}):Ha?.abort()};
let ja,oa,ma;a&&({dOl:[ja,oa],Lpm:ma}=__c.blf({Bca:[e,f],QPe:w}));let na=!1,qa=!1,ua,za,va,xa,Ba,pa;udw(()=>__c.uQe(c),ia=>{ia?(ua||(ua=N()),za=sdw({EOe:ua,bnq:la,$_d:da,HZd:T,V:L,Kjr:z,SWq:B}),va=udw(()=>q.rtd,(wa,Ca)=>{Ca=Array.from(Ca).filter(Ha=>!wa.has(Ha));la.YDs(Ca)},{equals:Ucw.shallow}),x&&(Ba=wdw(ba,aa),ba.gDs(aa)),d.mode>10&&oa&&ja&&(Cdw(()=>{v.X8g.add(K);h.cSc=(wa,Ca)=>{!x||!vdw.D6h||l()||aa.H$c!=="closed"&&aa.H$c!=="ready"||ba.UWa(aa,"active");const Ha=y("MOVE","SHOW");W.WYi({clientX:wa.clientX,
clientY:wa.clientY,page:Ca.ia});p?.bab?.GIf?Ha?.abort():oa({clientX:wa.clientX,clientY:wa.clientY,page:Ca,va:Ha}).then(Oa=>{Oa.ok||Ha?.abort()})};h.bSc=()=>{const wa=y("LEAVE_PAGE","HIDE");x&&Cdw(()=>{ba.UWa(aa,"closed")});ma?.();q.rtd.size&&__c.Ic.E$?C(wa):wa?.abort()}}),xa=udw(()=>k.uh&&k.Qq,()=>{const wa=y("SCROLL","SHOW");qa=!1;ja({va:wa}).then(Ca=>{Ca.ok||wa?.abort()})}),pa=udw(()=>({x8i:p?.bab?.GIf||!1,B1:p?.bab?.B1}),(wa,Ca)=>{if(Ca.x8i!==wa.x8i){Ca=y("DRAW","CURSOR_STYLE");const Ha=wa.x8i?
2:1;Ca?.setAttribute("cursor_style",rdw(Ha));jah({V:L,II:"send_update",va:Ca,fn:Oa=>P(new __c.Jah({style:Ha}),Oa),RKc:!0,kpd:!0})}wa.x8i&&wa.B1?.position&&oa({clientX:wa.B1.position.x,clientY:wa.B1.position.y,page:wa.B1.page})},{equals:Ucw.shallow}),document.addEventListener("visibilitychange",la.hNn))):(za?.unsubscribe(),va?.(),xa?.(),pa?.(),ma?.(),Ba?.(),W.reset(),document.removeEventListener("visibilitychange",la.hNn),Cdw(()=>{h.cSc=void 0;h.bSc=void 0;v.X8g.delete(K)}))},{fireImmediately:!0});
Cdw(()=>{const ia=Zcw({Ka:["fixed","responsive"],viewport:k,T6p:Vcw(c,n),HZd:T,qxa:t,V:L}),wa=Adw({color:t.xUa(b?.user.id??c.mk),store:aa,L:ba,Bwd:x,ENb:p});h.Bg.SZc=Idw(({page:{page:Ca},Tc:Ha})=>{const [Oa,Ka]=Ldw();Kdw(()=>{Ka(Qcw(da,Ca));return()=>void Rcw(da,Ca)},[Ca]);return Oa?QZ(Udw,{scale:Ha.scale,F4c:Oa,y4o:ia,bBp:wa}):null})})}};
}).call(self, self._456c437108d2d2713799e19380be528d);}

}])
//# sourceMappingURL=sourcemaps/f613fe9f0dd25f61.js.map