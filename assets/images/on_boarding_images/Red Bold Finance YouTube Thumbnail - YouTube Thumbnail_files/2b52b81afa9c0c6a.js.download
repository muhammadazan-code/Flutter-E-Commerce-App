(self["webpackChunk_canva_web"] = self["webpackChunk_canva_web"] || []).push([[76612],{

/***/ 759555:
function(_, __, __webpack_require__) {__webpack_require__.n_x = __webpack_require__.n;const __web_req__ = __webpack_require__;__web_req__(905716);__web_req__(826890);__web_req__(764820);__web_req__(911577);__web_req__(257975);self._456c437108d2d2713799e19380be528d = self._456c437108d2d2713799e19380be528d || {};(function(__c) {var hp=__c.hp;var gp=__c.gp;var A=__c.A;var S=__c.S;var F=__c.F;
var jew=function({VBb:a,controller:b,L:c,store:d,session:e}){function f(){const p=k.shift();if(p){const q=p.resolve,r=p.reject;n(p.Nk).then(t=>q(t)).catch(t=>r(t))}}b.subscribe(p=>{const q=p.kind;switch(q){case 0:c.n8g(p.T6f,p.Rct,p.Z1b,p.EPa);break;case 2:c.Oyi();break;case 1:c.WFi();break;case 4:c.OGc.Qle&&c.CWd({action:"ADD_TIME",Pct:p.seconds});break;case 3:c.FGi(p.T6f,p.EPa);break;case 5:c.gHi(p.Z1b,p.EPa);break;case 6:c.IMn();break;default:throw new __c.u(q);}});let g=-1;const h=p=>{var q=p.type;
if(q==="INFO"||p.clientId!==e.mk)switch(q){case "INFO":q=p.status===2&&p.T6f===p.Naf&&p.Naf===300;if(!__c.uQe(e)&&!q){n({action:"RESET",fXk:300,EPa:0});break}c.mRn({v7d:p.T6f,xBd:p.xBd,Yqa:p.Naf,status:p.status,Z1b:p.Z1b,EPa:p.EPa});break;case "ADD_TIME":c.kRn(p.Ict);break;case "CREATE":c.lRn(p.xBd);break;case "PAUSE":p.version>g&&(c.nRn(),g=p.version);break;case "RESET":c.oRn(p.cIs,p.EPa,g>p.version);g=p.version;break;case "START":p.version>g&&(c.qRn(p.Naf),g=p.version);break;case "SET_MUSIC":c.pRn(p.Z1b,
p.EPa);break;default:throw new __c.u(q);}};gew(()=>d.state.state===0||__c.uQe(e),()=>{const p=new hew;__c.ODm(a,()=>a.KPj(new iew({tv:e.id,extension:e.extension,clientId:e.mk}),p)).subscribe(h)});const k=[];let l=!1;const n=async p=>{if(l)return new Promise((q,r)=>{k.push({Nk:p,resolve:q,reject:r})});l=!0;return p.action==="CREATE"?a.IUj({clientId:e.mk,tv:e.id,extension:e.extension,xBd:p.xBd}).finally(()=>{l=!1;f()}):a.bWl({...p,clientId:e.mk,tv:e.id,extension:e.extension}).finally(()=>{l=!1;f()})};
return n},iew=F(()=>({tv:S(1),extension:__c.U(2),clientId:S(3)})),kew=F(()=>({})),lew=F(()=>({type:A("A?",1,"CREATE"),xBd:gp(1),clientId:S(2),version:hp(3)})),mew=__c.I(()=>[1,2]),oew=F(()=>({type:A("A?",2,"RESET"),cIs:gp(1),status:__c.Wa(2,mew),clientId:S(3),EPa:__c.jp(4),version:hp(5)})),pew=F(()=>({type:A("A?",3,"PAUSE"),clientId:S(1),Naf:gp(2),version:hp(3)})),qew=F(()=>({type:A("A?",4,"START"),clientId:S(1),Naf:gp(2),version:hp(3)})),rew=F(()=>({type:A("A?",5,"ADD_TIME"),Ict:gp(1),status:__c.Wa(2,
mew),clientId:S(3),Naf:gp(4),version:hp(5)})),sew=F(()=>({type:A("A?",6,"INFO"),T6f:gp(1),xBd:gp(2),Naf:gp(3),status:__c.Wa(4,mew),Z1b:__c.Xa(5,__c.FRg),EPa:__c.jp(6)})),tew=F(()=>({type:A("A?",7,"SET_MUSIC"),clientId:S(1),Z1b:__c.Xa(2,__c.FRg),EPa:__c.jp(3),version:hp(4)})),uew=__c.$a(()=>({type:[1,lew,2,oew,3,pew,4,qew,5,rew,6,sew,7,tew]}),()=>({}));__c.IQa.prototype.KPj=__c.fa(360,function(a,b){return this.xua.requestChannel("live-design","connectTimer",void 0,a,b,iew.serialize,kew.serialize,uew.deserialize)});
__c.Ycd.prototype.bWl=__c.fa(358,async function(a){const b=__c.ih(__c.gh([__c.Wcd,"timer","update"])),[c,{pHp:d}]=await Promise.all([this.Da.post(b,__c.HRg.serialize(a),{Sa:"updatetimer"}),__webpack_require__.me(473221).then(()=>({pHp:__c.hdr}))]);return d.deserialize(c)});
__c.Ycd.prototype.IUj=__c.fa(357,async function(a){const b=__c.ih(__c.gh([__c.Wcd,"timer"])),[c,{s8o:d}]=await Promise.all([this.Da.post(b,__c.zRg.serialize(a),{Sa:"createtimer"}),__webpack_require__.me(473221).then(()=>({s8o:__c.ddr}))]);return d.deserialize(c)});var vew=__webpack_require__(845212).createRef;var wew=__webpack_require__(186901),xew=wew.EW,yew=wew.sH,zew=wew.XI,gew=wew.z7;var Aew=__webpack_require__(31968),Bew=Aew.Fragment,Cew=Aew.jsx,Dew=Aew.jsxs;var Eew=__webpack_require__(647370).PA;var hew=__webpack_require__(450117).B7;var Few=class{static G(a){__c.O(a,{state:yew.ref,vhk:yew.ref})}constructor(){this.state=(Few.G(this),{state:1,span:void 0});this.Qle=this.vhk=!1;this.zOl=vew()}};var Gew=class{static G(a){__c.O(a,{mRn:zew.bound,Vik:xew,kRn:zew.bound,lRn:zew.bound,nRn:zew.bound,oRn:zew.bound,qRn:zew.bound,pRn:zew.bound,NRf:zew.bound,Oyi:zew.bound,IMn:zew.bound})}mRn({v7d:a,xBd:b,Yqa:c,status:d,Z1b:e,EPa:f}){this.OGc.Qle=!0;this.I_.setTime({v7d:a,G8i:a-b,Yqa:c});this.I_.gnh(e??1,f??0);this.I_.setVolume(0);d===1?this.I_.zRb():this.I_.Wee()}get Vik(){var a=Math.ceil(this.I_.Yqa);const b=`${Math.floor(a/60)}`.padStart(2,"0");a=`${a%60}`.padStart(2,"0");return`${b}:${a}`}async n8g(a,
b,c,d){this.OGc.Qle?(b&&await this.CWd({action:"RESET",fXk:a,EPa:d}),this.CWd({action:"START"})):(this.OGc.Qle=!0,await this.CWd({action:"CREATE",xBd:a}),c!==1&&this.CWd({action:"SET_MUSIC",Z1b:c,EPa:d}))}WFi(){this.CWd({action:"PAUSE"})}FGi(a,b){this.CWd({action:"RESET",fXk:a,EPa:b})}gHi(a,b){this.OGc.Qle&&this.CWd({action:"SET_MUSIC",Z1b:a,EPa:b})}kRn(a){__c.Xbt(this.I_,a)}lRn(a){this.OGc.Qle=!0;this.I_.setTime({v7d:a,G8i:0,Yqa:a});this.I_.zRb()}nRn(){this.I_.Wee()}oRn(a,b,c){this.I_.Pgd(a,b??0,
c)}qRn(a){this.I_.setTime({Yqa:a});this.I_.ZWg&&this.document.visibilityState==="visible"||this.I_.setVolume(0);this.I_.zRb()}pRn(a,b){this.I_.gnh(a??1,b??0)}NRf(a){this.OGc.vhk=a.source===1;a.source===1?(a=this.V.wb("open_collaboration_timer",{Hb:{name:"editor.collaboration.open_collaboration_timer",performance:{NU:!0}}}),this.OGc.state={state:0,span:a},this.P.track(__c.pdt,{sessionId:this.e1,source:"editor",location:"bottom_bar_minimized",action:"timer_opened",Yqa:this.I_?.Yqa,NZb:this.I_?.isRunning})):
this.OGc.state={...this.OGc.state,state:0}}Oyi(){const a=this.V.wb("close_collaboration_timer",{Hb:{name:"editor.collaboration.close_collaboration_timer",performance:{NU:!0}}});this.OGc.state={state:1,span:a};this.P.track(__c.pdt,{sessionId:this.e1,source:"editor",location:"bottom_bar_minimized",action:"timer_minimized",Yqa:this.I_?.Yqa,NZb:this.I_?.isRunning})}IMn(){this.I_.mode!=="finished"&&this.NRf({source:2})}constructor(a,b,c,d,e,f,g){this.CWd=a;this.P=b;this.V=c;this.e1=d;this.I_=e;this.OGc=
f;this.document=g;Gew.G(this)}};__c.oTe={unr:function({Pa:a,Kc:b,he:c,Se:d,cba:e,VBb:f,P:g,Ha:h,session:k,qa:l,pg:n,hb:p,viewport:q}){h=h.Vd("editor.editing.collaboration.timer");const r=__c.Qb(),t=yew.box(!1),{D8l:v,I_:w}=__c.yct({P:g,Te:"editor",e1:r,V:h,cSm:!0,wFn:"end-bottom",qa:l});let x;const y=new Few,z=new Gew(C=>x?.(C),g,h,r,w,y,document);k!=null?x=jew({VBb:f,controller:w,L:z,store:y,session:k}):w.subscribe(C=>{C=C.kind;switch(C){case 0:case 1:case 3:case 5:case 4:break;case 2:z.Oyi();break;case 6:z.NRf({source:2});break;
default:throw new __c.u(C);}});const B=()=>y.state.state===0&&a.mode===40;gew(B,()=>{b.Timer=Eew(()=>Cew(v,{ozf:y.vhk,isOpen:B(),Uf:{va:y.state.span,s$:!0}}))});c?.install({type:"simple",key:"timer",name:__c.M("aXSMfg"),aliases:[__c.M("7tyOpw")],Icon:__c.A8r,hI:!1,execute:async()=>{d?.QK({});z.NRf({source:1});d?.close({trigger:"shortcut"})}});e?.L1a&&gew(()=>a.mode!==40?!1:B()||w.isRunning||__c.nTe(q.ya,p),()=>{const C=__c.Act({I_:w,zOl:y.zOl}),G=Eew(()=>Dew(Bew,{children:[n.qJh&&Cew(n.qJh,{}),Cew(C,
{variant:"tertiary",size:"small",isOpen:y.state.state===0,onClick:y.state.state===1?()=>z.NRf({source:1}):z.Oyi})]}));e.L1a.install("timer",{Sd:()=>!p.i_(q.ya,H=>H?.uab)&&!b.DNa&&a.mode===40,Component:G});t.set(!0)});gew(()=>a.mode===40&&w.isRunning,()=>{z.NRf({source:3})});return{CIk:t}}};
}).call(self, self._456c437108d2d2713799e19380be528d);}

}])
//# sourceMappingURL=sourcemaps/2b52b81afa9c0c6a.js.map