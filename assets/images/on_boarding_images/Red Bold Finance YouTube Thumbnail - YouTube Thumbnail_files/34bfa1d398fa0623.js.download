(self["webpackChunk_canva_web"] = self["webpackChunk_canva_web"] || []).push([[50612],{

/***/ 235735:
function(_, __, __webpack_require__) {__webpack_require__.n_x = __webpack_require__.n;const __web_req__ = __webpack_require__;__web_req__(905716);__web_req__(764820);__web_req__(741298);__web_req__(922164);__web_req__(678752);__web_req__(484391);__web_req__(720863);__web_req__(840929);__web_req__(423422);__web_req__(866147);__web_req__(698304);__web_req__(371480);__web_req__(777843);__web_req__(196333);__web_req__(613266);__web_req__(611961);__web_req__(927586);__web_req__(995621);__web_req__(718774);__web_req__(543095);__web_req__(463610);__web_req__(833738);__web_req__(205423);__web_req__(533943);__web_req__(257975);__web_req__(313934);__web_req__(558082);__web_req__(63937);__web_req__(162348);__web_req__(317135);self._456c437108d2d2713799e19380be528d = self._456c437108d2d2713799e19380be528d || {};(function(__c) {var Vc=__c.Vc;var vm=__c.vm;var Tc=__c.Tc;var ir=__c.ir;var br=__c.br;var mf=__c.mf;var bo=__c.bo;var Pb=__c.Pb;var Nu=__c.Nu;var nr=__c.nr;var Yq=__c.Yq;var $q=__c.$q;var tb=__c.tb;var O=__c.O;var Q=__c.Q;var Rs=__c.Rs;var gh=__c.gh;var ih=__c.ih;var VJh=__c.VJh;var pbg=__c.pbg;var fa=__c.fa;var D=__c.D;var E=__c.E;var np=__c.np;var U=__c.U;var S=__c.S;var F=__c.F;var Uc=__c.Uc;var kr=__c.kr;var Bn=__c.Bn;var Ma=__c.Ma;var La=__c.La;var Ck=__c.Ck;var R=__c.R;var BA=__c.BA;var Wi=__c.Wi;var J=__c.J;
var sr=__c.sr;var zf=__c.zf;var sa=__c.sa;var $r=__c.$r;var ug=__c.ug;var jf=__c.jf;var ra=__c.ra;var sb=__c.sb;var Oj=__c.Oj;var M=__c.M;var u=__c.u;var m=__c.m;
var tgw=function(a,b){if(__c.pTb(a,b)!=null)return b;for(const [c,d]of a.cta.entries())if(d.Vk===b)return c},ugw=function(a){Promise.resolve().then(()=>a.atd.forEach(b=>{a:{var c=a.B0c;var d=__c.K7f(b);for(const e of c)if(d.has(e)){c=!0;break a}c=!1}__c.I7f(b).classList.toggle("NTKo6A",c)}))},vgw=function(a,b){return a.size===b.size&&[...a].every(c=>b.has(c))},wgw=function(a){return a.SD().then(b=>__c.gIa(b)?.fA)},xgw=function(a,b){const c=a.fe.kX>=4,d=a.ALh.xg,e=a.ALh.groups,f=a.ALh.brands;if(c&&
!a.fe.Kpa)return[];const g=h=>h.id==="canva-ai"||h.id===a.uj||c&&a.fe.Kpa&&h.na===a.fe.xc.gk.brand?!0:d.has(h.id)||h.groups?.find(k=>e.has(k))||f.has(h.na);return b.filter(h=>!g(h))},ygw=function(a,b,c){for(const d of a.store.Onb)c!==d.dS.Yoi(b)&&d.dS.yXi(b,c)},zgw=function(a,b,c){const d=m(c.Sc);(a=a.store.wr(d))&&a.Rzj(()=>{const e={};e[__c.Ina(b)]=b;c.setAttributes(e)})},Agw=function(a,b){if(b){var c=tgw(a.GI,b);for(const d of a.store.Onb)d.dS.iMh(b),c&&d.dS.jMh(c)}},Bgw=function(a,b){if(b){var c=
tgw(a.GI,b);for(const d of a.store.Onb)d.dS.Qfh(b),c&&d.dS.eRi(c)}},Cgw=function(a,b){let c=a.target;for(;c&&c!==a.currentTarget;){if(b(c))return!0;c=c.parentElement}return!1},Egw=function(a){return a?.children&&a.children.length!==0?(a=Dgw(a)?.trim())?__c.pZr.test(a):!1:!1},Fgw=function(a){return UZ(()=>a.T7f,b=>{const c=a.h0h,d=c&&b.every(e=>e.id!==c.id);if(!b.length||d)a.TGf=!1,a.h0h=void 0})},Ggw=function(a,{uj:b,Lkd:c}){return a.created>c&&(!b||a.author?.id!==b)},Igw=function(a){for(const b of a){const {node:c,
H9c:d}=__c.LYr(b);if(d){if(!c.children.length)return __c.Rl({msg:"children node does not contain any children"});const e=Hgw(c);if(!c.children.every(f=>e.has(f.type)))return __c.Rl({msg:"invalid children node type"});a=Igw(c.children);if(a.state==="invalid")return a}}return __c.Ql()},Jgw=function(a){if(!a.length)return 0;let b=0;for(const c of a){const {node:d,H9c:e}=__c.LYr(c);e&&(a=Jgw(d.children),a>b&&(b=a))}return b+1},Lgw=function({FN:a,d2s:b=new Set}){const c=Kgw.filter(d=>!b.has(d.rule)).map(d=>
d.kmd);return __c.Iv(c)(a)},Mgw=function(a,b,c,d,e){b.forEach(f=>{switch(f.type){case "LINE_BREAK":c.insert("\n");break;case "LINK":Mgw(a,f.children,c,d,e);break;case "PARAGRAPH":Mgw(a,f.children,c,d,e);c.insert("\n");break;case "TEXT":var g=Object.fromEntries(Object.entries(e).filter(([,h])=>h!=null));c.insert(f.text,g);break;case "STYLED_TEXT":Mgw(a,[f.Baf],c,d,Ngw(f.styles));break;case "MENTION":g=f.na;f=d.get(f.userId);c.insert({"comment-mention":{...f,na:g}});break;case "BLOCKQUOTE":throw Error("Blockquote is not yet implemented");
case "LIST":throw Error("List is not yet implemented");default:throw new u(f);}})},Qgw=function(a,b,c,d){let e=0,f;for(;f=Ogw.exec(b);){const g=f[0].replace(Pgw,"");c.push(a.createTextNode(b.slice(e,f.index),d));c.push(new __c.K7c({target:new __c.I7c({href:g}),children:[new __c.w7c({text:g})]}));e=f.index+g.length}b.slice(e)&&c.push(a.createTextNode(b.slice(e),d))},Tgw=function(a,b){const c=m(b.ops,"Invalid Quill delta");b=[];const d=[];c.filter(f=>f.insert!=null).forEach((f,g)=>{g=g===c.length-1;
const h=typeof f.insert==="object";if(typeof f.insert==="string"&&f.insert.includes("\n"))(g&&f.insert.endsWith("\n")?f.insert.slice(0,-1):f.insert).split("\n").forEach((k,l,n)=>{k.length&&Qgw(a,k,d,f.attributes);l!==n.length-1&&d.push(new __c.H7c)});else if(h){if(g=Rgw.find(k=>k in f.insert))switch(g){case "comment-mention":g=f.insert[g];d.push(new __c.L7c({userId:g.id,na:g.na}));break;case "line-break":d.push(new __c.H7c);break;default:throw new u(g);}}else Qgw(a,f.insert,d,f.attributes)});d.length>
0&&b.push(new __c.G7c({children:d.slice()}));b=new __c.P7c({children:b});const e=Lgw({FN:b,d2s:Sgw});if(e.state==="invalid")throw Error(e.error?.msg);return b},Ngw=function(a){const b={};for(const c of a)switch(c.type){case "FONT_WEIGHT":switch(c.fontWeight){case 1:b["font-weight"]="bold";break;default:throw new u(c.fontWeight);}break;case "FONT_STYLE":switch(c.fontStyle){case 1:b["font-style"]="italic";break;default:throw new u(c.fontStyle);}break;case "DECORATION":switch(c.decoration){case 1:b["text-decoration"]=
"line-through";break;default:throw new u(c.decoration);}break;default:throw new u(c);}return b},Ugw=function(a,b,c,d){return a.getContents(b,c).map(e=>typeof e==="string"?e:d(e)).join("")},Vgw=function(a,b,c){return Ugw(a,b,c,()=>"\ufffd")},Wgw=function(a,b){const c=b.bta,d=b.quill?.getSelection();d?(a.$Ed.JVl(c,d.index,(e,f)=>Vgw(b,e,f)),a.$Ed.Pcf(c)):a.$Ed.hQb(c)},Xgw=function(a,b,c){setTimeout(()=>{const d=b.quill;var e=b.rha;if(d){b.quill?.focus();var {index:f,length:g}=e||{index:d.getLength()-
1,length:0};g>0&&d.deleteText(f,g);d.insertText(f,c);e=f+c.length;d.setSelection(e,"user");a.NMd(b,{index:e,length:0})}},0)},Ygw=function(a){return(b,c)=>a.Goi?()=>{a.uDl();return c?.async?Promise.resolve(c?.default):c?.default}:b},Zgw=function(a){a.renderer.install("SignUp",(b,c)=>VZ(WZ,{OEa:!1,className:"uHCx_Q",children:VZ("b",{children:VZ("a",{"data-anchor-id":"sign-up",children:c})})}));a.renderer.install("Login",(b,c)=>VZ(WZ,{OEa:!1,className:"uHCx_Q",children:VZ("b",{children:VZ("a",{"data-anchor-id":"log-in",
children:c})})}))},ahw=function(a,b){return a.Goi?(Zgw(a),({type:c})=>VZ($gw,{s9r:a.uDl,Q6k:a.uDl,message:c==="comment"?a.renderer.render(M("1pauSA")):a.renderer.render(M("VmuZrg"))})):b},dhw=function(a,b,c){return bhw(()=>chw(a,b,c))},ehw=function(a,b){const c=b.pd;b=b.YJb;a=m(a.ZS);const d=m(a.Sc);return b(d,__c.Gw.hTc(a.range)).map(({range:e})=>c.YLg(d,e)).flat()},fhw=function(a){const b=a.tb.row,c=a.sheet.config.layout.rows;return a.sheet.config.layout.cols.has(a.tb.column)&&c.has(b)},XZ=function(a){return ghw(a)&&
a?.type==="connectedRange"},YZ=function(a){return ghw(a)&&a?.type==="sheetItemCell"},hhw=function(a){return ghw(a)&&a?.type==="fixedPage"},ZZ=function(a){return a?.mKd==="state"},ihw=function(a){return ghw(a)&&a?.type==="element"},jhw=function(a){return ZZ(a)&&a?.type==="element"},khw=function(a){return ghw(a)&&a?.type==="sheetPageCell"},lhw=function(a){return a?.type==="sheetPageCell"},mhw=function(a){return ghw(a)&&a?.type==="sheetElementCell"},nhw=function(a){return ZZ(a)&&a?.type==="sheetElementCell"},
ohw=function(a){return a?.type==="sheetElementCell"},phw=function(a){return khw(a)||mhw(a)||YZ(a)},qhw=function(a){return!!a&&(hhw(a)||ihw(a)||khw(a)||mhw(a))},ghw=function(a){return!!a&&a.mKd==="mutable"},rhw=function(a){return a?.type==="responsive-page"||a?.type==="body"},shw=function(a){return!!a&&a.Sc!==void 0},thw=function(a){const b=a.zoom,{width:c,height:d}=__c.sg(4,a.dimensions);return Oj({top:0,left:0,width:c,height:d}).transform(__c.Fj(b)).Nb()},uhw=function(a){var b=a.element;a=(a=a.parent)&&
__c.Tj(Oj(a));b=Oj(b);b=a?b.transform(a):b;return __c.Nj(b)},vhw=function(a){const b=a.element,c=a.parent;a=a.zoom;if(!c)return Oj(b).transform(__c.Fj(a)).Nb();const d=Oj(c).transform(__c.Fj(a)),e=d.Nb();return Oj(b).scale((c.width/c.gb+c.height/c.Wb)/2*a).translate(e.left,e.top).transform(__c.Ij(d.c,__c.oj(d.rotation))).Nb()},whw=function(a){if(a=a.bva)return a=__c.Sj(0,[Oj(a)]),{top:a.t.y,right:a.r.x,width:a.width,height:a.height}},xhw=function(a){return a.filter(b=>b.position===1).map(b=>{switch(b.type){case "STICKER":return{resourceId:b.id,
YUe:"sticker",apl:"sticker_panel"};case "IMAGE":return{resourceId:b.id,YUe:"image",apl:"comment_input"};case "VIDEO":return{resourceId:b.id,YUe:"video",apl:"comment_input"};default:throw new u(b);}}).filter(sb)},yhw=function(a){return a.filter(b=>b.position===1).map(b=>{switch(b.type){case "IMAGE":return{id:b.id,thumbnailUrl:b.media.Qb.files[0]?.url??"",title:b.media.Qb.title||"",state:"idle",type:"IMAGE",media:b.media};case "VIDEO":return{id:b.id,thumbnailUrl:b.video.rB?.[0]?.url??"",title:b.video.title||
"",state:"idle",type:"VIDEO",media:b.video};case "STICKER":break;default:throw new u(b);}}).filter(sb)},zhw=async function(a){try{const b=await fetch(a);if(!b.ok)throw Error(`Failed to fetch image: ${b.status} ${b.statusText}`);return b.blob()}catch(b){throw Error(`Failed to fetch image: ${b}`);}},Ahw=function(a){return a.type==="STICKER"&&a.position===1},Bhw=function(a){return a.type==="IMAGE"&&a.position===1||a.type==="VIDEO"&&a.position===1},Chw=function(a){return new __c.y2m({position:1,id:a.id,
thumbnailUrl:a.thumbnailUrl,title:a.title})},Dhw=async function(a,b,c,d){await a.juk(b,{pxa:c.media.id,upload:c,file:d},(e,f)=>({id:c.media.id,title:d.name,thumbnailUrl:e==="idle"?c.media.Qb.files[0]?.url:f,state:e,type:"IMAGE",...(e==="idle"?{media:c.media}:{})}))},Ehw=async function(a,b,c,d){return a.juk(b,{pxa:c.video.id,upload:c,file:d},(e,f)=>({id:c.video.id,title:d.name,thumbnailUrl:e==="idle"?c.video.oR[0].firstFrame?.url:f,state:e,type:"VIDEO",...(e==="idle"?{media:c.video}:{})}))},Fhw=function(a){if(a=
a.find(Ahw))return{id:a.id,thumbnailUrl:a.thumbnailUrl,title:a.title}},$Z=function(a){switch(a.type){case "comment":return a.mg.comment.id;case "draft":return a.id;default:throw new u(a);}},Ghw=function(a){ra(a.type==="comment")},Hhw=function(a,b){var c;const d=new Set;for(;c=__c.RYr.exec(a);){const e=c[2];(c=b.get(c[1]))&&d.add({...c,na:e})}return Array.from(d)},Jhw=function(a){let b,c=!1;for(;(b=Ihw.exec(a))&&!c;)__c.Sl(b[0]).ok&&(c=!0);return c},Khw=function(a){return __c.MYr(a.children,"TEXT").length>
0},Lhw=function(a){a=__c.MYr(a.children,"LINK");return a.length>0&&a.every(b=>__c.Sl(b.target.href).ok)},Ohw=function(a,b){const c=b.get(a.Pua),d=a.Yla?b.get(a.Yla):void 0;b=a.qu?__c.QYr(a.qu,b):Hhw(a.content,b);return new Mhw({...a,gi:a.id,yz:c?Nhw(c):void 0,wA:b,UN:d})},Rhw=function(a,b,c=!1){const d=b.get(a.Pua);b=a.qu?__c.QYr(a.qu,b):Hhw(a.content,b);return a.zKe?.type===2?new Phw({...a,yz:d?Nhw(d):void 0,LIg:a.zKe.status}):new Qhw({...a,yz:d?Nhw(d):void 0,wA:b,kj:c})},Shw=function(a){return a.map(b=>
b.id)},Uhw=function(a,b){return a.reduce((c,d)=>c+Thw(d.mg,{uj:b}),0)},Nhw=function(a){return{id:a.id,displayName:a.displayName,username:a.username,Jc:a.Jc||new __c.Cp({status:3})}},Yhw=function(a,b){b=b.get(a.author);return new Vhw({...a,gi:a.id,yz:b?Nhw(b):void 0,content:Whw(a.content),kj:Xhw(a.status)})},Zhw=function(a,b){const c=new Set(b);return a.filter(d=>!c.has(d))},$hw=function(a,b,c,d){const e=b&&__c.Tj(Oj(b)),f=[];a.forEach((g,h)=>{if(g.Qj.length>0||c&&c(g)||d&&d(g)){var k=Oj(g);const l=
e?k.transform(e):k;k=f.push;const {top:n,left:p,width:q}=__c.Nj(l).Nb();k.call(f,{element:g,parent:b,key:{top:n,left:p,right:p+q,irb:h}})}});return f},biw=function(a){return(b,c)=>aiw(b.key,c.key,a)},aiw=function(a,b,c){const d=a.top-b.top;if(d!==0)return d;if(c){if(c=b.right-a.right,c!==0)return c}else if(c=a.left-b.left,c!==0)return c;a=a.yKi!=null?[a.yKi,a.irb]:[a.irb,Number.POSITIVE_INFINITY];b=b.yKi!=null?[b.yKi,b.irb]:[b.irb,Number.POSITIVE_INFINITY];c=b[0]-a[0];if(c!==0)return c;b=b[1]-a[1];
return b!==0?b:0},ciw=function(a,b){return b?.children?__c.MYr(b.children,"MENTION").some(c=>c.userId==="canva-ai"):a.includes("[canva-ai:canva-ai]")},diw=async function(a,b,c){a=a.I.Uaa;await a.EX(b);c?.o4b||await a.MUi(b);c?.$Eb||a.W4e(b)},fiw=async function(a,b,c){const d=a.I.Uaa,e=a.I.DC;await d.EX(b);const f=$Z(b);var g;if(!(g=c?.o4b)){{const h=a.I.Uaa;g=a.I.Fu;g=a.I.DC.lya.has(f)?(a=eiw(h))?g.uhi(a).has(f):!1:!1}}g||await d.MUi(b);c?.$Eb?e&&Agw(e,f):d.W4e(b)},hiw=function(a){var b=a.I.sR;const c=
a.I.Uaa;if(a=b.selection)return b.Sib(a)?a=b.reference:((b=b.reference)||(b=(b=__c.DNr(c.I.Za))?new giw({ZS:b,Xe:a.Rz}):void 0),a=b),a},iiw=function(a){return jf({resource_id:a.resourceId,media_category:a.YUe,resource_source:a.apl})},oiw=function({T9:a,vQh:b,ZOb:c,KRs:d}){const e=[];a==="notch"?e.push(jiw({mainAxis:b,crossAxis:-kiw}),liw({flipAlignment:!1,boundary:c??"clippingAncestors",padding:5}),miw({boundary:c??"clippingAncestors",limiter:niw({mainAxis:!0})})):(a==="avatar_dynamic"||a==="avatar_static")&&
e.push(jiw(({rects:{reference:f}})=>({mainAxis:b,crossAxis:f.height<kiw?-kiw:0})));a==="avatar_dynamic"&&(e.push(liw({flipAlignment:!1,boundary:c??"clippingAncestors",padding:5})),c&&e.push(miw({boundary:c,padding:5,crossAxis:!0})));e.push({name:"arrowPlacement",fn:({placement:f})=>{d(f.startsWith("left")?"right":"left");return{}}});return e},piw=function({sRh:a,ZOb:b,T9:c}){const d=[];c==="notch"?d.push(liw({boundary:b??"clippingAncestors",padding:a})):d.push(liw({boundary:"clippingAncestors",padding:a}));
return d},uiw=function({sR:a,Uaa:b,Fu:c,etd:d,o1:e,QS:f,ddb:g,XPb:h,viewport:k,la:l,hb:n,pd:p,Gj:q,sD:r,SHk:t,Mgb:v,uj:w,fj:x,dnb:y,fK:z}){const B=new qiw({sR:a,Fu:c,QS:f,ddb:g,uj:w}),C=new riw({store:B,Uaa:b,Fu:c,o1:e,QS:f,XPb:h,la:l,viewport:k});C.fIl();const G=T=>T.type==="fixed"?n.kl(T):void 0,H=a_(T=>{const V=b_(()=>T.Tc.scale);return B.nph&&!v?.isActive&&d?.o1c?VZ(siw,{fkm:B.l2m(T.page).Td,NQb:a.reference,K6d:B.K6d,zoom:V,fj:x,fmn:!ug(n.kl(T.page.page)),sD:r.get(),wz:void 0,layout:l.layout,
dnb:y,fK:z,aXe:C.aXe,Fec:C.Fec,pba:G}):null}),K=a_(T=>B.nph&&!v?.isActive&&d?.o1c?VZ(tiw,{page:T.page.page,EHn:B.l2m(T.page).DHn,Fzc:void 0,zoom:T.Tc.scale,fj:x,pba:G}):null),L=(T,V)=>{T=T.ew(V);T=new __c.Zz(T,p,k);return T.gd===0?null:T},N=a_(({page:T})=>{const V=a.reference;return VZ(c_,{children:B.m2m(T).map(({sheet:W,Td:aa})=>{const ba=L(T,W);if(!ba)return null;const da=b_(()=>ba.gd);return VZ(siw,{fkm:aa,NQb:V,K6d:B.K6d,zoom:da,fj:x,fmn:!1,sD:r.get(),wz:ba,layout:l.layout,dnb:y,fK:z,aXe:C.aXe,
Fec:C.Fec,pba:G},W.id)})})}),P=a_(({page:T})=>VZ(c_,{children:B.m2m(T).map(({sheet:V,DHn:W})=>{const aa=L(T,V);return aa?VZ(tiw,{page:T.type==="body"?void 0:T.page,EHn:W,Fzc:aa,zoom:aa.gd,fj:x,pba:G},V.id):null})}));q.jc(T=>T>10,(T,V)=>{T=T.Bg;T.SCc=V?K:void 0;T.RCc=V?H:void 0});q.jc(T=>T>10&&t.get(),(T,V)=>{T=T.Bn.FL;T.SCc=V?P:void 0;T.RCc=V?N:void 0})},yiw=function({Uaa:a,Fu:b,QS:c,ddb:d,XPb:e,la:f,Gj:g,sD:h,SHk:k,fj:l,dnb:n,fK:p}){const q=new viw(f,d,b,c),r=new wiw(b,c,a);g.jc(v=>v>10&&k.get(),
(v,w)=>{v.Bn.FL.sFh=w?a_(({page:x})=>{x=q.W3q(x);return VZ(xiw,{Qsc:q.Qsc,PVi:q.PVi,sD:h.get(),Qof:x,dnb:n,fK:p,fj:l,Bj:q.Bj,P5g:r.P5g})}):void 0});const t=v=>e.onMouseMove(v,c.Xta?$Z(c.Xta):void 0);g.jc(()=>f.layout===1&&k.get()&&(q.Qof.length>0||b.j9g.size>0),(v,w)=>{w||e.ayk({jvh:[],action:"leave",Ohd:c.Xta?$Z(c.Xta):void 0});v.Bn.onMouseMove=w?t:void 0})},ziw=function({sR:a,Uaa:b,Fu:c,etd:d,o1:e,QS:f,ddb:g,XPb:h,viewport:k,la:l,hb:n,pd:p,Pa:q,Gj:r,xqg:t,Mgb:v,uj:w,fj:x,fK:y}){const z=a_(()=>{if(!(l.layout===
1&&q.mode>10)||v?.isActive)return null;var G=t.Lym;return(G=t.IQj||G)&&G.R5.get()?VZ(G.Component,{}):null}),B=b_(()=>q.sD),C=b_(()=>!k.uh&&k.MF);yiw({Uaa:b,Fu:c,QS:f,ddb:g,la:l,XPb:h,Gj:r,sD:B,SHk:C,fj:x,dnb:z,fK:y});uiw({sR:a,Uaa:b,Fu:c,etd:d,o1:e,QS:f,ddb:g,XPb:h,viewport:k,la:l,hb:n,pd:p,Gj:r,sD:B,SHk:C,Mgb:v,uj:w,fj:x,dnb:z,fK:y})},Aiw=function(a){const b=a.I.sR,c=a.I.viewport;a.I.Za.SYe(d=>{const e=b.selection;e&&!b.Sib(e)&&a.Wd.$Hc?.Hbc(f=>a.Yza(f),()=>a.Rnc(),d)});a.Wd.BRe||UZ(()=>({reference:b.reference,
o8a:c.uh?c.Vg:void 0}),(d,e)=>{const f=b.selection,g=a.Wd.$Hc;g&&(d.reference===e.reference||!b.Sib(f)&&f?d.o8a&&d.o8a.page!==e.o8a?.page&&g.$Me(d.o8a.page):g.Hbc(h=>a.Yza(h),()=>a.Rnc()))},{equals:d_.structural})},Biw=function(){return a=>!a.mg.comment.kj},Ciw=function(a){return b=>Thw(b.mg,{uj:a})>0},Diw=function(a){return b=>!b.mg.comment.kj&&a.has(b.mg.comment.gi)},Eiw=function(){return a=>a.mg.Xpd>0},Fiw=function(a){return b=>!!a&&!b.mg.comment.kj&&(b.mg.comment.author?.id===a||b.mg.Aah.has(a))},
Giw=function(){return a=>!!a.mg.comment.kj},Hiw=function(){return a=>!a.mg.comment.kj&&e_(a.mg.comment)},Iiw=function(a){return b=>a.NIo.has(b)&&!b.mg.comment.kj},Jiw=function(a){return a.type==="comment"},Liw=function(){return(a,b)=>Jiw(a)&&Jiw(b)?(b.mg.Lta===0?b.mg.comment.updated:b.mg.kF[b.mg.kF.length-1].updated)-(a.mg.Lta===0?a.mg.comment.updated:a.mg.kF[a.mg.kF.length-1].updated):Kiw(a,b)},Miw=function(a,b){return Jiw(a)&&Jiw(b)?a.mg.comment.created-b.mg.comment.created:Kiw(a,b)},Oiw=function(a,
b){if(qhw(b.ref)||ZZ(b.ref))return b.ref;const c=Niw(b,a.DC),d=b.ref?.nh||c.pos?.nh;a=d?a.pages.find(e=>e.id===d):void 0;return d&&a?.type==="responsive"?{...c,nh:d,page:a}:void 0},Qiw=function(a,b){return Piw(b)?b.page:ZZ(b)?(a=a.pages.find(c=>c.id===b.nh),m(a)):m(b.page)},Uiw=function(a,{a:b,iLp:c,b:d,rVp:e}){if(c.equals(e))return Miw(b,d);b=c?.type==="fixedPage";d=e?.type==="fixedPage";b=b&&!d?-1:!b&&d?1:void 0;if(b!==void 0)return b;a:{d=a.getTarget(c);const f=a.getTarget(e);if(d&&f){if(Riw(d,
f)){b=-1;break a}if(Riw(f,d)){b=1;break a}if(d.parent!==void 0&&(d.type==="mutable"&&f.type==="mutable"?d.parent===f.parent:d.type==="state"&&f.type==="state"&&d.parent&&f.parent&&$r.domain.wm(d.parent,f.parent))){b=Siw(a,c,e);if(b===0)b:{sa(d.parent!==void 0);if(d.parent.type!=="controlled"){if(d.type==="mutable"&&f.type==="mutable"){b=m(d.parent).pb.dj(d.element,f.element);break b}if(d.type==="state"&&f.type==="state"){b=Tiw(d.element,f.element,[...m(d.parent).pb].filter(sb));break b}throw Error("Mismatched ref types");
}b=void 0}break a}}b=void 0}if(b!==void 0)return b;a=Siw(a,c,e);if(a!==0)c=a;else if(ZZ(c)&&ZZ(e)){a=jhw(c)||nhw(c)?c.element:void 0;e=jhw(e)||nhw(e)?e.element:void 0;if(!a||!e)throw Error("Targets must have element");c=Tiw(e,a,[...c.page.elements].filter(sb))}else{if(ZZ(c)||ZZ(e))throw Error("Mismatched ref types");a=ihw(c)||mhw(c)?c.element:void 0;e=ihw(e)||mhw(e)?e.element:void 0;if(!a||!e)throw Error("Targets must have element");c=m(c.page);if(c?.type!=="fixed")throw Error("Page must be fixed");
c=c?.elements.dj(e,a)}return c},Wiw=function(a,{a:b,gLp:c,b:d,qVp:e}){const f=c.range,g=c.pos,h=c.Sc,k=c.tA;c=c.sheet;const l=e.range,n=e.pos,p=e.Sc,q=e.tA;e=e.sheet;if(k&&q&&c&&c===e)return a=k.row===q.row?Viw(c.config.layout.cols,k.column,q.column):Viw(c.config.layout.rows,k.row,q.row),a===0?Miw(b,d):a;if(h||p){if(!h)return 1;if(!p)return-1}else return Miw(b,d);if(f||l){if(!f)return 1;if(!l)return-1}else return Miw(b,d);if(h===p)return a=a.Za.$oa(h,f,l).qwm,a===0?Miw(b,d):a;if(g||n){if(!g)return 1;
if(!n)return-1}else return Miw(b,d);return g.hyg-n.hyg},Siw=function(a,b,c){b=Xiw(b);c=Xiw(c);if(!b||!c)throw Error("Targets must have a position");const d=b.top-c.top;return d!==0?d:(b.left-c.left)*(a.fj?-1:1)},Riw=function(a,b){return a.qad?a.type==="mutable"&&b.type==="mutable"&&a.element===b.parent||a.type==="state"&&b.type==="state"&&b.parent&&$r.domain.wm(a.element,b.parent)?!0:!1:!1},Xiw=function(a){if(a?.type==="element")return a.PEe.Nb();if(lhw(a)||ohw(a))return a.pPa(1)},Piw=function(a){return a.page?.type===
"responsive"},Tiw=function(a,b,c){var d=[...c];c=d.findIndex(e=>e&&$r.domain.wm(e,a));d=d.findIndex(e=>e&&$r.domain.wm(e,b));if(c===-1)throw Error("First item is not in the container");if(d===-1)throw Error("Second item is not in the container");return c<d?-1:c>d?1:0},Yiw=function(a,b){const c=new Map;for(const d of b)(b=a.get(d))&&c.set(d,b);return c},hjw=function(a){var b=a.t8,c=a.Fu;const d=a.TGc,e=a.DC,f=a.Za,g=a.viewport,h=a.document;var k=a.N;const l=a.uj,n=a.fj;var p=a.tFq;a=a.Ka==="responsive";
p=!a&&p;const q=new Ziw({ZZd:p?"current_page":"all",Vrf:"visual_order",Vai:p?$iw:void 0}),r=new ajw(q,k);k=new bjw(q,r);cjw({a8p:q,$7p:r,t8:b,Fu:c,document:h,uj:l});a?(c=new djw(e,f),k.cGf("visual_order",{label:M("NAGWjw"),method:c.Qrk()})):(b=new ejw(h,e,f,n),k.cGf("visual_order",{label:M("N8cRGA"),method:b.Qrk()}),k.nOc("current_page",{label:M("gAyKcQ"),method:Iiw(new fjw({viewport:g,Fu:c}))}));const t=a_(()=>q.dwm?VZ(gjw,{label:q.Gfb.config.label,iUa:q.AHe,h9e:q.DHe,QPa:q.QPa,Nhc:r.Nhc,onClick:r.C6k}):
null);f_(()=>{d.QEh=t});return{o1:k}},cjw=function({a8p:a,$7p:b,t8:c,Fu:d,document:e,uj:f}){b.nOc("all",{label:M("XXuzTg"),method:Biw()});b.nOc("unread",{label:M("SCg/Xw"),method:Ciw(f)});b.nOc("resolved",{label:M("RCrI6Q"),method:Giw()});b.nOc("your_comments",{label:M("20hxXg"),method:Fiw(f)});ijw&&b.nOc("canva_ai_comments",{label:M("XKxsTA"),method:Eiw()});const g=Hiw(),h={label:M("nkcALQ"),method:g};UZ(()=>e.Ka==="responsive"||e.pages.some(l=>l.type==="responsive")||d.hqd.some(g),l=>{l?b.nOc("suggestions",
h):(a.Gfb.type==="suggestions"&&b.e3e(),b.mQo("suggestions"))},{fireImmediately:!0});const k=b_(()=>Diw(a.jyi));b.nOc("for_you",{label:M("Y4vp0A"),method:l=>k.get()(l)});if(f){const l=async()=>{try{const n=await c.XTq(f);b.kTo(n)}catch(n){}};l();UZ(()=>{const n=a.Gfb.type,p=[...d.EEc.values()].flatMap(q=>[q.mg.comment,...q.mg.kF]);return{Gfb:n,comments:p}},({Gfb:n})=>{n==="for_you"&&l()});b.cGf("recent",{label:M("8DlXPA"),method:Liw()})}},jjw=function(a){const b=new __c.wC;b.install("Clickable",(c,
d)=>VZ(__c.Lt,{variant:"subtle",onClick:a,children:d}));return b},kjw=function({dG:a,MNd:b}){switch(a){case "all":return b===30?M("Ko8uLg"):M("GeZYjg");case "current_page":return M("9jBqVA");case "for_you":return M("W20qiw");case "canva_ai_comments":return M("dq8aIw");case "your_comments":return M("KxHB/Q");case "unread":return M("XGlALw");case "suggestions":return M("jzQHAA");case "resolved":return M("NzRYrA");default:throw new u(a);}},ljw=function({dG:a,B_o:b,Oyp:c}){switch(a){case "all":case "current_page":return b?
VZ(b,{}):null;case "for_you":case "canva_ai_comments":case "your_comments":case "unread":case "suggestions":case "resolved":return VZ(c,{});default:throw new u(a);}},njw=function(a,b,c,d,e){const f=new mjw;f.ctt(a,m(b.id));a=m(f.Wns);if(!d||!c)return{page:a};f.ett(a.page,a.container,c);c=m(f.GBq);e=e?m(f.See):void 0;return{page:a,element:c,parent:e}},ojw=function(a,b,c){const d=a.page;if(d&&(b=b.pages.toArray().indexOf(d)+1,!(b<=0))){if(rhw(a.Xe))return new __c.W7c({Bd:b});if(d?.type==="fixed"){c=
!ug(c.kl(d));if(khw(a)||mhw(a)||!c&&ihw(a))if(a=a.pPa(1))return new __c.X7c({Rrs:a.left+a.width/2,Srs:a.top+a.height/2,Bd:b});if(c)return new __c.Y7c({Bd:b})}}},pjw=function(a,b){return ZZ(a)?njw(b,a.page).page.Xe:a.Xe},eiw=function(a){var b=a.I.viewport.u3;const c=a.I.viewport.h8;a=a.I.viewport.scrollingContainer;if(b&&c&&a)return b=a.scrollTop-(c.t.y-b.t.y),{top:b,bottom:b+a.clientHeight}},qjw=function(a,b){a=a.I.store;if(b?.target!==a.reference?.target)return!0;if(!a.Sib(a.selection))return!1;
b=a.selection.inner;if(!b)return!1;switch(b.type){case "sheet":return b.cells.size>1;case "table":case "grid":return!!b.cells;case "shape":return!!b.paths;case "sheet-cell-media":case "layout":case "layout-cell":case "group":case "background":case "pages":return!1;default:throw new u(b);}},rjw=function(a,b){const c=a.I.Za;a=a.I.vg;if(!c)return!1;if(XZ(b)&&b.Sc)if(b.ZS.oB){if(!c.fPc(b.ZS.oB))return c.Nw(b.Sc,b.ZS.oB),!0}else{const d=c.state;if(d?.type!=="RANGE"||d.Sc!==b.Sc||!c.$oa(d.Sc,d.range,b.ZS.range).equals)return c.qv(b.Sc,
b.ZS.range),!0}return YZ(b)&&b.container?(__c.xv(a,b.container,b.tb,b.tb,[b.tb]),!0):!1},ujw=async function(a,b){const c=a.I.document,d=a.I.viewport,e=a.I.hb,f=a.I.Gj;if(sjw(c)){b=pjw(b.ref,c);var g=(b.container?.type==="concatenated-fixed-page"?b.container:b).Rja(c.pages);g&&g!==d.ya&&a.Tja&&(a.Gub(!0),a=a.Tja.xb(g),d.uE(a),await tjw(()=>d.uh&&d.ya.id===g?.id),g.type==="fixed"&&ug(e.kl(g))&&d.DU&&f_(()=>{f.fq="thumbnail"}))}},vjw=async function(a,b){var c=a.I.document;const d=a.I.viewport,e=a.I.DC;
if(a.Tja&&sjw(c)){var f=$Z(b),g=b.ref?.nh||e.jUb.get(f)?.nh;if(b=b.ref?.OOa||c.pages.toArray().find(h=>h.id===g))c=a.Tja.xb(b),b!==d.ya?d.uE(c):d.uh&&!d.nO&&(a.I.Gj.fq="thumbnail",d.uE(c)),await tjw(()=>!d.uh&&d.MF&&d.ya.id===g)}},sjw=function(a){return a.Ka==="fixed"},wjw=function(a){return!!a.ref&&(qhw(a.ref)||ZZ(a.ref))},xjw=function(a,b,c,d){const e=c.type==="group"||c.type==="sheet";if(c.Qj.length===0&&!e)return[];switch(c.type){case "group":return[...c.pb.flatMap(f=>xjw(a,b,f,c)),{ref:new yjw({target:c,
parent:d,page:b}),Qj:c.Qj}];case "sheet":return zjw(c.config,({tb:f})=>new Ajw({tb:f,element:c,sheet:c.config,page:b,parent:d}));case "chart":case "line":case "rect":case "shape":case "text":case "embed":case "grid":case "layout":case "table":case "controlled":return[{ref:new yjw({target:c,parent:d,page:b}),Qj:c.Qj}];default:throw new u(c);}},zjw=function(a,b){const c=[];a.St.cells.forEach((d,e)=>{d=d.Qj;d.length!==0&&c.push({ref:b({tb:{column:e.left,row:e.top}}),Qj:d})});return c},Cjw=function(a,
b){const c=b.page;return c.sheet?a.Kgi(c.sheet,({tb:d,sheet:e})=>new Bjw({Xe:b,tb:d,sheet:e})):[]},Ejw=function(a,b){return b.page.elements.filter(c=>c.type==="sheet").flatMap(c=>a.Kgi(c.config,({tb:d,sheet:e})=>new Djw({Xe:b,tb:d,sheet:e,element:c})))},Gjw=function(a,b){return a.Vlt({page:b.page,fj:a.I.fj,YNg:c=>!!a.S8c(c).length,Jvk:c=>!!a.qgi(c).length}).B3f.flatMap(({element:c,parent:d})=>{const e=a.z4d(c);return e.length===0?[]:[{ref:new Fjw({Xe:b,element:c,parent:d}),comments:e}]})},Ijw=function(a,
b){const c=a.z4d(b.page);return[...(c.length===0?[]:[{ref:new Hjw({Xe:b}),comments:c}]),...Cjw(a,b),...Ejw(a,b),...Gjw(a,b)]},Jjw=function(a,b,c,d){const e=dhw(b,c.row,c.column);a=a.z4d(e);if(a.length!==0)return{ref:d({tb:c,sheet:b}),comments:a}},Kjw=function(a){const b=new Map;for(const {ref:c,comments:d}of a)b.set(c,b.has(c)?[...m(b.get(c)),...d]:[...d]);return Array.from(b.entries(),([c,d])=>({ref:c,comments:d}))},Ljw=function(a){const b=__c.Pa(c=>b_(()=>a(c)));return c=>b(c).get()},Mjw=function(a,
b){switch(b.type){case "fixed":case "responsive":return a.YNl.get(b.id)||[];case "concatenated-fixed":return b.pages.flatMap(c=>a.YNl.get(c.id)||[]);default:throw new u(b);}},Njw=function(a,b){return[...a.tmc.values()].filter(c=>c.ref.nh===b.id)},Ojw=function(a,b){return[...b.lya].map(c=>a.Qmc.get(c)).filter(c=>!!c&&!c.mg.comment.kj)},Qjw=function(a,b){return[...a.Qmc.values()].filter(c=>!a.I.KHa.U1b.has($Z(c))&&!c.mg.comment.kj&&c.ref&&YZ(c.ref)&&Pjw(c.ref,b))},Sjw=function(a,b){if(a.length>0){const {top:c,
inline:d}=Rjw(a[0].bounds,b);a=a.reduce((e,{bounds:f})=>e+f.width,0);return{top:c,inline:d,width:a}}},Rjw=function(a,b){a=a.Nb();return{top:a.top,inline:b?a.width-a.left:a.left}},Tjw=function(a){const b=a.selection,c=a.wIk,d=a.fPc;return a.IOj.reduce((e,{store:f,ref:g})=>{if(XZ(g))switch(b.type){case 0:const h=b.container.text,k=b.range;g.Sc===h&&c(h,k,g.ZS.range)&&e.push(f);break;case 1:g.ZS.oB&&d(g.ZS.oB)&&e.push(f);break;case 2:case 3:case 4:case 5:break;default:throw new u(b);}else YZ(g)&&Pjw(g,
b)&&e.push(f);return e},[])},Pjw=function(a,b){if(b.type!==4||b.cells.size!==1)return!1;var c=[...b.cells][0];b=b.container.sheet;if(a.sheet!==b)return!1;c=b.config.layout.cells.get(c.row,c.column)?.span||{$b:c.row,ec:c.column};a=b.config.layout.cells.get(a.tb.row,a.tb.column)?.span||{$b:a.tb.row,ec:a.tb.column};return c.$b===a.$b&&c.ec===a.ec},Ujw=function(a,b){a=a.Nb();return a.top>=b.top&&a.top+a.height<=b.bottom},Vjw=function(a){switch(a.Ka){case "fixed":const b=zf(a);return a.pages.filter(d=>
d.type==="responsive").map(d=>b.xb(d));case "responsive":const c=__c.yf(a);return a.Nl.map(d=>__c.vf(c,d));default:throw new u(a);}},Wjw=function(a,b){const c=b.mg.kF;a.VMd(b.mg.comment,!0);c.forEach(d=>a.VMd(d,!0))},Xjw=function(a,b){b.forEach(c=>{const d=c.mg.comment;c=c.mg.kF;d.hJ!==void 0&&(a.VMd(d,!d.lNb),c.forEach(e=>a.VMd(e,!e.lNb)))})},Yjw=function(a){UZ(()=>a.I.store.e_j,b=>{b&&a.C0f(!0)},{fireImmediately:!0})},Zjw=function({etd:a,VGc:b,ee:c,ged:d,sof:e}){Yjw(b);const f=g=>{const h=g.oa;
g=g_(()=>{b.C0f(!a.o1c,"file_menu");a.o1c?d():e();h?.()},[h]);return VZ(__c.St,{onClick:g,end:a.o1c?null:VZ(sr,{size:"medium"}),children:M("VL4qvw")})};c.wv(g=>g>10&&!a.e_j,({vM:g},h)=>{g&&(g.mlj=h?{Button:f}:void 0)})},akw=function({blotName:a,$ic:b,b8b:c,c8b:d}){var e;return e=class extends $jw{static create(f){return $jw.create.call(this,f)}static formats(){}optimize(f){const g=this.offset(),h=this.length(),k=super.formats();this.unwrap();Object.entries(k).forEach(l=>this.parent.formatAt(g,h,l[0],
l[1]));this.parent.formatAt(g,h,c,d);super.optimize(f)}},e.blotName=a,e.tagName=b,e},ckw=function({key:a,shiftKey:b=!1,J4:c,fA:d,handler:e,disabled:f=!1}){return{[bkw({key:a,shiftKey:b,sxn:"cmd",J4:c,fA:d})]:{key:a,shiftKey:b,shortKey:!0,handler:()=>e?.(c,d),disabled:f},[bkw({key:a,shiftKey:b,sxn:"ctrl",J4:c,fA:d})]:{key:a,shiftKey:b,ctrlKey:!0,handler:()=>e?.(c,d),disabled:f}}},bkw=function({key:a,shiftKey:b=!1,sxn:c,J4:d,fA:e,isDisabled:f=!1}){return`${c}${b?"+ shift":""}${"+ "+a} - ${f?`disable ${d}`:
d}${e?`: ${e}`:""}`},ekw=function(a){if(a!==void 0)return a.type===0?`calc(${dkw}rem * ${a.value})`:a.value},fkw=function(a){UZ(()=>a.I.store.Xta,(b,c)=>{b&&(a.Exf($Z(b)),a.I.yVb.Exf(b));c&&c!==b&&(a.KNj($Z(c)),Xjw(a.I.yVb.JWh,[c]))})},hkw=function(a,b){switch(b.type){case "fixed":case "responsive":return[{threads:gkw(a,b),r_e:0}];case "concatenated-fixed":const c=[];for(const e of b.pages)if(b=a.qpk(e)){const f=gkw(a,e);c.push({box:b,threads:f})}const d=c[0].box.t.y;return c.map(e=>({threads:e.threads,
r_e:e.box.t.y-d}));default:throw new u(b);}},ikw=function(a,b){var c=a.I.document;a=a.I.Fu;if(c.Ka!=="responsive")for(const d of c.pages){c=Mjw(a,d);const e=Njw(a,d);if([...c,...e].some(f=>$Z(f)===b))return d.id}},jkw=function(a,b){return a.$Vj.flatMap(c=>c.threads).some(c=>$Z(c)===b)},gkw=function(a,b){const c=Mjw(a.I.Fu,b);b=Njw(a.I.Fu,b);return[...[...c].filter(kkw),...b].sort(a.I.dHl)},mkw=function({Kkb:a}){const [b,c]=h_(!1),d=i_(0),e=i_(null),f=g_(()=>{e.current&&(e.current(),e.current=null,
c(!1))},[]),g=g_(h=>{f();const k=h.element,l=h.to,n=h.uQa;var p=d.current;const q=Math.abs(l-p);p===l?(h.yt?.(p),h.onComplete?.(l)):a||q<1?(n(l,k),d.current=l,h.yt?.(p),h.onComplete?.(l)):(c(!0),h.yt?.(p),p=lkw({from:p,to:l,velocity:h.type==="velocity"?h.velocity:q/h.duration,uQa:r=>{n(r,k);d.current=r},onComplete:()=>{e.current=null;d.current=l;c(!1);h.onComplete?.(l)}}),e.current=p)},[a,f]);return{isTransitioning:b,animate:g,c1p:f}},lkw=function({from:a,to:b,velocity:c,uQa:d,onComplete:e}){if(c<=
0||a===b)return d(b),e(),()=>{};let f=!1,g=null,h=null;const k=Math.abs(b-a)/c,l=n=>{f||(g==null&&(g=n),n=Math.min(1,(n-g)/k),d(a+(b-a)*(n<.5?2*n*n:1-Math.pow(-2*n+2,2)/2)),n<1?h=requestAnimationFrame(l):e())};h=requestAnimationFrame(l);return()=>{f=!0;h!=null&&(cancelAnimationFrame(h),h=null)}},nkw=function(a){let b;const c=()=>{b!==void 0&&(clearTimeout(b),b=void 0)};return{execute:(...d)=>{c();b=setTimeout(()=>{a(...d);b=void 0},50)},cancel:c}},pkw=function(a){const b=a.GUg,c=a.ZDk;var d=a.Kkb;
const e=a.fj,f=a.h5c,g=a.c$r,h=a.Xcs,k=i_(null),[l,n]=h_(!1),[p,q]=h_(!1),r=i_(!1),t=i_(!1);j_(()=>{const B=setTimeout(()=>q(!0),300);return()=>clearTimeout(B)},[]);const {animate:v,c1p:w,isTransitioning:x}=mkw({Kkb:d||!p}),y=g_(()=>{if(k.current){var B=okw(k.current,{h5c:f,ZDk:c,GUg:b,iw:l,fj:e});v({element:k.current,to:B,uQa:(C,G)=>{G.style.transform=`translateX(${C}px)`},yt:C=>{C!==0||B===0||r.current||(r.current=!0,t.current=!1,g())},onComplete:C=>{C!==0||t.current||(t.current=!0,r.current=!1,
h())},type:"duration",duration:300})}},[v,g,h,f,c,b,l,e]);j_(()=>{x||y()},[y,x]);const z=k_(()=>nkw(()=>{n(!1)}),[]);a=g_(()=>{z.cancel();w();n(!0)},[z,w]);d=g_(()=>{z.cancel();z.execute()},[z]);return{ref:k,onMouseEnter:a,onMouseLeave:d}},okw=function(a,b){var c=b.ZDk;const d=b.iw,e=b.fj,f=b.h5c;if(!b.GUg&&!d)return c&&(b=qkw*2,c=rkw(a),a=window.innerWidth,(e?c.right-0:a-c.left)>=b)?(e?-1:1)*qkw:0;if(f)return 0;a=rkw(a);b=window.innerWidth;return e?a.left<0?0-a.left:0:a.right>b?b-a.right:0},rkw=
function(a){const b=a.style.transform;a.style.transform="";const {width:c,x:d}=a.getBoundingClientRect(),e={left:d,right:d+c,width:c};a.style.transform=b;return e},skw=function(a,b){return UZ(()=>a.cqd,b,{equals:d_.structural,scheduler:requestAnimationFrame})},tkw=function(a,b){return UZ(()=>a.Hxf.entries(),b,{equals:d_.structural,scheduler:requestAnimationFrame})},ukw=function(a,b,c){return UZ(()=>a.flatMap(({threads:d,r_e:e})=>d.map(f=>b(f,e))),c,{equals:d_.structural,scheduler:requestAnimationFrame})},
vkw=function(a){window.addEventListener("resize",a);return()=>{window.removeEventListener("resize",a)}},wkw=function(){const a=i_(new Map),b=g_(c=>a.current.get(c)??{},[]);return{UJg:g_((c,d)=>e=>{const f=b(d);f[c]!==e&&(e?a.current.set(d,{...f,[c]:e}):(e=Object.keys(f),e.length>1||e.length===1&&!f[c]?a.current.set(d,{...f,[c]:void 0}):a.current.delete(d)))},[b]),bNm:a}},ykw=function(a,b){var c=b.pd;const d=b.viewport;if(b=xkw({ref:a,pd:c,Za:b.Za})?.[0]?.bounds.Nb())return b.top;if(YZ(a)&&d.MF)return c=
c.DF(a.sheet)?.Nb().top??0,a=a.pPa(1)?.top??0,c+a;if((ihw(a)||mhw(a)||khw(a))&&d.uh&&(c=d.lT(d.ya),a=a.pPa(c??1)))return a.top},Akw=function(a){const b=a.disabled,c=a.yi,d=a.rl,e=a.onClick,f=a.zh,g=a.Hga,h=a.hWe;a=g_(()=>VZ(zkw,{Hga:g,Hsb:h}),[g,h]);return c?VZ(c,{icon:a,disabled:b,onClick:e,zh:f??"icon",className:"Nkf_sg",ariaLabel:M("688VSA"),tooltip:M("688VSA"),children:M("688VSA")}):d?VZ(d,{Icon:a,label:M("688VSA"),onClick:e,disabled:b,children:M("688VSA")}):null},Bkw=function({qa:a,F0k:b}){return a_(c=>
{const {Hga:d,hWe:e,navigation:f,onClick:g,...h}=c;c=g_(()=>{b(f);g&&g()},[f,g]);return VZ(Akw,{...h,Hga:d,hWe:e,disabled:a.status===2&&d===0,onClick:c})})},Ckw=function(a){return!!a&&a.type!=="elements"&&a.inner?.type==="sheet"},Dkw=function(a,b){if(!b)return!1;const c=b.pages,d=b.Fp;return b.type==="pages"&&c.length===1&&!!d&&!ug(a.I.hb.kl(d))&&!!b.inner},Ekw=function(a){return a?.type==="elements"&&a.inner?.type!=="sheet-cell-media"&&a.elements.length===1},Ikw=function({X:a,mode:b,errorService:c,
Ra:d,TGc:e,ui:f}){if(b===10)return Fkw;const g=new Gkw(a,d,c,{UNg:__c.OA(618,a.Yh?.xm),Wji:__c.OA(619,a.Yh?.xm)});if(g.UNg)return Fkw;a=l_(()=>{e.Ggf&&(e.Ggf=void 0);g.UBs()});const h=l_(()=>{e.Ggf=void 0;g.aCs()});f_(()=>{e.Ggf=a_(({eOa:k})=>VZ(Hkw,{YBs:h,ui:f.get(),eOa:k}))});return{lxi:a}},Lkw=async function({X:a,xc:b,errorService:c,Na:d,Nea:e}){if(Jkw(b)){var f=(await Kkw(a.user.id,b,c,d)).filter(sb);f_(()=>{var g=[...(new Set(f))];g=g.length>1?J("K614SA",[g[0],g[1]]):g.length===1?J("Xy9KQQ",
[g[0]]):M("cup3Mw");e.rag=g})}},Kkw=async function(a,b,c,d){b=b.rules.filter(e=>e.role!==1&&e.type===1&&e.Ic?.user&&e.Ic?.user!==a).map(e=>e.Ic?.user);b=[...(new Set(b))].filter(sb);b=b.length>2?b.slice(0,2):b;if(b.length===0)return[];try{return(await d.IZa(new __c.Fs({Rg:b}))).xg.map(e=>e.displayName)}catch(e){return c.error(e),[]}},Jkw=function(a){const b=a.rules.some(c=>c.role!==8&&c.role!==1&&c.type!==7&&c.type!==8);a=a.ana.some(c=>c.role!==1&&c.status!==3);return b||a},Mkw=function(a,b){b=b.rules.filter(c=>
c.role!==1&&c.type===1&&c.Ic?.user&&c.Ic.user!==a.X.user.id).map(c=>c.Ic?.user).filter(sb);return[...(new Set(b))].slice(0,1)},Okw=async function({X:a,xc:b,mode:c,errorService:d,Na:e,Ra:f,S0a:g,Nea:h,ECe:k}){if(a.user.id===b.gk.user||!__c.OA(23,a.Yh?.xm)||a.Ab.mx<2||k()||c===10||__c.IYf(578,a.Yh?.xm)>3)return!1;const l=new Nkw(a,f,d,e,g);if(!await l.H0p())return!1;a=Mkw(l,b);const n=await l.tUq(a);f_(()=>{h.rag=l.cLg(n[0]);l.oLf()});return!0},Pkw=function({X:a,...b}){if(a){var {lxi:c}=Ikw({...b,X:a});
Okw({...b,X:a}).then(d=>{d||Lkw({...b,X:a})});return{lxi:c}}},Qkw=function({icon:a,active:b,disabled:c,onClick:d,ib:e,ariaLabel:f,tk:g}){return VZ(WZ,{OEa:!0,children:VZ(Wi,{size:"small",variant:"tertiary",icon:a,active:b,disabled:c,onClick:d,ib:e,ek:"top",ariaLabel:f,tk:g})})},Tkw=function(a,b){const c=b.Vk,d=b.gi,e=b.$Pb,f=b.tqa;var g=b.uq;const h=b.cKe?"reaction_menu":"quick_react";g=g!=="other"?g:void 0;b.Bob==="suggestion"?a.P.track(Rkw,{$Pb:e,gxa:d,Wba:void 0,tqa:f,source:h,uq:g}):a.P.track(Skw,
{$Pb:e,Vk:d,Wba:d===c?void 0:c,tqa:f,source:h,uq:g})},Vkw=async function(a){const b=[];do{var c=new __c.KEn({source:2,qUc:2,ka:a.ka,Of:a.Of,continuation:c,limit:100});({body:c}=await a.k9.qbi(c));b.push(...c.b9b);c=c.continuation}while(c!=null);const d=new Map;b.forEach(e=>{const f=e.Fkb.map(g=>new Ukw({...g,id:g.mQ}));d.set(e.Vk,f)});return d},Wkw=async function(a){const b=[];if(a.QSa.Goi)return b;do{var c=new __c.LEn({source:2,qUc:2,ka:a.ka,Of:a.Of,continuation:c});c=await a.k9.ybi(c);b.push(...c.MG);
c=c.continuation}while(c);return b},Xkw=function(a,b){b.forEach(c=>{if(c.qMa.tqa==="COMMENT"){var d=a.get(c.qMa.Vk)?.find(e=>c.mQ===e.id);d&&(d.bIc=c.id)}})},Ykw=async function(a,b){if(!a.QSa.Goi){try{var c=await a.bqk(b);await Promise.all([a.gAh(a.vgb.hgd,c),a.i8f(a.vgb.hgd,c)])}catch(d){return}f_(()=>{c.forEach(({Vk:d,$Pb:e,oRd:f})=>{if(d=a.vgb.Ixc.get(d)?.MG.find(g=>g.id===e))d.oRd=f})})}},Zkw=function(a,b,c,d,e,f){b.thc.length?b.thc.forEach(g=>a.w6f(g,c,e,d,{uq:f})):a.w6f(a.eT.aBf(b.krd),c,e,
d,{uq:f,FLd:!0})},$kw=function(a){return UZ(()=>a.teh.length,b=>{b>8&&a.isCollapsed==null?a.isCollapsed=!0:b<=8&&(a.isCollapsed=void 0)},{fireImmediately:!0})},blw=async function(a,b){let c;const d=[];do{const f=await a.k9.pbi(new alw({source:2,ka:a.ka,Of:a.Of,Vk:b,continuation:c}));c=f.continuation;d.push(...f.ljl)}while(c);const e=new Map;d.forEach(f=>{const g=f.user;f=f.mQ;if(g!==a.uj){var h=e.get(f);h?h.add(g):e.set(f,new Set([g]))}});return Array.from(e.entries()).map(([f,g])=>({Vk:b,$Pb:f,oRd:Array.from(g)}))},
clw=function(){const [a,b]=h_(!1),c=g_(()=>{b(!0)},[]),d=g_(()=>{b(!1)},[]);return{animate:a,onMouseEnter:c,onMouseLeave:d}},klw=function({eBs:a,eT:b,Aqb:c,fK:d}){const e=g=>(a.Ixc.get(g)?.teh||[]).filter(h=>h.thc.length>0||h.xg.length),f=(g,h)=>{const k=c();g=e(g);if(g.length){var l;g=g.map(p=>{const q=p.thc.length&&k?[{id:k.id,name:BA(k),Jc:k.Jc},...p.xg]:p.xg,r=new dlw({key:p.krd,Ql:()=>VZ(R,{className:"YupSBw",children:VZ(elw,{MG:p.T4,count:p.count,selected:0,kj:!1,Fji:!0,ZWr:!0})}),pa:()=>VZ(flw,
{xg:q,fK:d})});p.krd===h&&(l=r);return r});var n=new __c.Qz(g);n.NF(l||g[0]);return{Ge:()=>VZ(glw,{AB:n,eT:b}),Du:()=>VZ(hlw,{AB:n}),pa:()=>VZ(ilw,{AB:n})}}};return{c8q:f,k0g:(g,h)=>{if(e(g).length)return{Icon:__c.kOr,label:M("M1hYiA"),onClick:()=>{const k=f(g);k&&h(k)},mode:"action"}},qpj:jlw}},wlw=function({ka:a,Of:b,P:c,ma:d,Na:e,Bk:f,k9:g,gsa:h,errorService:k,$a:l,QSa:n,qa:p,eT:q,jab:r,RSd:t,KNm:v,fK:w,o$a:x,Aqb:y}){const z=y(),B=new llw,C=new mlw(B,e,f,g,h,k,a,b,z?.id,n,new nlw(c),d,q,r),{Shp:G,
bBs:H}=olw(C,t,v),{sxp:K,cIh:L}=plw(C,l,z,q),N=a_(({Vk:da,gi:la,Bob:ja,source:oa,y9g:ma,Gwg:na,Qc:qa})=>{const ua=k_(()=>({onClick:Ba,Wec:pa})=>VZ(K,{Vk:da,gi:la,Bob:ja,source:oa,onClick:Ba,Wec:pa}),[da,la,ja,oa]),za=k_(()=>({onClick:Ba})=>VZ(G,{Vk:da,gi:la,Bob:ja,source:oa,onClick:Ba}),[da,la,ja,oa]),va=g_(Ba=>C.Ede(Ba,da,la,ja,oa),[da,la,ja,oa]),xa=g_(()=>ma?.({Vk:da,gi:la,Bob:ja,source:oa}),[ma,da,ja,la,oa]);return VZ(qlw,{rxp:ua,Rhp:za,Ede:va,WVn:ma?xa:void 0,ye:p.status===2,disabled:da.startsWith("temp_comment_")||
r.Tf==="loading",Gwg:na,cuc:la!==da,Qc:qa,IZr:B.Ixc.get(da)?.s3b.size||0})}),{c8q:P,k0g:T,qpj:V}=klw({eBs:B,eT:q,Aqb:y,fK:w}),W=da=>{k.error(da,{La:"Unexpected error rendering comment reactions component"})},aa=a_(({store:da})=>da.rke?VZ(rlw,{Rk:()=>C.sih(da),Rc:()=>C.U0j(da)}):da.L1e?VZ(slw,{Rc:()=>C.HIm(da)}):null),ba=a_(({className:da,Vk:la,gi:ja,Bob:oa,HOj:ma,m4u:na,x9g:qa,y9g:ua,source:za})=>{const va=B.Ixc.get(la),xa=g_(()=>va&&C.jLo(va),[va]),Ba=g_(wa=>{(wa=P(la,wa))&&qa?.(wa)},[qa,la]),pa=
g_(wa=>{Zkw(C,wa,la,oa,ja,za)},[la,oa,ja,za]);j_(()=>{if(va)return $kw(va)},[va]);if(B.Tf==="failed"||B.Tf==="loading")return null;const ia=(va?.idj||[]).map(wa=>VZ(tlw,{reaction:wa,l1b:pa,G_s:qa&&Ba,ye:p.status===2,HOj:ma},wa.krd));return ia.length||va?.nbn||na?VZ(__c.Zt,{Tv:W,message:M("GXDK9g"),children:VZ(ulw,{className:da,Error:va?VZ(aa,{store:va}):void 0,MG:ia,DFp:va?.isCollapsed==null?void 0:VZ(vlw,{onClick:xa,$Yr:va?.oIn||0}),L_o:ma?void 0:VZ(N,{Vk:la,gi:ja,Bob:oa,source:za,y9g:ua})})}):null});
a={Tf:b_(()=>B.Tf),y$d:()=>C.HMk(),qEi:()=>C.qEi(),l2e:()=>C.l2e(),k0g:T};f_(()=>{x.Q7l=N;x.R7l=ba;x.cIh=L;x.j7n=H;x.qpj=V});return{bKd:a}},ylw=async function(a){var b=await a.OD.sfk(new xlw({Rg:[a.vNj,a.uNj],locales:a.A6p}));const c=b.K5d.find(d=>d.id===a.vNj&&d.locale===a.locale);if(c&&c.yRa.length>0)return[...c.yRa];if((b=b.K5d.find(d=>d.id===a.uNj&&d.locale==="en"))&&b.yRa.length>0)return[...b.yRa];throw Error("Unable to fetch any content");},Alw=async function(a){const b=await Promise.all(m(a.$vm).map(c=>
zlw(a,c))).then(c=>c.flat());if(!b.length)throw Error("Pre-defined stickers should always be available");return b},Blw=async function(a,b){if(!b.jOd){f_(()=>b.error=!1);try{a.$vm||(a.$vm=await ylw(a));const c=await Alw(a);f_(()=>b.jOd=c)}catch(c){f_(()=>{b.jOd=void 0;b.error=!0})}}},zlw=async function(a,b){const c=[];do{var d=await a.$f.mie(new __c.Aij({query:`set:${b}`,types:[2],S7c:[4],limit:50,continuation:d}));d.results.forEach(e=>{a.lwr(e)&&c.push({id:e.id,thumbnailUrl:m(Clw(e)).url,title:e.title})});
d=d.continuation}while(d);return c},Clw=function(a){return a.files.find(b=>b.quality===4)},Glw=function({jOd:a,d8g:b,error:c,Rk:d}){const e=i_(null),f=g_(g=>{g.stopPropagation()},[]);j_(()=>{const g=e.current;g?.addEventListener("wheel",f);return()=>{g?.removeEventListener("wheel",f)}},[f]);return c?VZ(Ck,{tone:"critical",Tg:!1,children:VZ(WZ,{OEa:!1,children:VZ(__c.ak,{message:M("iLdOLg"),uf:d})})}):VZ(__c.IEe,{Fl:e,children:VZ("div",{className:"U7TSyw",children:VZ(Dlw,{children:a?VZ(Elw,{jOd:a,
d8g:b}):VZ(Flw,{})})})})},Llw=function({OD:a,$f:b,$a:c,tFa:d,locale:e}){const f=new Hlw,g=new Ilw(a,b,c,d,e),h=()=>{Blw(g,f)};return{yi:({active:k,disabled:l,onClick:n})=>VZ(Qkw,{icon:__c.Dms,active:k,disabled:l,onClick:n,ib:l?M("qi1R7A"):M("D1R4ig"),ariaLabel:M("D1R4ig"),tk:!0}),wHh:a_(({d8g:k})=>{j_(()=>{Blw(g,f)},[]);return VZ(Glw,{jOd:f.jOd,d8g:k,error:f.error,Rk:h})}),Eeg:Jlw,yrj:Klw}},Mlw=async function(a,b){try{const c=b.Qb.files,d=c[c.length-1].url,e=await zhw(d),f=URL.createObjectURL(e);
f_(()=>{a.b0b.set(b.id,{id:b.id,url:d,V9a:f})})}catch(c){}},Nlw=function(a,b){return b.reduce((c,d)=>{a.b0b.has(d.id)||(c.VPo.push(d.id),d.accessToken?.token&&c.Jua.push(d.accessToken.token));return c},{VPo:[],Jua:[]})},Olw=async function(a,b){const {VPo:c,Jua:d}=Nlw(a.cache,b);if(c.length!==0)try{const e=new __c.km({Rua:!0,Rg:c,projection:__c.hm([8]),BR:!0,...(d.length>0&&{Jua:d})}),f=await a.sc.Asa(e);await a.cache.Gnm(f.media)}catch(e){}},Plw=async function(a,b){const c=[];do{const e=await a.e5m(b,
d);var d=e.kF.map(f=>Rhw(f,e.profiles,!!b.mg.comment.kj));c.push(...d);d=e.continuation}while(d);return c},Rlw=async function(a,b){const c=await Plw(a,b);f_(()=>{if(b.mg.Lta===b.mg.kF.length)a.DVl(b,c);else{const d=c.slice(b.mg.Lta-b.mg.kF.length);b.mg.kF=d;b.mg.Lta=c.length;b.mg.Xpd=c.filter(Qlw).length}})},Tlw=function(a,b,c){const d=Slw.next(),e=Date.now();b.mg.Lta++;b.mg.kF.push(new Qhw({id:d,gi:b.mg.comment.id,yz:m(a.I.Aqb()),created:e,updated:e,LNa:4,content:c.content,qu:c.qu,wA:c.wA,attachments:c.attachments,
gW:"pending",mqa:c}));return m(b.mg.kF.find(f=>f.id===d))},Wlw=async function(a,{grant:b,HEa:c,nk:d,onError:e}){const f=a.I.Mmb,g=a.I.ma;b&&(await __c.JTf(f,b.xg,b.Xf),b.xg.length>0&&Ulw(a,b.xg,b.Xf));a=await Vlw(c);if(a.ok)return La(d(a.value));d=a.error;let h;d instanceof __c.sh?h=M("INes9g"):d instanceof __c.Sb&&(h=d.endUserMessage);h||(h=M("ENf/zg"));g.Ib({Db:h});e?.();return Ma()},Xlw=async function(a,b,c){a.NTf.add(b);try{return await c()}finally{a.NTf.delete(b)}},Ylw=function(a,b,c){if(ciw(b,
c))return(a=a.I.viewport?.ya?.id)?new __c.$7c({nh:a}):void 0},Zlw=function(a,b){const c=new Set;b.forEach(d=>c.add(a.I.KBf(d)));return[...c]},Ulw=function(a,b,c){a.I.Dq.pea({ka:a.I.ka,medium:"mention",location:"editor_comment",candidateType:"member",zzc:b.map(d=>d.id).join(","),s9:c===4?"comment":"edit"})},amw=function(a,b){if(a.document.Ka!=="responsive"&&!ug(a.hb.kl(b))&&$lw(a,b))return{...__c.NBa(a.document),pages:[__c.Wg.Wna(__c.Zg.HR(Bn.snapshot(b)))]}},$lw=function(a,b){return __c.$t.Mv(a.document).some(c=>
c===b)},Thw=function(a,{uj:b,Lkd:c=a.ecb}){return(bmw(a,{uj:b,Lkd:c})?1:0)+cmw(a,{uj:b,Lkd:c})},bmw=function(a,{uj:b,Lkd:c=a.ecb}){return Ggw(a.comment,{uj:b,Lkd:c})},cmw=function(a,{uj:b,Lkd:c=a.ecb}){return dmw(a,{uj:b,Lkd:c}).length},dmw=function(a,{uj:b,Lkd:c=a.ecb}){return a.kF.filter(d=>Ggw(d,{uj:b,Lkd:c}))},emw=async function(a,b,c){const d=a.DC.Ou.k5i.get(b),e=a.iLi.has(b),f=a.Aqb()?.id;if(!d||e||f&&d.userId!==f)return Ma();a.iLi.add(b);try{return await c()}catch(g){return Ma()}finally{a.iLi.delete(b)}},
fmw=async function(a,b){if(a.LXl.has(b))return m(a.LXl.get(b));const [c,d]=await Promise.all([a.Na.p5a(new __c.lVj({user:b})),a.Bk.MYb(new __c.b2j({user:b}))]),e={id:b,displayName:c.user.displayName,Jc:d.Jc};a.LXl.set(b,e);return e},gmw=async function(a,b,c){const d=await fmw(a,c),e=a.store.cN.get(b);e&&f_(()=>e.mg.comment.yz=d)},jmw=function(a,b,c,d){(d=hmw(d))&&a.I.N.track(imw,{gxa:b,type:d,action:c})},lmw=function(a,b,c,d){(d=hmw(d))&&a.I.N.track(kmw,{gxa:b,type:d,action:c})},nmw=async function(a){const b=
a.I.OD,c=a.I.ka,d=a.I.Of;do{var e=new mmw({object:c,accessToken:d,kj:!1,continuation:e,limit:100});e=await b.mui(e);a.gAc(e);e=e.continuation}while(e)},omw=async function(a){const b=a.I.OD,c=a.I.ka,d=a.I.Of;do{var e=new mmw({object:c,accessToken:d,kj:!0,continuation:e,limit:100});e=await b.mui(e);a.gAc(e);e=e.continuation}while(e)},qmw=function(a,b,c){const d=a.I.N,e=a.I.ka;m(a.I.gC)(["deleted"]);d.track(pmw,{type:"comment",ka:e,Vk:b.mg.comment.gi,uq:c})},smw=function(a,b){a.I.ma.Ib({Db:M("LRA3hg"),
group:rmw,Jq:b&&{buttonText:b.buttonText,onClick:b.onClick},YWa:!1})},umw=function(a,b,c){const d=a.I.gC,e=a.I.N;a=a.I.ka;const f=b.mg.comment.wA.length>0||b.mg.kF.some(g=>g.wA.length>0);m(d)(["resolved"]);e.track(tmw,{ka:a,Vk:b.mg.comment.gi,kF:b.mg.Lta,tAd:f,uq:c})},vmw=function(a,b){a.I.ma.Ib({Db:M("Rjr7Zg"),Jq:b&&{buttonText:b.buttonText,onClick:b.onClick}})},xmw=function(a,b,c){const d=a.I.N,e=a.I.ka;m(a.I.gC)(["edited-comment"]);d.track(wmw,{ka:e,Vk:b.mg.comment.gi,kF:b.mg.Lta,tAd:b.mg.comment.wA.length>
0||b.mg.kF.some(f=>f.wA.length>0),KQd:c})},ymw=function(a,{ref:b,action:c}){a.Nmh({ref:b,store:void 0,action:c,source:"badge",Ohd:void 0})},zmw=function(a,b){if(b.length){var c=a.I.Fu;a=b.map(d=>c.ded.get(d)).filter(sb);b=b.map(d=>c.tmc.get(d)).filter(sb);if(a.length>0)return c.GLg(a);if(b.length>0)return b[0]}},Amw=function(a){UZ(()=>a.RGm,b=>{b.forEach(c=>{switch(c.type){case "draft":a.I.QS.e$a(c);break;case "comment":XZ(c.ref)&&c.ref.target.disconnect();c.ref=void 0;break;default:throw new u(c);
}})})},Bmw=function(a){const b=a.I.Fu,c=a.I.DC;UZ(()=>[...b.ded.values()].filter(d=>XZ(d.ref)&&c.jUb.has($Z(d))),d=>{d.forEach(e=>{e.ref&&XZ(e.ref)&&e.ref.ZS.disconnect();e.ref=void 0})})},Cmw=function(a){const b=a.I.DC;a.I.SX.jc(c=>{c.dS.faj(new Set(a.crb))});UZ(()=>a.crb,(c,d)=>{const e=Zhw(c,d);c=Zhw(d,c);e.forEach(f=>ygw(b,f,!0));c.forEach(f=>ygw(b,f,!1))})},Gmw=function(a){const b=a.I.Fu,c=a.I.QS;UZ(()=>{const d=[...b.oZm,...b.kpl],e=b.QXq,f=new Map;Dmw(d,f);Dmw(e.slice(),f);return f},d=>{const e=
new Set;for(var [,f]of d.entries())e.add(f.target);for(const [g,h]of d)(d=g.type!=="draft")&&!(d=!g.ref||ZZ(h)||ghw(h)&&ZZ(g.ref))&&(d=g.ref,f=phw(h)||ZZ(h)&&h?.type==="sheetPageCell"||nhw(h),d=(phw(d)||ZZ(d)&&d?.type==="sheetPageCell"||nhw(d))&&f?e.has(d.target)&&d.mKd===h.mKd?!d.equals(h):!0:!1),d&&(g.ref=h);for(const g of b.tmc.values())Emw(g.ref)&&!e.has(g.ref.target)&&c.e$a(g);for(const g of b.hqd)Emw(g?.ref)&&!e.has(g.ref?.target)&&(g.ref=void 0)},{fireImmediately:!0,equals:Fmw})},Dmw=function(a,
b){a.forEach(({ref:c,comments:d})=>{d.forEach(e=>{b.set(e,c)})})},Fmw=function(a,b){if(a.size!==b.size)return!1;for(const [c,d]of a)if(a=b.get(c),!a||!a.equals(d))return!1;return!0},Imw=function(a){tjw(()=>{const {open:b,kj:c}=a.Hga.get();return ijw||a.brg.get()>1&&(b>0||c>0)},()=>{const b=new Hmw;__c.ODm(a.OD,()=>a.OD.IPj(new __c.$vr({document:a.ka,Of:a.Of}),b)).subscribe(a.iDf);a.t7n=!0});UZ(()=>a.ECe()&&!a.t7n,b=>b&&a.vNk())},Kmw=function(a){const b=a.tMi;b&&UZ(()=>a.y9k.get().reduce((c,{mg:d})=>
({FJf:Math.max(c.FJf,d.comment.updated,...d.kF.map(e=>e.updated)),$Aa:c.$Aa+d.Lta+1}),{FJf:0,$Aa:0}),()=>Jmw(b),{equals:d_.structural})},Jmw=function(a){!a.XEg||a.XEg<=0||(a.Qbh=a.XEg,a.YEg&&clearTimeout(a.YEg),a.YEg=window.setTimeout(()=>{a.Qbh=a.RQi;a.YEg=void 0},a.bTq))},Nmw=function({U5a:a,Zo:b,Fv:c,Nea:d}){const e=a_(({Ww:f})=>{const g=k_(()=>new __c.ZNr(f,b,c),[f]),h=k_(()=>new Lmw(f,a),[f]),k=k_(()=>new __c.XNr(g,h),[g,h]),{Mcg:l,Buttons:n,ZEh:p,hIh:q,rq:r}=k_(()=>Mmw(g,k,h),[g,k,h]),t=g_(()=>
{h.hE()},[h]);if(!f.R8d)return null;const v=b_(()=>({range:f.dtd?.lnc}),{equals:d_.structural});return VZ(kr,{Tza:t,preventScroll:"always",children:VZ("div",{className:"_5CRMyw",children:VZ(__c.bOr,{Tub:g.Tub,mWe:g.mWe,open:g.open,rdc:g.WLk,ODd:g.ODd,Tqb:g.Tqb,Ltc:g.Ltc,DDe:g.DDe,j8e:g.j8e,selection:v,Buttons:n,rq:r,Mcg:l,ZEh:p,hIh:q,We:"fixed",onBlur:k.Mpg,Nda:k.Nda,GX:k.GX,JF:k.JF,oa:t})})})});f_(()=>{d.Ncg=e})},Omw=function(a,b,c,d,e){return k_(()=>{let f;f=a?.rag&&b==="comment"&&d?{type:0,value:Math.floor(a.rag.length/
24)+1}:{type:0,value:c?1:2};return e&&e.type===0?e.value>f.value?f:e:f},[a,b,c,d,e])},Pmw=function(a,b,c,d,e){const [f,g]=h_(a?{type:0,value:4}:void 0),h=g_((p,q)=>{g(r=>r&&r.value===p&&r.type===q?r:{type:q,value:p})},[g]),k=b_(()=>{const p=d.current,q=e.current;if(q&&p)return{type:1,value:p.clientHeight-q.clientHeight}}).get(),l=g_(()=>{b&&k&&b.type===1&&h(b.value-k.value,1)},[b,k,h]),n=g_(()=>{const p=c?.clientHeight,q=c?.scrollHeight,r=d.current?.clientHeight;p&&q&&r&&k&&q>p&&h(Math.max(r-k.value-
(q-p),p*.25),1)},[c?.clientHeight,c?.scrollHeight,d,k,h]);j_(()=>{a?h(4,0):b?l():n()},[n,l,a,h,b]);return f},Rmw=function(a,b,c){return k_(()=>a?.MKb?.uba.bta??b?.bta??new Qmw({uj:c}),[a,b,c])},Tmw=function(a,b){return k_(()=>a?.MKb?.uba.kab??b?.kab??new Smw,[a,b])},Umw=function(a,b,c){return k_(()=>a?.MKb?.uba.Ww??b?.Ww??c.create(),[a,b,c])},Ymw=function(a){return k_(()=>{if(Vmw)return new Wmw(a,Xmw)},[a])},Zmw=function(a,b,c,d,e,f){return k_(()=>a?.MKb?.uba??b??f.create({bta:c,kab:d,Ww:e,jAk:a}),
[a,b,c,d,e,f])},anw=function(a,b){return k_(()=>a?.MKb?.Sra??b??new $mw(a?.attachments),[a,b])},cnw=function(a,b){return k_(()=>new bnw(a,b),[a,b])},dnw=function(a){const b=2*Uc;let c=b,d=0;a&&(c=b+a.top-a.scrollTop,d=a.height);return{top:c,height:d}},enw=function(a,b,c,d){return{value:a,label:b,description:c,disabled:d}},mmw=F(()=>({object:S(1),kj:__c.X(2),accessToken:U(3),limit:__c.gp(4,20),continuation:U(5)})),fnw=F(()=>({object:S(1),kj:__c.X(2),accessToken:U(3),Rg:np(4)})),gnw=__c.I(()=>[1,2]),
hnw=F(()=>({object:S(1),mg:S(2),accessToken:U(3),h_u:__c.op(4),continuation:U(5),limit:__c.gp(6,20),Okb:__c.Xa(7,gnw)})),inw=F(()=>({object:S(1),qy:np(2),accessToken:U(3),kj:__c.X(4)})),jnw=F(()=>({object:S(1),accessToken:U(2),kj:__c.X(3),threads:np(4)})),knw=F(()=>({mg:S(1),Jxc:__c.kp(2)})),lnw=F(()=>({object:S(1),accessToken:U(2),views:__c.Sa(3,knw)})),mnw=F(()=>({object:S("object",1),accessToken:U("accessToken",2),mg:S("thread",3),content:S("content",4),qu:E("richTextContent",6,__c.P7c),attachments:__c.Sa("attachments",
5,__c.V7c),Okb:__c.Xa("replyContext",7,gnw),FIg:E("generateResponse",8,__c.a8c)})),nnw=F(()=>({object:S("object",1),accessToken:U("accessToken",2),mg:S("thread",3),id:S("id",4),content:S("content",5),qu:E("richTextContent",7,__c.P7c),attachments:__c.Sa("attachments",6,__c.V7c),Okb:__c.Xa("replyContext",8,gnw)})),onw=F(()=>({object:S(1),content:D(2,__c.rQg),accessToken:U(3),Ked:E(4,__c.Bg),LQa:E(5,__c.Z7c)})),pnw=F(()=>({object:S(1),Rg:np(2),dD:__c.Ya(3,__c.sQg),accessToken:U(4)})),qnw=F(()=>({object:S(1),
mg:S(2),accessToken:U(3),o2t:__c.op(4),limit:__c.gp(5),continuation:U(6)}));__c.o2r.prototype.sih=fa(1184,function(){this.L.init(this.store)});__c.o2r.prototype.kNe=fa(1183,function(){return this.L.NDf(this.store)});pbg.prototype.Yoi=fa(1077,function(a){return this.Qsc.has(a)});VJh.prototype.Yoi=fa(1076,function(a){return this.ibb.FPg.has(a)});pbg.prototype.faj=fa(1075,function(a){this.Qsc=a});VJh.prototype.faj=fa(1074,function(a){this.ibb.FPg.replace(Array.from(a))});
pbg.prototype.eRi=fa(1073,function(a){if(this.C0c.has(a)){var b=[...this.C0c.values()].filter(c=>c!==a);this.C0c=new Set(b);__c.N7f(this)}});VJh.prototype.eRi=fa(1072,function(a){this.ibb.xxj.delete(a)});pbg.prototype.jMh=fa(1071,function(a){this.C0c.has(a)||(this.C0c=new Set([...this.C0c.values(),a]),__c.N7f(this))});VJh.prototype.jMh=fa(1070,function(a){this.ibb.xxj.add(a)});pbg.prototype.eXi=fa(1069,function(a=new Set){vgw(a,this.C0c)||(this.C0c=new Set(a),ugw(this))});
VJh.prototype.eXi=fa(1068,function(a){this.ibb.xxj.replace(Array.from(a))});pbg.prototype.yXi=fa(1067,function(a,b){b?this.Qsc.add(a):this.Qsc.delete(a);__c.H7f(this);__c.J7f(this).forEach(({Dt:c})=>{[...__c.K7f(c)].includes(a)&&(b?__c.I7f(c).classList.toggle("RCupPw",!0):__c.L7f(this,c))})});VJh.prototype.yXi=fa(1066,function(a,b){b?this.ibb.FPg.add(a):(this.Qfh(a),this.ibb.FPg.delete(a))});
pbg.prototype.Qfh=fa(1065,function(a){if(this.B0c.has(a)){var b=[...this.B0c.values()].filter(c=>c!==a);this.B0c=new Set(b);ugw(this)}});VJh.prototype.Qfh=fa(1064,function(a){this.ibb.hhg.delete(a)});pbg.prototype.iMh=fa(1063,function(a){this.B0c.has(a)||(this.B0c=new Set([...this.B0c.values(),a]),ugw(this))});VJh.prototype.iMh=fa(1062,function(a){this.ibb.hhg.add(a)});pbg.prototype.cXi=fa(1061,function(a){vgw(a,this.B0c)||(this.B0c=new Set(a),ugw(this))});VJh.prototype.cXi=fa(1060,function(a){this.ibb.hhg.replace(Array.from(a))});
__c.Zag.prototype.lmh=fa(1059,function(a,b){this.Ou.lmh(a,b);__c.E7f(this)});__c.pag.prototype.lmh=fa(1058,function(a,b){const c=this.metadata.get(a);c&&this.Pzh(a,{userId:c.userId,Vk:b,timestamp:c.timestamp})});__c.Zag.prototype.WWf=fa(1057,function(a){if(a=tgw(this.GI,a))for(const b of this.store.Onb)b.G4f?.WWf(a)});__c.gLh.prototype.WWf=fa(1056,function(a){__c.S9f(this.xn,a)});__c.Zag.prototype.xUd=fa(1055,function(a){if(a=tgw(this.GI,a))for(const b of this.store.Onb)b.G4f?.xUd(a)});
__c.gLh.prototype.xUd=fa(1054,function(a){this.xn.xUd(a)});__c.hLh.prototype.xUd=fa(1053,function(a){const b=__c.Q9f(this,c=>{const d={};let e=!1;__c.we(__c.Ae,c,"all",(f,g)=>{if(__c.Le(g)===a)if(__c.Me(g))d[g]=void 0,f==="delete"&&(e=!0);else if(__c.Oe(g)!=null){const h=__c.Oe(g);h&&(d[h]=f,d[g]=void 0)}});return{UJe:d,$rf:e}});__c.R9f(this,b)});
pbg.prototype.Exi=fa(1052,function(a,b){__c.H7f(this);const c=__c.J7f(this).map(g=>g.Dt).filter(g=>__c.K7f(g).has(a)||b&&__c.P7f(g).has(b)).reduce((g,h)=>{if(!g.length)return[h];const k=g[g.length-1];return this.quill.getIndex(h)===this.quill.getIndex(k)+k.length()?[...g,h]:g},[]);if(!c.length)return!1;const d=c[0],e=this.quill.getIndex(d),f=c.reduce((g,h)=>g+h.length(),0);if(c.length===1&&d instanceof __c.VOd&&d.length()===1)return this.quill.setSelection(e+f-1,1,"user"),!0;this.quill.setSelection(e+
f,0,"user");return!0});VJh.prototype.Exi=fa(1051,function(a,b){this.cXi(new Set([a]));b&&this.eXi(new Set([b]));return!0});__c.Zag.prototype.V4e=fa(1050,function(a){const b=tgw(this.GI,a),c=this.FOj.get(a);if(!c)return!1;let d=!1;this.Za.IW(()=>{const e=this.store.wr(c.Sc);e&&(d=e.dS.Exi(a,b))&&this.Za.qv(e.text)});return d});__c.YNa.prototype.IPj=fa(203,function(a,b){return this.xua.requestChannel("comment","connectRealtimeComment",void 0,a,b,__c.$vr.serialize,__c.awr.serialize,__c.mwr.deserialize)});
__c.ca=__c.g8c.prototype;__c.ca.mMk=fa(202,async function(a){const b=ih(gh([Rs,"listsuggestionreplies"])),[c,{brp:d}]=await Promise.all([this.Da.post(b,qnw.serialize(a),{Sa:"listsuggestionreplies"}),__webpack_require__.me(24819).then(()=>({brp:__c.T2m}))]);return d.deserialize(c)});
__c.ca.$fk=fa(201,async function(a){const b=ih(gh([Rs,"findsuggestions"])),[c,{pgp:d}]=await Promise.all([this.Da.post(b,pnw.serialize(a),{Sa:"findsuggestions"}),__webpack_require__.me(24819).then(()=>({pgp:__c.Q2m}))]);return d.deserialize(c)});
__c.ca.LYj=fa(199,async function(a){ra(a.object!=null&&/^[^/]+$/.test(a.object));ra(a.id!=null&&/^[^/]+$/.test(a.id));const b=gh([Rs,"suggestion",a.object,a.id]);__c.eh(b,{accessToken:a.accessToken});a=ih(b);const [c,{E$o:d}]=await Promise.all([this.Da.delete(a,{Sa:"deletesuggestion"}),__webpack_require__.me(24819).then(()=>({E$o:__c.F2m}))]);return d.deserialize(c)});
__c.ca.aud=fa(197,async function(a){ra(a.object!=null&&/^[^/]+$/.test(a.object));const b=ih(gh([Rs,"suggestion",a.object])),[c,{l8o:d}]=await Promise.all([this.Da.post(b,onw.serialize(a),{Sa:"createsuggestion"}),__webpack_require__.me(24819).then(()=>({l8o:__c.D2m}))]);return d.deserialize(c)});
__c.ca.sfk=fa(195,async function(a){const b=gh([Rs,"graphics"]);__c.eh(b,{ids:a.Rg,locales:a.locales});a=ih(b);const [c,{yep:d}]=await Promise.all([this.Da.get(a,{Sa:"findcommentgraphicsapi"}),__webpack_require__.me(328076).then(()=>({yep:__c.BXr}))]);return d.deserialize(c)});
__c.ca.Tyb=fa(194,async function(a){ra(a.object!=null&&/^[a-zA-Z0-9_-]{11}$/.test(a.object));ra(a.mg!=null&&/^[^/]+$/.test(a.mg));ra(a.id!=null&&/^[^/]+$/.test(a.id));const b=gh([Rs,a.object,a.mg,"replies",a.id]);__c.eh(b,{accessToken:a.accessToken,replyContext:a.Okb&&gnw.serialize(a.Okb)});a=ih(b);const [c,{A$o:d}]=await Promise.all([this.Da.delete(a,{Sa:"deletereplyapi"}),__webpack_require__.me(24819).then(()=>({A$o:__c.E2m}))]);return d.deserialize(c)});
__c.ca.EVl=fa(193,async function(a){ra(a.object!=null&&/^[a-zA-Z0-9_-]{11}$/.test(a.object));ra(a.mg!=null&&/^[^/]+$/.test(a.mg));ra(a.id!=null&&/^[^/]+$/.test(a.id));const b=ih(gh([Rs,a.object,a.mg,"replies",a.id])),[c,{aHp:d}]=await Promise.all([this.Da.post(b,nnw.serialize(a.body),{Sa:"updatereplyapi"}),__webpack_require__.me(24819).then(()=>({aHp:__c.V2m}))]);return d.deserialize(c)});
__c.ca.Jgb=fa(192,async function(a){ra(a.object!=null&&/^[^/]+$/.test(a.object));ra(a.mg!=null&&/^[^/]+$/.test(a.mg));const b=ih(gh([Rs,a.object,a.mg,"replies"])),[c,{$7o:d}]=await Promise.all([this.Da.post(b,mnw.serialize(a.body),{Sa:"createreplyapi"}),__webpack_require__.me(24819).then(()=>({$7o:__c.B2m}))]);return d.deserialize(c)});
__c.ca.Vjl=fa(191,async function(a){ra(a.object!=null&&/^[^/]+$/.test(a.object));const b=ih(gh([Rs,"views",a.object,"record"])),[c,{fyp:d}]=await Promise.all([this.Da.post(b,lnw.serialize(a),{Sa:"recordthreadviews"}),__webpack_require__.me(24819).then(()=>({fyp:__c.U2m}))]);return d.deserialize(c)});
__c.ca.egk=fa(190,async function(a){ra(a.object!=null&&/^[^/]+$/.test(a.object));const b=ih(gh([Rs,"participants","find",a.object])),[c,{xgp:d}]=await Promise.all([this.Da.post(b,jnw.serialize(a),{Sa:"findthreadparticipants"}),__webpack_require__.me(24819).then(()=>({xgp:__c.rnw}))]);return d.deserialize(c)});
__c.ca.Jfk=fa(189,async function(a){ra(a.object!=null&&/^[^/]+$/.test(a.object));const b=ih(gh([Rs,"mentions","find",a.object])),[c,{rfp:d}]=await Promise.all([this.Da.post(b,inw.serialize(a),{Sa:"findmentions"}),__webpack_require__.me(24819).then(()=>({rfp:__c.P2m}))]);return d.deserialize(c)});
__c.ca.lMk=fa(187,async function(a){const b=ih(gh([Rs,"listreplies"])),[c,{arp:d}]=await Promise.all([this.Da.post(b,hnw.serialize(a),{Sa:"listrepliesapi2"}),__webpack_require__.me(24819).then(()=>({arp:__c.S2m}))]);return d.deserialize(c)});__c.ca.hbi=fa(186,async function(a){const b=ih(gh([Rs,"find"])),[c,{zep:d}]=await Promise.all([this.Da.post(b,fnw.serialize(a),{Sa:"findcommentsapi2"}),__webpack_require__.me(24819).then(()=>({zep:__c.M2m}))]);return d.deserialize(c)});
__c.ca.mui=fa(185,async function(a){const b=ih(gh([Rs,"list"])),[c,{Sqp:d}]=await Promise.all([this.Da.post(b,mmw.serialize(a),{Sa:"listcommentsapi2"}),__webpack_require__.me(24819).then(()=>({Sqp:__c.R2m}))]);return d.deserialize(c)});
var Ihw=/(https?:\/\/)+([^.:?/#\s])+([.:])+([^\s]+)/gim,snw={...__c.kCh,Jc:__c.nCh},Dgw=a=>{var b=a.children;if(b.length){a="";for(const c of b)if(c.type==="TEXT")a+=c.text;else if(c.type==="PARAGRAPH"){b=Dgw(c);if(b===void 0)return;a+=b}else return;return a}},tnw=__webpack_require__(31968),c_=tnw.Fragment,VZ=tnw.jsx,o_=tnw.jsxs;var unw=__webpack_require__(845212),vnw=unw.Component,wnw=unw.createRef,xnw=unw.forwardRef,ynw=unw.Fragment,p_=unw.memo,g_=unw.useCallback,j_=unw.useEffect,znw=unw.useId,Anw=unw.useImperativeHandle,k_=unw.useMemo,i_=unw.useRef,h_=unw.useState;var a_=__webpack_require__(647370).PA;var Bnw=__webpack_require__(186901),b_=Bnw.EW,Cnw=Bnw.fm,f_=Bnw.h5,d_=Bnw.m3,UZ=Bnw.mJ,Dnw=Bnw.MN,bhw=Bnw.O8,q_=Bnw.sH,l_=Bnw.XI,tjw=Bnw.z7;var Enw=__webpack_require__,Fnw=Enw(208463),r_=Enw.n_x(Fnw)();var Gnw=__webpack_require__(97756).renderToString;var Hnw=__webpack_require__(536618),Inw=Hnw.Aj,Jnw=Hnw.iB;var Knw=__webpack_require__(294462);var Lnw=__webpack_require__(442061).we;var Mnw=__webpack_require__(821046).autoUpdate;var Nnw=__webpack_require__(400678),miw=Nnw.BN,jiw=Nnw.cY,niw=Nnw.ER,liw=Nnw.UU;var Onw=__webpack_require__(671142).A;var Pnw=__webpack_require__(13851);var Qnw=__webpack_require__(277049)._;var Rnw=__webpack_require__(613609),Snw=Rnw._K,Tnw=Rnw.Ay,Unw=Rnw.ns;var Vnw=__webpack_require__(269018)._;var Hmw=__webpack_require__(450117).B7;var Wnw=__webpack_require__(532588).A;var WZ=p_(({children:a,OEa:b,className:c})=>VZ("div",{className:c,"data-comment-card-action":b,children:a})),Xnw=a=>a.hasAttribute("data-comment-card-action");var Ynw=a_(a=>{const b=a.uj,c=a.store,d=a.L,e=a.ndd,[f,g]=h_(null),h=k_(()=>new __c.wC,[]),k=g_(()=>d.mKo(c),[d,c]),l=g_((r,t)=>{d.qKo(c,t);t&&d.a6k(c,m(c.r1c));e(t)},[d,c,e]),n=g_(r=>{d.a6k(c,r);l("",!0);k()},[d,c,l,k]),p=g_(()=>h.install("ClickableAssignee",(r,t)=>o_(__c.Lt,{ref:g,variant:"subtle",onClick:k,tk:!0,ariaHasPopup:"listbox",ariaLabel:M("ZVR6fg"),children:[t,VZ(R,{tagName:"span",tp:"0.5u",children:VZ(__c.Rt,{size:"tiny",tone:"primary"})})]})),[h,k,g]);j_(()=>{const r=UZ(()=>c.T7f.length,
v=>{v>1&&p()},{fireImmediately:!0}),t=Fgw(c);return()=>{r();t()}},[d,c,p]);a=b_(()=>{if(c.r1c){var r=BA(c.r1c);return c.T7f.length>1?h.render(J("0k7ejg",[__c.sx(c.sDk?M("GEp4AA"):r)])):c.sDk?M("zBy57w"):J("kBpCyw",[r])}});const q=f&&VZ(__c.Io,{trigger:f,Hx:!0,open:c.m0i,oa:k,children:VZ(__c.Qo,{role:"list",children:c.T7f.map(r=>VZ(__c.St,{onClick:()=>n(r),end:c.r1c===r?VZ(sr,{size:"medium"}):null,children:o_(Q,{tagName:"span",children:[BA(r),b===r.id&&VZ(Q,{tagName:"span",weight:"bold",size:"medium",
children:` ${M("Mqkh+A")}`})]})},r.id))})});return c.wA.length===0?null:VZ(WZ,{OEa:!1,className:"A17HLg",children:o_(R,{display:"flex",alignItems:"center",children:[VZ(__c.ur,{checked:c.TGf,onChange:l,label:a.get()}),c.T7f.length>1&&q]})})});var bnw=class{static G(a){O(a,{TGf:q_.ref,h0h:q_.ref,m0i:q_.ref,r1c:b_,UN:b_,sDk:b_,wA:b_({equals:d_.shallow}),T7f:b_({equals:d_.shallow})})}get r1c(){return this.h0h??this.wA[0]}get UN(){return this.TGf?this.r1c:void 0}get sDk(){return!!this.uj&&this.uj===this.r1c?.id}get wA(){return this.UJb.yeh}get T7f(){return __c.md(this.wA,a=>a.id)}constructor(a,b){this.UJb=a;this.uj=b;this.TGf=(bnw.G(this),!1);this.m0i=!1}},Znw=class{static G(a){O(a,{a6k:l_,mKo:l_,qKo:l_})}a6k(a,b){a.h0h=b}mKo(a){a.m0i=!a.m0i}qKo(a,
b){a.TGf=b}constructor(){Znw.G(this)}};var $nw=class{static G(a){O(a,{id:q_.ref,gi:q_.ref,yz:q_.ref,created:q_.ref,updated:q_.ref,LNa:q_.ref,gW:q_.ref,lNb:q_.ref,hJ:q_.ref})}get awm(){return this.gi===this.id?"top_level_comment":"reply"}get IIf(){return this.awm==="top_level_comment"}get cuc(){return this.awm==="reply"}constructor(a){this.id=($nw.G(this),void 0);this.id=a.id;this.gi=a.gi;this.yz=a.yz;this.created=a.created;this.updated=a.updated;this.LNa=a.LNa;this.gW=a.gW}},Qhw=class extends $nw{static G(a){O(a,{zKe:q_.ref,content:q_.ref,
qu:q_.ref,wA:q_.shallow,attachments:q_.shallow,kj:q_.ref,mqa:q_.ref,MKb:q_.ref,author:b_})}get author(){return this.yz}constructor(a){super(a);this.type=(Qhw.G(this),"comment");this.content=a.content;this.qu=a.qu;this.wA=a.wA;this.attachments=a.attachments;this.kj=a.kj;this.mqa=a.mqa;this.MKb=a.MKb}},Phw=class extends $nw{static G(a){O(a,{Duj:q_.ref,Lvj:q_.ref,attachments:q_.shallow,kj:q_.ref,LIg:q_.ref,author:b_,Foi:b_,content:b_,qu:b_})}get author(){return this.Foi?snw:__c.oCh}get Foi(){return this.LIg===
1||this.LIg===2}get content(){return this.Foi?M("5zCpjw"):this.Duj}set content(a){this.Duj=a}get qu(){return this.Foi?new __c.P7c({children:[new __c.G7c({children:[new __c.w7c({text:M("5zCpjw")})]})]}):this.Lvj}set qu(a){this.Lvj=a}constructor(a){super(a);this.type=(Phw.G(this),"ai");this.wA=[];this.Duj=a.content;this.Lvj=a.qu;this.attachments=a.attachments;this.kj=a.kj;this.LIg=a.LIg}},Mhw=class extends Qhw{static G(a){O(a,{Yla:q_.ref,UN:q_.ref})}constructor(a){super(a);this.Yla=(Mhw.G(this),void 0);
this.Yla=a.Yla;this.UN=a.UN}},Vhw=class extends $nw{static G(a){O(a,{content:q_.ref,ZQe:q_.ref,kj:q_.ref,author:b_})}get author(){return this.yz}constructor(a){super(a);this.type=(Vhw.G(this),"suggestion");this.content=a.content;this.ZQe=a.ZQe;this.kj=a.kj}};var aow=({item:a,xJ:b,Jr:c})=>{var d=g_(e=>{b();if(a.mode==="action")a.onClick(e)},[b,a]);d=a.mode==="info"?VZ(R,{display:"flex",Lb:"1.5u",Pc:"0.5u",children:VZ(Ck,{tone:"neutral",size:"small",children:a.label})}):VZ(WZ,{OEa:!1,children:VZ(__c.lv,{onClick:d,start:a.Icon&&VZ(a.Icon,{size:"medium"}),children:a.label})});return VZ(R,{Pc:c?"0.5u":void 0,children:d})};var bow=({open:a,qna:b,onCancel:c,yIk:d})=>VZ(__c.ld,{open:a,dismissible:!0,Rc:c,title:d?M("SyKuQA"):M("FhhDkA"),explanation:d?M("1XZOpQ"):M("wIdtkw"),nH:"critical",buttons:[{children:d?M("zAbz2g"):M("ABoGOQ"),onClick:b},{children:M("FP8GQw"),onClick:c}]});var iow=a_(({WCb:a,wSc:b,qna:c,atb:d,xv:e,Snc:f,Nhc:g,DDa:h,contentId:k,iw:l,QPa:n,LNa:p,ui:q,Jtc:r,yIk:t,ELt:v,mjl:w,feh:x})=>{const [y,z]=h_(!1),B=g_(()=>g(L=>!L),[g]),C=g_(()=>{g(!1)},[g]),G=g_(()=>{z(!0)},[]),H=g_(()=>{z(!1)},[]),K=g_(()=>{e&&e();f&&f()},[e,f]);return o_(c_,{children:[VZ(R,{className:r_("Y623yQ",{jsqvJg:!q,RfQUzw:__c.Vb(),qEhHnw:tb.rd,E7jW1Q:l||n||y}),children:o_($q,{Fa:"start",spacing:"0.5u",children:[w&&VZ(Yq,{children:VZ(R,{className:"AWo7jQ",children:w})}),a&&VZ(Yq,{children:VZ(cow,
{className:"hOO4RQ",onClick:a,contentId:k,onFocus:G,onBlur:H,disabled:v,loading:p===2,size:"small",Qc:"small"})}),b&&VZ(Yq,{children:VZ(dow,{className:"hOO4RQ",onClick:b,contentId:k,onFocus:G,onBlur:H,disabled:v,loading:p===3,size:"small",Qc:"small"})}),c&&VZ(Yq,{children:VZ(eow,{className:"hOO4RQ",onClick:c,contentId:k,onFocus:G,onBlur:H,disabled:v,loading:p===0,size:"small",Qc:"small"})}),d&&VZ(Yq,{children:VZ(fow,{className:"hOO4RQ",onClick:d,contentId:k,onFocus:G,onBlur:H,disabled:v,loading:p===
1,size:"small",Qc:"small"})}),h.length>0&&VZ(Yq,{children:VZ(gow,{zae:n,nea:B,onBlur:H,onFocus:G,size:"small",Qc:"small",children:L=>VZ(how,{DDa:h,xJ:C,feh:x,mode:L.mode})})})]})}),e&&f&&VZ(bow,{open:!!r,qna:K,onCancel:f,yIk:t})]})}),cow=a_(({contentId:a,...b})=>VZ(WZ,{OEa:!1,children:VZ(Wi,{...b,variant:"tertiary",icon:sr,ek:"bottom",ib:b.disabled?M("UiDNvg"):M("ZF49gw"),ariaLabel:M("ZF49gw"),Zg:a})})),dow=a_(({contentId:a,...b})=>VZ(WZ,{OEa:!1,children:VZ(Wi,{...b,variant:"tertiary",icon:__c.J4d,
ek:"bottom",ib:M("2xhucg"),ariaLabel:M("2xhucg"),Zg:a})})),eow=a_(({contentId:a,...b})=>VZ(WZ,{OEa:!1,children:VZ(Wi,{...b,variant:"tertiary",icon:sr,ek:"bottom",ib:M("Cmy3Xw"),ariaLabel:M("Cmy3Xw"),Zg:a})})),fow=a_(({contentId:a,...b})=>VZ(WZ,{OEa:!1,children:VZ(Wi,{...b,variant:"tertiary",icon:nr,ek:"bottom",ib:M("HvOocA"),ariaLabel:M("HvOocA"),Zg:a})})),gow=a_(({children:a,zae:b,nea:c,onBlur:d,onFocus:e,size:f,Qc:g})=>VZ(__c.kv,{trigger:h=>VZ(jow,{...h,onClick:c,onFocus:e,onBlur:d,size:f,Qc:g}),
open:b,eda:"bottom-end",Mx:c,Hx:!0,children:h=>a(h)})),how=a_(({mode:a,xJ:b,DDa:c,feh:d})=>{const e=a==="sheet";return o_(R,{children:[e&&d&&o_(c_,{children:[VZ(R,{Lb:"2u",paddingBottom:"1u",className:"_8ySxaA",children:d({onClick:b})}),VZ(__c.Qt,{direction:"horizontal"})]}),c.map((f,g)=>VZ(aow,{item:f,xJ:b,Jr:e},g))]})}),jow=a_(a=>VZ(WZ,{OEa:!1,children:VZ(Wi,{...a,variant:"tertiary",icon:__c.Zu,ek:"bottom",ib:M("xDOc3g"),ariaLabel:M("xDOc3g"),ariaHasPopup:"menu",className:"_gakvA"})})),kow=a=>({Icon:__c.bu,
label:M("vjbKjg"),onClick:a,mode:"action"}),low=a=>({Icon:__c.Ix,label:M("IISnzQ"),onClick:a,mode:"action"}),mow=a=>({Icon:__c.to,label:M("/7SR9A"),onClick:a,mode:"action"}),oow=a=>({Icon:__c.VC,label:M("yLDVhw"),onClick:a,mode:"action"});var pow=a_(a=>{const b=a.UN,c=a.WCb;a=a.LNa;const d=k_(()=>BA(b),[b]);return VZ(R,{display:"flex",flexDirection:"column",width:"full",padding:"2u",background:"warnLow",borderBottom:"low",children:o_($q,{spacing:"2u",Fa:"center",align:"center",children:[VZ(Yq,{children:o_($q,{spacing:"1u",Fa:"center",children:[VZ(Yq,{width:"content",children:VZ(__c.FCh,{user:b,size:"medium"})}),VZ(Yq,{children:o_(R,{children:[VZ(Q,{weight:"bold",lineClamp:1,children:M("qzmdJQ")}),VZ(Q,{size:"small",tone:"tertiary",
lineClamp:1,children:d})]})})]})}),c&&VZ(Yq,{width:"content",children:VZ(cow,{onClick:c,loading:a===2,className:"F_1jjw"})})]})})});var qow=({UN:a,uj:b,kur:c})=>{a=a?a.id===b?M("TWOUuA"):J("EemJmw",[BA(a)]):M("84zIFg");return c?VZ(Nu,{tone:"warnLow",width:"full",text:VZ(R,{width:"full",children:VZ(__c.fr,{size:"xsmall",tone:"tertiary",lineClamp:1,children:a})})}):VZ(Q,{size:"small",tone:"tertiary",margins:"legacy",children:a})};var row=({Nea:a,o$a:b,uj:c})=>{const d=new Znw,e=a_(f=>VZ(Ynw,{...f,uj:c,L:d}));f_(()=>{a.Gfj=e;b.Ifj=f=>VZ(qow,{...f,uj:c});b.O0o=pow})};var Vmw=Pb("a467c4a1",!1),sow=Pb("383a47b3",!1),tow=Pb("392d1f2d",!1);var Rgw=["comment-mention","line-break"];var Hgw=a=>{switch(a.type){case "LINK":return new Set(["TEXT"]);case "PARAGRAPH":return new Set(["MENTION","STYLED_TEXT","TEXT","LINK","LINE_BREAK"]);case "BLOCKQUOTE":return new Set("MENTION STYLED_TEXT TEXT LINK LINE_BREAK BLOCKQUOTE PARAGRAPH LIST".split(" "));case "LIST":return new Set("MENTION STYLED_TEXT TEXT LINK LINE_BREAK PARAGRAPH LIST".split(" "));default:throw new u(a);}};var Kgw=[{rule:"CONTENT_LENGTH",kmd:__c.hrb(a=>__c.OYr(a)<=2048,{msg:"content length exceeds maximum allowed"})},{rule:"ALLOWED_CHILDREN",kmd:a=>Igw(a.children)},{rule:"ROOT_NODE_BLOCK_CHILDREN",kmd:a=>__c.Oik(b=>{a:switch(b.type){case "PARAGRAPH":case "BLOCKQUOTE":case "LIST":b="BLOCK";break a;case "LINK":case "LINE_BREAK":case "MENTION":case "STYLED_TEXT":case "TEXT":b="INLINE";break a;default:throw new u(b);}return b==="BLOCK"},()=>({msg:"root node contains children with layout types other than block"}))(a.children)},
{rule:"NODE_DEPTH",kmd:__c.hrb(a=>Jgw(a.children)<=3,{msg:"node depth exceeded maximum"})}];var Sgw=new Set(["CONTENT_LENGTH"]),uow=class{Ime(a,b){const c=Lgw({FN:a});if(c.state==="invalid")throw Error(c.error?.msg);const d=new Map;b.forEach(e=>d.set(e.id,e));b=new bo;Mgw(this,a.children,b,d,{});return b}createTextNode(a,b){a=new __c.w7c({text:a});if(!b||!this.I.V9j)return a;const c=[];for(const [d,e]of Object.entries(b))switch(d){case "font-weight":switch(e){case "bold":c.push(new __c.y7c({fontWeight:1}))}break;case "font-style":switch(e){case "italic":c.push(new __c.A7c({fontStyle:1}))}break;
case "text-decoration":switch(e){case "line-through":c.push(new __c.C7c({decoration:1}))}}return c.length?new __c.E7c({Baf:a,styles:c}):a}constructor(){this.I={V9j:Vmw}}},vow=a=>({"font-weight":a["font-weight"]??"normal","font-style":a["font-style"]??"normal","text-decoration":a["text-decoration"]??"none",link:a.link??void 0,paragraph:a.paragraph??!1,blockquote:a.blockquote??!1,"list-item":a["list-item"]??!1,"list-marker":a["list-marker"]??void 0,"list-level":a["list-level"]?Number(a["list-level"]):
void 0,"blockquote-list-item":a["blockquote-list-item"]??!1}),Ogw=/(https?:\/\/)+([^.:?/#\s])+([.:])+(\S+)/gim,Pgw=/[.,!;]+$/;var xow=class{create(a){return new wow({lPi:this.lPi,Mmb:this.Mmb,...a})}constructor(a){this.lPi=new uow;this.Mmb=a.Mmb}},wow=class{static G(a){O(a,{quill:q_.ref,rha:q_.ref,$Cm:q_.ref,content:q_.ref,wA:q_.shallow,jii:q_.ref,Exc:q_.ref,Wvk:b_,yeh:b_({equals:d_.shallow}),tMf:b_({equals:d_.shallow}),xpf:b_,MOc:b_,l$m:b_})}get bta(){return this.I.bta}get kab(){return this.I.kab}get Ww(){return this.I.Ww}get Wvk(){return this.yeh.length>0}get yeh(){return this.wA.filter(a=>a.id!=="canva-ai")}get tMf(){const a=
xgw(this.I.Mmb,this.yeh).map(b=>b.id);return new Set(a)}get qu(){return Tgw(this.I.lPi,this.Exc)}get xpf(){return this.l5m(this.qu)}get MOc(){var a=this.Exc;return a?.ops==null||a.ops.length===0||a.ops.length===1&&!a.ops[0].insert.trim()}get l$m(){return this.I.jAk&&this.FAk?!d_.structural(this.FAk.ops,this.Exc.ops):!this.MOc}getValue(){let a="";const b=[];this.quill&&(a=Ugw(this,0,this.quill.getLength(),c=>{b.push(c);return`[${c.id}:${c.na}]`}));a.endsWith("\n")&&(a=a.slice(0,a.length-1));return{content:a,
wA:b}}getContents(a,b){return this.quill?this.quill.getContents(a,b).filter(c=>!!c.insert).map(c=>{if(typeof c.insert==="string")return c.insert;if(typeof c.insert==="object"&&"comment-mention"in c.insert)return c.insert["comment-mention"]}):[]}constructor(a){this.I=a;this.quill=(wow.G(this),void 0);this.content="";this.wA=[];this.jii=1;this.FAk=new bo;this.Exc=new bo;const b=a.jAk,c=a.lPi;this.l5m=a.l5m??__c.OYr;if(b){a=b.content;var d=b.qu,e=b.wA;this.Vk=b.id;this.content=a;this.wA=e;d&&(this.FAk=
this.Exc=c.Ime(d,e))}}},yow=class{static G(a){O(a,{i1f:l_,AMj:l_,NMd:l_,HYi:l_,fqa:l_.bound,Zim:l_.bound,JF:l_.bound,FPf:l_.bound,FRf:l_.bound,onEnter:l_.bound,IOb:l_.bound,i8g:l_.bound,R0f:l_.bound,ltm:l_,hC:l_})}i1f(a,b){a.quill=b;this.U5a.i1f(a.Ww,b);const c=a.content,d=a.wA;a=a.Exc;if(a.length()>0)b.setContents(a,"silent");else if(c){a=new bo;for(const e of __c.SYr(c,d))e.type==="text"?a.insert(e.text):e.type==="user"?a.insert({"comment-mention":e}):a.insert(e.url);b.setContents(a,"silent")}}AMj(a){a.quill=
void 0;this.U5a.i1f(a.Ww,void 0)}NMd(a,b){a.rha=b;this.U5a.NMd(a.Ww,b)}Pcf(a){this.laj(a);Wgw(this,a)}laj(a){const b=a.kab,c=a.quill?.getSelection();c?this.$Ee.JVl(b,c.index,(d,e)=>Vgw(a,d,e)):this.$Ee.qhh(b)}FPf(a){const b=a.bta;return a.kab.ZOc?(this.$Ee.DFd(),!1):b.bRe?(this.$Ed.OVe(b),!1):!0}FRf(a){const b=a.bta;return a.kab.ZOc?(this.$Ee.EFd(),!1):b.bRe?(this.$Ed.PVe(b),!1):!0}onEnter(a){if(a.kab.ZOc){const b=this.$Ee.g6k();if(b)return this.TRg(a,b),!1}else if(a.bta.q3b)return this.HYi(a,a.bta.q3b),
!1;return!0}IOb(a){const b=a.kab;return a.bta.V8d||b.ZOc?(this.lma(a),!1):!0}i8g(a){const b=a.quill;var c=a.rha;if(!b||!c)return!0;c=b.getSelection();if(!c)return!0;b.insertText(c.index,"\n","user");c=c.index+1;b.setSelection(c,0);this.NMd(a,{index:c,length:0});return!1}lma(a){const b=a.kab;this.$Ed.hQb(a.bta);this.$Ee.qhh(b)}R0f(a,b){a.jii=b}ltm(a){a.content="";a.wA=[];this.R0f(a,1);a.Exc=new bo;a.quill?.disable();a.quill?.deleteText(0,a.quill.getLength());this.NMd(a,void 0);this.$Ed.hC(a.bta);this.$Ee.hC(a.kab);
this.U5a.hC(a.Ww)}hC(a){this.ltm(a);this.AMj(a)}constructor(a,b,c,d,e,f){this.$Ed=a;this.$Ee=b;this.U5a=c;this.Mmb=d;this.V=e;this.Pik=(yow.G(this),Dnw("quillFormat"));this.K_q=(g,h,k)=>{if(g.quill){var l=g.quill.getFormat();g.quill.format(h,l&&l[h]===k?!1:k,"user");this.Pik.reportChanged()}};this.HFi=g=>{var h=g.rha;if(!h)return!0;(h=this.U5a.Bbr(g.Ww,h))&&this.NMd(g,h);return!g.Ww.R8d};this.TRg=(g,h)=>{this.V.iRa("add_comment_media",{Hb:{name:"ui.collaborating.commenting.add_comment_media",type:"emojiViaShortcut"}},
()=>{const k=g.kab,l=g.quill;if(!l||!k.ZOc)return this.lma(g);const n=k.aFe.index;l.deleteText(n,k.aFe.length,"user");l.insertText(n,h.mwd,"user");l.setSelection(n+h.mwd.length,"user")})};this.HYi=(g,h)=>this.V.iRa("add_comment_mention",{Hb:{name:"ui.collaborating.commenting.add_comment_mention"}},()=>{const k=g.bta,l=g.quill;if(!l||!k.bRe)return this.lma(g);const n=k.eOb.index;l.deleteText(n,k.eOb.length,"user");l.insertEmbed(n,"comment-mention",h,"user");l.getText(n+1,1)===" "?l.setSelection(n+
1,"user"):(l.insertText(n+1," ","user"),l.setSelection(n+2,"user"));this.lma(g)});this.fqa=(g,h,k,l)=>{const n=g.getValue();g.content=n.content;g.wA=n.wA;g.Wvk&&g.tMf.size||this.R0f(g,1);l!=="silent"&&(this.Pcf(g),this.Zim(g,h,k,l));g.quill&&(g.Exc=g.quill.getContents(0,g.quill.getLength()))};this.Zim=(g,h)=>{const k=g.quill;if(k&&h.ops&&h.ops[1]&&h.ops[1].insert===" "){g=k.getText().substring(0,h.ops[0].retain);const l=(h=g.match(/(\S+)$/g))&&h.length>0?h[0]:"",n=__c.dTo.get(l),p=g.lastIndexOf(l);
n&&p>-1&&this.V.iRa("add_comment_media",{Hb:{name:"ui.collaborating.commenting.add_comment_media",type:"emojiViaAutoReplaceEmoticon"}},()=>{const q=(new bo).retain(p).delete(l.length).insert(n);k.updateContents(q,"silent")})}};this.JF=(g,h,k,l)=>{this.NMd(g,h||k);l!=="silent"&&(this.Pcf(g),this.Pik.reportChanged())};switch(f){case 4:this.O_g=4;break;case 5:case 8:this.O_g=5;break;default:this.O_g=1}}};var zow=class{static G(a){O(a,{Gfj:q_.ref,rag:q_.ref,Pjj:q_.ref,LNm:q_.ref,lTb:q_.ref,vSa:q_.ref,Ncg:q_.ref,hnj:q_.ref,Vnd:q_.ref,f6l:q_.ref,xrj:q_.ref,Bod:q_.ref,Eeg:q_.ref,yrj:q_.ref,fhj:q_.ref,Brj:q_.ref,Vpj:q_.ref,Ksj:q_.ref,Exa:q_.ref,zjj:q_.ref,Opj:q_.ref})}constructor(){this.Gfj=(zow.G(this),void 0)}};var Aow=class{static G(a){O(a,{Ifj:q_.ref,O0o:q_.ref,ebg:q_.ref,REh:q_.ref,Q7l:q_.ref,R7l:q_.ref,qpj:q_.ref,cIh:q_.ref,j7n:q_.ref,o4l:q_.ref,aHh:q_.ref})}constructor(){this.Ifj=(Aow.G(this),void 0)}};var Bow=class{static G(a){O(a,{j7b:q_.ref,lnc:b_,Mmo:l_.bound,wSh:l_.bound,itm:l_.bound})}get lnc(){return this.j7b}Mmo(a){this.Cuj=a}wSh(){this.j7b=this.Cuj?{...this.Cuj}:void 0}itm(){this.j7b=void 0}constructor(){this.Cuj=(Bow.G(this),void 0)}};var Cow=class{static G(a){O(a,{link:q_.ref,H_b:q_.ref,R8d:q_.ref,quill:q_.ref,Rqf:b_,ui:b_,isValid:b_})}get Rqf(){if(this.dtd.lnc)return this.dtd.lnc}get ui(){return this.la.layout===2}get wxe(){return!1}get isValid(){return this.link?.type==="url"?__c.Sl(this.link.href).ok:!1}constructor(a){this.link=(Cow.G(this),void 0);this.R8d=!1;this.dtd=new Bow;this.la=a.la}},Dow=class{create(){return new Cow(this.I)}constructor(a){this.I=a}};var ijw=Pb("29e8873d",!1);var $gw=p_(({s9r:a,Q6k:b,message:c})=>VZ("div",{className:"_5mCWYw",children:VZ(Ck,{Tg:!1,tone:"info",size:"small",children:VZ(__c.ak,{message:Gnw(c),uf:d=>d==="log-in"?a():b()})})}));var Eow=class{constructor(a,b){this.ve=a;this.Goi=b;this.renderer=new __c.wC;this.uDl=()=>{this.ve.vC(__c.Il.G2a,"comment",{hhd:"pageview",Uzc:"comment"})};this.mAe=Ygw(this)}};var Fow=class{equals(a){return a&&this.type===a.type&&this.mKd===a.mKd?this.E3c(a):!1}constructor(a){this.type=a.type;this.mKd=a.mKd}},Gow=class extends Fow{get page(){if(this.Xe?.type!=="body")return this.Xe.page}get nh(){return this.Xe?.type==="body"?"responsive_body":this.page?.id}get OOa(){const a=this.Xe;if(a?.type!=="body")return a.container?.type==="concatenated-fixed-page"?a.container.page:a.page}constructor(a){super({type:a.type,mKd:"mutable"});this.Xe=a.Xe}},How=class extends Fow{get nh(){return this.page.id}constructor(a){super({type:a.type,
mKd:"state"});this.page=a.page}},Iow=class{get Qj(){return this.tb?.Qj||[]}set Qj(a){this.tb?this.tb.Qj=a:this.sheet.layout.cells.set({$b:this.row,ec:this.col},{...__c.ws,Qj:a})}get tb(){return this.sheet.layout.cells.get(this.row,this.col)?.ref}equals(a){return this.sheet===a.sheet&&this.row===a.row&&this.col===a.col}constructor(a,b,c){this.sheet=a;this.row=b;this.col=c}},chw=Jnw((a,b,c)=>new Iow(a,b,c)),Hjw=class extends Gow{get target(){return this.Xe.page}E3c(a){return this.Xe.equals(a.Xe)&&!!this.Jed===
!!a.Jed}pPa(a,b){if((b=b(this.Xe.page))&&!__c.hf(this.Xe.page)&&!ug(b))return thw({dimensions:b,zoom:a})}constructor(a){super({...a,type:"fixedPage"});this.Jed=a.Jed}},Jow=class extends How{get target(){return this.page}pPa(a,b){b=b(this.page);var c;if(c=b)c=this.page,c=!(c.type==="fixed"&&c.sheet!=null);if(c&&!ug(b))return thw({dimensions:b,zoom:a})}E3c(a){return Bn.domain.wm(this.page,a.page)}constructor(a){super({...a,type:"fixedPage"})}},Fjw=class extends Gow{static G(a){O(a,{PEe:b_,q4g:b_})}get target(){return this.element}get PEe(){return uhw({element:this.element,
parent:this.parent})}get q4g(){return Math.max(this.PEe.Nb().top,0)}E3c(a){return this.element===a.element&&this.parent===a.parent&&this.Xe.equals(a.Xe)}pPa(a){return vhw({element:this.element,zoom:a,parent:this.parent})}oCf(a){return whw({bva:this.pPa(a)})}constructor(a){super({...a,type:"element"});this.element=(Fjw.G(this),void 0);this.element=a.element;this.parent=a.parent}},yjw=class extends How{get target(){return this.element}get PEe(){return uhw({element:this.element,parent:this.parent})}pPa(a){return vhw({element:this.element,
zoom:a,parent:this.parent})}oCf(a){return whw({bva:this.pPa(a)})}E3c(a){return Bn.domain.wm(this.page,a.page)&&$r.domain.wm(this.element,a.element)&&(this.parent===a.parent||this.parent!=null&&a.parent!=null&&$r.domain.wm(this.parent,a.parent))}constructor(a){super({...a,type:"element"});this.element=a.target;this.parent=a.parent}},Bjw=class extends Gow{static G(a){O(a,{Soa:b_,span:b_,q4g:b_})}get Soa(){if(this.sheet&&this.tb){const a=this.sheet.layout.cells.get(this.tb.row,this.tb.column);return!a||
a.span.$b===this.tb.row&&a.span.ec===this.tb.column?a?a.ref:void 0:void 0}}get span(){if(this.sheet&&this.tb){const a=this.sheet.layout.cells.get(this.tb.row,this.tb.column);return a?a.span:{$b:this.tb.row,ec:this.tb.column,df:this.tb.row,jf:this.tb.column}}}get q4g(){return this.span&&this.sheet?this.sheet.ld(this.span.$b):0}E3c(a){return this.Xe.equals(a.Xe)&&this.sheet===a.sheet&&this.tb?.column===a.tb?.column&&this.tb?.row===a.tb?.row}pPa(a){if(this.span&&this.sheet)return __c.Ak(this.sheet,this.tb.column,
this.tb.row).scale(a).Nb()}oCf(a){return whw({bva:this.pPa(a)})}constructor(a){super({...a,type:"sheetPageCell"});this.tb=(Bjw.G(this),void 0);this.tb=a.tb;this.sheet=a.sheet;this.target=chw(this.sheet,this.tb.row,this.tb.column)}},Kow=class extends How{get target(){return this.tb}get span(){const a=this.sheet.St.cells.get(this.tb.row,this.tb.column);return a?a.span:{top:this.tb.row,left:this.tb.column,bottom:this.tb.row,right:this.tb.column}}pPa(a){if(this.span)return Oj({top:this.span.top,left:this.span.left,
width:this.span.right-this.span.left,height:this.span.bottom-this.span.top}).scale(a).Nb()}oCf(a){return whw({bva:this.pPa(a)})}E3c(a){return Bn.domain.wm(this.page,a.page)&&__c.$Tc.domain.wm(this.sheet,a.sheet)&&a.tb.column===this.tb.column&&a.tb.row===this.tb.row}constructor(a){super({...a,type:"sheetPageCell"});this.tb=a.tb;this.sheet=a.sheet}},Djw=class extends Gow{static G(a){O(a,{Soa:b_,span:b_,q4g:b_})}get Soa(){if(this.sheet&&this.tb){const a=this.sheet.layout.cells.get(this.tb.row,this.tb.column);
return!a||a.span.$b===this.tb.row&&a.span.ec===this.tb.column?a?a.ref:void 0:void 0}}get span(){if(this.sheet&&this.tb){const a=this.sheet.layout.cells.get(this.tb.row,this.tb.column);return a?a.span:{$b:this.tb.row,ec:this.tb.column,df:this.tb.row,jf:this.tb.column}}}get q4g(){return this.span&&this.sheet?this.sheet.ld(this.span.$b):0}E3c(a){return this.Xe.equals(a.Xe)&&this.sheet===a.sheet&&this.parent===a.parent&&this.element===a.element&&this.tb?.column===a.tb?.column&&this.tb?.row===a.tb?.row}pPa(a){if(this.span&&
this.sheet)return __c.Ak(this.sheet,this.tb.column,this.tb.row).transform(__c.Tj(Oj(this.element))).scale(a).Nb()}oCf(a){return whw({bva:this.pPa(a)})}constructor(a){super({...a,type:"sheetElementCell"});this.tb=(Djw.G(this),void 0);this.tb=a.tb;this.sheet=a.sheet;this.element=a.element;this.parent=a.parent;this.target=chw(this.sheet,this.tb.row,this.tb.column)}},Ajw=class extends How{get target(){return this.tb}get span(){const a=this.sheet.St.cells.get(this.tb.row,this.tb.column);return a?a.span:
{top:this.tb.row,left:this.tb.column,bottom:this.tb.row,right:this.tb.column}}pPa(a){return Oj({top:this.span.top,left:this.span.left,width:this.span.right-this.span.left,height:this.span.bottom-this.span.top}).transform(__c.Tj(Oj(this.element))).scale(a).Nb()}oCf(a){return whw({bva:this.pPa(a)})}E3c(a){return Bn.domain.wm(this.page,a.page)&&__c.GSc.domain.wm(this.sheet,a.sheet)&&$r.domain.wm(this.element,a.element)&&(this.parent===a.parent||this.parent!=null&&a.parent!=null&&__c.sMb.domain.wm(this.parent,
a.parent))&&a.tb.column===this.tb.column&&a.tb.row===this.tb.row}constructor(a){super({...a,type:"sheetElementCell"});this.tb=a.tb;this.element=a.element;this.sheet=a.sheet;this.parent=a.parent}},giw=class extends Gow{get target(){return this.ZS}get Sc(){return this.ZS.Sc}pPa(){throw Error("Not implemented.");}E3c(a){return this.Xe.equals(a.Xe)&&this.ZS===a.ZS}constructor(a){super({...a,type:"connectedRange"});this.ZS=a.ZS}},Low=class extends Gow{static G(a){O(a,{Soa:b_,span:b_})}get Sc(){return this.Xe.text}get Soa(){if(this.sheet&&
this.tb){const a=this.sheet.config.layout.cells.get(this.tb.row,this.tb.column);return!a||a.span.$b===this.tb.row&&a.span.ec===this.tb.column?a?a.ref:void 0:void 0}}get span(){if(this.sheet&&this.tb){const a=this.sheet.config.layout.cells.get(this.tb.row,this.tb.column);return a?a.span:{$b:this.tb.row,ec:this.tb.column,df:this.tb.row,jf:this.tb.column}}}pPa(a){if(fhw(this))return __c.Ak(this.sheet.config,this.tb.column,this.tb.row).scale(a).Nb()}E3c(a){return this.Xe.equals(a.Xe)&&this.sheet===a.sheet&&
this.tb?.column===a.tb?.column&&this.tb?.row===a.tb?.row}constructor(a){super({...a,type:"sheetItemCell"});this.tb=(Low.G(this),void 0);this.tb=a.tb;this.sheet=a.sheet;this.target=chw(this.sheet.config,this.tb.row,this.tb.column);this.container=a.container;this.range=a.range}};var $mw=class{static G(a){O(a,{zdb:q_.ref,huc:q_.ref,gjb:q_.shallow,Sxe:q_.shallow,u5a:b_,state:b_,Y8:b_,R$m:b_,media:b_,attachments:b_})}get u5a(){return!!this.zdb||!!this.gjb.size}get state(){const a=Array.from(this.gjb.values()).map(b=>b.state);return a.some(b=>b==="error")?"error":a.some(b=>b==="pending")?"pending":"idle"}get Y8(){return this.state==="pending"}get R$m(){if(!this.WCj.length)return this.u5a;const a=this.WCj.find(Ahw)?.id!==this.zdb?.id;var b=this.WCj.filter(Bhw);b=new Set(b.map(d=>
d.id));const c=new Set(this.gjb.keys());b=b.size!==c.size||![...b].every(d=>c.has(d));return a||b}get media(){return Array.from(this.gjb.values())}get attachments(){const a=[];this.zdb&&a.push(Chw(this.zdb));this.gjb.forEach(b=>{var c=a.push;a:{if(!b.media)throw Error(`Media item ${b.id} is missing media content`);switch(b.type){case "VIDEO":b=new __c.z2m({position:1,id:b.id,video:b.media});break a;case "IMAGE":b=new __c.x2m({position:1,id:b.id,media:b.media});break a;default:throw new u(b);}}c.call(a,
b)});return a}constructor(a=[]){this.WCj=a;this.zdb=($mw.G(this),void 0);this.huc=!1;this.gjb=new Map;this.Sxe=new Set;this.zdb=Fhw(a);f_(()=>{yhw(a).forEach(b=>{this.gjb.set(b.id,b)})})}},Mow=class{static G(a){O(a,{IKo:l_,Eio:l_,yFm:l_,juk:l_,rFa:l_,oXf:l_,hC:l_})}IKo(a){a.huc=!a.huc}Eio(a,b){a.zdb=b;a.huc=!1}yFm(a){a.zdb=void 0}async juk(a,b,c){const d=b.pxa,e=b.upload;b=URL.createObjectURL(b.file);a.gjb.set(d,c("pending",b));try{await e.finished,f_(()=>{a.Sxe.has(d)?a.Sxe.delete(d):a.gjb.has(d)&&
a.gjb.set(d,c("idle"))})}catch(f){f_(()=>{a.Sxe.has(d)?a.Sxe.delete(d):a.gjb.has(d)&&a.gjb.set(d,c("error"))})}finally{URL.revokeObjectURL(b)}}async rFa(a,b){var c=m(this.$U);const d=b.map(e=>({...__c.Rhf(e)}));c=await c(d,"commenting","background");await Promise.all([...c.hna.map((e,f)=>e?Dhw(this,a,e,b[f]):Promise.resolve()),...c.mBa.map((e,f)=>e?Ehw(this,a,e,b[f]):Promise.resolve())])}oXf(a,b){const c=a.gjb.get(b);c?.thumbnailUrl&&URL.revokeObjectURL(c.thumbnailUrl);a.gjb.delete(b);c?.state===
"pending"&&a.Sxe.add(b)}hC(a){a.huc=!1;a.zdb=void 0;a.gjb.forEach(b=>{b.thumbnailUrl&&URL.revokeObjectURL(b.thumbnailUrl)});a.gjb.clear();a.Sxe.clear()}constructor(a){this.$U=a;Mow.G(this)}};var Smw=class{static G(a){O(a,{aFe:q_.struct,kNe:q_.ref,ZOc:b_})}get ZOc(){return!!this.aFe.term&&this.kNe}constructor(){this.aFe=(Smw.G(this),{term:"",index:-1,length:-1,unf:-1});this.kNe=!1}},Now=class{static G(a){O(a,{hC:l_.bound,qhh:l_})}hC(a){this.qhh(a)}qhh(a){a.aFe={term:"",index:-1,length:-1,unf:-1};a.kNe=!1}JVl(a,b,c){for(var d=b-1;d>=0;d--){var e=c(d,1);if(!e||e==="\ufffd")break;else if(!e.trim())break;else if(e===":"){if(d!==0&&(e=c(d-1,1),!/\s/.test(e)))break;e=d+c(d).search(/(\s|\uFFFD|$)/)-
d;c=c(d,e);a.aFe={term:c,index:d,length:e,unf:b-d};this.Vzg.Idb(c.replace(":","").replace(/-/g," "),{Te:"editor_comments_text_colon_shortcut"});a.kNe=this.Vzg.kNe({});return}}this.qhh(a)}DFd(){this.Vzg.DFd({})}EFd(){this.Vzg.EFd({})}g6k(){return this.Vzg.Who({Te:"editor_comments_text_colon_shortcut"})}constructor(a){this.Vzg=a;Now.G(this)}};var Qmw=class extends __c.uCh{static G(a){O(a,{eOb:q_.struct,fVg:q_.ref,AZd:b_,bRe:b_,V8d:b_,q3b:b_})}get AZd(){return this.eOb.term}get bRe(){return!!this.eOb.term&&this.wsb.xg.length>0}get V8d(){return this.bRe||this.xa||this.hasError}get q3b(){if(this.bRe)return super.q3b}constructor(...a){super(...a);this.eOb=(Qmw.G(this),{term:"",index:-1,length:-1,unf:-1});this.fVg=!1}},Oow=class extends __c.vCh{static G(a){O(a,{Pcf:l_.bound,Ow:l_})}hQb(a){a.eOb={term:"",index:-1,length:-1,unf:-1};a.fVg=!1;
super.hQb(a)}s5m(a){return a.substring(1)}JVl(a,b,c){var d=-1;const e=b-1;for(let g=e;g>=0;g--){var f=c(g,1);if(!f||f==="\ufffd")break;else if(!f.trim())if(d===-1)d=g;else break;else if(f==="@"){if(g!==0&&(f=c(g-1,1),!/\s/.test(f)))break;if(d===g+1)break;d=e+c(e).search(/(\s|\uFFFD|$)/)-g;c=c(g,d);a.eOb={term:c,index:g,length:d,unf:b-g};c==="@"&&(a.fVg=!1);return}}this.hQb(a)}Ow(a,b){a.fVg?a.xa=!1:(a.xa=b,a.fVg=!0)}constructor(...a){super(...a);this.Pcf=(Oow.G(this),__c.Db(async b=>{const c=b.eOb.term;
if(!c)this.hQb(b);else if(b.wsb.term!==c){var d=c.startsWith("@");sa(d,'Mention search term must start with "@"');try{this.Ow(b,!0);f_(()=>{b.hasError=!1;b.dbb=!1});let {results:e,dbb:f}=await this.pie(c.substring(1),!1);const g=c.substring(0,b.eOb.unf);e.length||c===g||({results:e,dbb:f}=await this.pie(g.substring(1),!1),f_(()=>{b.eOb={...b.eOb,term:g,length:g.length}}));this.Ow(b,!1);if(b.eOb.term===c||b.eOb.term===g)this.lAl(b,{term:b.eOb.term,xg:c.length>1?e:e.slice(0,15)}),f_(()=>b.dbb=f)}catch(e){f_(()=>
b.hasError=!0)}finally{this.Ow(b,!1)}}},200))}};var Pow=new __c.Si("draft_comment_"),Qow=class{static G(a){O(a,{bte:q_.ref,ref:b_})}get ref(){const a=this.bte;return a&&YZ(a)?fhw(a)?a:void 0:a}set ref(a){this.bte=a}constructor(a){this.type=(Qow.G(this),"comment");this.Sra=new $mw;var b=a.uj;const c=a.goc;var d=a.hoc;this.mg=a.mg;a=new Qmw({uj:b});b=new Smw;d=d.create();this.guf=c.create({bta:a,kab:b,Ww:d})}},Row=class{constructor(a){this.type="draft";this.id=Pow.next();this.created=Date.now();this.Sra=new $mw;const b=a.uj,c=a.goc;var d=a.hoc;const e=
new Qmw({uj:b}),f=new Smw;d=d.create();this.ref=a.ref;this.UJb=c.create({bta:e,kab:f,Ww:d});this.Lhm=new bnw(this.UJb,b)}};var Sow=a=>a.type==="comment",Qlw=a=>a.type==="ai",e_=a=>a.type==="suggestion",Tow=a=>a.type==="suggestion"&&!!a.ZQe;var Uow=__c.Pk(__c.Po("n")),kkw=a=>!a.mg.comment.kj,Whw=({types:a})=>a.reduce((b,c)=>{switch(c.type){case "ADD":b.add=c.content;break;case "REMOVE":b.remove=c.content;break;case "FORMAT":b.formats||(b.formats=[]);b.formats.push(c.format);break;default:throw new u(c);}return b},{}),Wow=a=>{const b=[];a.add&&b.push({type:"ADD",content:a.add});a.remove&&b.push({type:"REMOVE",content:a.remove});a.formats?.length&&a.formats.forEach(c=>{b.push({type:"FORMAT",format:c,GG:Vow(c)})});return{types:b}},Xhw=
a=>{switch(a){case 1:break;case 2:return"accepted";case 3:return"rejected";default:throw new u(a);}},Vow=a=>{switch(a){case "fontFamily":return 1;case "fontSize":return 2;case "fontWeight":return 3;case "fontStyle":return 4;case "color":return 5;case "decoration":return 6;case "strikethrough":return 7;case "link":return 8;case "letterSpacing":return 9;case "lineHeight":return 10;case "direction":return 11;case "textAlign":return 12;case "listMarker":return 13;case "listLevel":return 14;case "marginInlineStart":return 15;
case "textIndent":return 16;case "backgroundColor":return 17;case "backgroundBorderRadius":return 18;case "backgroundBleed":return 19;case "fontKerning":return 20;case "fontFeatureLiga":return 21;case "fontFeatureClig":return 22;case "fontFeatureCalt":return 23;case "fontSizeModifier":return 24;case "verticalAlign":return 25;default:throw new u(a);}},Yow=(a,b)=>{if(b){a=zf(a);var c=b.Fp,d=b.inner,e=b.elements;switch(b.type){case "audio":break;case "pages":if(!c)break;if(d)switch(d.type){case "sheet":return b=
d?.type==="sheet"&&d.cells.size>0?d.cells.map(f=>f):void 0,{Xe:a.xb(c),cells:b,sheet:c.sheet,Jed:void 0};case "pages":return{Xe:a.xb(d.page).xb(c),Jed:void 0};default:return{Xe:a.xb(c),Jed:void 0}}return b.Pd?.type==="concatenated-fixed"?{Xe:a.xb(b.Pd).xb(c),Jed:void 0}:{Xe:a.xb(c),Jed:!1};case "elements":return d&&(a=Xow(d,b.container,e))?a:{Xe:b.container,elements:e};default:throw new u(b);}}},Xow=(a,b,c)=>{switch(a.type){case "group":return{Xe:b,elements:a.pb,parent:a.group};case "grid":if(a.container.container.type===
"group-element")return{Xe:b,elements:[a.grid],parent:a.container.container.group};break;case "table":if(a.container.container.type==="group-element")return{Xe:b,elements:[a.table],parent:a.container.container.group};break;case "shape":if(a.container.container.type==="group-element")return{Xe:b,elements:[a.shape],parent:a.container.container.group};break;case "sheet":if(a.cells.size>0)return{Xe:b,cells:[...a.cells],sheet:a.sheet.config,elements:c};break;case "layout":case "layout-cell":case "sheet-cell-media":break;
default:throw new u(a);}},xkw=({ref:a,pd:b,Za:c})=>{let d=[];XZ(a)&&(d=ehw(a,{pd:b,YJb:(e,f)=>c.YJb(e,f)}));return d},Zow=class{static G(a){O(a,{$Ch:b_({equals:d_.shallow})})}get $Ch(){return $hw(this.group.pb.toArray(),this.group,this.YNg,this.cer)}constructor(a,b,c){this.group=a;this.YNg=b;this.cer=c;Zow.G(this)}},$ow=class{static G(a){O(a,{list:b_({equals:d_.shallow})})}get list(){const a=[];if(!this.target.Qj)return a;for(const b of this.target.Qj){const c=this.U3q(b);c&&a.push(c)}return a}constructor(a,
b){this.target=a;this.U3q=b;$ow.G(this)}},apw=class{static G(a){O(a,{B3f:b_.struct,$Ch:b_({equals:d_.shallow})})}get B3f(){const a=this.$Ch.slice(0);a.sort(biw(this.fj));return a.map(({element:b,parent:c})=>({element:b,parent:c}))}get $Ch(){const a=this.page.elements.toArray(),b=$hw(a,void 0,this.YNg,this.Jvk);a.forEach((c,d)=>{c.type==="group"&&this.Y3q(c).$Ch.forEach(({element:e,parent:f,key:g})=>{b.push({element:e,parent:f,key:{...g,yKi:d}})})});return b}constructor(a,b,c,d,e){this.page=a;this.Y3q=
b;this.fj=c;this.YNg=d;this.Jvk=e;apw.G(this)}};var bpw=class{static G(a){O(a,{Kjc:l_.bound,M3e:l_.bound,eBc:l_.bound,NBc:l_.bound,atm:l_.bound})}async Cie(a,b){this.I.Uaa.$xl(!0);try{return qhw(a.ref)||ZZ(a.ref)?diw(this,a,b):fiw(this,a,b)}finally{this.I.Uaa.$xl(!1)}}async Kjc({store:a,va:b,uq:c}){const d=a.ref;if(!d||!ghw(d))return Ma();const e=$Z(a),f=this.I.t8;var g=this.I.V;a.mg.comment.gW="pending";g=await g.ug("create_new_comment",b,()=>{d&&(YZ(d)?d.span&&!d.Soa&&d.sheet.config.layout.cells&&d.sheet.config.layout.cells.set(d.span,{...__c.ws}):
(khw(d)||mhw(d))&&d.span&&!d.Soa&&d.sheet.layout.cells&&d.sheet.layout.cells.set(d.span,{...__c.ws}));return f.ATj({store:a,uq:c,ref:d})});g=await Promise.resolve(g);g.ok?(this.atm({J$s:e,store:a,uq:c}),b.qe()):(f_(()=>a.mg.comment.gW="error"),b.end("error"));return g}e$a(a){this.I.KKf.Gll($Z(a));a.ref&&XZ(a.ref)&&a.ref.ZS.disconnect()}f4c({draft:a,value:b,va:c}){const d=this.I.t8,e=this.I.KKf,f=$Z(a);return this.I.V.VU("create_pending_comment",c,l_(()=>{const g=d.URj(b);g.ref=a.ref;e.Pcm({ref:a.ref,
store:g});e.Gll(f);return g}))}pEg(a){return a.mg.kF.length<a.mg.Lta?this.I.t8.Ebd(a):Promise.resolve()}Jgb(a){return this.I.t8.Jgb(a)}M3e({store:a,fZ:b,uq:c}){b.gW="pending";return this.I.t8.Jgb({store:a,value:{grant:b.mqa?.grant,content:b.content,qu:b.qu,wA:b.mqa?.wA||[],attachments:b.mqa?.attachments||[]},uq:c,vGs:b})}hpb(a){return this.I.t8.hpb(a)}Tyb(a){return this.I.t8.Tyb(a)}eBc({comment:a,C_i:b}){b?a.MKb||(a.MKb={Sra:new $mw(a.attachments),uba:this.I.goc.create({bta:new Qmw({uj:this.I.uj}),
kab:new Smw,Ww:this.I.hoc.create(),jAk:a})}):a.MKb=void 0}o$b({store:a,value:b,uq:c}){Ghw(a.mg.comment);this.eBc({comment:a.mg.comment,C_i:!1});b=this.I.t8.o$b({store:a,value:b,uq:c});this.I.yVb.Mhc(a.mg.comment,void 0);return b}IWb({store:a,fZ:b,value:c,uq:d}){this.eBc({comment:b,C_i:!1});a=this.I.t8.IWb({store:a,fZ:b,value:c,uq:d});this.I.yVb.Mhc(b,void 0);return a}iQb({store:a,action:b,uq:c}){return this.I.t8.iQb({store:a,action:b,uq:c})}FBc({store:a,KQd:b}){return this.I.t8.FBc({store:a,KQd:b})}Amb({gxa:a}){return this.I.t8.aud({gxa:a})}async NBc({gxa:a,
content:b}){a=this.I.Fu.EEc.get(a);if(!a||!e_(a.mg.comment))return Ma();a.mg.comment.content=b;a.mg.comment.updated=Date.now();return this.I.t8.NBc({store:a})}atm({J$s:a,store:b,uq:c}){this.I.KKf.e$n(a);b.mg.kF.filter(Sow).forEach(d=>{this.Jgb({store:b,value:{grant:d.mqa?.grant,content:d.content,qu:d.qu,wA:d.wA||[],attachments:d.attachments||[]},uq:c})})}constructor(a){this.I=a;this.bXa=(bpw.G(this),this.I.QSa.mAe(({reference:b=hiw(this),source:c})=>{if(b){var d=this.I.V,e=this.I.uj,f=this.I.goc,
g=this.I.t8,h=this.I.KKf,k=this.I.errorService,l=this.I.hoc,n=d.wb("start_draft_comment",{Hb:{name:"ui.collaborating.commenting.start_draft_comment",type:c}});try{const p=d.VU("create_comment_store",n,()=>{const q=new Row({ref:b,uj:e,goc:f,hoc:l});h.wcm({store:q,ref:b});__c.Uo({ob:n.ob(),P:g.N,event:cpw,props:{ka:g.ka,source:c}});return q});n.qe();return p}catch(p){k.error(p,{La:"Unable to start draft comment"}),n.end("error")}}},{default:void 0}))}};var dpw={eventType:"editor_comment_editing_session_completed",Oa(a){return jf({comment_id:a.Vk,start_text_length:a.BIl,end_text_length:a.Cak,text_change_count:a.SXc,editing_context:a.Ca==null?void 0:mf(a.Ca),event_timing_summaries:a.zEg!=null?[...a.zEg].reduce((b,[c,d])=>(b[c]=__c.Qee(d),b),{}):void 0,performance_context:a.Tb==null?void 0:__c.pf(a.Tb)})}},epw={eventType:"editor_comment_edited",Oa(a){return jf({document_id:a.ka,type:a.type,comment_id:a.Vk,has_mentions:a.tAd,mention_sources:a.hVe,editing_context:a.Ca==
null?void 0:mf(a.Ca),has_text:a.fbb,has_media:a.u5a,media:a.media?.map(b=>iiw(b)),has_links:a.f_a,reply_id:a.Wba,mentioned_user_ids:a.e1g,comment_source:a.uq})}},pmw={eventType:"editor_comment_deleted",Oa(a){return jf({document_id:a.ka,type:a.type,comment_id:a.Vk,assignee_id:a.Yla,editing_context:a.Ca==null?void 0:mf(a.Ca),reply_id:a.Wba,comment_source:a.uq})}},fpw={eventType:"editor_comment_added",Oa(a){return jf({document_id:a.ka,type:a.type,comment_id:a.Vk,has_mentions:a.tAd,assignee_id:a.Yla,
mention_sources:a.hVe,editing_context:a.Ca==null?void 0:mf(a.Ca),has_text:a.fbb,has_media:a.u5a,media:a.media?.map(b=>iiw(b)),has_links:a.f_a,reply_id:a.Wba,mentioned_user_ids:a.e1g,comment_source:a.uq})}},tmw={eventType:"editor_comment_resolved",Oa(a){return jf({document_id:a.ka,comment_id:a.Vk,replies:a.kF,has_mentions:a.tAd,assignee_id:a.Yla,mention_sources:a.hVe,editing_context:a.Ca==null?void 0:mf(a.Ca),comment_source:a.uq})}},wmw={eventType:"editor_comment_unresolved",Oa(a){return jf({document_id:a.ka,
comment_id:a.Vk,replies:a.kF,has_mentions:a.tAd,assignee_id:a.Yla,mention_sources:a.hVe,editing_context:a.Ca==null?void 0:mf(a.Ca),unresolve_source:a.KQd})}},gpw={eventType:"editor_comment_opened",Oa(a){return jf({view:a.view,comment_source:a.uq,thread_count:a.Hga,comment_id:a.Vk,editing_context:a.Ca==null?void 0:mf(a.Ca)})}},cpw={eventType:"editor_comment_add_button_clicked",Oa(a){return jf({document_id:a.ka,source:a.source,editing_context:a.Ca==null?void 0:mf(a.Ca),comment_source:a.uq})}},hpw={eventType:"editor_comment_media_interacted",
Oa(a){return jf({resource_id:a.resourceId,media_category:a.YUe,action:a.action,source:a.source,editing_context:a.Ca==null?void 0:mf(a.Ca),comment_source:a.uq})}},ipw={eventType:"editor_comment_media_button_clicked",Oa(a){return jf({type:a.type,action:a.action,editing_context:a.Ca==null?void 0:mf(a.Ca),comment_id:a.Vk,reply_id:a.Wba,comment_source:a.uq})}},Skw={eventType:"editor_comment_reaction_clicked",Oa(a){return jf({reaction_id:a.$Pb,comment_id:a.Vk,reply_id:a.Wba,reacted:a.tqa,source:a.source,
editing_context:a.Ca==null?void 0:mf(a.Ca),comment_source:a.uq})}},jpw={eventType:"editor_comment_link_clicked",Oa(a){return jf({comment_id:a.Vk,reply_id:a.Wba,hostname:a.hostname,editing_context:a.Ca==null?void 0:mf(a.Ca),comment_source:a.uq})}},kpw={eventType:"editor_comment_navigation_arrow_clicked",Oa(a){return jf({direction:a.direction,current_position:a.currentPosition,total_comments:a.vft,comment_source:a.uq,status:a.status,from_comment_id:a.M0q,to_comment_id:a.Mdt,editing_context:a.Ca==null?
void 0:mf(a.Ca)})}},lpw={eventType:"editor_comment_link_copied",Oa(a){return jf({comment_source:a.uq,comment_id:a.Vk,reply_id:a.Wba,status:a.status,editing_context:a.Ca==null?void 0:mf(a.Ca)})}},mpw={eventType:"editor_comment_link_opened",Oa(a){return jf({comment_id:a.Vk,reply_id:a.Wba,source:a.source,editing_context:a.Ca==null?void 0:mf(a.Ca)})}},npw={eventType:"editor_comment_display_interacted",Oa(a){return jf({action:a.action,change_visibility_target:a.Lnf,type:a.type,source:a.source,direct:a.bhb,
editing_context:a.Ca==null?void 0:mf(a.Ca)})}};var opw=({url:a,Vk:b,gi:c,source:d,jt:e,vJa:f,kQd:g})=>{if(!__c.Sl(a).ok)return a;const h=g(__c.Kv(a),"comment");return VZ(__c.Ui,{onClick:k=>{k.preventDefault();f({Vk:c,Wba:c===b?void 0:b,hostname:(new URL(a)).hostname,uq:d!=="other"?d:void 0});e(h)},href:h,children:a})};var ppw=({P:a,o$a:b,iec:c,e9:d})=>{const e=h=>a.track(jpw,h),f=h=>{h=new __c.pk({target:1,uri:h});c.jt(h,{target:"_blank"})},g=h=>VZ(opw,{...h,jt:f,vJa:e,kQd:d.kQd});f_(()=>{b.ebg=g})};var qpw=a=>{const b=a.W7p;return VZ(Nu,{...a,text:b<=9?J("12/rxw",[b]):M("J/XaOw"),bfb:"-1u",children:VZ(__c.OH,{size:"medium"})})},zkw=({Hga:a,Hsb:b})=>b||a?VZ(qpw,{tone:b?"critical":"neutralLow",W7p:b||a}):VZ(__c.W6m,{size:"medium"});var spw=class extends vnw{render(){const {Hsb:a,Hga:b,XOh:c="left",V8:d,AR:e,Bj:f,onClick:g,onMouseEnter:h,onMouseLeave:k}=this.props,l=a?J("aQx2Bg",[a]):J("tH2+aA",[b]),n=o_(c_,{children:[VZ(rpw,{XOh:c,V8:d,Bj:f}),VZ("div",{className:"_0pWv8A",children:this.UVp})]});return VZ(__c.hr,{className:r_("OA3_vA",{NMdkUA:!f,uI1wlA:f}),onClick:g,onMouseEnter:h,onMouseLeave:k,ariaLabel:l,ib:e?void 0:l,ek:"top",M$:!0,children:a?VZ(__c.Pu,{bfb:"0",children:n}):n})}get b8p(){const a=this.props.Hga;return a<=
9?J("12/rxw",[a]):M("J/XaOw")}get UVp(){var a=this.props.nji;const b=this.props.Hga,c=this.props.Klf,d=this.props.fK;return this.props.hasError?VZ("div",{className:"L9SnpA wygfVQ",children:VZ(__c.Xt,{size:"small"})}):a?VZ("div",{className:"okEKHw wygfVQ",children:VZ(__c.bu,{size:"small"})}):b===1?(a=c?__c.Fn(c.Jc.images,"xsmall"):void 0,VZ("div",{className:r_({_s_VpA:!!a,_4g34ag:!a}),children:VZ(d,{user:c,size:"xsmall",gic:!1})})):VZ("div",{className:r_("wygfVQ"),children:VZ(Q,{weight:"bold",tone:__c.cr,
children:this.b8p})})}},rpw=({XOh:a="left",V8:b,Bj:c=!1})=>{const d=znw();return VZ("span",{className:r_("lANG5g",{VxH5Tg:b,_0_EuA:!c,_9ggYtw:a==="right"}),children:o_("svg",{width:"36",height:"36",viewBox:"0 0 36 36",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[o_("mask",{id:d,maskUnits:"userSpaceOnUse",x:"0.000488281",y:"0",width:"36",height:"36",fill:"black",children:[VZ("rect",{fill:"white",x:"0.000488281",width:"36",height:"36"}),VZ("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.0002 34.9995C27.3889 34.9995 34.9999 27.3884 34.9999 17.9997C34.9999 8.61104 27.3889 1 18.0002 1C8.61152 1 1.00049 8.61104 1.00049 17.9997C1.00049 21.5077 2.06304 24.7675 3.88385 27.4749L2.89472 32.7111C2.65526 33.9787 3.88484 35.0261 5.09825 34.5881L9.79627 32.8924C12.2287 34.2352 15.0252 34.9995 18.0002 34.9995Z"})]}),
VZ("path",{fillRule:"evenodd",clipRule:"evenodd",d:"M18.0002 34.9995C27.3889 34.9995 34.9999 27.3884 34.9999 17.9997C34.9999 8.61104 27.3889 1 18.0002 1C8.61152 1 1.00049 8.61104 1.00049 17.9997C1.00049 21.5077 2.06304 24.7675 3.88385 27.4749L2.89472 32.7111C2.65526 33.9787 3.88484 35.0261 5.09825 34.5881L9.79627 32.8924C12.2287 34.2352 15.0252 34.9995 18.0002 34.9995Z",fill:"currentColor"}),VZ("path",{d:"M3.88385 27.4749L4.86647 27.6605L4.94264 27.2573L4.71364 26.9168L3.88385 27.4749ZM2.89472 32.7111L3.87734 32.8967L2.89472 32.7111ZM5.09825 34.5881L5.43775 35.5287H5.43775L5.09825 34.5881ZM9.79627 32.8924L10.2796 32.017L9.88292 31.798L9.45677 31.9518L9.79627 32.8924ZM33.9999 17.9997C33.9999 26.8361 26.8366 33.9995 18.0002 33.9995V35.9995C27.9412 35.9995 35.9999 27.9407 35.9999 17.9997H33.9999ZM18.0002 2C26.8366 2 33.9999 9.16332 33.9999 17.9997H35.9999C35.9999 8.05875 27.9412 0 18.0002 0V2ZM2.00049 17.9997C2.00049 9.16332 9.16381 2 18.0002 2V0C8.05924 0 0.000488281 8.05875 0.000488281 17.9997H2.00049ZM4.71364 26.9168C3.0003 24.3692 2.00049 21.3028 2.00049 17.9997H0.000488281C0.000488281 21.7127 1.12577 25.1658 3.05406 28.0329L4.71364 26.9168ZM3.87734 32.8967L4.86647 27.6605L2.90123 27.2893L1.9121 32.5255L3.87734 32.8967ZM4.75876 33.6475C4.27339 33.8227 3.78156 33.4037 3.87734 32.8967L1.9121 32.5255C1.52897 34.5537 3.49628 36.2295 5.43775 35.5287L4.75876 33.6475ZM9.45677 31.9518L4.75875 33.6475L5.43775 35.5287L10.1358 33.833L9.45677 31.9518ZM18.0002 33.9995C15.1985 33.9995 12.5678 33.2802 10.2796 32.017L9.31298 33.7679C11.8896 35.1903 14.8519 35.9995 18.0002 35.9995V33.9995Z",
className:"nDHjrA",mask:`url(#${d})`})]})})};var kiw=parseInt("36px",10)||36,tpw=a_(({Qge:a,qQp:b,ZOb:c,sD:d,GQj:e,fj:f,V8:g,oc:h,T9:k="avatar_dynamic",Hga:l,Hsb:n,nji:p,hasError:q,Klf:r,Bj:t=!1,onClick:v,onMouseEnter:w,onMouseLeave:x,fK:y})=>{const [z,B]=h_(null),[C,G]=h_("left"),[H,K]=h_(null),[L,N]=h_(null),P=k_(()=>{const ba={bottom:d.je+Uc,top:d.ld+Uc};return f?{...ba,left:d.sf,right:d.yd}:{...ba,left:d.yd,right:d.sf}},[f,d]),{update:T,floatingStyles:V}=Lnw({elements:{reference:z,floating:H},placement:"right-start",whileElementsMounted:Mnw,
transform:!1,middleware:oiw({T9:k,vQh:Uc,ZOb:c,KRs:G})}),{update:W,floatingStyles:aa}=Lnw({elements:{reference:H,floating:L},placement:"right-start",whileElementsMounted:Mnw,middleware:piw({sRh:P,ZOb:c,T9:k})});j_(()=>{if(z&&H){var ba=Cnw(()=>{a.get()&&(T(),W())},{scheduler:requestAnimationFrame});return()=>ba()}},[a,z,H,T,W]);j_(()=>{if(L){var ba=new Knw["default"](da=>{for(const la of da)la.target===L&&W()});ba.observe(L);return()=>ba.disconnect()}},[L,W]);j_(()=>{b.current&&B(b.current)},[b]);
c=k_(()=>{switch(k){case "avatar_dynamic":case "avatar_static":return!0;case "notch":return g||h||p||q;default:return!1}},[k,g,h,p,q]);return o_(c_,{children:[z&&VZ("div",{ref:K,style:V,children:c&&VZ(spw,{Hga:l,Hsb:n,XOh:C,nji:p,hasError:q,Klf:r,onClick:v,onMouseEnter:w,onMouseLeave:x,V8:g,Bj:t,fK:y})}),e&&H&&VZ("div",{ref:N,className:"FlYOvA",style:aa,children:e})]})});var upw=a_(xnw(({oon:a,LW:b,Qge:c,ko:d},e)=>{j_(()=>{const f=Cnw(()=>{var g=c.get();if(g&&e){var h=e.current;if(h){var k=`translate(${g.left}px, ${g.top}px) rotate(${(Oj(g).rotation+360)%360}deg)`,l=g.width;g=g.height;h.style.width=l!=null?`${l}px`:"";h.style.height=g!=null?`${g}px`:"";h.style.transform=k||""}}});return()=>{f()}},[c,e]);return VZ("div",{ref:e,className:r_("_5iFptA",{_3mfFA:a}),style:{"--Bn4idQ":b,left:d?0:void 0}})}));var siw=a_(({fkm:a,NQb:b,K6d:{Lxk:c,eyk:d},zoom:e,fj:f,fmn:g,sD:h,layout:k,dnb:l,fK:n,aXe:p,Fec:q,pba:r,wz:t})=>{const v=i_(null),w=k===2,x=i_(new Map);k=k_(()=>a.map(y=>{const z=y.ref;var B=y.xgk;const C=$Z(B);let G=x.current.get(C);G||(G=wnw(),x.current.set(C,G));const H=g&&ihw(z)||!g&&khw(z)?v.current:void 0,K=z.equals(c)||z.equals(d),L=!!b?.equals(z),N=b_(()=>z.pPa(e.get(),r));B=B.type==="comment"?B.mg.comment.author:void 0;let P;P=phw(z)?"notch":g?"avatar_dynamic":"avatar_static";const T=L?VZ(l,
{}):void 0;return{id:C,Jg:G,U7p:H,Qge:N,V8:K,oc:L,Klf:B,T9:P,GQj:T,...y}}),[a,b,c,d,e,g,r,l]);return VZ(R,{width:"full",height:"full",className:"kO4wew",ref:v,children:k.map(y=>{const z=y.id,B=y.Jg,C=y.U7p,G=y.Qge,H=y.V8,K=y.oc,L=y.Klf,N=y.T9,P=y.GQj,T=y.Hsb,V=y.Y2j,W=y.hasError,aa=y.jvh;return B&&G?o_(ynw,{children:[VZ(vpw,{wz:t,page:y.ref.page,Amc:YZ(y.ref)?y.ref.tb:void 0,children:VZ(upw,{ref:B,Qge:G,LW:e.get(),oon:!1,ko:f},z)}),VZ(tpw,{V8:H,oc:K,qQp:B,ZOb:C,sD:h,Qge:G,Hga:aa.length,Hsb:T,Klf:L,
nji:!!V,hasError:W,T9:N,fj:f,AR:w,Bj:w,GQj:P,onClick:()=>p(y),onMouseEnter:()=>q(y,"enter"),onMouseLeave:()=>q(y,"leave"),fK:n},z)]},z):null})})}),vpw=({children:a,wz:b,page:c,Amc:d})=>b?VZ(__c.Yz,{wz:b,page:c,Amc:d,children:a}):a;var riw=class{constructor(a){this.I=a;this.DHs=()=>{this.I.store.nph=!0};this.fIl=()=>{const b=this.I.viewport;let c;return UZ(()=>{if(b.uh&&!b.uK)return b.lT(b.ya)},d=>{this.I.store.nph=!1;clearTimeout(c);d&&(c=setTimeout(l_(this.DHs),100))})};this.aXe=l_(b=>{var c=this.I.Fu;const d=this.I.Uaa,e=this.I.QS,f=this.I.o1,g=b.xgk,h=b.Y2j;b=b.jvh;d.W4e(g);YZ(g.ref)&&d.MUi(g);(c=h?c.tmc.get(h):null)?e.Yza({type:"draft",draft:c,source:"comment_badge"}):b.length>0&&e.Yza(b.length===1?{type:"thread",gi:b[0],
$Eb:!0,o4b:!0,source:"comment_badge"}:{type:"comments_on_selection",source:"comment_badge"});b.some(k=>!e.n$a?.CIf(k))&&f.e3e()});this.Fec=(b,c)=>ymw(this.I.XPb,{ref:b.ref,action:c})}};var qiw=class{static G(a){O(a,{nph:q_.ref,K6d:b_.struct,DOj:b_({equals:d_.shallow})})}get K6d(){const a=this.I.QS.Xta,b=this.I.sR.reference,c=this.I.ddb.Y9c?.ref;return a?{Lxk:a.ref,eyk:c}:{Lxk:this.I.QS.gqn?b:void 0,eyk:c}}get DOj(){var a=__c.jj(this.I.Fu.kpl,({ref:b})=>b.nh);a=Array.from(a.entries()).map(([b,c])=>{c=__c.jj(c,({ref:d})=>d.sheet);c=Array.from(c.entries()).map(([d,e])=>{e=e.map(f=>this.T1m(f)).filter(sb);return{...this.k2m(e),sheet:d}});return[b,c]});return new Map(a)}constructor(a){this.I=
a;this.nph=(qiw.G(this),!0);this.l2m=Inw(b=>{b=this.I.Fu.I.fixed.Bkl(b).map(this.T1m).filter(sb);return this.k2m(b)},{equals:d_.shallow});this.m2m=Inw(b=>b.type==="body"?this.DOj.get("responsive_body")||[]:this.DOj.get(b.page.id)||[],{equals:d_.shallow});this.k2m=b=>{const c=[],d=[];b.forEach(e=>{const f=e.ref,g=e.Y2j,h=e.hasError;var k=this.I.sR.reference,l=this.K6d.eyk;l=f.equals(this.K6d.Lxk)||f.equals(l);k=f.equals(k);!phw(f)||g||h||l||k?c.push(e):d.push(e)});return{Td:c,DHn:d}};this.T1m=({ref:b,
comments:c})=>{var d=this.I.QS,e=this.I.uj;const f=c.find(l=>l.type==="draft");var g=c.filter(l=>l.type==="comment"&&!l.mg.comment.kj);if(g.length!==0||f){c=f?$Z(f):void 0;var h=g.map($Z),k=f||g[0];d=d.Fqa===f?f:void 0;e=Uhw(g,e);g=g.some(l=>l.mg.comment.gW==="error"||l.mg.kF.some(n=>n.gW==="error"));return{ref:b,Y2j:c,jvh:h,xgk:k,Fqa:d,Hsb:e,hasError:g}}}}};var tiw=a_(({page:a,EHn:b,Fzc:c,zoom:d,fj:e,pba:f})=>{const g=i_(new Map),h=k_(()=>b.map(k=>{const l=b_(()=>k.ref.pPa(d,f));return{id:$Z(k.xgk),Qge:l}}),[b,d,f]);return VZ(R,{width:"full",height:"full",className:"kO4wew",children:VZ(vpw,{wz:c,page:a,children:VZ(wpw,{N8p:h,zoom:d,fj:e,aQj:g.current})})})}),wpw=({N8p:a,zoom:b,fj:c,aQj:d})=>{const e=i_(__c.Qb());return VZ(c_,{children:a.map(f=>VZ(xpw,{fj:c,zoom:b,VXr:f,aQj:d},e+f.id))})},xpw=({VXr:a,zoom:b,fj:c,aQj:d})=>{const e=i_(a.id+__c.Qb());let f=
d.get(e.current);f||(f=wnw(),d.set(e.current,f));return VZ(upw,{ref:f,Qge:a.Qge,LW:b,oon:!0,ko:c})};var ypw=parseInt("36px",10)||36,zpw=window.navigator?.userAgent??"",Apw=zpw.match(/AppleWebKit\//)&&!zpw.match(/(Chrome|Chromium)\//),xiw=a_(({Qsc:a,PVi:b,sD:c,Qof:d,dnb:e,fK:f,fj:g,Bj:h,P5g:k})=>o_("div",{className:"hF_5CA",children:[d.map(({Vk:l,Io:n,jU:p})=>VZ(Bpw,{jU:p,focused:a.has(l)||b===l,color:n?"blue":"purple"},l)),d.map(({Vk:l,Io:n,jU:p,Fqa:q})=>p.length>0&&n?VZ(Cpw,{box:p[p.length-1],P5g:()=>k(l),V8:b===l,Bj:h,draft:q&&VZ(e,{}),fj:g,sD:c,fK:f},l):null)]})),Bpw=xnw(({jU:a,focused:b,color:c},
d)=>VZ(br,{spacing:"0",ref:d,children:a.map(e=>VZ(Dpw,{box:e,focused:b,color:c},e.bounds.tl.toString()))})),Epw={purple:"bpku7g",blue:"LyWWdw"},Fpw={text:"AgbiTw",item:"hVVoDA"},Dpw=p_(({box:a,focused:b,color:c="purple"})=>{const d=a.bounds.Nb();return VZ("div",{className:r_("_5HmRDg",Epw[c],Fpw[a.type],b&&"nMIC5w"),style:{width:d.width,height:d.height,transform:`translate(${d.left}px, ${d.top}px)`,opacity:Apw?.5:1}})}),Cpw=a_(({box:a,draft:b,sD:c,V8:d,Bj:e,fj:f,P5g:g,fK:h})=>{const [k,l]=h_("left"),
[n,p]=h_(null),[q,r]=h_(null),[t,v]=h_(null),w=k_(()=>{var C=3*Uc;C={top:c.ld+Uc,bottom:(c.je||C)+Uc};return f?{...C,left:c.sf,right:c.yd}:{...C,left:c.yd,right:c.sf}},[f,c]),{update:x,floatingStyles:y}=Lnw({elements:{reference:n,floating:q},placement:"right-start",whileElementsMounted:Mnw,middleware:[jiw({mainAxis:Uc,crossAxis:-ypw}),miw({boundary:"clippingAncestors",padding:5,limiter:niw()}),liw({flipAlignment:!1,boundary:"clippingAncestors",padding:5}),{name:"arrowPlacement",fn:({placement:C})=>
{l(C.startsWith("left")?"right":"left");return{}}}]}),{update:z,floatingStyles:B}=Lnw({elements:{reference:q,floating:t},placement:"right-start",whileElementsMounted:Mnw,middleware:[miw({boundary:"clippingAncestors",padding:w,limiter:niw()}),liw({boundary:"clippingAncestors",padding:w})]});j_(()=>{if(t&&q){var C=new Knw["default"](G=>{for(const H of G)H.target===t&&(z(),x())});C.observe(t);return()=>C.disconnect()}},[t,q,z,x]);j_(()=>Cnw(()=>{if(a&&n){var C=__c.Sj(0,[a.bounds]);var G=C.tl;G=`translate(${G.x}px, ${G.y}px)`;
var H=C.width;C=C.height;n.style.width=H!=null?`${H}px`:"";n.style.height=C!=null?`${C}px`:"";n.style.transform=G||"";x();z()}},{scheduler:requestAnimationFrame}),[a,n,x,z]);return o_(c_,{children:[VZ("div",{className:"f_t_qQ",ref:p}),VZ("div",{className:r_("_EJrpA",{zqlNZA:d}),ref:r,style:y,children:VZ(spw,{XOh:k,onClick:g,Bj:e,V8:d,nji:!0,hasError:!1,Hga:0,Hsb:0,Klf:void 0,fK:h})}),b&&VZ("div",{ref:v,className:"tn_K7g",style:B,children:b})]})});var wiw=class{constructor(a,b,c){this.Fu=a;this.QS=b;this.Uaa=c;this.P5g=d=>{if(d=this.Fu.tmc.get(d))this.Uaa.W4e(d),this.QS.Yza({type:"draft",draft:d,source:"comment_badge"})}}};var viw=class{static G(a){O(a,{Qsc:b_,Qof:b_({equals:d_.shallow}),PVi:b_,Bj:b_})}get Qsc(){const a=[this.QS.Xta?.mg.comment.gi,this.ddb.Y9c?.store?$Z(this.ddb.Y9c.store):void 0].filter(sb);return new Set(a)}get Qof(){return[...this.Fu.tmc.values(),...this.Fu.gVd.values()].map(a=>{if(XZ(a.ref)&&!a.ref.ZS.collapsed){var b=$Z(a),c=this.Fu.fEd.get(b)||[],d=a.type==="draft";return{ref:a.ref,Vk:b,Io:d,jU:c,Fqa:d&&this.QS.Fqa?.id===b?a:void 0}}}).filter(sb)}get PVi(){return this.QS.Fqa?.id}get Bj(){return this.la.layout===
2}constructor(a,b,c,d){this.la=a;this.ddb=b;this.Fu=c;this.QS=d;this.W3q=(viw.G(this),Inw(e=>e.type==="body"?this.Qof:this.Qof.filter(({ref:f})=>e.page.id===f.nh),{equals:d_.shallow}))}};var Gpw=Pb("da470f2",!1);var Hpw=class{static G(a){O(a,{Pof:q_.shallow,jEc:q_.ref,Pib:b_,n$a:b_,Brg:b_,Ytg:b_,$Hc:b_,n2e:l_.bound,t0f:l_.bound})}get BRe(){return this.I.Ka==="responsive"}get Pib(){return this.I.la.layout===1}get n$a(){return this.Pof.get("comment_panel")}get Brg(){return this.Pof.get("contextual_comments")}get Ytg(){return this.Pib?this.Brg:this.n$a}get $Hc(){return Gpw&&this.Pib?this.Pof.get(this.jEc):this.n$a}n2e(a,b){this.Pof.has(a)||this.Pof.set(a,b)}t0f(a){this.jEc=a}constructor(a){this.I=a;this.Pof=
(Hpw.G(this),new Map);this.jEc="contextual_comments"}},Ipw=class{static G(a){O(a,{jEc:b_,n2e:l_.bound,t0f:l_.bound})}get Pib(){return this.Wd.Pib}get jEc(){return this.Wd.jEc}get n$a(){return this.Wd.n$a}get Brg(){return this.Wd.Brg}get tNb(){return this.Wd.n$a?.tNb??!1}get gqn(){return this.I.etd.o1c&&!!this.Wd.$Hc?.tNb}get Fqa(){return this.Wd.Ytg?.Fqa}get Xta(){return this.Wd.$Hc?.Xta}n2e(a,b){this.Wd.n2e(a,b)}t0f(a){this.Wd.t0f(a)}Yza(a){switch(a.type){case "draft":Gpw&&this.Wd.Pib&&this.Wd.n$a?.Rnc();
this.Wd.Ytg?.Yza(a);break;case "thread":case "comments_on_selection":this.Wd.$Hc?.Yza(a);break;case "all":this.Wd.n$a?.Yza(a);break;default:throw new u(a);}}Rnc(){return this.Wd.$Hc?.Rnc()}bXa(a){Gpw&&this.Wd.Pib&&this.Wd.n$a?.Rnc();return this.Wd.Ytg?.bXa(a)}e$a(a){return this.Wd.Ytg?.e$a(a)}CIf(a){return this.Wd.$Hc?.CIf(a)??!1}Amb(a){return this.Wd.$Hc?.Amb(a)??Promise.reject()}Hbc(a,b,c){return this.Wd.$Hc?.Hbc(a,b,c)}$Me(a){return this.Wd.$Hc?.$Me(a)}constructor(a){this.I=a;this.Wd=(Ipw.G(this),
void 0);this.Wd=new Hpw(a)}};var Jpw=p_(({tF:a,disabled:b,Hsb:c,...d})=>{const e=k_(()=>c>0?()=>VZ(zkw,{Hsb:c,Hga:0}):__c.OH,[c]);return VZ(a,{onClick:d.onClick,disabled:b,wZ:e,children:M("Zzqtqw")})});var Kpw=p_(({BH:a,Hsb:b,open:c,...d})=>{const e=k_(()=>b>0?()=>VZ(zkw,{Hsb:b,Hga:0}):__c.OH,[b]);return VZ(a,{...d,icon:e,ariaLabel:M("Zzqtqw"),zh:"icon",y3c:"icon",active:c,tk:!0})});var Lpw=class{static G(a){O(a,{tNb:b_,Fqa:b_,Xta:b_})}get tNb(){return this.I.tNb.get()}get Fqa(){return this.I.ctd.Fqa}get Xta(){return this.I.ctd.Xta}CIf(a){return this.I.ctd.yZl.has(a)}constructor(a){this.I=a;this.Yza=(Lpw.G(this),b=>this.I.Yza(b));this.Rnc=()=>this.I.Rnc();this.bXa=b=>this.I.sze.bXa(b);this.e$a=b=>this.I.sze.e$a(b);this.Amb=b=>this.I.sze.Amb(b);this.Hbc=(b,c,d)=>this.I.sze.Hbc(b,c,d);this.$Me=b=>this.I.sze.$Me(b)}};var fjw=class{static G(a){O(a,{NIo:b_({equals:d_.shallow})})}get NIo(){const a=Mjw(this.I.Fu,this.I.viewport.ya);return new Set(a)}constructor(a){this.I=a;fjw.G(this)}};var Kiw=(a,b)=>{if(a.type!=="draft"||b.type!=="draft"){if(a.type==="draft")return 1;if(b.type==="draft")return-1}return 0},ejw=class{static G(a){O(a,{pages:b_({equals:d_.shallow})})}Qrk(){return(a,b)=>{var c=Oiw(this,a),d=Oiw(this,b);var e=c||d?c?d?void 0:-1:1:Miw(a,b);if(e!==void 0)return e;c=m(c);d=m(d);var f=Qiw(this,c);e=Qiw(this,d);f=this.pages.indexOf(f);e=this.pages.indexOf(e);if(f===-1||e===-1)throw Error("Page does not exist");e=f<e?-1:f>e?1:0;if(e!==0)return e;if(c.page?.type==="fixed"&&
d.page?.type==="fixed")return Uiw(this,{a,iLp:c,b,rVp:d});if(Piw(c)&&Piw(d))return Wiw(this,{a,gLp:c,b,qVp:d});throw Error("Unable to sort comments");}}get pages(){return this.document.Ka==="responsive"?[]:this.document.pages.flatMap(a=>{switch(a.type){case "fixed":case "responsive":return[a];case "concatenated-fixed":return a.pages.toArray();default:throw new u(a);}})}getTarget(a){if(ihw(a)||mhw(a))return{qad:a.element?.type==="group",element:a.element,parent:a.parent,type:"mutable"};if(jhw(a)||
nhw(a))return a.element.type==="group"?{qad:!0,element:a.element,parent:a.parent,type:"state"}:{qad:!1,element:a.element,parent:a.parent,type:"state"}}constructor(a,b,c,d){this.document=a;this.DC=b;this.Za=c;this.fj=d;ejw.G(this)}},Niw=(a,b)=>{const c=$Z(a);b=b.jUb.get(c);let d=b?.Sc,e=b?.range,f=b?.tA,g=b?.sheet;XZ(a.ref)?(d=a.ref.Sc,e=a.ref.ZS.range):YZ(a.ref)&&(d=a.ref.Sc,e=a.ref.range,f=a.ref.tb,g=a.ref.sheet);return{id:c,range:e,pos:b,Sc:d,tA:f,sheet:g}},Viw=(a,b,c)=>a.has(b)||a.has(c)?a.has(b)?
a.has(c)?a.dj(b,c):1:-1:0;var Mpw=class{static G(a){O(a,{Vwa:q_.ref,crb:q_.deep,PAd:q_.ref,Dcd:q_.ref,tze:q_.ref,OIb:q_.ref,C3c:q_.ref,JOc:b_,Tf:b_,Xta:b_,Fqa:b_,YVc:b_,oCc:b_({equals:d_.shallow}),yZl:b_({equals:d_.shallow}),RXo:b_({equals:d_.shallow}),fef:b_({equals:d_.shallow}),wqg:b_.struct,zsc:b_({equals:d_.shallow}),M$g:b_({equals:d_.shallow}),TYn:b_({equals:d_.shallow}),hWe:b_,THk:b_})}get JOc(){return this.I.jEc.get()==="comment_panel"}get Tf(){return this.I.Fu.Tf}get Xta(){return this.Vwa?.type==="comment"?this.Vwa:
void 0}get Fqa(){return this.Vwa?.type==="draft"?this.Vwa:void 0}get YVc(){return this.Vwa?$Z(this.Vwa):void 0}get oCc(){const a=this.I.o1,b=a.wxj;return this.I.Fu.hqd.filter(a.Ibm).sort(b)}get yZl(){return new Set(this.oCc.map(a=>a.mg.comment.id))}get RXo(){if(this.oCc.length===0)return[];const a=this.I.o1.s7b;return this.I.o1.Gte!=="visual_order"||a==="current_page"?[{threads:this.oCc}]:this.zsc}get fef(){const a=this.I.o1.wxj;return[...this.I.Fu.lya].sort(a)}get wqg(){const a=this.Dcd===1?this.fef:
this.oCc,b=this.Xta;return b?{current:a.findIndex(c=>c===b),total:a.length}:{current:-1,total:a.length}}get zsc(){const a=new Map,b=[];for(const c of this.M$g.values())if(c.id){const d=a.get(c.id);d?a.set(c.id,{...d,threads:[...d.threads,...c.threads],selected:d.selected||c.selected}):a.set(c.id,{...c,threads:[...c.threads]})}else b.push({...c,threads:[...c.threads]});return[...a.values(),...b]}get M$g(){const a=this.I.DC,b=this.I.viewport,c=new Map;this.oCc.forEach(d=>{var e=$Z(d),f=(e=d.ref?.nh||
a.jUb.get(e)?.nh)?this.TYn.get(e):void 0;if(!c.has(e))if(f!=null&&f>=0){f+=1;const g=ghw(d?.ref)&&b.ya===d?.ref?.OOa,h=ZZ(d?.ref)&&e===b.ya.id,k=!!e&&b.ya.id===e;c.set(e,{id:`page_${f}`,title:J("RfGFWg",[f]),threads:[],selected:g||k||h})}else f=e==="responsive_body",c.set(e,{title:f?void 0:M("SoJ2VQ"),tooltip:f?void 0:M("VxSShA"),threads:[],selected:!1});f=c.get(e);c.set(e,{...f,threads:[...f.threads,d]})});return c}get TYn(){const a=this.I.document,b=new Map;if(a.Ka!=="fixed")return b;a.pages.toArray().forEach((c,
d)=>{switch(c.type){case "concatenated-fixed":c?.id&&b.set(c.id,d);c.pages.forEach(e=>{e?.id&&b.set(e.id,d)});break;case "fixed":case "responsive":c?.id&&b.set(c.id,d);break;default:throw new u(c);}});return b}get hWe(){const a=this.I.uj;return Uhw(this.I.Fu.hqd.filter(({mg:b})=>!b.comment.kj),a)}get THk(){if(this.BRe)return!0;const a=this.I.viewport;return!a.uh&&a.MF}constructor(a){this.I=a;this.BRe=(Mpw.G(this),this.I.document.Ka==="responsive");this.crb=new Set;this.PAd=void 0;this.Dcd=0;this.C3c=
this.OIb=this.tze=null}};var Npw=class{static G(a){O(a,{Hmo:l_.bound,Clo:l_.bound,Imo:l_.bound,tSk:l_.bound,ged:l_.bound,sof:l_.bound,$0f:l_.bound,WWa:l_.bound,Z9c:l_.bound,Ixk:l_.bound,KNc:l_.bound,f4c:l_.bound,Kjc:l_.bound,Amb:l_.bound})}zbf(a){this.N.track(npw,a)}async Amb({gxa:a}){this.store.crb.add(a);const b=await this.rY.Amb({gxa:a});b.ok&&this.store.crb.has(a)&&f_(()=>{this.store.crb.delete(a);this.store.crb.add(b.value)})}constructor(a,b,c,d,e,f,g,h,k,l,n,p,q,r,t,v,w,x){this.store=a;this.t8=b;this.Fu=c;this.rY=d;
this.VGc=e;this.o1=f;this.yVb=g;this.ddb=h;this.XPb=k;this.Za=l;this.DC=n;this.N=p;this.sR=q;this.Uaa=r;this.QS=t;this.viewport=v;this.ui=w;this.flags=x;this.uq=(Npw.G(this),"comment_panel");this.Kuc=()=>this.t8.Kuc();this.Hmo=y=>{this.store.tze=y};this.Clo=y=>{this.store.OIb=y};this.Imo=y=>{this.store.C3c=y};this.pEg=y=>this.rY.pEg(y);this.tSk=()=>{Array.from(this.store.crb).some(y=>!this.store.yZl.has(y))&&this.o1.e3e()};this.ged=(y,z=!0)=>{if(this.store.JOc)return Promise.resolve();this.VGc?.C0f(!0);
this.QS.t0f("comment_panel");this.zbf({action:"change_visibility",Lnf:"comment_panel",type:"show",source:y,bhb:z});return this.Kuc()};this.sof=(y,z=!0)=>{this.store.JOc&&(this.QS.t0f("contextual_comments"),this.WWa(void 0),this.$0f(0),this.KNc(void 0),this.zbf({action:"change_visibility",Lnf:"comment_panel",type:"hide",source:y,bhb:z}))};this.$0f=y=>{this.store.Dcd=y};this.WWa=(y,z)=>{const B=this.store.Vwa;B!==y&&(this.store.Vwa=y,Xjw(this.yVb.JWh,this.Fu.hqd),y?.type==="comment"&&this.yVb.Exf(y),
z?.brh||B?.type!=="draft"||!B?.UJb.MOc||B.Sra.zdb||this.e$a(B));this.FVl(B,y)};this.FVl=(y,z)=>{const B=this.DC,C=z?.type==="comment",G=C?$Z(z):void 0;G&&C&&z.mg.comment.kj&&ygw(B,G,!0);y?.type==="comment"&&(z=$Z(y),z!==G&&(Bgw(B,z),!y.mg.comment.kj||ygw(B,z,!1)))};this.Cie=(y,z)=>{z?.Gub&&this.Uaa.Gub(!0);this.WWa(y);this.rY.Cie(y,z)};this.Z9c=(y,z)=>{this.XPb.Z9c({store:y,action:z,Ohd:this.store.Xta?this.store.YVc:void 0})};this.Ixk=y=>{this.store.crb.clear();y.forEach(z=>this.store.crb.add(z))};
this.KNc=y=>{this.store.PAd=y};this.nCl=y=>{const z=this.ddb.Y9c;var B=$Z(y);const C=this.store.crb.has(B);B=z?.source==="highlight"&&!!z.store&&$Z(z.store)===B;y=z?.source==="badge"&&!!y.ref?.equals(z.ref);return C||B||y};this.bXa=y=>this.rY.bXa(y);this.e$a=y=>{this.rY.e$a(y);this.store.YVc===y.id&&this.WWa(void 0)};this.f4c=(y,z,B)=>{y=this.rY.f4c({draft:y,value:z,va:B});this.WWa(void 0,{brh:!0});this.store.crb.add($Z(y));return y};this.Kjc=async(y,z)=>{const B=$Z(y);(await this.rY.Kjc({store:y,
va:z,uq:this.uq})).ok&&this.store.crb.has(B)&&f_(()=>{this.store.crb.delete(B);this.store.crb.add($Z(y))})};this.SSl=y=>{this.Amb({gxa:$Z(y)})};this.hpb=y=>{this.store.YVc===$Z(y)&&this.WWa(void 0);return this.rY.hpb({store:y,uq:this.uq})};this.Tyb=(y,z)=>this.rY.Tyb({store:y,fZ:z,uq:this.uq});this.Jgb=(y,z)=>this.rY.Jgb({store:y,value:z,uq:this.uq});this.eBc=(y,z)=>{this.rY.eBc({comment:y,C_i:z})};this.o$b=(y,z)=>this.rY.o$b({store:y,value:z,uq:this.uq});this.IWb=(y,z,B)=>this.rY.IWb({store:y,fZ:z,
value:B,uq:this.uq});this.M3e=(y,z)=>this.rY.M3e({store:y,fZ:z,uq:this.uq});this.iQb=({store:y,action:z})=>this.rY.iQb({store:y,action:z,uq:this.uq});this.FBc=({store:y})=>this.rY.FBc({store:y,KQd:"comment_panel"});this.Ths=y=>{const z=this.store.wqg.current,B=this.store.wqg.total;if(!(z<0)){var C=(z+B+(y==="previous"?-1:1))%B,G=this.store.Dcd===1?this.store.fef:this.store.oCc,H=G[C];this.t8.hht({direction:y,currentPosition:z,vft:B,uq:this.uq,status:H.mg.comment.kj?"resolved":"unresolved",M0q:$Z(G[z]),
Mdt:$Z(G[C])});this.Cie(H,{Gub:!0});return H}};this.njs=({gi:y,Wba:z,KNc:B,$Eb:C,o4b:G,Gub:H})=>{const K=this.Fu.gVd.get(y)||this.Fu.EEc.get(y);if(K)return this.Cie(K,{$Eb:!!C,o4b:!!G,Gub:!!H}),B&&this.KNc(z||y),K};this.Hbc=(y,z,B=!1)=>{this.Ixk(this.Fu.lya.map($Z));if(!this.sR.fGk){var C=this.store.Fqa,G=this.store.JOc,H=this.sR.selection,K=this.sR.Sib;if(this.sR.pWi)this.Uaa.Gub(!1);else{var L=this.ui.get();if(!L||G)L&&C?z():K(H)||!H&&B===!1?this.tbr(y):this.dcr(y,B)}}};this.tbr=y=>{const z=this.store.Dcd,
B=this.Fu.lya;this.store.Xta||z===1?y(B.length>0?{type:"comments_on_selection",l2i:!0}:{type:"all"}):this.ubr()};this.dcr=(y,z)=>{const B=this.Fu.lya,C=this.Fu.Z1f;B.length>0?YZ(B[0].ref)?y({type:"comments_on_selection",l2i:!0,source:"comment_highlight"}):C&&y({type:"thread",gi:$Z(C),source:"comment_highlight",$Eb:!0,o4b:!0}):this.ecr(y,z)};this.ecr=(y,z)=>{const B=this.store.Dcd,C=this.store.Xta;!this.store.JOc||z&&this.Za.$oa(z?.Sc,z?.range,__c.Gw.of({index:0,length:0})).equals||(z=B===1,this.flags.OBg?
z&&(C?this.$0f(2):y({type:"all"})):(z||C)&&y({type:"all"}))};this.ubr=()=>{var y=this.store.M$g;const z=this.store.OIb,B=this.Fu.lya,C=this.sR.reference,G=this.sR.selection;if(z&&!rhw(C?.Xe)){var H=this.o1.s7b,K=this.o1.Gte;if(C&&C.target===C.page)var L=C?.Xe.ia.id;else G?.type==="pages"&&G.pages.length===1&&G.pages[0].type==="responsive"&&(L=G.pages[0].id);(y=L?y.get(L)?.id:void 0)&&K==="visual_order"&&H!=="current_page"?z.Whe(y):B.length>0&&z.ggo(B.map(N=>$Z(N)))}};this.$Me=y=>{var z=this.o1.Gte;
if(this.o1.s7b!=="current_page"&&z==="visual_order"){var B=this.store.Xta,C=this.store.Dcd,G=this.store.M$g;z=this.store.OIb;this.store.JOc&&!B&&C!==1&&(y=y?.id?G.get(y.id)?.id:void 0)&&z?.Whe(y)}};this.E_r=()=>{let y;UZ(()=>{if(this.o1.Gte==="visual_order"&&this.store.THk)return eiw(this.Uaa)},z=>{clearTimeout(y);z&&(y=setTimeout(()=>{const B=this.t3m(z);B&&this.store.OIb?.Whe(B)},100))},{equals:d_.structural,fireImmediately:!0})};this.QUp=()=>{this.store.OIb&&(this.store.THk?this.bcr():this.lbr())};
this.bcr=()=>{var y=this.t3m(this.o1.Gte==="visual_order"?eiw(this.Uaa):void 0);y?this.store.OIb?.Whe(y):(y=this.Fu.Z1f)&&this.store.OIb?.Whe($Z(y))};this.lbr=()=>{var y=this.o1.s7b;const z=this.o1.Gte;var B=this.viewport.Vg;(B=B?.page?.id?this.store.M$g.get(B.page.id)?.id:void 0)&&z==="visual_order"&&y!=="current_page"?this.store.OIb?.Whe(B):(y=this.Fu.lya,y.length&&this.store.OIb?.ggo(y.map($Z)))};this.t3m=y=>{if(y&&(y=this.Fu.uhi(y),y.size!==0)){if(y.size===1)return y.keys().next().value;var z;
for(const C of this.store.oCc){const G=$Z(C),H=y.get(G);!z&&H&&(z=G);if(!B&&H?.von){var B=G;break}}return B||z}}}};var gjw=a=>{const b=a.label,c=a.QPa,d=a.iUa,e=a.h9e,f=a.Nhc,g=a.onClick,h=new __c.X_b;h.open=c;const k=g_(()=>{f(!c)},[c,f]);return o_(__c.kv,{label:b,store:h,trigger:l=>VZ(Wi,{...l,ariaLabel:b,variant:"tertiary",Np:"end",icon:__c.Rt,ib:M("XKoL+Q"),children:o_(br,{spacing:"1u",Fa:"center",children:[VZ(__c.$x,{size:"small"}),VZ(Q,{size:"medium",tone:__c.cr,children:b})]})}),Mx:k,children:[d.size>0&&VZ(Opw,{...a,items:d,kJm:M("2V1sxg"),onClick:g}),e.size>0&&VZ(Opw,{...a,items:e,kJm:M("ZJfziQ"),onClick:g})]})},
Opw=a=>{const b=a.items,c=a.onClick,d=a.Nhc;a=a.kJm;const e=g_(f=>{d(!1);c(f)},[c,d]);return o_(c_,{children:[VZ(__c.Tt,{children:a}),[...b.entries()].map(([f,g])=>VZ(Ppw,{item:g,onClick:()=>e(f)},f))]})},Ppw=a=>{const b=a.item;return VZ(__c.lv,{...a,label:b.label,end:b.selected?VZ(sr,{className:"be8ltQ",size:"medium"}):null,children:b.label})};var bjw=class{static G(a){O(a,{s7b:b_,Ibm:b_,Gte:b_,wxj:b_})}get s7b(){return m(this.store.Gfb.type)}get Ibm(){return m(this.store.Gfb.config.method)}get Gte(){return m(this.store.rhg.type)}get wxj(){return m(this.store.rhg.config.method)}get dYo(){return m(this.store.h9e.get("visual_order")?.method)}nOc(a,b){this.L.nOc(a,b)}cGf(a,b){this.L.cGf(a,b)}e3e(){this.L.e3e()}dMd(a,b,c){this.L.C6k(a,b,c)}constructor(a,b){this.store=a;this.L=b;bjw.G(this)}};var Qpw="all for_you canva_ai_comments unread current_page suggestions your_comments resolved".split(" "),Ziw=class{static G(a){O(a,{iUa:q_.shallow,h9e:q_.shallow,jyi:q_.shallow,QPa:q_.ref,dwm:b_,Gfb:b_,rhg:b_,AHe:b_({equals:__c.fk()}),DHe:b_({equals:__c.fk()})})}get dwm(){return this.AHe.size>1||this.DHe.size>1}get Gfb(){for(const [a,b]of this.AHe.entries())if(b&&b.selected)return{type:a,config:b};return{type:this.ZZd,config:m(this.AHe.get(this.ZZd))}}get rhg(){for(const [a,b]of this.DHe.entries())if(b&&
b.selected)return{type:a,config:b};return{type:this.Vrf,config:m(this.DHe.get(this.Vrf))}}get AHe(){return Yiw(this.iUa,this.Vai)}get DHe(){return Yiw(this.h9e,this.z2i)}constructor(a){this.Vai=(Ziw.G(this),void 0);this.z2i=["visual_order","recent"];this.iUa=new Map;this.h9e=new Map;this.jyi=new Map;this.QPa=!1;this.ZZd=a.ZZd;this.Vrf=a.Vrf;this.Vai=a.Vai||Qpw}},ajw=class{static G(a){O(a,{nOc:l_.bound,mQo:l_.bound,cGf:l_.bound,kTo:l_.bound,Nhc:l_.bound,e3e:l_.bound,C6k:l_.bound,dMd:l_.bound,Aio:l_.bound,
U6e:l_.bound})}nOc(a,b){this.store.iUa.set(a,{...b,selected:a===this.store.ZZd})}mQo(a){this.store.iUa.delete(a)}cGf(a,b){this.store.h9e.set(a,{...b,selected:a===this.store.Vrf})}kTo(a){this.store.jyi.clear();a.length>0&&a.forEach(b=>{this.store.jyi.set(b.gi,b)})}Nhc(a){(this.store.QPa=a)&&this.zbf({action:"change_visibility",Lnf:"comment_settings",type:"show",bhb:!0})}e3e(){this.dMd(this.store.ZZd);this.zbf({action:"filter",type:this.store.ZZd,bhb:!1})}C6k(a,b=!0,c){switch(a){case "all":case "for_you":case "canva_ai_comments":case "your_comments":case "unread":case "current_page":case "suggestions":case "resolved":this.dMd(a);
m(this.store.AHe.get(this.store.Gfb.type)).onClick?.();this.zbf({action:"filter",type:a,bhb:b,source:c});break;case "visual_order":case "recent":this.Aio(a);m(this.store.DHe.get(this.store.rhg.type)).onClick?.();this.zbf({action:"sort",type:a,bhb:b,source:c});break;default:throw new u(a);}}dMd(a){const b=this.store.iUa,c=this.store.Gfb,d=this.store.ZZd,e=m(this.store.AHe.get(a));this.U6e(b,a,!e.selected);a===c.type?this.U6e(b,d,!0):this.U6e(b,c.type,!1)}Aio(a){const b=this.store.h9e,c=this.store.rhg,
d=this.store.Vrf,e=m(this.store.DHe.get(a));this.U6e(b,a,!e.selected);a===c.type?this.U6e(b,d,!0):this.U6e(b,c.type,!1)}U6e(a,b,c){const d=m(a.get(b));a.set(b,{...d,selected:c})}zbf(a){this.N.track(npw,{action:a.action,Lnf:a.Lnf,type:a.type,source:a.source||"comment_settings",bhb:a.bhb})}constructor(a,b){this.store=a;this.N=b;ajw.G(this)}};var djw=class{Qrk(){return(a,b)=>{const {range:c,pos:d,Sc:e,tA:f,sheet:g}=Rpw(a,this.DC),{range:h,pos:k,Sc:l,tA:n,sheet:p}=Rpw(b,this.DC);if(f&&n&&g&&g===p){var q=f.row===n.row?Spw(g.config.layout.cols,f.column,n.column):Spw(g.config.layout.rows,f.row,n.row);return q===0?Miw(a,b):q}if(e||l){if(!e)return 1;if(!l)return-1}else return Miw(a,b);if(c||h){if(!c)return 1;if(!h)return-1}else return Miw(a,b);if(e===l)return q=this.Za.$oa(e,c,h).qwm,q===0?Miw(a,b):q;if(d||k){if(!d)return 1;if(!k)return-1}else return Miw(a,
b);return d.hyg-k.hyg}}constructor(a,b){this.DC=a;this.Za=b}},Rpw=(a,b)=>{const c=$Z(a);b=b.jUb.get(c);let d=b?.Sc,e=b?.range,f=b?.tA,g=b?.sheet;XZ(a.ref)?(d=a.ref.Sc,e=a.ref.ZS.range):YZ(a.ref)&&(d=a.ref.Sc,e=a.ref.range,f=a.ref.tb,g=a.ref.sheet);return{id:c,range:e,pos:b,Sc:d,tA:f,sheet:g}},Spw=(a,b,c)=>a.has(b)||a.has(c)?a.has(b)?a.has(c)?a.dj(b,c):1:-1:0;var $iw="current_page all for_you canva_ai_comments unread suggestions your_comments resolved".split(" ");var Tpw=class{static G(a){O(a,{QEh:q_.ref,Ggf:q_.ref,m9l:q_.ref,l6l:q_.ref,tJh:q_.ref})}constructor(){this.QEh=(Tpw.G(this),void 0)}};var Vpw=a_(({mode:a,currentPosition:b,$Aa:c,sbs:d,pO:e})=>{const f=c===1;d=VZ(Upw,{mode:a,direction:"left",onClick:d,disabled:f});e=VZ(Upw,{mode:a,direction:"right",onClick:e,disabled:f});b=VZ(Q,{children:J("31xktA",[b,c])});return a==="pane"?o_(br,{spacing:"1u",Fa:"center",children:[o_(br,{spacing:"0.5u",Fa:"center",children:[d," ",e]}),b]}):o_($q,{spacing:"1u",Fa:"center",children:[VZ(Yq,{width:"content",children:d}),VZ(Yq,{width:"content",children:b}),VZ(Yq,{width:"content",children:e})]})}),Upw=
({mode:a,direction:b,onClick:c,disabled:d})=>{a=a==="pane";const e=(b=b==="left")?M("6jlbsQ"):M("5wWqPQ");return VZ(R,{padding:a?"0":"1u",children:VZ(a?Wi:ir,{variant:"tertiary",size:a?"small":"tiny",ariaLabel:e,ib:e,ek:"top",icon:b?__c.lr:__c.mr,Qc:"medium",onClick:c,disabled:d,className:"Q9PI4Q",I4a:!a})})};var Wpw=a_(a=>{const b=a.comment,c=a.RPa,d=a.ZNg,e=a.JNc,f=a.DDa,g=a.YLm,h=a.type,k=a.aEi,l=a.YYe,n=a.onClick,p=a.Rk,q=a.WCb,r=a.wSc,t=a.qna,v=a.atb,w=a.fK,x=a.eTb,y=a.EJa,z=a.xv,B=a.Jtc;a=a.Snc;const C=Inw(H=>K=>l(H,K)),G=g_(()=>{Ghw(b);k(b)},[b,k]);return VZ(R,{className:"vLHPnQ",children:b.type==="comment"&&b.MKb&&g?VZ(R,{padding:"2u",className:"v8ei5g",children:o_(Tc,{spacing:"2u",children:[Vmw&&o_($q,{spacing:"1u",Fa:"center",children:[VZ(Yq,{width:"content",children:VZ(w,{user:b.author,size:"small"})}),
VZ(Yq,{children:o_(br,{spacing:"0",Fa:"center",children:[VZ(R,{du:"1u",children:VZ(Q,{weight:"bold",tone:b.kj?"tertiary":void 0,lineClamp:1,lx:!0,children:BA(b.author)})}),VZ(__c.QF,{time:new Date(b.updated),children:H=>VZ(Q,{tone:"tertiary",lineClamp:1,size:"small",lx:!0,children:H})})]})})]}),o_($q,{Fa:"start",spacing:"1u",children:[!Vmw&&VZ(Yq,{width:"content",children:VZ(w,{user:b.author,size:"small"})}),VZ(Yq,{children:VZ(y,{type:h,comment:b,onSubmit:C(b),kia:G,h8p:!0,oqh:!0,JNc:e})})]})]})}):
VZ(x,{comment:b,RPa:c,ZNg:d,DDa:f,WCb:q,wSc:r,qna:t,atb:v,onClick:n,Rk:p,xv:z,Jtc:B,Snc:a})})});var Xpw=a_(({navigation:a,onClose:b})=>VZ(__c.mv,{height:"fill",navigation:a,WNb:1,zSa:({hf:c})=>VZ("div",{className:"_0HKVZQ",children:VZ(c,{oa:b,We:"fill"})})})),Ypw=({navigation:a})=>VZ(__c.k8d,{navigation:a,WNb:1}),Zpw=({navigation:a,onClose:b})=>VZ(__c.l8d,{navigation:a,WNb:1,onClose:b,Fb:a.kz?a.goBack:void 0,display:"comfortable"});var aqw=({type:a,status:b,UN:c,sBb:d,D8d:e,qmn:f,LNa:g,x6a:h,fK:k})=>{switch(b){case "unresolved":b=d?"warnLow":"infoLow";g=VZ(cow,{onClick:h,loading:g===2,size:"small",Qc:"small",className:"v_uRoA"});a=o_(Tc,{spacing:"0",children:[d?VZ("div",{className:"_2q5a1g",children:VZ(Q,{weight:"bold",lineClamp:1,children:e?M("zddvKg"):J("DF9CLg",[BA(c)])})}):null,f?VZ("div",{className:"NvTzWQ",children:VZ(Q,{children:d?M("GobkQQ"):a==="suggestion"?M("7YZzRA"):M("zLUvqA")})}):null]});break;case "resolved":b=
d?"warnLow":"infoLow";g=VZ(dow,{onClick:h,loading:g===3,size:"small",Qc:"small",className:"_9kN54Q"});a=o_(Tc,{spacing:"0",children:[d?VZ("div",{className:"_2q5a1g",children:VZ(Q,{weight:"bold",lineClamp:1,children:e?M("zddvKg"):J("DF9CLg",[BA(c)])})}):null,VZ("div",{className:"NvTzWQ",children:VZ(Q,{children:f?M("bt+8qg"):M("qs/RGg")})})]});break;case "accepted":b="positiveLow";g=null;a=VZ("div",{className:"_2q5a1g",children:VZ(Q,{children:M("q4mKUg")})});break;case "rejected":b="criticalLow";g=
null;a=VZ("div",{className:"_2q5a1g",children:VZ(Q,{children:M("irgE4A")})});break;default:throw new u(b);}return VZ($pw,{background:b,Rdb:!!d,Jc:c,description:a,Jq:g,fK:k})},$pw=({background:a,Rdb:b,Jc:c,description:d,Jq:e,fK:f})=>VZ(R,{display:"flex",flexDirection:"column",width:"full",Lb:"1.5u",Pc:"1.5u",background:a,borderBottom:"low",className:"_5_2jGQ",children:o_($q,{spacing:"1u",Fa:"center",children:[b&&VZ(Yq,{width:"content",children:VZ(R,{tp:"0.5u",children:VZ(f,{user:c,size:"xsmall"})})}),
VZ(Yq,{children:d}),e&&VZ(Yq,{width:"content",children:e})]})});var bqw=(a,b)=>{const c=a.comment,d=a.kF,e=a.Lta,f=a.ecb,[g,h]=h_(f),k=b_(()=>g<c.created&&!!b&&b!==c.author?.id).get(),l=b_(()=>{if(!k&&b&&e&&e===d.length){var n=d.findIndex(p=>p.author?.id!==b&&p.created>g);return n>=0?n:void 0}}).get();a=b_(()=>l===0).get();j_(()=>{f>g&&h(f)},[f,g]);j_(()=>{const n=d.find(p=>p.author&&p.author.id===b&&p.created>g);n&&h(n.created)},[b,g,d]);return{Cqi:k,EGn:l,V9m:a}};var dqw=a=>{var b=a.variant;const c=a.variant==="collapsed"||a.variant==="expanded",d=k_(()=>__c.Qm()||!tb.rd,[]),{Ssi:e,className:f}=cqw(a),g=VZ(R,{className:"G3Q0gg",children:VZ(Q,{size:"small",tone:__c.cr,children:e})});b=o_($q,{spacing:c?"1.5u":"1u",Fa:"center",reversed:b==="new",children:[VZ(Yq,{width:"content",children:c?o_(R,{className:"bZWddg",display:"flex",flexDirection:"row",alignItems:"center",Lb:"1u",children:[g,VZ("div",{className:"VXqIpg",children:VZ(__c.Gu,{className:"_92yU7A",size:"tiny"})})]}):
g}),VZ(Yq,{children:VZ("hr",{className:"_cUZBw"})})]});return VZ(R,{Lb:"2u",className:r_("jzKSWQ",f),children:c?VZ(WZ,{OEa:!1,className:"P6cIMA",children:VZ(__c.Pt,{className:r_(["KIEnsQ",{atGbgw:d}]),onClick:a.onClick,children:b})}):b})},cqw=a=>{const b=a.variant;a=a.count;switch(b){case "standard":return{className:"eed_rQ",Ssi:J("aWlYiw",[a])};case "new":return{className:"YCajZg",Ssi:a!=null?J("OiA+FA",[a]):M("JnUOUg")};case "collapsed":return{className:"IedP0Q",Ssi:J("0b0IGA",[a])};case "expanded":return{className:"_5fjaBA",
Ssi:J("aWlYiw",[a])};default:throw new u(b);}};var eqw=a_(({comment:a,contentId:b,DDa:c,iw:d,QPa:e,ui:f,Jtc:g,WCb:h,wSc:k,qna:l,atb:n,xv:p,Snc:q,Nhc:r,mjl:t,feh:v})=>a.gW==="pending"?VZ("div",{className:"qJKR5Q",children:VZ(__c.hv,{size:"small"})}):a.gW!=="error"&&(h||k||l||n||c.length!==0)?VZ(iow,{iw:d,QPa:e,ui:f,Jtc:g,LNa:a.LNa,contentId:b,DDa:c,WCb:h,wSc:k,qna:l,atb:n,xv:p,Snc:q,Nhc:r,mjl:t,feh:v,yIk:a.IIf}):null),fqw=()=>{const [a,b]=h_(!1),c=g_(()=>b(!0),[]),d=g_(()=>b(!1),[]);return{iw:a,cDf:c,dDf:d}},gqw=()=>{const [a,b]=h_(!1);return{QPa:a,
Nhc:b}},hqw=()=>{const [a,b]=h_(null),c=g_(e=>{b(e)},[]),d=g_(()=>{b(null)},[]);return{JOj:a,I8k:c,eNj:d}};var jqw=a_(xnw((a,b)=>{const c=a.bbl,d=a.mg;var e=a.uj;const f=a.uq,g=a.ui,h=a.$zr,k=a.permissions,l=a.wjj,n=a.fK,p=a.VD,q=a.YYe,r=a.xv,t=a.Rk,v=a.Ndd,w=a.$dd,x=a.idd,y=a.Kdd,z=a.rS,B=a.ucb,C=a.k0g,G=a.x9g,H=d.comment;a=d.kF;const K=d.Lta,L=i_(null),{Cqi:N,EGn:P,V9m:T}=bqw(d,e),V=b_(()=>d.sBb&&H.type==="comment").get(),W=e_(H),{JOj:aa,I8k:ba,eNj:da}=hqw(),la=Inw(ja=>{const oa=ja!==d.comment&&ja.type==="comment",ma=d.comment.kj;var na=Tow(d.comment);const qa=[];g&&!oa&&(e_(ja)?!ma&&k?.zng()&&(qa.push({Icon:sr,
label:M("Cmy3Xw"),onClick:x,mode:"action"}),qa.push({Icon:nr,label:M("HvOocA"),onClick:y,mode:"action"})):ma?qa.push({Icon:__c.J4d,label:M("2xhucg"),onClick:w,mode:"action"}):qa.push({Icon:sr,label:M("ZF49gw"),onClick:v,mode:"action"}));if(na)return qa;!ma&&k?.Uu(ja)&&ja.type==="comment"&&qa.push(kow(()=>p(ja)));ma&&oa||!k?.Axe(ja)||qa.push(low(()=>{ba(ja.id)}));qa.push(mow(()=>z({Vk:ja.gi,Wba:oa?ja.id:void 0,uq:f,status:ja.kj?"resolved":"unresolved"})));Pb("8d2d91ee",!1)&&qa.push(oow(()=>{B(ja.id)}));
(na=G&&C?.(ja.id,G))&&qa.push(na);!ma&&ja.type==="comment"&&k&&k.gtf&&k.ftf&&qa.push({label:M("q6kIcw"),mode:"info"});return qa});Anw(b,()=>({ago(ja){(ja=L.current?.querySelector(`div[data-id=${ja}]`))&&(c?c.scrollTo({top:ja.offsetTop,behavior:"smooth"}):ja.scrollIntoView({behavior:"smooth",block:"center"}))},fgo(){c?c.scrollTo({top:0,behavior:"smooth"}):L.current?.scrollIntoView({behavior:"smooth",block:"start"})},WU(){if(c){const ja=c.scrollHeight,oa=c.clientHeight,ma=c.scrollTo;ja!=null&&oa!=null&&
ma({top:ja-oa,behavior:"smooth"})}else L.current&&L.current.scrollIntoView({behavior:"smooth",block:"end"})}}),[c]);b=W&&k?.zng()&&!H.kj&&!g;e=iqw(H,e,h,V,v,y,w,n);return o_(R,{ref:L,className:"ZWWrfg",children:[e&&VZ(aqw,{...e}),VZ("div",{"data-id":H.id,children:VZ(l,{comment:H,RPa:N,JNc:W,DDa:la(H),YYe:q,Rk:t,WCb:V||H.kj||g||H.type!=="comment"?void 0:v,wSc:H.kj&&!g&&H.type==="comment"?w:void 0,qna:b?x:void 0,atb:b?y:void 0,xv:()=>r(H),Jtc:aa===H.id,Snc:da})}),K>0&&o_(c_,{children:[!T&&VZ(dqw,{variant:"standard",
count:K}),a.map((ja,oa)=>o_(ynw,{children:[oa===P&&VZ(dqw,{variant:"new",count:T?K:void 0}),VZ("div",{"data-id":ja.id,children:VZ(l,{comment:ja,DDa:la(ja),YYe:q,Rk:t,JNc:W,xv:()=>r(ja),Jtc:aa===ja.id,Snc:da})})]},oa))]})]})})),iqw=(a,b,c,d,e,f,g,h)=>{let k=null;switch(a.kj){case !0:k={status:"resolved",x6a:g};break;case "accepted":k={status:"accepted"};break;case "rejected":k={status:"rejected"};break;default:if(c||d)k={status:"unresolved",x6a:c&&e_(a)?f:e}}return k?{...k,sBb:!(a.type!=="comment"||
!a.Yla),UN:a.type==="comment"?a.UN:void 0,D8d:!(a.type!=="comment"||!b||a.Yla!==b),qmn:c,LNa:a.LNa,type:a.type,fK:h}:null};var kqw=({Rk:a})=>{const b=k_(()=>jjw(a),[a]);return VZ(R,{padding:"2u",children:VZ(Ck,{tone:"critical",size:"medium",Tg:!0,title:M("tyItrQ"),children:b.render(M("SHSLhQ"))})})};var mqw=p_(()=>VZ(R,{padding:"1u",children:VZ(Tc,{spacing:"1u",children:__c.rc(5).map(a=>VZ(lqw,{},a))})})),lqw=p_(()=>VZ(R,{className:"FBZrOw",border:"low",padding:"2u",children:o_($q,{spacing:"1u",Fa:"start",children:[VZ(Yq,{width:"content",children:VZ(R,{className:"ncI32g",children:VZ(__c.Xi,{shape:"circle",index:0})})}),VZ(Yq,{children:o_(Tc,{spacing:"0.5u",children:[VZ(R,{className:"_9L2gqQ",children:VZ(__c.Ut,{size:"xsmall",index:0})}),VZ(__c.Ut,{size:"xsmall",index:1}),VZ(__c.Ut,{size:"xsmall",
index:2}),VZ(__c.Ut,{size:"xsmall",index:3})]})})]})}));var nqw=__webpack_require__.p+"images/4ef7c564d4e8ed0a9be6aaee0958f13b.svg";var oqw=()=>VZ(R,{padding:"2u",paddingBottom:"3u",children:o_(Tc,{align:"center",spacing:"2u",children:[VZ(R,{children:VZ("img",{src:nqw,className:"zS9T8A",alt:""})}),o_(Tc,{align:"center",spacing:"1u",children:[VZ(__c.dr,{size:"xsmall",alignment:"center",children:M("9RMHxQ")}),VZ(Q,{size:"medium",alignment:"center",children:M("aC3v1g")})]})]})});var qqw=a_(({d_a:a,bbl:b,zsc:c,Tf:d,permissions:e,KPf:f,BPf:g,rS:h,ucb:k,Ndd:l,$dd:n,idd:p,Kdd:q,xLn:r,e8r:t,jdo:v,mCl:w,Jlc:x,ywb:y,tJh:z,ye:B,ui:C,tke:G,Bke:H,uj:K})=>{const L=i_(null),N=i_(null),P=znw(),T=znw();Anw(a,()=>({Whe(V){if(L.current&&(V=L.current.querySelector(`div[data-id=${V}]`))){var W=z?N.current?.clientHeight??0:0;b?b.scrollTo({top:V.offsetTop-Uc-W,behavior:"smooth"}):V.scrollIntoView({behavior:"smooth",block:"start"})}},ggo(V){const W=L.current;if(W&&V.length){var aa=V.map(ba=>
W.querySelector(`div[data-id=${ba}]`)).filter(sb);aa.length&&(V=z?N.current?.clientHeight??0:0,aa=aa.reduce((ba,da)=>da.offsetTop<ba.offsetTop?da:ba,aa[0]),b?b.scrollTo({top:aa.offsetTop-Uc-V,behavior:"smooth"}):aa.scrollIntoView({behavior:"smooth",block:"start"}))}}}),[b,z]);return d===2?VZ(mqw,{}):d===4?B?VZ(oqw,{}):VZ(kqw,{Rk:v}):y&&!c.length?o_(c_,{children:[z&&VZ(R,{padding:"1u",children:VZ(z,{})}),VZ(y,{})]}):o_(R,{ref:L,padding:"1u",children:[z&&VZ(R,{ref:N,children:VZ(z,{})}),VZ("span",{id:P}),
VZ(__c.jDd,{to:T,children:M("XsqpKA")}),VZ(Tc,{spacing:"4u",children:c.map((V,W)=>VZ(pqw,{group:V,permissions:e,uj:K,ui:C,tke:G,Bke:H,Jlc:x,KPf:f,BPf:g,rS:h,ucb:k,Ndd:l,$dd:n,idd:p,Kdd:q,onClick:r,Yt:t,mCl:w},W))}),VZ("span",{id:T}),VZ(__c.jDd,{to:P,children:M("1csdJg")})]})}),pqw=a_(({group:a,uj:b,ui:c,tke:d,Bke:e,permissions:f,Jlc:g,KPf:h,BPf:k,Ndd:l,$dd:n,idd:p,Kdd:q,rS:r,ucb:t,onClick:v,Yt:w,mCl:x})=>{const y=a.title?VZ(Nu,{tone:a.selected?"assistLow":"neutralLow",text:a.title},a.id):null;return o_(Tc,
{spacing:"1u",children:[y&&VZ("div",{"data-id":a.id,children:VZ(R,{tp:"0.5u",children:a.tooltip?VZ(__c.er,{label:a.tooltip,placement:"top",children:y}):y})}),a.threads.map(z=>VZ("div",{"data-id":z.mg.comment.id,onMouseEnter:()=>w?.(z,"enter"),onMouseLeave:()=>w?.(z,"leave"),children:VZ(rqw,{store:z,permissions:f,uj:b,Vma:!!x?.(z),ui:c,tke:d,Bke:e,Jlc:g,KPf:h,BPf:k,rS:r,ucb:t,Ndd:l,$dd:n,idd:p,Kdd:q,onClick:v})},z.mg.comment.id))]})}),rqw=a_(({store:a,uj:b,Vma:c,ui:d,tke:e,Bke:f,permissions:g,Jlc:h,
KPf:k,BPf:l,Ndd:n,$dd:p,idd:q,Kdd:r,rS:t,ucb:v,onClick:w})=>{const x=b_(()=>{const V=bmw(a.mg,{uj:b}),W=cmw(a.mg,{uj:b})>0;return V?"all":W?"replies":"none"}).get(),{JOj:y,I8k:z,eNj:B}=hqw(),C=b_(()=>{const V=[],W=a.mg.comment.gi,aa=a.mg.comment.kj,ba=e_(a.mg.comment),da=Tow(a.mg.comment);d&&(ba?!aa&&g?.zng()&&(V.push({Icon:sr,label:M("Cmy3Xw"),onClick:()=>q(a),mode:"action"}),V.push({Icon:nr,label:M("HvOocA"),onClick:()=>r(a),mode:"action"})):aa?V.push({Icon:__c.J4d,label:M("2xhucg"),onClick:()=>
p(a),mode:"action"}):V.push({Icon:sr,label:M("ZF49gw"),onClick:()=>n(a),mode:"action"}));if(da)return V;!aa&&k&&g?.Uu(a.mg.comment)&&V.push(kow(()=>k(a)));g?.Axe(a.mg.comment)&&V.push(low(()=>{z(a.mg.comment.id)}));V.push(mow(()=>t({Vk:W,uq:"comment_panel",status:aa?"resolved":"unresolved"})));Pb("8d2d91ee",!1)&&V.push(oow(()=>{v(W)}));!ba&&g&&g.gtf&&g.ftf&&V.push({label:M("q6kIcw"),mode:"info"});return V}).get(),G=g_(()=>{w(a)},[w,a]),H=g_(()=>{n(a)},[n,a]),K=g_(()=>{p(a)},[p,a]),L=g_(()=>{q(a)},
[q,a]),N=g_(()=>{r(a)},[r,a]),P=g_(()=>{l(a)},[l,a]),T=e_(a.mg.comment)&&g?.zng()&&!a.mg.comment.kj&&!d;return VZ(h,{comment:a.mg.comment,DDa:C,Lta:a.mg.Lta,uGs:a.mg.C_n,Vma:c,ui:d,Jtc:y===a.mg.comment.id,tke:e,Bke:f,hasError:[a.mg.comment,...a.mg.kF].some(V=>V.gW==="error"),ZNg:!a.guf.MOc||!!a.Sra.zdb,source:"comment_panel",iWr:x,onClick:G,WCb:a.mg.comment.type!=="comment"||a.mg.comment.kj||d?void 0:H,wSc:a.mg.comment.type==="comment"&&a.mg.comment.kj&&!d?K:void 0,qna:T?L:void 0,atb:T?N:void 0,xv:P,
Snc:B},a.mg.comment.id)});var sqw=a=>{const b=a.t8,c=a.Fu,d=a.ctd,e=a.sze,f=a.o1,g=a.navigation,h=a.uj,k=a.Nea,l=a.o$a,n=a.TGc,p=a.Jlc,q=a.eTb,r=a.EJa,t=a.fK,v=a.QSa,w=a.permissions,x=a.gPe,y=a.Ftd,z=a.MKd,B=a.bKd,C=a.qa,G=a.ui,H=a.Rye,K=a.V,L=new Map,N=()=>{const nb=g.screen;if(nb){var qb=L.get(nb);qb&&(b.eAh(qb),e.KNc(void 0),L.delete(nb))}},P=nb=>{g.$g({...nb,options:{...nb.options,wBa:()=>{const qb=g_(()=>{xb("comment_panel_close_button");H()},[]);return VZ(__c.hd,{onClick:qb})},bcl:"collapsed",Hzc:!1}})},T=(nb,qb)=>{e.eBc(qb,
!0);G.get()?pa(nb,qb):d.Xta||Ba(nb)},V=async(nb,qb,Ob)=>{const Rb=qb.cuc;Rb?nb=await e.IWb(nb,qb,Ob):(sa(nb.mg.comment.type==="comment"),nb=await e.o$b(nb,Ob));if(nb.ok&&(G.get()&&g.goBack(),d.Xta&&Rb))try{tjw(()=>!!d.C3c,()=>d.C3c?.ago(qb.id),{timeout:2E3})}catch(Va){}return nb},W=(nb,qb)=>{if(nb.mg.comment===qb)return e.hpb(nb);Ghw(qb);return e.Tyb(nb,qb)},aa=v.mAe(e.iQb,{async:!0,default:Ma()}),ba=v.mAe(e.FBc,{async:!0,default:Ma()}),da=async(nb,qb)=>{nb=await e.Jgb(nb,qb);if(nb.ok){if(nb.value)try{tjw(()=>
!!d.C3c,()=>d.C3c?.WU(),{timeout:2E3})}catch(Ob){}return La()}return nb},la=nb=>qb=>{const Ob=qb.created!==qb.updated;if(qb.IIf){if(qb.type==="comment")return sa(nb.mg.comment.type==="comment"),Ob?e.o$b(nb,{grant:qb.mqa?.grant,content:qb.content,qu:qb.qu,wA:qb.mqa?.wA||[],attachments:qb.mqa?.attachments||[]}):e.Kjc(nb,K.wb("retry_submit_draft_comment",{Hb:{name:"ui.collaborating.commenting.retry_submit_draft_comment"}}));ra(!Ob&&e_(qb)&&!!qb.ZQe);sa(e_(nb.mg.comment));return e.SSl(nb)}Ghw(qb);return Ob?
e.IWb(nb,qb,{grant:qb.mqa?.grant,content:qb.content,qu:qb.qu,wA:qb.mqa?.wA||[],attachments:qb.mqa?.attachments||[]}):e.M3e(nb,qb)};(new __c.Bk).B_(null,"0px");const ja=a_(({uba:nb,bta:qb})=>{const Ob=g_(Rb=>{x.HYi(nb,Rb)},[nb]);return k.Vnd?VZ(k.Vnd,{store:qb,vQf:Ob}):null}),oa=({Ge:nb,Du:qb,pa:Ob})=>{P({hf:()=>VZ(Ob,{}),options:{sg:nb,xnb:qb}})},ma=({Ge:nb,pa:qb})=>{const [Ob,Rb]=h_(0);return VZ(Onw,{client:!0,onResize:Va=>{Rb(Va.client.height)},children:({measureRef:Va})=>o_(c_,{children:[VZ("div",
{ref:Va,className:"_5a8xDQ",children:nb}),VZ("div",{className:"i1jjBA",style:{height:`calc(100% - ${Ob}px)`},children:qb})]})})},na=({Vk:nb,gi:qb,Bob:Ob,source:Rb})=>{const Va=l.j7n;if(Va){var yb=Va.Ge,Jb=Va.pa;P({hf:()=>VZ(ma,{Ge:VZ(yb,{$o:g.goBack}),pa:VZ(Jb,{Vk:nb,gi:qb,Bob:Ob,source:Rb,onClick:g.goBack})}),sb:Va.sb,options:{YK:!0}})}},qa=nb=>{const qb=k.LNm;if(qb){var Ob=qb.Ge,Rb=qb.pa;P({hf:()=>VZ(ma,{Ge:VZ(Ob,{$o:g.goBack}),pa:VZ(Rb,{w0a:Va=>{g.goBack();nb(Va)},source:"comment_panel"})}),sb:qb.sb,
options:{YK:!0}})}},ua=a_(nb=>VZ(r,{...nb,source:"comment_panel",o9g:G.get()?qa:void 0,WD:d.tze})),za=a_(nb=>{const qb=g_(()=>{if(!nb.comment.cuc){var Ob=b.pMe(nb.comment.gi);Ob&&e.Cie(Ob,{$Eb:!0,o4b:!1})}},[nb]);return VZ(q,{...nb,onClick:qb,source:"comment_panel",Vma:d.PAd===nb.comment.id,x9g:G.get()?oa:void 0,y9g:G.get()?na:void 0})}),va=a_(nb=>{const qb=nb.comment,Ob=g_(Rb=>e.eBc(Rb,!1),[]);return VZ(Wpw,{...nb,YLm:!G.get(),type:qb.cuc?"reply":"comment",aEi:Ob,fK:t,eTb:za,EJa:ua})}),xa=a_(({comment:nb})=>
{const qb=g_(ub=>T(nb,ub),[nb]),Ob=g_((ub,Yb)=>V(nb,ub,Yb),[nb]),Rb=g_(async ub=>{(await W(nb,ub)).ok&&ub.IIf&&g.goBack()},[nb]),Va=g_(async()=>{(await aa({store:nb,action:void 0})).ok&&g.goBack()},[nb]),yb=g_(async()=>{(await ba({store:nb})).ok&&g.goBack()},[nb]),Jb=g_(async ub=>{(await aa({store:nb,action:ub})).ok&&g.goBack()},[nb]),Nb=c.SGm.has($Z(nb));return VZ(jqw,{ref:e.Imo,bbl:d.tze,mg:nb.mg,permissions:w,VD:qb,YYe:Ob,xv:Rb,rS:y.zYh,ucb:z.cSi,Ndd:Va,$dd:yb,idd:()=>Jb("accepted"),Kdd:()=>Jb("rejected"),
Rk:la(nb),k0g:G.get()?B.k0g:void 0,x9g:oa,uj:h,uq:"comment_panel",ui:G.get(),$zr:Nb,wjj:va,fK:t})}),Ba=nb=>{e.pEg(nb);e.WWa(nb);const qb=Nb=>da(nb,Nb),Ob={uba:nb.guf,bta:nb.guf.bta,vqg:nb.guf.kab,Sra:nb.Sra},Rb=l_(Nb=>{x.TRg(Ob.uba,Nb)}),Va=()=>{N();e.WWa(void 0);g.goBack();d.Dcd===2&&g.goBack();if(d.Dcd!==1)try{tjw(()=>!!d.OIb,()=>d.OIb?.Whe($Z(nb)),{timeout:2E3})}catch(Nb){}b.Rwh({...(d.Dcd===1?{view:"multi_thread",Hga:d.fef.length}:{view:"all_comments",Hga:d.oCc.length}),uq:"comment_panel"})},
yb=Nb=>{if(Nb=e.Ths(Nb))N(),g.goBack(),Ba(Nb),d.C3c?.fgo()};P({hf:a_(()=>{if(G.get()){if(Ob.bta.V8d)return VZ(ja,{...Ob});if(Ob.vqg.ZOc&&k.lTb)return VZ(k.lTb,{w0a:Rb});if(Ob.Sra.huc&&k.Bod)return VZ(k.Bod,{store:Ob.Sra,source:"comment_panel"})}return VZ(xa,{comment:nb})}),sb:a_(()=>Tow(nb.mg.comment)||nb.mg.comment.kj?null:VZ(ua,{...Ob,type:"reply",onSubmit:qb,kia:void 0,JNc:e_(nb.mg.comment)})),options:{sg:a_(()=>{const Nb=d.wqg.current;return Nb===-1?null:VZ(R,{className:"LcbfVg",children:VZ(Vpw,
{sbs:()=>yb("previous"),pO:()=>yb("next"),currentPosition:Nb+1,$Aa:d.wqg.total,mode:"sheet"})})}),Lla:()=>VZ(Wi,{variant:"tertiary",size:"small",I4a:!0,onClick:Va,icon:__c.or,ariaLabel:M("Q22p1A")})}});const Jb=m(g.screen);L.set(Jb,nb);b.lwi(nb);b.Rwh({view:"single_thread",Vk:nb.mg.comment.id,uq:"comment_panel"})},pa=(nb,qb)=>{const {uba:Ob,Sra:Rb}=m(qb.MKb),Va={bta:Ob.bta,vqg:Ob.kab,uba:Ob,Sra:Rb},yb=l_(ub=>{x.TRg(Va.uba,ub)}),Jb=ub=>V(nb,qb,ub),Nb=()=>{e.eBc(qb,!1);g.goBack()};P({hf:a_(()=>{if(!G.get())return null;
if(Va.bta.V8d)return VZ(ja,{...Va});if(Va.vqg.ZOc&&k.lTb)return VZ(k.lTb,{w0a:yb});if(Va.Sra.huc&&k.Bod)return VZ(k.Bod,{store:Va.Sra,source:"comment_panel"})}),sb:()=>VZ(ua,{...Va,comment:qb,type:qb.cuc?"reply":"comment",onSubmit:Jb,kia:Nb,JNc:e_(nb.mg.comment)}),options:{sg:()=>M("vjbKjg"),Lla:()=>VZ(Wi,{variant:"tertiary",size:"small",I4a:!0,onClick:g.goBack,icon:__c.or,ariaLabel:M("Q22p1A")})}})},ia=nb=>{const qb={uba:nb.UJb,bta:nb.UJb.bta,vqg:nb.UJb.kab,Sra:nb.Sra};e.WWa(nb);const Ob=l_(Va=>
{x.TRg(qb.uba,Va)}),Rb=Va=>{const yb=K.wb("submit_draft_comment",{Hb:{name:"ui.collaborating.commenting.submit_draft_comment"}}),Jb=e.f4c(nb,Va,yb);K.VU("open_comment_panel",yb,()=>pb({type:"thread",gi:$Z(Jb),$Eb:!0,o4b:!0,source:"submitted_comment",bhb:!1}));e.Kjc(Jb,yb)};P({hf:a_(()=>{if(!G.get())return null;if(qb.bta.V8d)return VZ(ja,{...qb});if(qb.vqg.ZOc&&k.lTb)return VZ(k.lTb,{w0a:Ob});if(qb.Sra.huc&&k.Bod)return VZ(k.Bod,{store:qb.Sra,source:"comment_panel"})}),sb:()=>VZ(R,{className:"oNZTDg",
children:VZ(ua,{...qb,type:"comment",onSubmit:Rb,kia:void 0,JNc:!1})}),options:{sg:()=>M("XZqESw")}})},wa=nb=>{e.Cie(nb,{$Eb:!0,o4b:!1});Ba(nb);d.tze?.scrollTo({top:0,behavior:"smooth"})},Ca=nb=>{const qb=nb.mg.comment;Ghw(qb);T(nb,qb);tjw(()=>!!qb.MKb?.uba.quill,()=>{setTimeout(()=>{var Ob;if(Ob=qb.MKb?.uba)qb.MKb.uba.quill?.focus(),Ob=void 0;return Ob},150)})},Ha=nb=>W(nb,nb.mg.comment),Oa=nb=>aa({store:nb}),Ka=nb=>ba({store:nb}),Ua=nb=>aa({store:nb,action:"accepted"}),cb=nb=>aa({store:nb,action:"rejected"}),
ab=()=>{e.$0f(1);const nb=()=>{e.$0f(0);g.goBack();const qb=c.lya;if(qb.length>0)try{tjw(()=>!!d.OIb,()=>d.OIb?.Whe($Z(qb[0])),{timeout:2E3})}catch(Ob){}b.Rwh({view:"all_comments",Hga:d.oCc.length,uq:"comment_panel"})};P({hf:a_(()=>{const qb=d.fef;return VZ(qqw,{zsc:qb.length>0?[{threads:qb}]:[],permissions:w,KPf:Ca,BPf:Ha,rS:y.zYh,ucb:z.cSi,Ndd:Oa,$dd:Ka,idd:Ua,Kdd:cb,xLn:wa,jdo:e.Kuc,ye:C.status===2,ui:G.get(),tke:!G.get(),Bke:!1,Jlc:p,ywb:n.l6l,uj:h})}),options:{Lla:()=>VZ(Wi,{variant:"tertiary",
size:"small",I4a:!0,onClick:nb,icon:__c.or,ariaLabel:M("Q22p1A")}),sg:a_(()=>VZ(c_,{children:J("nf4fdQ",[d.fef.length])}))}})},Ta=nb=>{e.Z9c(nb,"leave");e.Cie(nb);Ba(nb);d.tze?.scrollTo({top:0,behavior:"smooth"})},mb=()=>{P({hf:a_(()=>{const nb=!G.get()&&f.s7b==="current_page";return VZ(qqw,{d_a:e.Clo,bbl:d.tze,zsc:d.RXo,Tf:d.Tf,permissions:w,KPf:Ca,BPf:Ha,rS:y.zYh,ucb:z.cSi,Ndd:Oa,$dd:Ka,idd:Ua,Kdd:cb,xLn:Ta,e8r:e.Z9c,jdo:e.Kuc,mCl:e.nCl,ye:C.status===2,ui:G.get(),tke:nb,Bke:f.s7b==="unread",Jlc:p,
ywb:n.m9l,tJh:n.tJh,uj:h})}),options:{Lla:a_(()=>n.QEh?VZ(n.QEh,{}):null)}})},pb=l_(nb=>{var qb=nb.source;const Ob=nb.bhb,Rb=nb.type;if(Rb!=="thread"||d.YVc!==nb.gi)if(N(),e.ged(qb,Ob),e.$0f(0),g.clear(),Rb==="draft")sa(!!G.get(),"Shouldn't open draft view in comment panel in landscape mode"),e.WWa(void 0),ia(nb.draft);else if(Rb==="comments_on_selection")e.WWa(void 0),mb(),ab(),b.Rwh({view:"multi_thread",Hga:d.fef.length,uq:"comment_panel"});else{if(Rb==="thread"&&(qb=e.njs(nb))){mb();Ba(qb);e.tSk();
e.pEg(qb);return}e.WWa(void 0);mb();Rb==="all"&&nb.dG?f.s7b!==nb.dG&&f.dMd(nb.dG,!1):e.tSk();b.Rwh({view:"all_comments",Hga:d.oCc.length,uq:"comment_panel"})}}),xb=(nb,qb=!0)=>{N();L.clear();e.sof(nb,qb);G.get()&&(g.clear(),e.WWa(void 0))};return{ged:pb,sof:xb,e5o:{header:{pa:()=>VZ(Zpw,{navigation:g,onClose:xb})},pa:()=>VZ(Xpw,{navigation:g,onClose:xb}),footer:{pa:()=>VZ(Ypw,{navigation:g})},fLm:e.Hmo,Nh:()=>{if(d.Xta)try{tjw(()=>!!d.C3c,()=>{d.PAd?d.C3c?.ago(d.PAd):d.C3c?.fgo()},{timeout:2E3})}catch(nb){}else try{tjw(()=>
!!d.OIb&&d.Tf===3,()=>{e.QUp()},{timeout:2E3})}catch(nb){}}}}};var tqw=a=>{const b=a.h7;a=a.Ut.slice(0,3);const c=M("OoCdNQ"),d=M("n/vb2Q");return VZ(R,{paddingBottom:"1u",children:VZ(Ck,{tone:"info",size:"small",children:o_(R,{display:"flex",alignItems:"center",children:[o_(R,{width:"full",display:"flex",alignItems:"center",children:[VZ(__c.dah,{Ut:a,size:"xsmall"}),VZ(R,{Lb:"1u",ariaLabel:c,children:VZ(Q,{size:"small",children:VZ(__c.Zj,{tagName:"span",message:c})})})]}),VZ(Wi,{variant:"secondary",ariaLabel:d,onClick:b,size:"small",children:d})]})})})};var uqw=({o1:a,ctd:b,Fu:c})=>({get s7b(){return a.s7b},get ded(){return[...c.ded.values()]},get $st(){return b.oCc}}),vqw=class{static G(a){O(a,{OTl:q_.ref,X0i:b_,F7n:b_})}get X0i(){const a=this.I.hem,b=this.I.uj;if(a.s7b!=="current_page")return!1;const c=Uhw(a.$st,b);return Uhw(a.ded,b)>c&&!this.OTl}get F7n(){const a=this.I.uj,b=this.I.xUa,c=new Map,d=e=>{e&&!c.has(e.id)&&c.set(e.id,e)};[...this.I.hem.ded].filter(Ciw(a)).sort(Liw()).forEach(e=>{e=e.mg;bmw(e,{uj:a})&&d(e.comment.author);dmw(e,{uj:a}).forEach(f=>
{d(f.author)})});return Array.from(c.values()).slice(0,3).map(e=>{const f=b(e.id)?.background;return{name:e.displayName,ib:e.displayName,Bh:__c.Fn(e.Jc?.images),backgroundColor:f,borderColor:f||"",tu:e.id}})}constructor(a){this.I=a;this.OTl=(vqw.G(this),!1)}},wqw=class{static G(a){O(a,{kAl:l_.bound})}constructor(a){this.store=a;this.kAl=(wqw.G(this),b=>{this.store.OTl=b})}};var xqw=({TGc:a,o1:b,ctd:c,Fu:d,uj:e,xUa:f})=>{const g=new vqw({hem:uqw({o1:b,ctd:c,Fu:d}),uj:e,xUa:f}),h=new wqw(g),k=()=>{h.kAl(!0);b.dMd("unread",void 0,"unread_banner")},l=a_(()=>VZ(tqw,{h7:k,Ut:g.F7n}));UZ(()=>({Gfb:b.s7b,X0i:g.X0i}),({Gfb:n,X0i:p})=>{n==="unread"&&h.kAl(!0);a.tJh=p?l:void 0})};var yqw=a=>{var b=a.t8;const c=a.sR,d=a.Uaa,e=a.Fu,f=a.rY,g=a.VGc,h=a.yVb,k=a.ddb,l=a.XPb,n=a.Nea,p=a.o$a,q=a.DC,r=a.Za,t=a.eo,v=a.bKd,w=a.gPe,x=a.Ftd,y=a.MKd,z=a.QS,B=a.V,C=a.Xf,G=a.QSa,H=a.qa,K=a.ee,L=a.permissions,N=a.viewport,P=a.document,T=a.P,V=a.Jlc,W=a.eTb,aa=a.EJa,ba=a.fK,da=a.xUa,la=a.ui;var ja=a.Ka;const oa=a.O6j,ma=a.OBg,na=a.E6j,qa=a.fj,ua=a.uj;a=new Tpw;({o1:ja}=hjw({Ka:ja,t8:b,Fu:e,TGc:a,DC:q,Za:r,viewport:N,document:P,N:T,uj:ua,fj:qa,tFq:oa}));const za=new Mpw({Fu:e,o1:ja,DC:q,document:P,
viewport:N,jEc:b_(()=>z.jEc),uj:ua}),va=new Npw(za,b,e,f,g,ja,h,k,l,r,q,T,c,d,z,N,la,{OBg:ma}),xa=new __c.R7d,Ba=q_.box(void 0,{deep:!1}),pa=q_.box(void 0,{deep:!1}),ia=()=>{const Ta=Ba.get(),mb=pa.get();Ta&&(K.N6a(Ta.compact),K.N6a(Ta.standard));!mb||Ta&&(__c.p0b(K,Ta.compact)||__c.p0b(K,Ta.standard))||K.Awc(mb)},wa=()=>{const Ta=Ba.get(),mb=pa.get();Ta&&(K.Rye(Ta.compact),K.Rye(Ta.standard));mb&&K.vLc?.sX(mb)&&K.Y9()},{ged:Ca,sof:Ha,e5o:Oa}=sqw({t8:b,Fu:e,ctd:za,sze:va,navigation:xa,uj:ua,bKd:v,
o1:ja,Nea:n,o$a:p,TGc:a,permissions:L,Jlc:V,eTb:W,EJa:aa,fK:ba,QSa:G,gPe:w,Ftd:x,MKd:y,qa:H,Rye:wa,ui:la,V:B});xqw({TGc:a,o1:ja,ctd:za,Fu:e,uj:ua,xUa:da});const Ka=(Ta,mb=!0)=>{Ha(Ta,mb);wa()};UZ(()=>la.get(),()=>{Ka(void 0,!1);t.close(Oa)});let Ua;UZ(()=>za.JOc,Ta=>{la.get()||(Ta?(t.open(Oa,{Caa:"end",Fa:"top"}),Ua=tjw(()=>!t.isOpen(Oa),()=>Ka(void 0,!1))):(Ua?.(),Ua=void 0,t.close(Oa)))});const cb=a_(Ta=>{const mb=Ta.onClick,pb=g_(xb=>{za.JOc?Ha("comment_panel_header_cta"):Ca({type:"all",source:"comment_panel_header_cta"});
mb?.(xb)},[mb]);return VZ(Kpw,{...Ta,open:za.JOc,onClick:pb,Hsb:za.hWe})}),ab=a_(Ta=>{const mb=Ta.onClick,pb=g_(()=>{za.JOc?Ha("comment_panel_file_menu_cta"):Ca({type:"all",source:"comment_panel_file_menu_cta"});mb?.()},[mb]);return VZ(Jpw,{...Ta,open:za.JOc,onClick:pb,Hsb:za.hWe})});K.wv(Ta=>({u0p:Ta>10&&C>=4,KXs:la.get()}),({header:Ta,vM:mb},{u0p:pb,KXs:xb})=>{let nb;pb&&(nb={compact:{Button:qb=>VZ(cb,{...qb,variant:"tertiary"}),navigation:xb?xa:void 0,onClose:Ha},standard:{Button:qb=>VZ(cb,{...qb,
variant:"secondary"}),navigation:xb?xa:void 0,onClose:Ha}});Ta.xhj=nb?.compact;Ta.Comment=nb?.standard;Ba.set(nb);if(na&&mb){let qb;pb&&(qb={Button:ab,navigation:xb?xa:void 0,onClose:Ha});mb.hbg=qb;pa.set(qb)}});b=new Lpw({Yza:Ta=>{if(Ba.get())if(Ta.type!=="comments_on_selection")ia(),Ca(Ta);else{var mb=e.mJc,pb=e.lya;pb.length&&(ia(),Ca(pb.length===1?{...Ta,type:"thread",gi:pb[0].mg.comment.id,$Eb:!0,o4b:!0}:Ta),va.Ixk(pb.map($Z)));mb.length&&(mb=mb[0],!la.get()||Ta.l2i&&pb.length||(ia(),Ca({...Ta,
type:"draft",draft:mb})))}},Rnc:Ka,ctd:za,sze:va,tNb:b_(()=>!!Ba.get())});z.n2e("comment_panel",b);va.E_r();return{TGc:a,n$a:b,o1:ja}};var Aqw=({eOa:a})=>VZ(zqw,{text:M("eObfKA"),eOa:a}),Bqw=({dG:a,MNd:b,eOa:c})=>{const d=k_(()=>kjw({dG:a,MNd:b}),[a,b]);return VZ(zqw,{text:d,eOa:c})},zqw=({text:a,eOa:b})=>VZ(R,{padding:"2u",paddingBottom:b?void 0:"3u",children:o_(Tc,{align:"center",spacing:"0.5u",children:[VZ(Q,{size:"medium",alignment:"center",children:a}),b]})}),Cqw=({onClick:a})=>VZ(Wi,{variant:"linkButton",stretch:!0,onClick:a,children:M("aEWZdg")});var Dqw=class{static G(a){O(a,{Nxj:b_,iyo:b_,jyo:b_})}get Nxj(){const a=this.I.sR,b=this.I.viewport.Vg;if(b&&b.type!=="responsive-page")return a.reference&&a.reference.Xe.equals(b)?a.reference:new Hjw({Xe:b})}get iyo(){return!!this.Nxj}get jyo(){var a=this.I.viewport;const b=this.I.hb;if(!a.uh)return!1;a=a.Vg;return a.type!=="responsive-page"&&!ug(b.kl(a.page))}constructor(a){this.I=a;Dqw.G(this)}},Eqw=class{constructor(a){this.I=a;this.f3e=()=>{this.I.o1.dMd("all")};this.WWe=()=>{var b=this.I.store.Nxj;
if(b&&!shw(b.target)){var c=this.I.Uaa,d=this.I.QS,e=this.I.Fu.S8c(b.target);if(b=e.length>0?e[0]:d.bXa({reference:b,source:"comment_panel_empty_state"}))d.Yza({type:"draft",draft:b,source:"draft_comment"}),c.W4e(b)}}}};var Fqw=({TGc:a,o1:b,sR:c,Uaa:d,Fu:e,QS:f,viewport:g,qa:h,Pa:k,hb:l})=>{const n=new Dqw({sR:c,viewport:g,hb:l}),p=new Eqw({store:n,Uaa:d,Fu:e,o1:b,QS:f}),q=()=>VZ(Cqw,{onClick:p.f3e}),r=a_(()=>VZ(Wi,{variant:"linkButton",stretch:!0,onClick:p.WWe,disabled:h.status===2,children:M("2jSUIw")})),t=a_(()=>VZ(Aqw,{eOa:n.iyo?VZ(r,{}):null})),v=a_(()=>{const w=b.s7b,x=ljw({dG:w,B_o:n.jyo?r:void 0,Oyp:q});return!a.Ggf||w!=="all"&&w!=="current_page"?VZ(Bqw,{dG:w,MNd:k.mode,eOa:x}):VZ(a.Ggf,{eOa:x})});f_(()=>
{a.l6l=t;a.m9l=v})};var mjw=class extends __c.ds{ctt(a,b){this.lOe=b;super.YT(a)}ett(a,b,c){this.lOe=c;super.XJ(a,b)}At(a,b){this.lOe&&a.Qj.includes(this.lOe)?this.GBq={element:a,container:b}:super.At(a,b)}wua(a,b){this.lOe&&a.pb.forEach(c=>{this.lOe&&c.Qj.includes(this.lOe)&&(this.See=a)});super.wua(a,b)}XJ(a,b){b.type!=="design-item"&&this.lOe===a.id&&(this.Wns={page:a,container:b,Xe:b.xb(a)})}};var Iqw=a=>__c.Hl.tw?Gqw.nca(__c.bs.snapshot(a)):a.pages.flatMap(b=>Hqw(b)),Hqw=Inw(a=>{switch(a.type){case "fixed":const b=[];b.push(...a.Qj);a.elements.forEach(c=>{b.push(...c.Qj);c.type==="group"&&c.pb.forEach(d=>b.push(...d.Qj));c.type==="sheet"&&c.config.layout.cells.forEach(d=>{d.Qj?.length&&b.push(...d.Qj)})});a.sheet?.layout.cells.forEach(c=>{c.Qj?.length&&b.push(...c.Qj)});return b;case "concatenated-fixed":return a.pages.flatMap(Hqw);case "responsive":return[];default:throw new u(a);}},
{equals:d_.shallow}),Jqw=class extends __c.fs{xh(...a){return a.flat()}XZg(a){return[...a.Qj]}rEd(a){return[...a.Qj]}QLr(a){return[...a.Qj]}constructor(){super();this.I={};this.empty=[]}},Gqw=new Jqw;var Kqw=class{static G(a){O(a,{$xl:l_.bound,Gub:l_.bound,W4e:l_.bound,bio:l_.bound,dyo:l_.bound,xio:l_.bound,MUi:l_.bound,cgo:l_.bound,dgo:l_.bound,EX:l_.bound})}$xl(a){this.I.store.fGk=a}Gub(a){this.I.store.pWi=a}W4e(a){wjw(a)?this.bio(a):a&&!qhw(a.ref)&&this.xio(a)}bio(a){const b=this.I.vg;if(qjw(this,a.ref)){sa(sjw(this.I.document));this.Gub(!0);var c=this.I.document,d=a.ref;if(d)if(a=$Z(a),lhw(d)){if(khw(d)){var e=d.tb;c=d.page;a=d.Xe}else a=njw(c,d.page,a),c=a.page.page,a=a.page.Xe,e=m(c.sheet),
e={row:m(e.layout.rows.get(d.tb.row)),column:m(e.layout.cols.get(d.tb.column))};sa(c!==void 0);a.container?.type==="fixed-document"&&__c.hf(c)&&b.u1a(a.container.xb(c),e,e,[e])}else ohw(d)?(mhw(d)?(e=d.tb,a=d.element,c=d.Xe):(a=njw(c,d.page,a,d.element),e=a.page.page,c=a.page.Xe,e=m(e.sheet),e={row:m(e.layout.rows.get(d.tb.row)),column:m(e.layout.cols.get(d.tb.column))},a=m(a.element).element),a.type==="sheet"&&b.L7a(c.Me(a),e,e,[e])):d?.type==="fixedPage"?(hhw(d)?(c=d.Xe.container?.type==="concatenated-fixed-page"?
m(d.Xe.container.Rja(c.pages)).pages:c.pages,c=d.Xe.Rja(c),d=d.Xe):(d=njw(c,d.page,a),c=d.page.page,d=d.page.Xe),m(c),d.container?.type==="concatenated-fixed-page"?b.YU(d.container,m(c)):b.IQb(m(c))):d?.type==="element"&&(ihw(d)?(c=d.Xe,a=d.element,d=d.parent):(d=njw(c,d.page,a,d.element,d.parent),c=d.page.Xe,a=m(d.element).element,d=d.parent),d?b.Jl(c.Me(d),a):b.Jl(c,a));else b.deselectAll()}}dyo(a){return a?phw(a)?!0:qhw(a)?qjw(this,a):!1:!1}xio(a){const b=this.I.Za,c=this.I.DC;if(b){this.Gub(!0);
var d=$Z(a),e=!1;c.jUb.has(d)&&!YZ(a.ref)?(e=c.V4e(d),a.type==="comment"&&!a.mg.comment.kj&&Agw(c,$Z(a))):a.ref?e=rjw(this,a.ref):(this.I.store.selection&&(e=!0),b.deselectAll());e||this.Gub(!1)}}async MUi(a){wjw(a)?await this.cgo(a):a&&!qhw(a.ref)&&await this.dgo(a)}async cgo({ref:a}){if(a&&sjw(this.I.document)){var b=this.I.hb,c=this.I.viewport,d=this.I.document,e=pjw(a,d);d=e.container?.type==="concatenated-fixed-page"?m(e.container.Rja(d.pages)).pages:d.pages;var f=m(e.Rja(d));if(!ug(b.kl(f)))c.HC(f,
"fit",{animate:!0});else if(a?.type==="element"||lhw(a)||ohw(a)){var g=a.oCf(1);if(g)return new Promise(h=>{setTimeout(l_(async()=>{const k=g.top,l=g.right,n=g.width,p=g.height,{width:q,height:r}=c.ey();var t=10*Uc;let {scale:v}=c.zoom;t=Math.max(.01,Math.min((q-2*t)/(n*1),(r-2*t)/p,5));t<v&&(v=t);await c.HC(f,v,{center:new __c.pj(l-n/2,k+p/2),animate:!0});h()}))})}}}async dgo(a){const b=this.I.Za,c=this.I.viewport,d=this.I.pd;if(b&&d){{var e=this.I.DC;var f=a.ref;const g=$Z(a);YZ(f)?(a=d.DF(f.sheet)?.Nb().top??
0,f=f.pPa(1)?.top??0,f=a+f):f=e.lya.has(g)&&b.alh?b.alh.top:e.cqd.has(g)?e.cqd.get(g).top:a.ref?xkw({ref:a.ref,pd:d,Za:b})?.[0].bounds.Nb().top:void 0}f!==void 0&&await c.gaa(f,"smooth")}}async EX(a){wjw(a)?await ujw(this,a):a&&!qhw(a.ref)&&await vjw(this,a)}constructor(a){this.I=a;this.Tja=(Kqw.G(this),sjw(this.I.document)?zf(this.I.document):void 0)}};var Lqw=class{static G(a){O(a,{pWi:q_.ref,fGk:q_.ref,PAd:q_.ref,selection:b_,reference:b_})}get selection(){const a=this.I.vg;return a.Ma||a.Kb}get reference(){var a=this.I.document,b=this.I.Za;if(this.selection){var c=this.I.vg;if(!c.Ma||this.selection!==c.Ma){var d=this.selection.Rz;if(b.state?.type==="SHEET_CELL"&&this.selection.container.type==="sheet-item")return new Low({sheet:b.state.sheet,tb:b.state.cells[0],container:this.selection.container,Xe:d,range:__c.Gw.item(b.state.sheet)})}else if(a.Ka===
"fixed"){var e=Yow(a,this.selection);if(e){b=e.Xe;a=e.elements;c=e.cells;const f=e.sheet,g=e.parent;e=e.Jed;a||c?c?d=a?.[0]?new Djw({Xe:b,tb:c[0],sheet:m(f),parent:g,element:a?.[0]}):new Bjw({Xe:b,tb:c[0],sheet:m(f)}):a&&a.length===1&&(d=new Fjw({Xe:b,element:a[0],parent:g})):d=new Hjw({Xe:b,Jed:e});return d}}}}constructor(a){this.I=a;this.pWi=(Lqw.G(this),!1);this.fGk=!1;this.Sib=(b=this.selection)=>{var c=this.I.vg;return!!c.Ma&&b===c.Ma};this.I=a}};var Mqw=class extends __c.fs{xh(...a){return a.flat()}XZg(a){return[...this.x5q(a),...this.V8q(a),...a.elements.flatMap(b=>xjw(this,a,b))]}constructor(){super();this.I={};this.empty=[];this.x5q=__c.Pa(a=>a.Qj.length===0?[]:[{ref:new Jow({page:a}),Qj:a.Qj}]);this.V8q=__c.Pa(a=>{const b=a.sheet;return b?zjw(a.sheet,({tb:c})=>new Kow({tb:c,sheet:b,page:a})):[]})}};var Nqw=class{static G(a){O(a,{Qmc:b_({equals:d_.shallow}),lya:b_({equals:d_.shallow}),mJc:b_({equals:d_.shallow}),k0d:b_({equals:d_.shallow}),W8n:b_({equals:d_.shallow}),LWf:b_,jwn:b_({equals:d_.structural})})}get Qmc(){const a=this.I.Yoa.cN,b=new Map([...this.I.KHa.U1b.entries()].map(([c,{store:d}])=>[c,d]));return new Map([...a.values(),...b.values()].filter(c=>qhw(c.ref)||ZZ(c.ref)).map(c=>[$Z(c),c]))}get lya(){const a=this.I.sR.reference;return!a||shw(a.target)?[]:this.NLg(a.target).filter(kkw)}get mJc(){const a=
this.I.sR.reference;return!a||shw(a.target)?[]:this.S8c(a.target)}get k0d(){return this.mJc}get W8n(){const a=this.I.document,b=this.I.hF;if(a.Ka!=="fixed"||!b||!this.I.tw)return[];const c=zf(a);return[...b.pages].flatMap(d=>this.Bkl(c.xb(d)))}get LWf(){const a=this.I.document;if(a.Ka!=="fixed")return[];if(this.I.tw)return Kjw([...a.pages.flatMap(c=>this.YCs(__c.An.snapshot(c))),...this.jwn]);const b=zf(a);return a.pages.flatMap(c=>this.Bkl(b.xb(c)))}z4d(a){return[...this.S8c(a),...this.NLg(a)]}NLg(a){return(a.Qj?.length?
this.vBq(a):[]).concat(this.qgi(a))}qgi(a){return[...this.I.KHa.U1b.values()].filter(b=>b.ref.target===a).map(b=>b.store)}S8c(a){return[...this.I.KHa.lJc.values()].filter(b=>b.ref.target===a).map(b=>b.store)}get jwn(){const a=[];for(const [,{ref:b,store:c}]of this.I.KHa.U1b)qhw(b)&&a.push({ref:b,comments:[c]});for(const [,{ref:b,store:c}]of this.I.KHa.lJc)qhw(b)&&a.push({ref:b,comments:[c]});return a}Kgi(a,b){const c=[];if(this.I.KHa.U1b.size>0||this.I.KHa.lJc.size>0)for(const e of a.layout.rows)for(const f of a.layout.cols){var d=
{row:e,column:f};const g=a.layout.cells.get(d.row,d.column);(!g||g.span.$b===d.row&&g.span.ec===d.column)&&(d=Jjw(this,a,d,b))&&c.push(d)}else a.layout.cells.forEach((e,f)=>{e.Qj.length!==0&&(e=Jjw(this,a,{row:f.$b,column:f.ec},b))&&c.push(e)});return c}constructor(a){this.I=a;this.cwm=(Nqw.G(this),void 0);this.Bkl=Inw(b=>{switch(b.type){case "responsive-page":return[];case "fixed-page":return Ijw(this,b);case "concatenated-fixed-page":return b.pages.flatMap(c=>Ijw(this,b.xb(c)));default:throw new u(b);
}});this.YCs=Ljw(b=>m(this.cwm).oca(b).map(({ref:c,Qj:d})=>{d=d.map(e=>this.I.Yoa.cN.get(e)).filter(sb);if(d.length!==0)return{ref:c,comments:d}}).filter(sb));this.vBq=Inw(b=>(new $ow(b,c=>this.I.Yoa.cN.get(c))).list);this.Vlt=Inw(({page:b,fj:c,YNg:d,Jvk:e})=>new apw(b,Inw(f=>new Zow(f,d,e)),c,d,e));this.I.tw&&(this.cwm=new Mqw)}};var Oqw=class{static G(a){O(a,{Tf:b_,tmc:b_({equals:d_.shallow}),gVd:b_({equals:d_.shallow}),EEc:b_({equals:d_.shallow}),hqd:b_({equals:d_.shallow}),Qem:b_({equals:d_.shallow}),YNl:b_({equals:d_.shallow}),Qmc:b_,ded:b_({equals:d_.shallow}),SGm:b_({equals:d_.shallow}),$Lh:b_,lya:b_({equals:d_.shallow}),mJc:b_({equals:d_.shallow}),k0d:b_({equals:d_.shallow}),oZm:b_({equals:d_.shallow}),j9g:b_({equals:d_.shallow}),Z1f:b_,Qoh:b_,fEd:b_({equals:d_.shallow}),Yvo:b_,kpl:b_({equals:d_.shallow})})}get Tf(){return this.I.Yoa.Tf}get tmc(){return new Map([...this.I.KHa.lJc.entries()].map(([a,
{store:b}])=>[a,b]))}get gVd(){return new Map([...this.I.KHa.U1b.entries()].map(([a,{store:b}])=>[a,b]))}get EEc(){return this.I.Yoa.cN}get hqd(){return[...this.EEc.values(),...this.gVd.values()]}get Qem(){return this.hqd.filter(kkw)}get YNl(){const a=new Map;for(const c of this.hqd){var b=$Z(c);b=c.ref?.nh||this.I.DC.jUb.get(b)?.nh;const d=a.get(b)||[];a.set(b,[...d,c])}return a}get Qmc(){return new Map([...this.I.fixed.Qmc,...this.I.lk.Qmc])}get ded(){return new Map(Array.from(this.Qmc.entries()).filter(([,
a])=>!a.mg.comment.kj))}get SGm(){const a=new Map;for(const b of this.hqd){const c=$Z(b);this.Qmc.has(c)||a.set(c,b)}return a}S8c(a){const b=this.I.fixed.S8c(a);a=a instanceof Iow?this.I.lk.S8c(a):[];return[...b,...a]}get $Lh(){const a=this.I.sR.Sib;return a(this.I.sR.selection)?this.I.fixed:this.I.lk}get lya(){return this.$Lh.lya}get mJc(){return this.$Lh.mJc}get k0d(){return this.$Lh.k0d}get QXq(){return this.I.fixed.W8n}get oZm(){return this.I.fixed.LWf}z4d(a){return this.I.fixed.z4d(a)}NLg(a){return this.I.fixed.NLg(a)}qgi(a){return this.I.fixed.qgi(a)}get j9g(){return this.I.lk.j9g}uhi(a){return this.I.lk.uhi(a)}GLg(a){return this.I.lk.GLg(a)}get Z1f(){return this.I.lk.Z1f}get Qoh(){return this.I.lk.Qoh}get fEd(){return this.I.lk.fEd}get Yvo(){return this.I.lk.LWf.flatMap(({comments:a})=>
a).filter(a=>a.type==="comment").length}get kpl(){return this.I.lk.LWf}constructor(a){this.I=a;Oqw.G(this)}};var Pqw=class{static G(a){O(a,{Qmc:b_({equals:d_.shallow}),j9g:b_({equals:d_.shallow}),lya:b_({equals:d_.shallow}),mJc:b_({equals:d_.shallow}),k0d:b_({equals:d_.shallow}),Qoh:b_,Z1f:b_,LWf:b_({equals:d_.shallow}),Wvo:b_({equals:d_.shallow}),fEd:b_({equals:d_.shallow})})}get Qmc(){const a=new Map;var b=this.I.Yoa.cN;for(var c of b.values())b=$Z(c),this.I.DC.jUb.has(b)&&a.set(b,c);for(const [d,{store:e}]of this.I.KHa.U1b.entries())c=e.ref,b=XZ(c)&&c.ZS.collapsed,c&&!b&&a.set(d,e);return a}get j9g(){return new Map(Array.from(this.Qmc.entries()).filter(([a,
b])=>this.I.DC.jUb.has(a)&&!b.mg.comment.kj))}get lya(){var a=this.I.KHa,b=this.I.sR;const c=this.I.Za;var d=this.I.DC;const e=b.selection;b=b.Sib;if(!e||b(e))return[];d=Ojw(this,d);b=Qjw(this,e);d=[...d,...b];a=Tjw({IOj:[...a.U1b.values()],selection:e,wIk:(f,g,h)=>c.$oa(f,g,h).intersects,fPc:f=>c.fPc(f)});return[...d,...a]}get mJc(){const a=this.I.KHa;var b=this.I.sR;const c=this.I.Za,d=b.selection;b=b.Sib;return!d||b(d)?[]:Tjw({IOj:[...a.lJc.values()],selection:d,wIk:(e,f,g)=>c.$oa(e,f,g).aHe,fPc:e=>
c.fPc(e)})}get k0d(){const a=this.I.KHa;var b=this.I.sR;const c=this.I.Za,d=b.selection;b=b.Sib;return!d||b(d)?[]:Tjw({IOj:[...a.lJc.values()],selection:d,wIk:(e,f,g)=>c.$oa(e,f,g).equals,fPc:e=>c.fPc(e)})}get Qoh(){return this.GLg([...this.lya,...this.mJc])}get Z1f(){return this.GLg(this.lya)}get LWf(){return Array.from(this.Wvo).map(a=>({ref:a,comments:this.z4d(a.target)}))}get Wvo(){const a=Vjw(this.I.document).flatMap(b=>Array.from(b.items.values()).filter(c=>c.type==="sheet").flatMap(c=>this.Kgi(c,
b)));return new Set(a)}Kgi(a,b){const c=[],d=a.config.layout.cols,e=a.config.layout.cells;a.config.layout.rows.forEach(f=>d.forEach(g=>{var h=e.get(f,g);if(h&&(h.span.$b!==f||h.span.ec!==g))return[];h=dhw(a.config,f,g);if(this.z4d(h).length===0)return[];g=new Low({sheet:a,tb:{row:f,column:g},container:b.ew(a),Xe:b,range:__c.Gw.item(a)});c.push(g)}));return c}z4d(a){const b=this.S8c(a),c=[...this.I.KHa.U1b.values()].filter(e=>YZ(e.ref)&&e.ref.target.equals(a)).map(e=>e.store),d=(a.Qj||[]).map(e=>this.I.Yoa.cN.get(e)).filter(sb);
return[...b,...c,...d]}S8c(a){return[...this.I.KHa.lJc.values()].filter(b=>YZ(b.ref)&&b.ref.target.equals(a)).map(b=>b.store)}uhi(a){const b=new Map,c=new Map([...this.I.KHa.U1b.entries()].map(([d,{store:e}])=>[d,e]));this.I.DC.cqd.forEach(({Vk:d,jU:e})=>{const f=Ujw(e[0],a);e.some(g=>Ujw(g,a))&&b.set(d,{von:f})});for(const [d,e]of this.fEd.entries())c.has(d)&&e.some(f=>Ujw(f.bounds,a))&&b.set(d,{von:!0});return b}GLg(a){if(a.length){if(a.length===1)return a[0];a=a.flatMap(b=>{var c=$Z(b),d=this.fEd.get(c);
d=d?Sjw(d,this.I.fj):void 0;c=this.I.DC.cqd.get(c);const e=[];d&&e.push({...d,comment:b});c&&e.push({...c,comment:b});return e});if(a.length)return a.reduce((b,c)=>b.width<=c.width?b:c).comment}}get fEd(){const a=[...this.I.KHa.lJc.values(),...this.I.KHa.U1b.values()];return new Map(a.filter(({ref:b})=>!(XZ(b)&&b.ZS.collapsed)).map(({store:b,ref:c})=>{b=$Z(b);c=xkw({ref:c,pd:this.I.pd,Za:this.I.Za});return[b,c]}))}constructor(a){this.I=a;Pqw.G(this)}};var Qqw=a=>{const b=a.KHa,c=a.Yoa,d=a.sR;var e=a.Za;const f=a.DC,g=a.document,h=a.pd,k=a.fj;a=new Nqw({KHa:b,Yoa:c,sR:d,document:g,hF:a.hF,fj:k,tw:__c.Hl.tw&&Pb("ad941681",!1)});e=new Pqw({KHa:b,Yoa:c,sR:d,Za:e,DC:f,document:g,pd:h,fj:k});return{Fu:new Oqw({fixed:a,lk:e,sR:d,KHa:b,Yoa:c,DC:f})}};var Rqw=a_(a=>{const b=a.comment,c=a.focused,d=a.V7p,e=a.EAq,f=a.VMd,g=a.LSh,h=i_(null);a=b.lNb;const k=b.hJ,l=a===void 0;j_(()=>{let p;if(l&&h.current)return h.current&&(p=new Knw["default"](q=>{for(const r of q)q=r.target.offsetHeight,q>0&&g(b,q,h,c)}),p.observe(h.current)),()=>p&&p.disconnect()},[b,c,g,h,l]);const n=g_(p=>{p.stopPropagation();f(b,!k);b.cuc&&!b.hJ&&h?.current?.parentElement?.scrollIntoView()},[b,k,f]);return o_(c_,{children:[VZ(R,{ref:h,className:k||l?void 0:"pGvHdA",children:d}),
e,a&&VZ(WZ,{OEa:!k,children:VZ(Wi,{variant:"linkButton",size:"tiny",onClick:n,children:k?M("y9ZrvQ"):M("pW1yIw")})})]})});var Sqw=class{Exf(a){Wjw(this.JWh,a)}Mhc(a,b){this.JWh.Mhc(a,b)}constructor(a){this.JWh=a}};var Tqw=class{static G(a){O(a,{Mhc:l_,VMd:l_,LSh:l_.bound})}Mhc(a,b){a.lNb=b}VMd(a,b){a.hJ=b}LSh(a,b,c,d){const e=a.hJ===void 0;if(a.lNb===void 0){if(this.maxHeight)c=this.maxHeight;else if(c=c.current?.firstElementChild){var f=window.getComputedStyle(c);c=Number.parseFloat(f.getPropertyValue("line-height"));f=Number.parseFloat(f.getPropertyValue("padding-top"));c=Math.ceil(c*this.Urp+f);c=this.maxHeight=Number.isNaN(c)?this.s3l:c}else c=this.s3l;b=b>c;this.Mhc(a,b);this.VMd(a,e&&!d?!b:!0)}}constructor(){this.s3l=
(Tqw.G(this),169);this.Urp=7}};var Uqw=({o$a:a})=>{const b=new Tqw,c=b.LSh,d=b.VMd,e=f=>VZ(Rqw,{...f,LSh:c,VMd:d});f_(()=>{a.REh=e});return{yVb:new Sqw(b)}};var Vqw=class{static G(a){O(a,{o1c:q_.ref,e_j:b_})}get e_j(){return this.I.document.Ka==="responsive"?!0:this.I.document.pages.some(a=>a.type==="responsive")}constructor(a){this.I=a;this.o1c=(Vqw.G(this),!0)}},Wqw=class{static G(a){O(a,{C0f:l_.bound})}C0f(a,b){this.I.store.o1c!==a&&(this.I.store.o1c=a,this.I.N.track(npw,{action:"change_visibility",source:b,Lnf:"comment_badges",type:a?"show":"hide",bhb:!!b}))}constructor(a){this.I=a;Wqw.G(this)}};var Xqw=a=>{const b=a.Fu,c=a.o1,d=a.QS,e=a.DC,f=a.errorService,g=a.uj;a.mha.init({XTg:()=>!!d.Fqa,$Og:()=>b.Qem.length>0,ged:()=>d.Yza({type:"all",bhb:!1}),kgi:h=>{h=Mjw(b,h).filter(kkw);const k=h.some(l=>Thw(l.mg,{uj:g})>0);return{Hga:h.length,yNe:k}},L5m:h=>{switch(h.type){case "concatenated-fixed":case "responsive":return{LKm:0,Hga:0,Hsb:0};default:const k=b.NLg(h);return{LKm:b.S8c(h).length,Hga:k.length,Hsb:k.reduce((l,{mg:n})=>l+Thw(n,{uj:g}),0)}}},BDl:h=>{const k=Mjw(b,h).sort(c.dYo).find(kkw);
k?d.Yza({type:"thread",gi:$Z(k),Gub:!0}):(d.Yza({type:"all",bhb:!1}),f.error(Error(`No comments could be found on ${h}`)))},Vge:()=>e.Vge()})};var Yqw=class{static G(a){O(a,{IQj:q_.ref,Lym:q_.ref})}jc(a,b,c){UZ(a,d=>b(this,d),{fireImmediately:!0,...c})}constructor(){this.IQj=(Yqw.G(this),void 0)}};var Zqw=a=>{const b=a.nG;return VZ(__c.nB,{nG:b,children:VZ(kr,{Tza:b,preventScroll:"always",children:VZ("div",{className:"QgWkZw",children:VZ(a.EJa,{store:a.store})})})})};var $qw=({nG:a,EJa:b})=>c=>VZ(Zqw,{...c,nG:a,EJa:b});var arw=class{static G(a){O(a,{tNb:b_,Fqa:b_,Xta:b_})}get tNb(){return this.I.Pa.mode>10}get Fqa(){return this.I.hGa.Fqa}get Xta(){}Yza(a){switch(a.type){case "draft":return this.I.xTa.m1f(a.draft);case "thread":case "comments_on_selection":case "all":throw Error(`Opening ${a.type} in contextual comments is not currently supported`);default:throw new u(a);}}Rnc(){return this.I.xTa.m1f(void 0)}bXa({reference:a,source:b}){return this.I.xTa.bXa({reference:a,source:b})}e$a(a){return this.I.xTa.e$a(a)}CIf(){return!1}Amb(){throw Error("Suggestions are not supported in contextual comments");
}Hbc(){throw Error("Handling selection change is not supported in contextual comments");}$Me(){throw Error("Handling page scroll is not supported in contextual comments");}constructor(a){this.I=a;arw.G(this)}};var brw=class extends __c.oxb{};var crw=class extends brw{};var drw=class extends __c.pxb{constructor(a,b){super(a,b);b instanceof HTMLElement&&b.classList.add("comment-blockquote-list-container")}},erw=class extends brw{constructor(a,b){super(a,b);b instanceof HTMLElement&&b.classList.add("comment-blockquote-list-item")}};var $jw=class extends __c.zOd{};$jw.tagName=["SPAN","FONT"];var frw=Array.from(["disc","circle","square"]),grw=Array.from(["decimal","lower-alpha","lower-roman"]),hrw=class extends __c.pxb{},irw=class extends brw{},jrw=class extends vm.ClassAttributor{add(a,b){return b==="0"||b===0?(this.remove(a),!0):super.add(a,b.toString())}constructor(){super("list-level","list-level",{scope:vm.Scope.BLOCK,whitelist:Array.from({length:4},(a,b)=>(b+1).toString())})}},krw=class extends vm.ClassAttributor{add(a,b){frw.includes(b)?b=`u${b}`.replace(/-/g,"_"):grw.includes(b)&&
(b=`o${b.replace(/-/g,"_")}`);return super.add(a,b)}canAdd(a,b){return super.canAdd(a,b)||super.canAdd(a,b.replace(/^[ou]/,"").replace(/_/g,"-"))}value(a){a=super.value(a);return a===""?"":a.replace(/^[ou]/,"").replace(/_/g,"-")}constructor(){super("list-marker","list-marker",{scope:vm.Scope.BLOCK,whitelist:[...frw.map(a=>`u${a}`.replace(/-/g,"_")),...grw.map(a=>`o${a}`.replace(/-/g,"_"))]})}};var lrw=class extends __c.Vwb{static create(a){const b=__c.Vwb.create.call(this,a);b instanceof HTMLElement&&(b.setAttribute("spellcheck","false"),b.textContent=`@${BA(a)}`,b.dataset.id=a.id,b.dataset.brandId=a.na,b.dataset.username=a.username,b.dataset.displayName=a.displayName,b.dataset.groups=a.groups?.join(","),a.Jc&&(b.dataset.avatar=JSON.stringify(a.Jc)));return b}static value(a){if(a&&a instanceof HTMLElement){var b=a.dataset.id,c=a.dataset.brandId,d=a.dataset.username,e=a.dataset.displayName,
f=a.dataset.groups?.split(",");a=(a=a.dataset.avatar)?JSON.parse(a):void 0;return b&&c?{type:"user",id:b,na:c,username:d,displayName:e,groups:f,Jc:a}:void 0}}update(a,b){a.some(c=>c.type==="childList"&&c.removedNodes.length!==0)?this.remove():super.update(a,b)}detach(){this.scroll.domNode.querySelector("[color]")?.removeAttribute("color");super.detach()}};lrw.blotName="comment-mention";lrw.className="_4bA19Q";lrw.tagName="SPAN";var mrw=Pb("ebff17f",!1);var nrw=class extends __c.vOd{convert({html:a,text:b}){const c=new bo;super.convert({html:a,text:b}).forEach(d=>{const e=d.insert&&typeof d.insert;e==="string"?c.insert(d.insert,this.I.V9j&&d.attributes?vow(d.attributes):[]):e==="object"&&Rgw.some(f=>f in d.insert)&&c.insert(d.insert,[])});return c}constructor(a){var b={V9j:Vmw};super(a,{matchers:[["SPAN",(c,d)=>(c=lrw.value(c))?(new bo).insert({"comment-mention":c}):d]]});this.I=b}};var orw=class extends __c.wOd{constructor(a,b,c){const d=__c.wOd.DEFAULTS.bindings;super(a,{bindings:{"escape - clear search":{key:"Escape",handler:b.IOb},"up - previous mention":{key:"ArrowUp",handler:b.FRf},"down - next mention":{key:"ArrowDown",handler:b.FPf},"backspace - remove blockquote or unordered list":{key:"Backspace",handler:b.qCi},"ctrl + enter - submit comment":{key:"Enter",ctrlKey:!0,handler:b.MMn},"cmd + enter - submit comment":{key:"Enter",shortKey:!0,handler:b.MMn},"shift + enter - linebreak":{key:"Enter",
shiftKey:!0,handler:e=>b.i8g(e)},"option + enter - linebreak":{key:"Enter",altKey:!0,handler:e=>b.i8g(e)},"embed left":d["embed left"],"embed left shift":d["embed left shift"],"embed right":d["embed right"],"embed right shift":d["embed right shift"],...ckw({key:"b",J4:"font-weight",fA:"bold",handler:c.Fwf?b.T2k:void 0,disabled:!c.Fwf}),...ckw({key:"i",J4:"font-style",fA:"italic",handler:c.Fwf?b.T2k:void 0,disabled:!c.Fwf}),...ckw({key:"x",shiftKey:!0,J4:"text-decoration",fA:"line-through",handler:c.Fwf?
b.T2k:void 0,disabled:!c.Fwf}),...ckw({key:"k",J4:"link",handler:c.B8h?b.HFi:void 0,disabled:!c.B8h}),"autofill blockquote":{key:" ",collapsed:!0,format:{blockquote:!1,"blockquote-list-item":!1},prefix:/^>$/,handler:()=>!0},"autofill list":{key:" ",collapsed:!0,prefix:/^(\*|-|\d+\.)$/,handler:()=>!0},"tab: select mention/emoji OR indent list":{key:"Tab",handler:()=>b.r7k()?!0:!1},"shift + tab: outdent list":{key:"Tab",shiftKey:!0,format:["list-item","blockquote-list-item"],handler:()=>!0},"backspace: outdent or clear list":{key:"Backspace",
format:["list-item","blockquote-list-item"],collapsed:!0,offset:0,handler:(e,f)=>b.lYe(e,vow(f.format))},"backspace: clear blockquote":{key:"Backspace",format:["blockquote"],collapsed:!0,offset:0,handler:()=>{}},"empty enter: outdent list or clear list":{key:"Enter",format:["list-item","blockquote-list-item"],collapsed:!0,empty:!0,handler:(e,f)=>b.lYe(e,vow(f.format))},"empty enter: clear blockquote":{key:"Enter",format:["blockquote"],collapsed:!0,empty:!0,handler:()=>!0},"enter - select mention/emoji OR end current block":{key:"Enter",
handler:()=>b.onEnter()?!0:!1}}})}};var prw=class{upload(){}};var dkw=parseFloat("calc(var(----lgQg, 0.1rem)*8/8*22)")||2.2,srw=a_(a=>{const b=a.id,c=a.gPe,d=a.uba,e=a.disabled;var f=a.minHeight,g=a.maxHeight;const h=a.placeholder,k=a.ariaLabel,l=a.Vw,n=a.onBlur,p=a.fqa,q=a.onFocus,r=a.onSubmit,t=a.onCancel,v=a.Wh,w=a.B8h,x=a.e9,y=a.hk,z=i_(null),B=i_(null),C=i_(r);j_(()=>{C.current=r},[r]);const G=g_(()=>C.current?(setTimeout(C.current,0),!1):!0,[]),H=g_(()=>c.onEnter(d),[c,d]),K=g_(()=>c.i8g(d),[c,d]),L=g_((la,ja)=>{c.IOb(d)?t&&d.MOc?(t(),la=!1):la=!0:la=
!1;la||ja.event?.stopPropagation();return la},[c,d,t]),N=g_(()=>c.FRf(d),[c,d]),P=g_(()=>c.FPf(d),[c,d]),T=g_((la,ja,oa)=>{p();c.fqa(d,la,ja,oa)},[c,d,p]),V=g_((...la)=>{c.JF(d,...la)},[c,d]),W=g_(la=>{if(B.current){var ja=B.current,oa=la.deltaY;const ma=ja.scrollTop;ja=ja.scrollHeight-ja.scrollTop-ja.clientHeight;(oa<0&&ma>0||oa>0&&ja>0)&&la.stopPropagation()}},[]);a=g_(()=>{f_(()=>{c.Pcf(d);q?.();const la=d.quill;if(la){var ja=d.rha||{index:la.getLength()-1,length:0};la.setSelection(ja,"user")}})},
[c,d,q]);const aa=g_(la=>{la.relatedTarget instanceof HTMLElement&&la.relatedTarget.classList.contains("ql-clipboard")||(n(),f_(()=>{c.lma(d)}))},[c,d,n]);j_(()=>{const la=z.current,ja=B.current;if(!d.quill&&la&&ja){var oa=__c.Twb(la,{blots:qrw(),formats:rrw(w,x,y),modules:{"modules/keyboard":class extends orw{constructor(za){super(za,{onEnter:H,r7k:H,i8g:K,MMn:G,IOb:L,FRf:N,FPf:P,qCi:()=>!0,T2k:()=>!0,HFi:()=>c.HFi(d),hLu:()=>!0,pLu:()=>!0,lYe:()=>!0,GKu:()=>!0,FKu:()=>!0,$Ku:()=>!0,Jgu:()=>!0},
{Fwf:mrw,B8h:w})}},"modules/clipboard":class extends nrw{},"modules/uploader":prw},placeholder:h,scrollingContainer:ja});k&&oa.root.setAttribute("aria-label",k);var ma=UZ(()=>e,za=>za?oa.disable():oa.enable(),{fireImmediately:!0}),na=d.bta,qa=d.kab,ua=UZ(()=>{if(B.current){var za,va;na.V8d?{index:za,length:va}=na.eOb:qa.ZOc?{index:za,length:va}=qa.aFe:Vmw&&d.rha?.length&&({index:za,length:va}=d.rha);if(za!==void 0&&va!==void 0)return{...oa.getBounds(za,va),scrollTop:B.current.scrollTop}}},za=>d.$Cm=
za,{fireImmediately:!0,equals:d_.structural});oa.on("text-change",T);oa.on("selection-change",V);ja.addEventListener("wheel",W,{passive:!0});c.i1f(d,oa);return()=>{ma();ua();ja?.removeEventListener("wheel",W);d.quill&&(d.quill.off("text-change",T),d.quill.off("selection-change",V),c.AMj(d));v?.()}}},[]);g=ekw(g);f=ekw(f);const ba=b_(()=>Egw(d.qu)).get(),da=k_(()=>r_("vtls4Q oODjnw","f4qJng fs-hide",{RW1KaA:e,hYuuMg:ba}),[e,ba]);return VZ(__c.rC,{D6d:!0,$nb:l?"tabdock":"surface",Fl:B,children:VZ("div",
{dir:"auto",id:b,ref:z,onFocus:a,onBlur:aa,style:{minHeight:f,maxHeight:g},className:da})})}),qrw=()=>{const a={[`blots/${$jw.blotName}`]:$jw,[`blots/${lrw.blotName}`]:lrw,[`blots/${brw.blotName}`]:brw};Vmw&&tow&&(a["blots/blockquote"]=crw,a["blots/list-container"]=hrw,a["blots/list-item"]=irw,a["blots/blockquote-list-container"]=drw,a["blots/blockquote-list-item"]=erw);return a},rrw=(a,b,c)=>{const d={};Vmw&&(d["formats/bold"]=akw({blotName:"bold",$ic:["STRONG","B"],b8b:"font-weight",c8b:"bold"}),
d["formats/font-weight"]=new vm.StyleAttributor("font-weight","font-weight",{scope:vm.Scope.INLINE,whitelist:["normal","bold"]}),d["formats/italic"]=akw({blotName:"italic",$ic:["EM","I"],b8b:"font-style",c8b:"italic"}),d["formats/font-style"]=new vm.StyleAttributor("font-style","font-style",{scope:vm.Scope.INLINE,whitelist:["normal","italic"]}),d["formats/line-through"]=akw({blotName:"line-through",$ic:["S","STRIKE"],b8b:"text-decoration",c8b:"line-through"}),d["formats/text-decoration"]=new vm.StyleAttributor("text-decoration",
"text-decoration",{scope:vm.Scope.INLINE,whitelist:["none","line-through"]}));if(Vmw&&a){({"formats/link":a}=__c.ARb(b.kQd,b.kzh,c));if("link"!==a.blotName)throw Error(`The QuillInlineBlotKey.HYPERLINK string literal must match the blotName of the link blot being assigned to this format. Expected ${a.blotName} but got ${"link"}`);d["formats/link"]=a}Vmw&&tow&&(d["formats/list-level"]=new jrw,d["formats/list-marker"]=new krw);return d};var trw=class{static G(a){O(a,{Fqa:q_.ref,G_g:b_})}get G_g(){var a=this.I.viewport;const b=this.I.Pa;if(a.uh||a.MF){var c=0;if(a.uh)({height:a}=this.I.viewport.ey().Nb());else{if(!a.k8)return;({top:c,height:a}=a.k8.Nb())}return{type:1,value:a-(c+b.sD.ld+Uc)-(b.sD.je+Uc)}}}constructor(a){this.I=a;this.Fqa=(trw.G(this),void 0)}},urw=class{static G(a){O(a,{m1f:l_})}m1f(a,b){const c=this.I.store.Fqa;a!==c&&(this.I.store.Fqa=a,b?.brh||!c?.UJb.MOc||c.Sra.zdb||this.I.rY.e$a(c))}bXa(a){return this.I.rY.bXa(a)}e$a(a){this.I.rY.e$a(a);
this.m1f(void 0)}f4c(a,b,c){a=this.I.rY.f4c({draft:a,value:b,va:c});this.m1f(void 0,{brh:!0});return a}async Kjc(a,b){this.I.rY.Kjc({store:a,va:b,uq:this.uq})}constructor(a){this.I=a;this.uq=(urw.G(this),"contextual_column")}};var wrw=a=>{const b=a.rY,c=a.o1,d=a.n$a,e=a.QS,f=a.Pa,g=a.V,h=a.xqg,k=a.EJa,l=new trw({viewport:a.viewport,Pa:f}),n=new urw({store:l,rY:b}),p=$qw({nG:()=>n.m1f(void 0),EJa:vrw({hGa:l,xTa:n,n$a:d,o1:c,V:g,EJa:k})});a=new arw({hGa:l,xTa:n,Pa:f});f_(()=>{h.IQj={R5:b_(()=>!!l.Fqa),Component:()=>l.Fqa&&VZ(p,{store:l.Fqa})}});e.n2e("contextual_comments",a)},vrw=({hGa:a,xTa:b,n$a:c,o1:d,V:e,EJa:f})=>a_(({store:g})=>{const h=g_(k=>{const l=e.wb("submit_draft_comment",{Hb:{name:"ui.collaborating.commenting.submit_draft_comment"}});
k=b.f4c(g,k,l);const n=$Z(k);c.CIf(n)||d.e3e();c.Yza({type:"thread",gi:n,$Eb:!0,o4b:!0,source:"submitted_comment",bhb:!1});b.Kjc(k,l)},[g]);return VZ(f,{type:"comment",onSubmit:h,kia:void 0,uba:g.UJb,Sra:g.Sra,source:"contextual_column",yAn:a.G_g})});var xrw=class{static G(a){O(a,{tNb:b_,Fqa:b_,Xta:b_})}get tNb(){return this.I.hGa.tNb}get Fqa(){return this.I.hGa.Fqa}get Xta(){return this.I.hGa.Xta}Yza(a){switch(a.type){case "draft":case "thread":case "comments_on_selection":return this.I.xTa.EVn(a);case "all":throw Error("Opening all comments is not supported in contextual comments");default:throw new u(a);}}Rnc(){this.I.xTa.WWa(void 0);this.I.xTa.DXi(!1)}bXa({reference:a,source:b}){return this.I.xTa.bXa({reference:a,source:b})}e$a(a){return this.I.xTa.e$a(a)}CIf(){return!1}Amb(a){return this.I.xTa.Amb(a)}Hbc(a,
b){this.I.xTa.Hbc(a,b)}$Me(){}constructor(a){this.I=a;xrw.G(this)}};var yrw=class{static G(a){O(a,{DXi:l_.bound,KNc:l_.bound,WWa:l_.bound,rpo:l_.bound,Z9c:l_.bound,Amb:l_.bound,Exf:l_.bound,KNj:l_.bound,gLo:l_.bound,EVn:l_.bound,Hbc:l_.bound})}async V4e(a,b){b?.Gub&&this.I.Uaa.Gub(!0);const c=this.I.store.Vwa;this.WWa(a,b);c!==a&&await this.I.rY.Cie(a,b)}EVn(a){switch(a.type){case "draft":this.I.Fu.tmc.has($Z(a.draft))&&this.V4e(a.draft,{$Eb:a.$Eb});break;case "thread":const b=this.I.Fu.EEc.get(a.gi)??this.I.Fu.gVd.get(a.gi);b&&(this.V4e(b,{CGl:a.CGl,o4b:a.o4b,$Eb:a.$Eb}),
a.KNc&&this.KNc(a.Wba||a.gi));break;case "comments_on_selection":a=this.I.store.XNl;a.length>0&&this.V4e(a[0]);break;case "all":throw Error("Opening all comments is not supported in contextual comments");default:throw new u(a);}}Hbc(a,b){if(this.I.sR.pWi)this.I.Uaa.Gub(!1);else{var c=this.I.Fu.Qoh,d=this.I.Fu.lya,e=this.I.Fu.mJc,f=c||d.length>0&&d[0]||e.length>0&&e[0];this.rpo(c?[c]:[...d,...e]);f?f.type==="draft"?a({type:"draft",draft:f,source:"comment_highlight",$Eb:!0}):a({type:"thread",gi:$Z(f),
source:"comment_highlight",$Eb:!0,o4b:!0,CGl:!0}):b()}}constructor(a){this.I=a;this.uq=(yrw.G(this),"contextual_column");this.DXi=b=>{this.I.store.bEk=b};this.KNc=b=>{this.I.store.PAd=b};this.WWa=(b,c)=>{b&&!c?.CGl&&this.DXi(!0);b||this.KNc(void 0);const d=this.I.store.Vwa;d!==b&&(this.I.store.Vwa=b,d?.type==="comment"&&this.I.t8.eAh(d),c?.brh||d?.type!=="draft"||!d?.UJb.MOc||d.Sra.zdb||this.e$a(d));this.FVl(d,b)};this.FVl=(b,c)=>{const d=this.I.DC,e=c?.type==="comment",f=e?$Z(c):void 0;f&&e&&c.mg.comment.kj&&
ygw(d,f,!0);b?.type==="comment"&&(c=$Z(b),c!==f&&(Bgw(d,c),!b.mg.comment.kj||ygw(d,c,!1)))};this.rpo=b=>{this.I.store.gmi.clear();b.forEach(c=>{this.I.store.gmi.add($Z(c))})};this.Z9c=(b,c)=>{this.I.XPb.Z9c({store:b,action:c,Ohd:this.I.store.YVc})};this.nCl=b=>{var c=this.I.ddb.Y9c;const d=this.I.hb;var e=$Z(b);e=c?.source==="highlight"&&!!c.store&&$Z(c.store)===e;c=c?.source==="badge"&&!!b.ref&&!!c.ref?.equals(b.ref);b=ghw(b.ref)&&b.ref?.page?.type==="fixed"&&!ug(d.kl(b.ref.page));return e||c&&b};
this.bXa=b=>this.I.rY.bXa(b);this.e$a=b=>{this.I.rY.e$a(b);this.I.store.Vwa===b&&this.WWa(void 0)};this.f4c=(b,c,d)=>{b=this.I.rY.f4c({draft:b,value:c,va:d});this.WWa(b,{brh:!0});return b};this.Jgb=(b,c)=>this.I.rY.Jgb({store:b,value:c,uq:this.uq});this.eBc=(b,c)=>{this.I.rY.eBc({comment:b,C_i:c})};this.o$b=(b,c)=>this.I.rY.o$b({store:b,value:c,uq:this.uq});this.IWb=(b,c,d)=>this.I.rY.IWb({store:b,fZ:c,value:d,uq:this.uq});this.M3e=(b,c)=>this.I.rY.M3e({store:b,fZ:c,uq:this.uq});this.hpb=b=>{this.I.store.Vwa===
b&&this.WWa(void 0);return this.I.rY.hpb({store:b,uq:this.uq})};this.Tyb=(b,c)=>this.I.rY.Tyb({store:b,fZ:c,uq:this.uq});this.iQb=({store:b,action:c})=>this.I.rY.iQb({store:b,action:c,uq:this.uq});this.FBc=({store:b})=>this.I.rY.FBc({store:b,KQd:"contextual_column"});this.Kjc=async(b,c)=>{this.I.rY.Kjc({store:b,va:c,uq:this.uq})};this.SSl=b=>{this.Amb({gxa:$Z(b)})};this.Amb=async({gxa:b})=>{await this.I.rY.Amb({gxa:b})};this.Exf=b=>{this.I.store.Hxf.add(b);(b=this.I.Fu.EEc.get(b))&&this.I.rY.pEg(b)};
this.KNj=b=>{this.I.store.Hxf.delete(b)};this.aAr=b=>this.I.store.Hxf.has(b);this.gLo=b=>{this.aAr(b)?this.KNj(b):this.Exf(b)}}};var zrw=class{static G(a){O(a,{bEk:q_.ref,Vwa:q_.ref,PAd:q_.ref,gmi:q_.shallow,Hxf:q_.shallow,G_g:b_,Kad:b_,tNb:b_,Fqa:b_,YVc:b_,Xta:b_,Kzj:b_({equals:d_.shallow}),$Vj:b_({equals:d_.shallow}),Rio:b_,XNl:b_({equals:d_.shallow})})}get G_g(){var a=this.I.viewport;const b=this.I.Pa;if(a.uh||a.MF){var c=0;if(a.uh)({height:a}=this.I.viewport.ey().Nb());else{if(!a.k8)return;({top:c,height:a}=a.k8.Nb())}return{type:1,value:a-(c+b.sD.ld+Uc)-(b.sD.je+Uc)}}}get Kad(){const a=this.I.viewport;return a.uh&&!a.nO}get tNb(){return this.I.Pa.mode>
10}get Fqa(){return this.Vwa?.type==="draft"?this.Vwa:void 0}get YVc(){return this.Vwa?$Z(this.Vwa):void 0}get Xta(){return this.Vwa?.type==="comment"?this.Vwa:void 0}get Kzj(){var a=this.I.document,b=this.I.viewport;if(a.Ka==="responsive"||!(b.uh&&b.zoom&&b.Vg&&this.Kad))return[];b=[];for(const e of a.pages){a:{var c=this.I.hb;switch(e.type){case "fixed":case "responsive":if(a=this.qpk(e)){c=e.type==="responsive"||ug(c.kl(e));var d=hkw(this,e);a={nh:e.id,box:a,Jkd:d,Upt:c,oc:!1};break a}break;case "concatenated-fixed":c=
[];a=[];for(const f of e.pages)if(d=this.qpk(f))f.id&&a.push(f.id),c.push(d);c=__c.Sj(0,c);a={nh:e.id,O4p:a,box:c,Jkd:hkw(this,e),oc:!1};break a;default:throw new u(e);}a=void 0}a&&b.push(a)}return b}get $Vj(){var a=this.I.Fu,b=this.I.viewport;if(this.I.document.Ka==="responsive")return b=a.ded,[{threads:[...a.tmc.values(),...b.values()].sort(this.I.dHl),r_e:0}];a=b.ya;const c=b.uh,d=b.MF;return a.type==="responsive"?d?hkw(this,a):[]:c&&b.zoom?hkw(this,a):[]}get Rio(){const a=this.I.viewport,b=this.I.DC;
if(this.I.document.Ka!=="responsive"&&this.Kad&&this.Vwa){var c=$Z(this.Vwa);return a.Vg?this.Vwa.ref?.nh||b.jUb.get(c)?.nh||ikw(this,c):jkw(this,c)?"current":void 0}}get XNl(){var a=this.I.Fu;const b=this.I.dHl,c=a.mJc;a=[...a.lya].sort(b).reverse();return[...c,...a]}constructor(a){this.I=a;this.bEk=(zrw.G(this),!1);this.gmi=new Set;this.Hxf=new Set;this.qpk=b=>{const c=this.I.viewport;var d=this.I.document;if(d.Ka==="fixed"&&(d=zf(d),c.uh))return b=d.xb(b),c.lS(b)}}};var Arw=(a,b)=>J("VdXOYw",[a,b]);var qkw=5*Uc;var Brw=xnw((a,b)=>{const c=a.store,d=a.oc;var e=a.l9d,f=a.GUg;const g=a.V8,h=a.Kkb;var k=a.fj;const l=a.h5c,n=a.nG,p=a.onMouseDown,q=a.onMouseEnter,r=a.onMouseLeave,t=a.N2k,v=a.$ij;a=a.yhj;const w=i_(!1),x=g_(C=>{C!==w.current&&(w.current=C,t?.(C))},[t]),{ref:y,onMouseEnter:z,onMouseLeave:B}=pkw({GUg:f,ZDk:e,Kkb:h,fj:k,h5c:l,c$r:()=>{x(!0)},Xcs:()=>{x(!1)}});j_(()=>()=>{w.current&&t?.(!1)},[t]);e=g_(()=>{z();q()},[z,q]);f=g_(()=>{B();r()},[B,r]);b=(0,Pnw["default"])(b,y);a:switch(c.type){case "comment":k=
Arw(BA(c.mg.comment.author),c.mg.Lta);break a;case "draft":k=M("ZhFvxw");break a;default:throw new u(c);}return VZ(__c.nB,{nG:n,children:VZ("div",{ref:b,role:"region",onMouseDown:p,onMouseEnter:e,onMouseLeave:f,className:"_7XhjQ","aria-label":k,"data-contextual-comment-card":!0,children:VZ(R,{borderRadius:"container",width:"full",className:r_("NnTQzQ",{vkqsOA:d,IoK5_g:g,_6XBAvQ:h}),children:VZ(R,{className:"_7X_bew",children:c.type==="draft"?VZ(v,{store:c}):VZ(a,{store:c})})})})})}),Crw=a=>a.hasAttribute("data-contextual-comment-card");var Drw=a=>{const b=a.hGa,c=a.xTa,d=a.Kkb,e=a.fj,f=a.$ij,g=a.yhj,h=(l,n)=>b.YVc===$Z(l)?!1:Cgw(n,Xnw)?n.target.getAttribute("data-comment-card-action")==="true":!0,k=a_(({store:l,l9d:n,N2k:p,$Ka:q,h5c:r})=>{var t=b.YVc,v=b.gmi,w=$Z(l);const x=t===w;t=x||v.has(w);v=c.nCl(l);const [y,z]=h_(!1),B=i_(x);j_(()=>{const K=B.current;(B.current=x)&&!K?(z(!1),setTimeout(()=>{z(!0)})):x||z(!1)},[x]);w=g_(K=>{(Cgw(K,Crw)?b.YVc!==$Z(l):1)&&c.WWa(void 0)},[l]);const C=g_(K=>{h(l,K.nativeEvent)&&f_(()=>{c.V4e(l,
{Gub:!0,o4b:!0})})},[l]),G=g_(()=>{c.Z9c(l,"enter")},[l]),H=g_(()=>{c.Z9c(l,"leave")},[l]);return VZ(Brw,{store:l,oc:x,l9d:n,GUg:t,V8:v,Kkb:d,fj:e,nG:y?w:void 0,onMouseDown:C,onMouseEnter:G,onMouseLeave:H,$ij:f,yhj:g,N2k:p,ref:q,h5c:r})});return xnw((l,n)=>VZ(k,{...l,$Ka:n}))};var Grw=a=>{const b=a.hGa,c=a.Jg,d=a.sqm,e=a.Jkd,f=a.DC,g=a.Qei,h=b.Vwa,k=g_((n,p)=>{n=n&&g(n);return n!==void 0?n+p:void 0},[g]),l=g_(()=>{if(!e.every(v=>v.threads.length===0)&&c.current&&d.current){var n=c.current,{properties:p,selectedIndex:q}=Erw({Jkd:e,m2p:d.current,X3q:k,Vwa:h}),{l3s:r,Jj:t}=Frw(p,q);r.forEach(({M2i:v,height:w})=>{v&&(v.style.height=`${w}px`)});n.style.transform=`translateY(${t}px)`}},[d,e,c,k,h]);j_(()=>{const n=skw(f,l),p=tkw(b,l),q=ukw(e,g,l),r=vkw(l);l();return()=>{n();
p();q();r()}},[l,g,e,f,b])},Erw=({Jkd:a,m2p:b,X3q:c,Vwa:d})=>{const e=[];let f;a.flatMap(({threads:g,r_e:h})=>g.map(k=>({store:k,r_e:h}))).forEach(({store:g,r_e:h},k)=>{var l=$Z(g);l=b.get(l);if(l!==void 0){var n=l.card;(l=l.spacer)&&n&&({height:n}=n.getBoundingClientRect(),h=Math.floor(c(g,h)??0),d===g&&(f=k),e.push({Gsq:h,q2p:n,M2i:l}))}});return{selectedIndex:f,properties:e}},Frw=(a,b)=>{let c=0,d=0;const e=[],f=(k,l,n,p)=>{e[k]={M2i:p,height:0};l-=d;e[k].height=l;d=d+l+n},g=(k,l,n)=>{let p=d-
l;for(;k>0;k--){const {height:q}=e[k-1],r=Math.min(q,p);e[k-1].height=q-r;d-=r;p-=r}p>0?(c=-p,d=l+n):d+=n};for(let k=0;k<a.length;k++){const {Gsq:l,q2p:n,M2i:p}=a[k];e[k]={M2i:p,height:0};if(d<l)f(k,l,n,p);else{var h=b!==void 0;h&&k===b?g(k,l,n):h&&k>b?(h=Math.max(l-d,0),e[k].height=h,d=d+h+n):d+=n}}return{l3s:e,Jj:c}};var Hrw=parseInt("32px",10),Irw=()=>0,Krw=a_(a=>{const b=a.hGa.Kzj,c=a.hGa.$Vj,d=a.hGa.Rio;return VZ(ynw,{children:b.length===0?VZ(Jrw,{...a,Jkd:c,Eid:!1}):b.map(e=>{const f=d!=null&&d!==e.nh&&!e.O4p?.includes(d);return VZ(Jrw,{dns:e,Jkd:e.Jkd,Eid:f,...a},e.nh)})})}),Jrw=a_(({hGa:a,DC:b,Kkb:c,Qei:d,Lff:e,dns:f,Jkd:g,Eid:h=!1})=>{const k=a.Vwa,l=a.Kzj,n=a.Kad,p=i_(null),q=i_(null),r=g.flatMap(({threads:G})=>G),t=r.some(G=>G===k),[v,w]=h_(0),x=v>0,y=g_(G=>{w(H=>G?H+1:Math.max(0,H-1))},[]),z=k_(()=>
n&&f&&l.length?{top:f.box.t.y-l[0].box.t.y,height:f.box.height+Hrw}:{paddingBottom:`${a.I.Pa.sD.je}px`},[n,f,l,a]),{bNm:B,UJg:C}=wkw();Grw({hGa:a,Jg:q,sqm:B,Jkd:g,DC:b,Qei:f?.Upt?Irw:d});return VZ("div",{ref:p,style:z,className:r_("qeZBBQ",{hL6MAA:n,_1UArfw:t,su1oTQ:x}),children:VZ("div",{className:"wEfyxA",children:VZ(Lrw,{threads:r,Lff:e,l9d:t,OSs:y,Kkb:c,Jg:q,UJg:C,hidden:h,h5c:!1})})})}),Mrw=a_(a=>{const b=a.hGa,c=a.DC,d=a.threads,e=a.Lff,f=a.nG,g=a.l9d;a=a.Kkb;const h=i_(null),{bNm:k,UJg:l}=
wkw();Grw({hGa:b,Jg:h,sqm:k,Jkd:[{threads:d,r_e:0}],DC:c,Qei:()=>0});return VZ(__c.nB,{nG:f,children:VZ(Lrw,{threads:d,Lff:e,l9d:g,Kkb:a,Jg:h,UJg:l,h5c:!0})})}),Lrw=p_(({threads:a,Lff:b,l9d:c,Kkb:d,Jg:e,UJg:f,hidden:g,OSs:h,h5c:k})=>{const l=g_(p=>f("card",p),[f]),n=g_(p=>f("spacer",p),[f]);return VZ(R,{Lb:"1u",className:r_("CylGnA",{_0NyVxA:d}),ref:e,children:VZ(Nrw,{hide:g,children:!g&&a.map(p=>{const q=$Z(p);return o_(ynw,{children:[VZ("div",{ref:n(q)}),VZ(b,{store:p,ref:l(q),l9d:c,N2k:h,h5c:k})]},
q)})})})}),Nrw=p_(({hide:a,children:b})=>a===void 0?b:VZ(__c.lcj,{type:"fade",keyFrame:a?"0":"1",k9b:"not-set",Mpc:"not-set",children:!a&&b}));var Orw=a_(({store:a,uj:b,hJ:c,oc:d,permissions:e,wjj:f,Eyp:g,g5o:h,eZe:k,xv:l,rS:n,ucb:p,VD:q,YYe:r,Rk:t,aEi:v,Ndd:w,$dd:x,idd:y,Kdd:z})=>{const B=a.mg,C=B.comment,G=B.kF,H=B.Lta,K=B.ecb,L=e_(C),N=L&&e?.zng()&&!C.kj,P=b_(()=>!a.guf.MOc||!!a.Sra.zdb).get(),{Cqi:T,EGn:V,V9m:W}=bqw(B,b),[aa,ba]=b_(()=>[G.slice(0,-1),G.slice(-1)]).get(),da=g_(()=>{k(B.comment.id)},[k,B.comment.id]),{JOj:la,I8k:ja,eNj:oa}=hqw(),ma=g_(za=>{const va=za!==B.comment&&za.type==="comment",xa=B.comment.kj,Ba=[];if(Tow(B.comment))return Ba;
!xa&&e?.Uu(za)&&za.type==="comment"&&Ba.push(kow(()=>q(za)));xa&&va||!e?.Axe(za)||Ba.push(low(()=>{ja(za.id)}));n&&Ba.push(mow(()=>n({Vk:za.gi,Wba:va?za.id:void 0,uq:"contextual_column",status:za.kj?"resolved":"unresolved"})));Pb("8d2d91ee",!1)&&Ba.push(oow(()=>p(za.id)));!xa&&za.type==="comment"&&e&&e.gtf&&e.ftf&&Ba.push({label:M("q6kIcw"),mode:"info"});return Ba},[B.comment,e,ja,q,n,p]),na=g_(za=>{l(za);oa()},[l,oa]),qa=k_(()=>H===0?null:H>1&&c?VZ(dqw,{variant:"expanded",count:H,onClick:da}):H>
1&&!c?VZ(dqw,{variant:"collapsed",count:H-1,onClick:da}):H===1&&W?VZ(dqw,{variant:"new",count:H}):VZ(dqw,{variant:"standard",count:H}),[H,W,c,da]),ua=g_(za=>{const va=za.IIf,xa=!va&&Ggw(za,{uj:b,Lkd:K})&&H>1&&!c;return VZ(f,{comment:za,RPa:va?T:xa,ZNg:!d&&va&&P,DDa:ma(za),JNc:L,xv:()=>na(za),Jtc:la===za.id,Snc:oa,aEi:v,YYe:r,Rk:t,type:va?"comment":"reply",WCb:va&&!za.kj&&za.type==="comment"?w:void 0,wSc:va&&za.kj&&za.type==="comment"?x:void 0,qna:va&&N?y:void 0,atb:va&&N?z:void 0},za.id)},[K,b,H,
P,c,T,L,d,N,la,ma,na,oa,v,r,t,w,x,y,z,f]);return o_(R,{className:"Uo5F1A",children:[h,ua(C),qa,c&&aa.map((za,va)=>o_(ynw,{children:[va===V&&VZ(dqw,{variant:"new",count:W?H:void 0}),ua(za)]},za.id)),ba.map((za,va)=>{va=c?aa.length+va:va;return o_(ynw,{children:[aa.length>0&&va===V&&VZ(dqw,{variant:"new",count:W?H:void 0}),ua(za)]},za.id)}),d&&g]})});var Prw=a=>{const b=a.hGa,c=a.xTa,d=a.V,e=a.QSa,f=a.permissions,g=a.Ftd,h=a.MKd,k=a.uj,l=a.eTb,n=a.EJa,p=a.fK,q=async(z,B,C)=>{B.cuc?z=await c.IWb(z,B,C):(sa(z.mg.comment.type==="comment"),z=await c.o$b(z,C));return z},r=z=>B=>{const C=B.created!==B.updated;if(B.IIf){if(B.type==="comment")return sa(z.mg.comment.type==="comment"),C?c.o$b(z,{grant:B.mqa?.grant,content:B.content,qu:B.qu,wA:B.mqa?.wA||[],attachments:B.mqa?.attachments||[]}):c.Kjc(z,d.wb("retry_submit_draft_comment",{Hb:{name:"ui.collaborating.commenting.retry_submit_draft_comment"}}));
ra(!C&&e_(B)&&!!B.ZQe);sa(e_(z.mg.comment));return c.SSl(z)}Ghw(B);return C?c.IWb(z,B,{grant:B.mqa?.grant,content:B.content,qu:B.qu,wA:B.mqa?.wA||[],attachments:B.mqa?.attachments||[]}):c.M3e(z,B)},t=e.mAe(c.iQb,{async:!0,default:Ma()}),v=e.mAe(c.FBc,{async:!0,default:Ma()}),w=a_(({store:z})=>{const B=g_(async C=>{await c.Jgb(z,C)},[z]);return o_(c_,{children:[VZ(__c.Qt,{}),VZ(n,{type:"reply",uba:z.guf,Sra:z.Sra,onSubmit:B,JNc:e_(z.mg.comment),kia:void 0})]})}),x=a_(z=>VZ(Wpw,{...z,YLm:!0,fK:p,eTb:l,
EJa:n})),y=a_(({store:z,WCb:B})=>{const C=z.mg.comment,G=C.type==="comment"?C.Yla:void 0,H=C.type==="comment"?C.UN:void 0,K=!!G;return K?VZ(aqw,{type:z.type,status:"unresolved",LNa:C.LNa,UN:H,sBb:K,D8d:!!k&&k===G,qmn:!1,x6a:B,fK:p}):null});return a_(({store:z})=>{const B=g_(N=>{N.IIf?c.hpb(z):(N.type==="comment"||N.type==="ai")&&c.Tyb(z,N)},[z]),C=g_(async()=>{t({store:z,action:void 0})},[z]),G=g_(async()=>{v({store:z})},[z]),H=g_(async N=>{t({store:z,action:N})},[z]),K=g_((N,P)=>q(z,N,P),[z]),L=
g_(N=>c.eBc(N,!1),[]);return VZ(Orw,{store:z,hJ:b.Hxf.has($Z(z)),oc:b.Xta===z,permissions:f,uj:k,wjj:x,Eyp:VZ(w,{store:z}),g5o:VZ(y,{store:z,WCb:C}),eZe:c.gLo,xv:B,rS:g.zYh,ucb:h.cSi,VD:N=>{c.eBc(N,!0)},YYe:K,Rk:r(z),aEi:L,Ndd:C,$dd:G,idd:()=>H("accepted"),Kdd:()=>H("rejected")})})};var Rrw=a=>{const b=a.hGa,c=a.xTa;var d=a.V;const e=a.pd,f=a.Za,g=a.DC,h=a.viewport;var k=a.QSa;const l=a.permissions,n=a.Ftd,p=a.MKd,q=a.uj,r=a.Kkb,t=a.fj,v=a.eTb,w=a.EJa,x=a.fK;a=G=>VZ(w,{...G,source:"contextual_column"});const y=a_(G=>VZ(v,{...G,Vma:b.PAd===G.comment.id,source:"contextual_column"}));k=Prw({hGa:b,xTa:c,V:d,QSa:k,permissions:l,Ftd:n,MKd:p,uj:q,eTb:y,EJa:a,fK:x});d=Qrw({hGa:b,xTa:c,V:d,EJa:a});const z=Drw({hGa:b,xTa:c,Kkb:r,fj:t,yhj:k,$ij:d}),B=G=>{{var H={pd:e,Za:f,DC:g,viewport:h};
const L=H.DC;if(G.type==="draft"||qhw(G.ref))G=G.ref&&ykw(G.ref,H);else{var K=$Z(G);G=(K=L.cqd.get(K))?K.top:G.ref?ykw(G.ref,H):void 0}}return G},C=()=>{c.DXi(!1);c.WWa(void 0)};return{W5o:()=>VZ(Krw,{DC:g,hGa:b,Kkb:r,Lff:z,Qei:B}),X5o:a_(()=>VZ(Mrw,{hGa:b,DC:g,threads:b.XNl,Lff:z,nG:C,l9d:!!b.Vwa,Kkb:r}))}},Qrw=({hGa:a,xTa:b,V:c,EJa:d})=>a_(({store:e})=>{const f=g_(g=>{const h=c.wb("submit_draft_comment",{Hb:{name:"ui.collaborating.commenting.submit_draft_comment"}});g=b.f4c(e,g,h);b.Kjc(g,h)},[e]);
return VZ(d,{type:"comment",onSubmit:f,kia:void 0,uba:e.UJb,Sra:e.Sra,source:b.uq,yAn:a.G_g})});var Srw=a=>{const b=a.etd;var c=a.rY;const d=a.Fu,e=a.t8,f=a.sR,g=a.Uaa,h=a.yVb,k=a.QS,l=a.Gj,n=a.xqg,p=a.viewport,q=a.V,r=a.DC,t=a.Za,v=a.pd,w=a.document,x=a.QSa,y=a.permissions,z=a.Ftd,B=a.MKd,C=a.uj,G=a.ddb,H=a.XPb,K=a.Kkb,L=a.fj,N=a.eTb,P=a.EJa,T=a.fK,V=a.hb,W=new zrw({viewport:p,document:w,Pa:a.Pa,Fu:d,ddb:G,dHl:a.o1.dYo,hb:V,DC:r});a=new yrw({store:W,t8:e,rY:c,Fu:d,sR:f,Uaa:g,yVb:h,ddb:G,XPb:H,DC:r,hb:V});c=new xrw({hGa:W,xTa:a});const {W5o:aa,X5o:ba}=Rrw({hGa:W,xTa:a,V:q,pd:v,Za:t,DC:r,viewport:p,
QSa:x,permissions:y,Ftd:z,MKd:B,uj:C,Kkb:K,fj:L,eTb:N,EJa:P,fK:T});n.jc(()=>{if(!k.Pib||w.Ka!=="fixed"||!p.uh||!p.nO)return!1;const da=p.Vg;return da?.type==="fixed-page"&&ug(V.kl(da.ia))},(da,la)=>{da.Lym=la?{R5:b_(()=>W.bEk),Component:ba}:void 0});l.jc(()=>k.Pib&&k.jEc==="contextual_comments"&&b.o1c&&W.tNb?{isVisible:!0,JXq:p.uh,MF:p.MF,Vg:p.Vg,Kad:W.Kad}:{isVisible:!1},(da,{isVisible:la,JXq:ja,MF:oa,Vg:ma,Kad:na})=>{if(la){la=typeof ma==="undefined"||ma.type==="responsive-page";var qa={Component:aa,
Toh:!0};da.dS=(ma?.type==="fixed-page"||na)&&ja?qa:void 0;da.Bn.dS=la&&oa?qa:void 0}else da.dS=void 0,da.Bn.dS=void 0});fkw(a);k.n2e("contextual_comments",c)};var Trw=Symbol("CopiedCommentLink"),Urw=class{constructor(a,b,c,d,e,f){var g=__c.Zo();this.ka=a;this.Of=b;this.fe=c;this.NP=g;this.ma=d;this.N=e;this.Dq=f;this.zYh=h=>{var k=__c.sB.w9c,l=this.ka,n=this.Of;var p=h.Vk;var q=h.Wba;p=new __c.oi({wa:new __c.yt({dS:new __c.Evd({MLc:p,vJe:q,FQa:new __c.Qcc({MLc:p,vJe:q})})})});k=k.call(__c.sB,{id:l,extension:n,Gc:__c.ni(p),ha:{content:this.ka,medium:"comment_link",$d:"comment_share",source:"comment"}});this.NP(k);this.ma.Ib({Db:M("szxpBg"),group:Trw});this.N.track(lpw,
h);this.Dq.pea({ka:this.ka,medium:"comment_link",location:"editor_comment",s9:__c.Rik[this.fe.kX]})}}};var Vrw=class{constructor(a){this.I=a;this.bXa=b=>{const c=this.I.Uaa,d=this.I.QS,e=this.I.Fu.k0d;this.I.VGc?.C0f(!0);if(b=e.length?e[0]:d.bXa({source:b}))c.dyo(b.ref)&&c.W4e(b),d.Yza({type:"draft",draft:b,source:"draft_comment"})};this.F0k=()=>{const b=this.I.Fu,c=this.I.QS,d=this.I.Msk;this.I.store.yNb?this.bXa("floating_toolbar"):(ra(b.lya.length>0),c.Yza({type:"comments_on_selection",l2i:!0,source:"floating_toolbar"}));d?.lxi?.()}}};var Wrw=class{static G(a){O(a,{KOc:b_})}get KOc(){return this.I.Pa.mode>10}constructor(a){this.I=a;Wrw.G(this)}};var Xrw=class extends Wrw{U_i(a){return this.KOc&&this.yNb(a)&&!Ckw(a)&&!(a?.inner?.type==="sheet"&&this.I.mc?.state?.type==="focused")}$Cl(a){const b=this.I.la.layout!==2||this.I.Pa.mode===20;return this.KOc&&Ckw(a)&&b}SCl(a){return this.KOc&&Dkw(this,a)}JCl(a){return this.U_i(a)}MCl(a){return this.KOc&&this.yNb(a)}LCl(a){return this.KOc&&Dkw(this,a)}KCl(a){return this.KOc&&(Ekw(a)||Ckw(a))}yNb(a){var b=this.I.mc;b=b?.state?.type==="focused"&&!b.state.Sc.isEmpty&&b.state.range.length>0;return!a||
a.type==="audio"||a.inner?.type==="table"&&!b||a.inner?.type==="sheet-cell-media"?!1:Dkw(this,a)||Ekw(a)||Ckw(a)}constructor(a){super(a);this.I=a;this.QWh="icon"}};var Yrw=class{static G(a){O(a,{Iyo:b_,BAo:b_,Uzo:b_,CDl:b_,Dph:b_,Hyo:b_,Gyo:b_,QWh:b_,yNb:b_,HUa:b_})}get Iyo(){var a=this.I.sR;const b=this.I.fixed,c=this.I.lk,d=a.selection;a=a.Sib;return d?a(d)?b.U_i(d):c.U_i(d):!1}get BAo(){var a=this.I.sR;const b=this.I.fixed,c=this.I.lk,d=a.selection;a=a.Sib;return d?a(d)?b.$Cl(d):c.$Cl(d):!1}get Uzo(){var a=this.I.sR;const b=this.I.fixed,c=this.I.lk,d=a.selection;a=a.Sib;return d?a(d)?b.SCl(d):c.SCl(d):!1}get CDl(){var a=this.I.sR;const b=this.I.fixed,c=this.I.lk,
d=a.selection;a=a.Sib;return d?a(d)?b.JCl(d):c.JCl(d):!1}get Dph(){var a=this.I.sR;const b=this.I.fixed,c=this.I.lk,d=a.selection;a=a.Sib;return d?a(d)?b.MCl(d):c.MCl(d):!1}get Hyo(){var a=this.I.sR;const b=this.I.fixed,c=this.I.lk,d=a.selection;a=a.Sib;return d?a(d)?b.LCl(d):c.LCl(d):!1}get Gyo(){var a=this.I.sR;const b=this.I.fixed,c=this.I.lk,d=a.selection;a=a.Sib;return d?a(d)?b.KCl(d):c.KCl(d):!1}get QWh(){var a=this.I.sR,b=this.I.fixed,c=this.I.lk,d=a.selection;a=a.Sib;a(d)?d=b.QWh:(a=c.I.Pa,
b=c.I.jg,c=c.I.la.layout===2&&a.mode===20,d=d&&b&&c?"icon-and-label":"icon");return d}get yNb(){var a=this.I.sR;const b=this.I.fixed,c=this.I.lk,d=a.selection;a=a.Sib;return d?a(d)?b.yNb(d):c.yNb(d):!1}get HUa(){const a=this.I.QS;return this.I.la.layout===1&&!!a.Fqa}constructor(a){this.I=a;Yrw.G(this)}};var Zrw=class extends Wrw{U_i(a){var b;if(b=this.KOc)(a=this.yNb(a))||(a=this.I.Fu.lya,b=this.I.la.layout===1&&a.length===1&&e_(a[0].mg.comment),a=a.length>0&&!b),b=a;return b}$Cl(a){return this.KOc&&this.I.Pa.mode>20&&a?.type===4&&a.cells.size>0}SCl(a){return this.KOc&&this.I.Pa.mode>=20&&a?.type===1&&a.only?.type==="design"&&a.only.Nx?.ref?.type==="sticky-scroll"&&a.container.type!=="marker"&&a.container.type!=="section-marker"}JCl(){return!1}MCl(a){return this.KOc&&this.yNb(a)}LCl(){return!1}KCl(){return!1}yNb(a){const b=
this.I.Za;if(!this.I.viewport.MF||!a)return!1;switch(a.type){case 0:if(a.container.type==="sheet-item-cell-richtext")break;const c=b.Dob(a.container.text,a.range);if(!c.collapsed&&(c.DUa||!a.isEmpty))return!!b.alh;break;case 1:return!!b.alh;case 2:case 3:case 5:break;case 4:return a?.type===4&&a.cells.size>0;default:throw new u(a);}return!1}constructor(a){super(a);this.I=a}};var $rw=({sR:a,Uaa:b,Fu:c,VGc:d,QS:e,Jd:f,dda:g,toolbar:h,Kh:k,selection:l,mc:n,Za:p,Msk:q,qa:r,la:t,hb:v,viewport:w,Pa:x,he:y,uj:z,jg:B=!1})=>{n=new Xrw({la:t,Pa:x,hb:v,mc:n});p=new Zrw({Fu:c,viewport:w,Za:p,la:t,Pa:x,jg:B});const C=new Yrw({sR:a,fixed:n,lk:p,la:t,QS:e}),G=new Vrw({store:C,Uaa:b,Fu:c,VGc:d,QS:e,Msk:q}),H=Bkw({qa:r,F0k:G.F0k}),K=a_(N=>{const P=C.yNb,T=c.lya;return VZ(H,{...N,zh:C.QWh,Hga:P?0:T.length,hWe:P?0:Uhw(T,z)})});f.plugins.Comment=()=>({Sd:()=>C.Iyo,Button:K});f.plugins.bIb=
()=>({Sd:()=>C.BAo,Button:K});f.plugins.klc=()=>({Sd:()=>C.Uzo,Button:K});g?g.Comment=()=>({Sd:()=>C.CDl,Button:K}):h.BF?.jc(()=>C.CDl,(N,P)=>{N.Comment=P?()=>({Button:K}):void 0});f_(()=>h.BF?.mS(()=>C.HUa));const L=a_(N=>VZ(N.rl,{Icon:__c.W6m,label:M("688VSA"),oa:N.oa,disabled:r.status===2,onClick:()=>G.bXa("context_menu_item"),Dm:Uow}));k.jc(()=>C.Dph,(N,P)=>{N.gbg=P?{Button:L}:void 0});y?.ym(()=>C.Hyo,{type:"simple",key:"comment",Dm:__c.Pk(__c.Po("n")),name:M("688VSA"),Icon:__c.W6m,execute:async()=>
{l.BEb(w.ya);G.bXa("quick_actions")}});y?.ym(()=>C.Gyo,{type:"simple",key:"comment-selection",Dm:__c.Pk(__c.Po("n")),name:M("688VSA"),Icon:__c.W6m,execute:async()=>{G.bXa("quick_actions")}})};var Hkw=({YBs:a,ui:b,eOa:c})=>{const d=i_(!1),e=i_(null);j_(()=>{if(e.current){var f=new IntersectionObserver(g=>{g[0].isIntersecting&&(d.current=!0)},{threshold:1});f.observe(e.current);return()=>{f.disconnect();d.current&&a()}}},[a]);b=b?M("A9Vrzg"):M("kQT4fw");return VZ(R,{padding:"2u",paddingBottom:c?void 0:"3u",ref:e,children:VZ(Tc,{align:"center",spacing:"2u",children:o_(Tc,{align:"center",spacing:"0.5u",children:[VZ(Q,{size:"medium",alignment:"center",children:b}),c]})})})};var Gkw=class{constructor(a,b,c,d){this.X=a;this.Ra=b;this.errorService=c;this.UBs=async()=>{if(!this.UNg){this.UNg=!0;try{await this.Ra.Wj(new __c.ht({user:this.X.user.id,types:[618]}))}catch(e){this.errorService.ra(e,{La:"Failed to update clicked state of CLICKED_COMMENT_CTA_IN_NEW_COMMENT_EXPERIENCE"})}}};this.aCs=async()=>{if(!this.Wji){this.Wji=!0;try{await this.Ra.Wj(new __c.ht({user:this.X.user.id,types:[619]}))}catch(e){this.errorService.ra(e,{La:"Failed to update seen state of SEEN_ANIMATED_ONBOARDING_IN_COMMENT_PANEL"})}}};
this.UNg=d.UNg;this.Wji=d.Wji}};var Fkw={lxi:void 0};var asw=__c.ryb(new Date(2019,0,1)),Nkw=class{cLg(a){return a?J("IU4Qug",[a]):M("GmPuxQ")}constructor(a,b,c,d,e){this.X=a;this.Ra=b;this.errorService=c;this.Na=d;this.S0a=e;this.Fdr=async()=>{const f=await wgw(this.S0a);return f!=null&&f.values.some(g=>g.key==="COMMENT_ADDED"||g.key==="COLLABORATIVE_COMMENTING")};this.oLf=async()=>{try{await this.Ra.Wj(new __c.ht({user:this.X.user.id,types:[578]}))}catch(f){this.errorService.ra(f,{La:"Failed to update seen state of SEEN_ANIMATING_COMMENT_ICON",extra:new Map([["action",
__c.Gp.serialize(578)]])})}};this.ulq=f=>__c.Pv(f,asw)<=0;this.H0p=async()=>this.ulq(this.X.user.Og)?!1:!await this.Fdr();this.tUq=async f=>{try{return(await this.Na.IZa(new __c.Fs({Rg:f}))).xg.map(g=>g.displayName).filter(sb)}catch(g){return this.errorService.error(g),[]}}}};var bsw=a=>{l_(()=>{const b=a.fWs,c=a.Pa,d=a.Fu,e=a.QS,f=a.VGc;var g=k=>l_(()=>{c.mode!==10&&k()});const h=[Uow,g(()=>{const k=d.k0d[0]||e.bXa({source:"keyboard_shortcut"});k&&(f?.C0f(!0),e.Yza({type:"draft",draft:k,source:"draft_comment"}))}),M("XZqESw"),["edit","suggest","comment"]];g=[__c.Pk("F5"),g(()=>{__c.xc.vI&&e.Yza({type:"comments_on_selection",l2i:!0,source:"keyboard_shortcut"})}),M("MIVioA"),["edit","suggest","comment"]];b.register(h,g)})};var csw=a=>{const b=a.onClick,c=(a=a.active)?M("6+6ntw"):M("fOF0yg");return VZ(Qkw,{icon:__c.tEn,active:a,onClick:b,ariaLabel:c,ib:c,disabled:!1,tk:!0})};var dsw=({pa:a,open:b,Ede:c,xJ:d})=>{const e=g_(({target:f})=>{f!=="reference"&&d()},[d]);return VZ(Vc,{open:b,reference:VZ(csw,{onClick:c,active:b}),nG:e,placement:"bottom-start",children:VZ(kr,{className:"W2xRYw",Tza:d,returnFocus:!1,children:VZ("div",{className:"bwlIww",children:VZ(a,{})})})})};var esw=class{static G(a){O(a,{isOpen:q_.ref})}constructor(){this.isOpen=(esw.G(this),!1)}},fsw=class{static G(a){O(a,{Ede:l_.bound,xJ:l_.bound})}Ede(a,b){a.isOpen=b}xJ(a){a.isOpen=!1}constructor(a){this.P=a;this.Pgt=(fsw.G(this),(b,c)=>{this.P.track(ipw,{type:"emojis",action:b?"expand":"hide",uq:c!=="other"?c:void 0})});this.DMo=(b,c)=>{this.P.track(hpw,{resourceId:b,YUe:"emoji",action:"added",source:"comment_input",uq:c!=="other"?c:void 0})}}};var gsw=({RSd:a,KNm:b,P:c,Nea:d})=>{const e=new fsw(c),f=a_(({w0a:g,o9g:h,source:k})=>{const l=k_(()=>new esw,[]),n=g_(r=>{e.DMo(r.r8,k);g(r);e.xJ(l)},[g,k,l]),p=k_(()=>()=>VZ(a,{w0a:n,Te:"editor_comments_inline_text"}),[n]),q=g_(()=>{const r=!l.isOpen;e.Pgt(!r,k);h?h():e.Ede(l,r)},[h,k,l]);return VZ(dsw,{pa:p,open:l.isOpen,Ede:q,xJ:g_(()=>e.xJ(l),[l])})});f_(()=>{d.Pjj=f;d.LNm={Ge:g=>VZ(b.Ge,{...g,Te:"editor_comments_inline_text"}),sb:()=>VZ(b.sb,{Te:"editor_comments_inline_text"}),pa:g=>VZ(b.pa,
{...g,w0a:g_(h=>{e.DMo(h.r8,g.source);g.w0a(h)},[g]),Te:"editor_comments_inline_text"})}})};var hsw=({jab:a,wcp:b})=>c=>{const [d,e]=h_(""),f=i_(null);j_(()=>{f.current?.focus()},[]);const g=g_(k=>{e(k);a.Idb(k,{Te:c.Te})},[c.Te]),h=g_(()=>{e("");a.Vxb()},[]);return o_(R,{className:"IeLYpg",children:[VZ(R,{className:"_R8P0w",children:VZ(__c.KC,{ft:!1,ref:f,type:"search",wlb:!0,Fb:c.$o,placeholder:M("6ToAIw"),onChange:g,$i:h,value:d})}),VZ(b,{YBc:!1})]})};var jsw=({P:a,gsa:b,errorService:c,Ha:d,eT:e,locale:f,la:g,X:h,Nea:k})=>{a={locale:f,la:g,X:h,P:a,gsa:b,errorService:c,Ha:d,w_a:()=>Promise.resolve(e)};const {RSd:l,jab:n,Ge:p,pa:q,sb:r}=__c.bfw(a),{lTb:t,o6c:v}=__c.kgw(a),w=({w0a:x,onWheel:y})=>VZ(t,{Te:"editor_comments_text_colon_shortcut",w1a:"background",w0a:x,onWheel:y,onMouseDown:z=>z.preventDefault()});a=isw(x=>VZ(l,{...x,YBc:!0}),n);b={Ge:hsw({jab:n,wcp:p}),pa:isw(q,n),sb:r};f_(()=>k.lTb=w);return{RSd:a,KNm:b,jab:n,o6c:v}},isw=(a,b)=>c=>{j_(()=>
()=>b.Vxb(),[]);return VZ(a,{...c})};var imw={eventType:"editor_suggestion_interacted",Oa(a){return jf({suggestion_id:a.gxa,type:a.type,action:a.action,element_types:a.mE,editing_context:a.Ca==null?void 0:mf(a.Ca)})}},kmw={eventType:"editor_suggestion_resolved",Oa(a){return jf({suggestion_id:a.gxa,type:a.type,action:a.action,element_types:a.mE,editing_context:a.Ca==null?void 0:mf(a.Ca)})}},ksw={eventType:"editor_suggestion_media_button_clicked",Oa(a){return jf({type:a.type,action:a.action,editing_context:a.Ca==null?void 0:mf(a.Ca),comment_id:a.Vk,
reply_id:a.Wba,comment_source:a.uq})}},Rkw={eventType:"editor_suggestion_reaction_clicked",Oa(a){return jf({reaction_id:a.$Pb,suggestion_id:a.gxa,reply_id:a.Wba,reacted:a.tqa,source:a.source,editing_context:a.Ca==null?void 0:mf(a.Ca),comment_source:a.uq})}};var nlw=class{constructor(a){this.P=a}};var alw=F(()=>({...__c.JEn(),cTc:__c.A("A?",2,"DOCUMENT_COMMENT"),ka:S(31),Of:U(32),Vk:S(33)}));var lsw=a=>({key:a.r8,label:a.name,hnb:({animate:b,FQp:c,JQp:d})=>VZ("img",{className:r_(__c.JSi.small,{G_BwUw:b,_7QDetg:d==="slow"}),style:{animationDelay:`${c}s`},alt:a.mwd,src:a.imageUrl})}),msw=(a,b)=>b.map(c=>{const d=a.fLe(c);return d&&{key:d.r8,label:d.name,hnb:({size:e})=>VZ("img",{className:r_("_79Pi4A",__c.JSi[e]),alt:d.mwd,src:d.imageUrl})}}).filter(sb);var Ukw=class{static G(a){O(a,{count:q_.ref,bIc:q_.ref,cda:q_.ref,oRd:q_.deep})}constructor({id:a,count:b,bIc:c,cda:d,qy:e}){this.id=(Ukw.G(this),void 0);this.id=a;this.count=b??0;this.bIc=c;this.cda=d;this.oRd=e}};var nsw=class{static G(a){O(a,{xg:q_.shallow,Ut:q_.shallow})}constructor(){this.xg=(nsw.G(this),new Map);this.Ut=new Map}},llw=class{static G(a){O(a,{Ixc:q_.shallow,Tf:q_.ref})}constructor(){this.hgd=(llw.G(this),new nsw);this.Ixc=new Map;this.Tf="initial"}},osw=class{static G(a){O(a,{MG:q_.deep,s3b:q_.shallow,isCollapsed:q_.ref,L1e:q_.ref,rke:q_.ref,nbn:b_,oIn:b_,idj:b_({equals:d_.shallow}),teh:b_({equals:d_.shallow}),tQo:b_})}get nbn(){return this.L1e||this.rke}get oIn(){return this.isCollapsed?
this.teh.length-8:0}get idj(){const a=this.teh;return this.isCollapsed?a.slice(0,8):a}get teh(){return this.jab.Tf!=="loaded"?[]:[...this.tQo.entries()].reduce((a,[b,c])=>{let d=0;const e=[],f=[],g=[];let h;c.forEach(k=>{if(k=this.d8q(k))if(d+=k.count,e.push(k.Bi),k.selected&&f.push(k.id),g.push(...k.xg),h==null||k.cda!=null&&k.cda<h)h=k.cda});d&&e.length&&a.push({krd:b,thc:f,T4:e,count:d,cda:h,xg:g});return a},[]).sort(this.Tjs)}get tQo(){const a=new Map;for(const b of this.MG){if(!this.WLe(b))continue;
const c=this.eT.Vkk(b.id);c&&__c.ij(a,c,b)}return a}constructor(a,b,c,d){this.hgd=b;this.eT=c;this.jab=d;this.MG=(osw.G(this),void 0);this.s3b=new Set;this.Qda=new Set;this.Y0h=new Map;this.rke=this.L1e=!1;this.d8q=e=>{const f=this.WLe(e);var g=this.eT.fLe(e.id);g=g&&lsw(g);if(f&&g)return{...e,selected:this.s3b.has(e.id),count:f,Bi:g,xg:this.bqk(e)}};this.WLe=e=>{let f=e.count;e.bIc&&!this.s3b.has(e.id)?f--:!e.bIc&&this.s3b.has(e.id)&&f++;return f};this.bqk=e=>{if(!e.oRd?.length||!this.hgd.xg.size)return[];
const f=[];for(const g of e.oRd){e=this.hgd.xg.get(g);if(!e)return[];f.push({...e,Jc:this.hgd.Ut.get(g)})}return f};this.Tjs=(e,f)=>e.cda!=null&&f.cda!=null?e.cda-f.cda:e.cda?-1:f.cda?1:0;this.MG=a;a.forEach(e=>{e.bIc&&this.s3b.add(e.id)})}},mlw=class{static G(a){O(a,{HMk:l_,JTo:l_,hMj:l_,w6f:l_,W0h:l_,H1e:l_,QQo:l_,jLo:l_,HIm:l_,rke:l_.bound,U0j:l_,sih:l_.bound})}async HMk(){this.vgb.Tf="loading";try{const [a,b]=await Promise.all([Vkw(this),Wkw(this)]);Xkw(a,b);f_(()=>{a.forEach((c,d)=>{this.vgb.Ixc.set(d,
new osw(c,this.vgb.hgd,this.eT,this.jab))});this.vgb.Tf="loaded"});Ykw(this,a)}catch(a){throw f_(()=>this.vgb.Tf="failed"),a;}}qEi(){this.ma.Ib({Db:M("Nv62Ng"),Jq:{buttonText:M("GRZAsA"),onClick:async()=>{try{await this.HMk()}catch(a){this.qEi()}}}})}async l2e(){if(this.vgb.Tf!=="failed"){var a=await Vkw(this);a=this.JTo(a);a.size&&Ykw(this,a)}}JTo(a){const b=this.vgb.Ixc,c=this.vgb.hgd,d=new Map;a.forEach((e,f)=>{const g=b.get(f);if(g){var h=g.MG;e.forEach(k=>{const l=h.find(n=>n.id===k.id);l?.count!==
k.count&&__c.ij(d,f,k);l?(l.count=k.count,l.cda==null&&(l.cda=__c.Tb.now())):h.push({...k,cda:__c.Tb.now()})});e=new Set(e.map(k=>k.id));this.hMj(g,e)}else b.set(f,new osw(e,c,this.eT,this.jab)),d.set(f,e)});b.forEach((e,f)=>{a.has(f)||(e.Qda.size?this.hMj(e):b.delete(f))});return d}hMj(a,b){a.MG=a.MG.filter(c=>{if(b?.has(c.id))return!0;if(!a.Qda.has(c.id))return!1;c.count=0;c.oRd=void 0;return!0})}W0h(a,b,c,d,e,f){var g=a.Y0h.get(b.id);g&&clearTimeout(g);g=setTimeout(()=>{clearTimeout(a.Y0h.get(b.id));
a.Y0h.delete(b.id);a.s3b.has(b.id)?this.H1e(a,b,c,d,e,f):this.QQo(a,b,c,d,e,f)},500);a.Y0h.set(b.id,g)}async H1e(a,b,c,d,e,f){if(!a.Qda.has(b.id)&&!b.bIc){a.Qda.add(b.id);f.FLd&&this.FLd(b.id);try{const g=await this.k9.g4c(new __c.SRg({body:new __c.PRg({source:2,mQ:b.id,cTc:new __c.vjd({id:this.ka,extension:this.Of}),id:c})}));if(g.type==="ERROR"&&g.errorCode===2)throw Error();f_(()=>{a.Qda.delete(b.id);b.bIc=g.id;b.count++});Tkw(this.P,{Vk:c,gi:d,$Pb:b.id,Bob:e,tqa:!0,cKe:f.cKe,uq:f.uq});a.s3b.has(b.id)||
this.W0h(a,b,c,d,e,f)}catch(g){f_(()=>{a.s3b.delete(b.id);a.Qda.delete(b.id);a.L1e=!0})}}}async QQo(a,b,c,d,e,f){if(!a.Qda.has(b.id)&&b.bIc){a.Qda.add(b.id);try{const g=await this.k9.M1h(new __c.IEn({id:b.bIc}));if(g.type==="ERROR"&&g.errorCode===1)throw Error();f_(()=>{b.bIc=void 0;b.count--;b.count||(b.cda=void 0);a.Qda.delete(b.id)});Tkw(this.P,{Vk:c,gi:d,$Pb:b.id,Bob:e,tqa:!1,cKe:f.cKe,uq:f.uq});a.s3b.has(b.id)?this.W0h(a,b,c,d,e,f):!a.Qda.size&&a.MG.every(h=>!h.count)?f_(()=>this.vgb.Ixc.delete(c)):
b.count||a.Qda.has(b.id)||f_(()=>a.MG=a.MG.filter(h=>h.id!==b.id))}catch(g){f_(()=>{a.s3b.add(b.id);a.Qda.delete(b.id);a.L1e=!0})}}}jLo(a){a.isCollapsed=!a.isCollapsed}HIm(a){a.L1e=!1}rke(a){const b=this.vgb.Ixc;var c=this.vgb.hgd;c=b.get(a)||new osw([],c,this.eT,this.jab);b.set(a,c);c.rke=!0}U0j(a){a.rke=!1}sih(a){try{this.jab.sih(),this.U0j(a)}catch(b){this.errorService.error(b,{La:"Reloading emojis for comment reactions failed"})}}async bqk(a){return Promise.all(Array.from(a.keys()).flatMap(b=>
blw(this,b))).then(b=>b.flat())}async gAh(a,b){const c=Array.from(new Set(b.flatMap(({oRd:f})=>f))).filter(f=>!a.xg.has(f));if(c.length){var d=new Map;do{b=await this.Na.IZa(new __c.Fs({Rg:c,continuation:e}));b.xg.forEach(f=>{d.set(f.id,f)});var e=b.continuation}while(e);f_(()=>{c.forEach(f=>{const g=d.get(f);a.xg.set(f,{id:f,name:g?.displayName||M("mRofdQ")})})})}}async i8f(a,b){b=Array.from(new Set(b.map(({oRd:d})=>d).flat())).filter(d=>a.Ut.get(d)?.status!==2);b=__c.Gl(b,100);const c=await Promise.allSettled(b.map(d=>
this.Bk.ePa(new __c.wu({qy:d}))));f_(()=>{c.forEach(d=>{if(d.status==="rejected")return this.errorService.error(d.reason,{La:"Error loading avatars for comment reacted users"});d.value.Ut.forEach((e,f)=>a.Ut.set(f,e))})})}constructor(a,b,c,d,e,f,g,h,k,l,n,p,q,r){this.vgb=a;this.Na=b;this.Bk=c;this.k9=d;this.gsa=e;this.errorService=f;this.ka=g;this.Of=h;this.uj=k;this.QSa=l;this.P=n;this.ma=p;this.eT=q;this.jab=r;this.w6f=(mlw.G(this),this.QSa.mAe((t,v,w,x,y)=>{this.vgb.Ixc.has(v)||this.vgb.Ixc.set(v,
new osw([],this.vgb.hgd,this.eT,this.jab));const z=m(this.vgb.Ixc.get(v));z.MG.find(C=>C.id===t)||z.MG.push(new Ukw({id:t}));z.L1e=!1;const B=m(z.MG.find(C=>C.id===t));z.s3b.has(t)?z.s3b.delete(t):(z.idj.length===8&&z.idj.every(C=>C.krd!==this.eT.Vkk(t))&&(z.isCollapsed=!1),z.s3b.add(t),B.count||(B.cda=__c.Tb.now()));this.W0h(z,B,v,w,x,y)}));this.FLd=async t=>{if(t=this.eT.Vkk(t))try{await this.gsa.FLd(new __c.aar({w6h:t})),this.eT.pfh()}catch(v){this.errorService.error(v)}};this.Ede=this.QSa.mAe((t,
v,w,x,y)=>{this.P.P.track(x==="suggestion"?ksw:ipw,{type:"reaction",action:t?"expand":"hide",Vk:w,Wba:w===v?void 0:v,uq:y!=="other"?y:void 0});if(this.jab.Tf==="loaded")return La();this.rke(v);return Ma()},{default:Ma()})}};var psw="2764-FE0F 1F44D 1F44F 1F602 1F62E 1F914".split(" "),qsw="2B50 1F44D 1F44F 1F602 1F62E 1F914".split(" ");var slw=({Rc:a})=>VZ(Ck,{tone:"critical",size:"small",dismissible:!0,Rc:a,children:VZ(Q,{tagName:"span",children:M("8IueiA")})}),rlw=({Rc:a,Rk:b})=>o_(Ck,{tone:"warn",size:"small",dismissible:!0,Rc:a,children:[o_(Q,{tagName:"span",children:[M("hoQnzQ")," "]}),VZ(__c.Lt,{onClick:b,children:VZ(Q,{tagName:"span",children:M("GRZAsA")})})]});var rsw,ssw,tsw,usw=parseInt("0.1s",10)||.1,vsw=({MG:a,count:b,kj:c,animate:d})=>{const e=a.length===1,f=a.length<=3;return o_("div",{className:"_8iKMmg",children:[VZ("span",{className:r_("eS3gPQ","zLE_pA"),children:VZ("span",{className:r_("yByonw",{OFOeBQ:tb.rd&&e,cLcJ9A:tb.rd&&e&&d}),children:a.map((g,h)=>VZ(g.hnb,{FQp:(h+1)*usw,JQp:f?"slow":"fast",animate:e?!1:tb.rd&&d},g.key))})}),VZ("div",{className:r_("jLce_Q",{VX_DIQ:c}),children:VZ(Q,{size:"small",weight:"bold",tone:"tertiary",children:b})})]})},
wsw=({MG:a,count:b,kj:c,selected:d,ye:e,Fji:f,onClick:g})=>{const {animate:h,onMouseEnter:k,onMouseLeave:l}=clw();return VZ(__c.Pt,{tone:"secondary",border:"standard",alignItems:"center",borderRadius:"element",className:r_("adpVBA",{L3m5DA:e}),onClick:g,disabled:e,active:!!d,ariaLabel:f?J("7drlFw",[b,a[0].label]):a[0].label,selected:!!d,onMouseEnter:k,onMouseLeave:l,children:VZ(vsw,{MG:a,count:b,kj:c,animate:h})})},elw=({MG:a,count:b,selected:c,kj:d=!0,ZWr:e=!1,Fji:f})=>{const {animate:g,onMouseEnter:h,
onMouseLeave:k}=clw();return VZ(__c.Pt,{tone:"secondary",border:"standard",alignItems:"center",borderRadius:"element",ariaLabel:f&&d?J("7drlFw",[b,a[0].label]):a[0].label,className:r_("Ktuj5A",{_0QUZUg:d,dGGQ6Q:e}),selected:!!c,disabled:d,onMouseEnter:h,onMouseLeave:k,children:VZ(vsw,{MG:a,count:b,kj:d,animate:g})})},zsw=a=>{const b=a.krd,c=a.count,d=a.selected,e=a.x0a,f=a.children;return!a.xg.length&&c>d?f:e?VZ(xsw,{x0a:e,uWp:b,children:f}):VZ(ysw,{...a,children:f})},xsw=class extends vnw{render(){return VZ("span",
{ref:this.XB.Gq,children:VZ(WZ,{OEa:!1,children:this.props.children})})}constructor(...a){super(...a);this.XB=new __c.dd([new __c.qr({Jfa:750,yt:()=>this.props.x0a(this.props.uWp)})])}},ysw;
new (rsw=class extends Qnw{constructor(){super(ysw);ssw()}},(()=>{class a extends(tsw=vnw){static G(b){O(b,{BSl:q_.ref,hAl:l_})}get G6f(){var b=this.gmt,c=b.length;if(this.props.selected>0)switch(c){case 0:return J("8jqJuQ",[this.label]);case 1:return c=this.label,b=this.getName(b[0]),J("BxczEg",[c,b]);case 2:c=this.label;var d=this.getName(b[0]);b=this.getName(b[1]);return J("kzhfNA",[c,d,b]);default:d=this.label;var e=this.getName(b[0]);b=this.getName(b[1]);return J("HDzWhA",[d,e,b,c-2])}switch(c){case 0:throw Error();
case 1:return c=this.label,b=this.getName(b[0]),J("s0V8LQ",[c,b]);case 2:return c=this.label,d=this.getName(b[0]),b=this.getName(b[1]),J("Y/2ojA",[c,d,b]);case 3:return c=this.label,d=this.getName(b[0]),e=this.getName(b[1]),b=this.getName(b[2]),J("3R/o8A",[c,d,e,b]);default:d=this.label;e=this.getName(b[0]);var f=this.getName(b[1]);b=this.getName(b[2]);return J("lkLThw",[d,e,f,b,c-3])}}get gmt(){return __c.md(this.props.xg,b=>b.id)}get label(){return __c.sx(this.props.MG[0].label)}getName(b){return __c.sx(b.name)}render(){const b=
this.props.count,c=this.props.selected,d=this.props.xg,e=this.props.children;return!b||!c&&!d.length||c+d.length<b?e:VZ("div",{onMouseEnter:this.pL,onMouseLeave:this.AR,children:VZ(Vc,{placement:"top-center",level:6,reference:e,open:this.GO.open||this.BSl,offset:{main:Uc,cross:0},children:this.A8i})})}constructor(...b){super(...b);this.GO=(ysw.G(this),new __c.bC);this.L=new __c.Uyc;this.jOo=wnw();this.BSl=!1;this.pL=()=>{this.L.pL({state:this.GO},ysw.hSq)};this.AR=()=>{this.L.AR({state:this.GO},ysw.iSq)};
this.hAl=c=>{this.BSl=c};this.A8i=({Gdb:c})=>VZ(Tnw,{in:this.GO.open,appear:!0,timeout:ysw.transitionDuration,onEnter:()=>this.hAl(!0),onExited:()=>this.hAl(!1),nodeRef:this.jOo,children:d=>o_("div",{style:{transition:`opacity ${ysw.transitionDuration}ms ease-in-out`,opacity:d===Unw||d===Snw?1:0},ref:this.jOo,children:[VZ(__c.Sc,{light:"dark",dark:"dark",Qm:"dark",SK:"dark",children:e=>VZ(__c.jha,{className:e.className,role:"tooltip",children:VZ(Q,{size:"small",tagName:"div",margins:"none",alignment:"center",
className:"_5cSp_A",children:VZ(__c.Zj,{message:this.G6f})})})}),VZ("div",{ref:c,children:VZ(__c.lha,{inset:!1})})]})})}}({c:[ysw,ssw]}=Vnw(a,[],[__c.Lb],tsw));a.hSq=250;a.iSq=0;a.transitionDuration=150})(),rsw);var dlw=class extends __c.Pz{constructor(a){super(a);this.key=a.key}},glw=a_(({AB:a,eT:b})=>a.ED?(a=b.fLe(a.ED.key))?J("ojEm9A",[a.name]):null:null),hlw=({AB:a})=>VZ("div",{className:"tSeIPg",children:VZ(__c.$7e,{store:a,alignment:"center",stretch:!0})}),ilw=({AB:a})=>VZ(__c.hqh,{store:a,W0d:a.Ss.length>1,We:"intrinsic"}),flw=({xg:a,fK:b})=>VZ("div",{className:"hR0ECg",children:__c.md(a,c=>c.id).map(c=>VZ(__c.Lu,{media:VZ(b,{user:c,size:"xsmall"}),title:c.name,DZc:1},c.id))}),Asw=({WLn:a})=>VZ(ir,
{variant:"tertiary",ariaLabel:M("Q22p1A"),icon:__c.lr,onClick:a}),jlw=({vce:a,WLn:b,hf:c})=>{const d=k_(()=>()=>VZ(Asw,{WLn:b}),[b]);return o_(c_,{children:[VZ(__c.iXg,{sg:c.Ge,xnb:c.Du,Lla:d,onClose:a,display:"comfortable"}),VZ("div",{className:"AyZp5A",children:VZ(c.pa,{})})]})};var tlw=({reaction:a,l1b:b,G_s:c,ye:d,HOj:e})=>{const f=g_(()=>b(a),[b,a]),g=k_(()=>e?VZ(elw,{MG:a.T4,count:a.count,selected:a.thc.length,Fji:!!c}):VZ(wsw,{MG:a.T4,onClick:f,count:a.count,selected:a.thc.length,ye:d,Fji:!!c}),[a,e,d,f,c]);return VZ(WZ,{OEa:!1,children:VZ(zsw,{krd:a.krd,MG:a.T4,count:a.count,selected:a.thc.length,xg:a.xg,x0a:c,children:g},a.krd)})};var vlw=({onClick:a,$Yr:b})=>VZ(WZ,{OEa:!1,children:VZ(Wi,{size:"small",className:"f_0qyQ",variant:"secondary",onClick:a,tk:!0,active:!b,children:VZ(Q,{size:"small",weight:"bold",tone:"primary",children:b?J("OybDaw",[b]):M("qXPM9g")})})});var Bsw=({onClick:a,selected:b,ye:c,disabled:d,nOr:e,cuc:f,Gwg:g,Qc:h})=>{const k=i_(null),l=g_(()=>{k.current&&__c.Aha(k.current);a()},[a]);f=c?M("BBdsDw"):e?f?J("54MOYQ",[20]):J("m+87Yg",[20]):b?M("p8Tn6Q"):M("shLpRQ");return VZ(WZ,{OEa:!1,children:VZ(Wi,{ref:k,variant:"secondary",className:r_("_8eAH4A",{_4ZLSOw:g}),active:b,onClick:l,ariaLabel:f,ib:f,kx:b,disabled:d||c||e,ek:"top",ariaHasPopup:"menu",size:"small",Qc:h||"medium",icon:__c.tEn,tk:!0})})};var Csw,Dsw,Esw,qlw;
new (Csw=class extends Qnw{constructor(){super(qlw);Dsw()}},(()=>{class a extends(Esw=vnw){static G(b){O(b,{Ir:q_.ref,vUg:q_.ref,QPa:b_,pa:b_,nea:l_,xJ:l_,RVn:l_,HQn:l_})}get QPa(){return this.Ir&&!this.props.ye}get pa(){const b=this.props.rxp,c=this.props.Rhp;return this.vUg?VZ("div",{className:"ZrE5eQ",children:VZ(c,{onClick:this.xJ})}):VZ(b,{onClick:this.xJ,Wec:this.RVn})}render(){return VZ(Vc,{open:this.QPa,reference:VZ(Bsw,{onClick:this.nea,selected:this.QPa,ye:this.props.ye,disabled:this.props.disabled,
Gwg:this.props.Gwg,Qc:this.props.Qc,nOr:this.props.IZr>=20,cuc:this.props.cuc}),nG:this.HQn,placement:"top-start",children:VZ(kr,{className:"TMuvKg",Tza:this.xJ,children:VZ(WZ,{OEa:!1,children:this.pa})})})}constructor(...b){super(...b);this.Ir=(qlw.G(this),!1);this.vUg=!1;this.nea=()=>{const c=this.props.Ede;if(!this.props.ye){var d=!this.Ir;c(d).ok&&(this.Ir=d,this.vUg=!1)}};this.xJ=()=>{this.vUg=this.Ir=!1};this.RVn=()=>{this.props.WVn?(this.xJ(),this.props.WVn()):this.vUg=!0};this.HQn=({target:c})=>
{c!=="reference"&&this.xJ()}}}({c:[qlw,Dsw]}=Vnw(a,[],[__c.Lb],Esw))})(),Csw);var ulw=a=>{const b=a.Error,c=a.DFp,d=a.L_o;return VZ(R,{className:a.className,children:o_(Tc,{align:"start",spacing:"1u",children:[o_(br,{spacing:"0.5u",Fa:"center",children:[a.MG.map(e=>e),c,d]}),b]})})};var plw=(a,b,c,d)=>{const e=__c.PG(b)||c?.wda==="STUDENT"||c?.wda==="TEACHER"?qsw:psw,f=b_(()=>{const g=new Set(d.gzi.map(k=>d.aBf(k)));var h=e.map(k=>d.aBf(k)).filter(k=>!g.has(k));h=[...g.values(),...h].slice(0,6);return msw(d,h)});return{sxp:a_(({Vk:g,Bob:h,gi:k,source:l,onClick:n,Wec:p})=>{const q=g_(r=>{a.w6f(r,g,k,h,{uq:l,FLd:!0,cKe:!0});n()},[g,h,k,l,n]);return VZ(__c.CEn,{T4:f.get(),animated:!1,size:"medium",pL:!0,QLa:q,Wec:p})}),cIh:a_(({Vk:g,gi:h,Bob:k,source:l,onClick:n,Wec:p})=>{const q=
g_(t=>{a.w6f(t,g,h,k,{uq:l,FLd:!0,cKe:!0});n()},[g,k,h,l,n]),r=g_(()=>{p({Vk:g,gi:h,Bob:k,source:l});n()},[g,h,k,l,p,n]);return VZ(__c.DEn,{T4:f.get(),animated:!1,QLa:q,Wec:r})})}},olw=(a,b,{Ge:c,pa:d,sb:e})=>{const f=Fsw(b,a);return{Shp:g=>VZ("div",{className:"ZrE5eQ",children:VZ(f,{...g})}),bBs:{Ge:g=>VZ(c,{...g,Te:"editor_comments_reaction"}),pa:Fsw(d,a),sb:()=>VZ(e,{Te:"editor_comments_reaction"})}}},Fsw=(a,b)=>({Vk:c,gi:d,Bob:e,source:f,onClick:g})=>{const h=g_(k=>{b.w6f(k.r8,c,d,e,{uq:f,cKe:!0});
g()},[c,d,e,f,g]);return VZ(a,{w0a:h,Te:"editor_comments_reaction"})};var Gsw=({M1a:a,xv:b})=>{const c=znw();return o_("div",{className:"rQdSVg",children:[VZ(__c.Ru,{id:c,src:a.thumbnailUrl,className:"eetKkg",alt:a.title}),VZ(ir,{variant:"contrast",className:"FXRRYw",onClick:b,icon:nr,Qc:"small",size:"tiny",ariaLabel:M("Rll9DQ"),Zg:c,I4a:!0})]})},Jlw=a=>VZ(Tc,{spacing:"0",align:a.align??"center",children:VZ(R,{padding:"1.5u",children:VZ("div",{className:"Wx_yYw",children:VZ(Gsw,{...a})})})});var Hsw=({M1a:a,xv:b})=>{const c=znw();return o_(WZ,{OEa:!1,className:"YtKtDw",children:[VZ(__c.Ru,{id:c,src:a.thumbnailUrl,className:"TH10og",alt:a.title}),VZ(ir,{variant:"contrast",className:r_("cyTLbw",{_0TfSAw:tb.rd}),onClick:b,icon:nr,Qc:"small",size:"tiny",ariaLabel:M("Rll9DQ"),Zg:c,I4a:!0})]})},Klw=a=>VZ(Tc,{spacing:"0",align:a.align??"center",children:VZ(R,{padding:"1u",children:VZ("div",{className:"kvFKAg",children:VZ(Hsw,{...a})})})});var xlw=F(()=>({Rg:np(1),locales:np(2)}));var Hlw=class{static G(a){O(a,{jOd:q_.shallow,error:q_.ref})}constructor(){this.jOd=(Hlw.G(this),void 0);this.error=!1}},Ilw=class{constructor(a,b,c,d,e){this.OD=a;this.$f=b;this.$a=c;this.tFa=d;this.locale=e;this.lwr=f=>f.type==="ITEM"&&!!Clw(f)&&f.kc===2;__c.PG(this.$a)||this.tFa==="STUDENT"||this.tFa==="TEACHER"?(this.vNj="textual_edu",this.uNj="nontextual_edu"):(this.vNj="textual",this.uNj="nontextual");this.A6p=this.locale!=="en"?[this.locale,"en"]:["en"]}};var Flw=()=>VZ(c_,{children:__c.rc(12).map(a=>VZ("div",{className:"nslbwg",children:VZ(__c.Xi,{shape:"circle"})},a))}),Elw=({jOd:a,d8g:b})=>VZ(c_,{children:m(a).map(c=>VZ(WZ,{OEa:!1,children:VZ(__c.hr,{onClick:()=>b(c),className:"xrG9eg",ariaLabel:c.title,children:VZ(__c.Ru,{src:c.thumbnailUrl,className:"_1rXpdw",alt:c.title})})},c.id))}),Dlw=__c.po(({width:a})=>a<450?{columns:3,spacing:"1u"}:a<600?{columns:5,spacing:"1.5u"}:{columns:6,spacing:"2u"})(function({children:a,...b}){return VZ(__c.ar,{...b,
tagName:"section",role:"grid",children:a})});var Isw=p_(({nea:a,MCp:b,Bod:c,zdb:d,huc:e,Rzr:f})=>{const g=g_(({target:h})=>{h!=="reference"&&a()},[a]);return VZ(Vc,{open:e&&!f,reference:VZ(b,{active:e,onClick:a,disabled:!!d}),nG:g,placement:"bottom-start",children:VZ(kr,{className:"NeUJlw VnXh5Q",Tza:a,returnFocus:!1,children:VZ("div",{className:"HjOQbA",children:c})})})});var Jsw=({P:a,OD:b,$f:c,Nea:d,$a:e,currentUser:f,V:g,SGc:h})=>{if(f){var k=Llw({OD:b,$f:c,$a:e,tFa:f.wda,locale:f.locale}),l=(w,x)=>{a.track(hpw,{resourceId:m(w.zdb).id,YUe:"sticker",action:"removed",source:"comment_input",uq:x!=="other"?x:void 0});h.yFm(w)},n=(w,x,y)=>{const z=g.wb("add_comment_media",{Hb:{name:"ui.collaborating.commenting.add_comment_media",type:"sticker"}});__c.Uo({ob:z.ob(),P:a,event:hpw,props:{resourceId:x.id,YUe:"sticker",action:"added",source:"sticker_panel",uq:y!=="other"?
y:void 0}});h.Eio(w,x);z.qe()},p=a_(w=>VZ(k.wHh,{d8g:x=>n(w.store,x,w.source)})),q=(w,x)=>{a.track(ipw,{type:"stickers",action:w.huc?"hide":"expand",uq:x!=="other"?x:void 0});h.IKo(w)},r=a_(w=>{const x=g_(()=>q(w.store,w.source),[w.store,w.source]);return VZ(Isw,{MCp:k.yi,Bod:VZ(p,{...w}),nea:x,huc:w.store.huc,Rzr:w.jjs,zdb:w.store.zdb})}),t=a_(({M1a:w,store:x,source:y,align:z="center"})=>VZ(k.Eeg,{M1a:w,xv:()=>l(x,y),align:z})),v=a_(({M1a:w,store:x,source:y,align:z="center"})=>VZ(k.yrj,{M1a:w,xv:()=>
l(x,y),align:z}));f_(()=>{d.xrj=r;d.Bod=p;d.Eeg=t;d.yrj=v})}};var Ksw=({children:a,visibility:b})=>VZ(__c.$u,{visibility:b,location:void 0,children:VZ(R,{inset:"0",padding:"0",position:"absolute",children:VZ(R,{alignItems:"center",background:"contrast",borderRadius:"element",display:"flex",height:"full",justifyContent:"center",padding:"1u",width:"full",children:VZ(Tc,{align:"center",spacing:"1u",children:a})})})}),Lsw=({vae:a,WEg:b,oc:c,onSelect:d})=>{const e=g_(()=>{d&&d(a.id)},[a.id,d]),f=4/3;return VZ(__c.Ko,{ariaLabel:a.title||b,onClick:e,padding:"0",thumbnail:VZ(__c.Uu,
{height:140,width:140*f,background:"none",aspectRatio:f,padding:"none",children:VZ(__c.Yu,{src:a.thumbnailUrl,aspectRatio:f,alt:a.title})}),un:"bgColorTransition",layout:"vertical",Xm:"thumbnail",OF:"primary",selected:c,Rr:a.state==="pending"&&VZ(Ksw,{visibility:"always",children:VZ(__c.Wq,{size:"small"})})})};var Msw=a=>{const b=a.media,c=a.bea,d=a.Gka,e=g_(f=>{d(f)},[d]);return b.length?VZ(Tc,{spacing:"1u",children:VZ(__c.$y,{name:J("E7GHCw",[b.length]),ku:"medium",kn:"chevron",children:b.map((f,g)=>VZ(Lsw,{vae:f,onSelect:e,oc:c===f.id,WEg:J("vCYlDA",[g+1,b.length])},f.id))})}):null};var Nsw=class{static G(a){O(a,{b0b:q_.shallow,Gnm:l_.bound,lVb:l_.bound})}async Gnm(a){a=a.filter(b=>!this.b0b.has(b.id));if(a.length!==0)for(const b of a)this.b0b.set(b.id,{id:b.id}),Mlw(this,b)}lVb(){this.b0b.forEach(a=>{a.V9a&&URL.revokeObjectURL(a.V9a)});this.b0b.clear()}constructor(){this.b0b=(Nsw.G(this),new Map)}};var Osw=p_(({nmq:a,IDf:b,isOpen:c,onClose:d,onNext:e,Sza:f,ui:g})=>c&&a?VZ(__c.rr,{open:c,oa:d,mode:g?"sheet":"backdrop",APe:!1,onNext:b?e:void 0,Sza:b?f:void 0,GNf:M("BNr7rQ"),aVf:M("52bVww"),children:VZ(R,{className:r_("xRo9lw",g?"RtPBEA":"_15YmWQ"),children:a.url?VZ("img",{src:a.url,alt:a.title,className:"_799XtQ"}):VZ(__c.hv,{})})}):null);var Psw=class{static G(a){O(a,{media:q_.ref,$S:q_.ref,isOpen:q_.ref,IDf:b_,C8b:b_,SIj:b_,MCm:b_.struct})}get IDf(){return this.media.length>1}get C8b(){return this.IDf&&this.$S<this.media.length-1}get SIj(){return this.IDf&&this.$S>0}get MCm(){const a=this.media[this.$S];if(a){var b=this.cache.b0b.get(a.id);return{...a,url:b?.V9a||b?.url}}}constructor(a){this.cache=a;this.media=(Psw.G(this),[]);this.$S=0;this.isOpen=!1}},Qsw=class{static G(a){O(a,{bWn:l_.bound,close:l_,Fsa:l_,Q6m:l_})}bWn(a,b){const c=
b.findIndex(d=>d.id===a);c!==-1&&(Olw(this,b),this.store.media=b,this.store.$S=c,this.store.isOpen=!0)}close(){this.store.isOpen=!1;this.cache.lVb()}Fsa(){this.store.C8b&&(this.store.$S+=1)}Q6m(){this.store.SIj&&--this.store.$S}constructor(a,b,c){this.store=a;this.cache=b;this.sc=c;Qsw.G(this)}};var Rsw=({sc:a})=>{const b=new Nsw,c=new Psw(b),d=new Qsw(c,b,a);return{Pcp:a_(({ui:e})=>{const f=c.C8b,g=c.SIj,h=c.IDf,k=c.isOpen,l=c.MCm,n=g_(()=>{d.close()},[]),p=g_(()=>{d.Fsa()},[]),q=g_(()=>{d.Q6m()},[]);return VZ(Osw,{nmq:l,IDf:h,isOpen:k,onClose:n,onNext:f?p:void 0,Sza:g?q:void 0,ui:e})}),UQq:d}};var Ssw=({children:a,visibility:b})=>VZ(__c.$u,{visibility:b,location:void 0,children:VZ(R,{inset:"0",padding:"0",position:"absolute",children:VZ(R,{alignItems:"center",background:"contrast",borderRadius:"element",display:"flex",height:"full",justifyContent:"center",padding:"1u",width:"full",children:VZ(Tc,{align:"center",spacing:"1u",children:a})})})}),Tsw=({vae:a,z9:b,Rr:c,...d})=>VZ(__c.Ko,{Xm:"thumbnail",borderRadius:"element",un:"bgColorTransition",layout:"horizontal",...d,Rr:o_(c_,{children:[a.state===
"pending"&&VZ(Ssw,{visibility:"always",children:VZ(__c.Wq,{size:"small",className:"l1d1XA"})}),c]}),thumbnail:VZ(__c.Yu,{aspectRatio:1,src:a.thumbnailUrl,alt:a.title,height:b,width:b,borderRadius:"element"})}),Usw=p_(({vae:a,xv:b,z9:c})=>{const d=g_(()=>{b(a.id)},[b,a.id]);return VZ(Tsw,{vae:a,z9:c,Rr:VZ(__c.$u,{location:"top-end",visibility:"on-hover",children:VZ(ir,{variant:"contrast",onClick:d,icon:nr,Qc:"small",size:"tiny",ib:M("VUysJQ"),I4a:!0})})})}),Vsw=p_(({vae:a,onClick:b,z9:c})=>{const d=
g_(()=>{b(a.id)},[b,a.id]);return VZ(Tsw,{vae:a,z9:c,onClick:d,ariaLabel:J("+CBHEg",[a.title]),Rr:a.state!=="pending"&&VZ(Ssw,{visibility:"on-hover",children:VZ(__c.Au,{size:"medium",className:"ReqqBA"})})})}),Wsw=a=>{const b=a.media,c=a.ZB;if(!b.length)return null;const d=b.length>(c?2:3)?"6u":"10u";return VZ($q,{Fa:"start",spacing:c?"0.5u":"1u",children:b.map(e=>VZ(Yq,{width:"content",children:a.Ri?VZ(Usw,{vae:e,z9:d,xv:a.xv}):VZ(Vsw,{vae:e,z9:d,onClick:a.onClick})},e.id))})};var Xsw=a=>{const b=a.onClick;a=a.yv;const c=M("TyAfpQ");return VZ(__c.xz,{yv:a,mimeTypes:["image/*","video/*"],multiple:!0,children:({onClick:d})=>VZ(Qkw,{icon:__c.Kjs,onClick:()=>{d();b()},ariaLabel:c,ib:c,disabled:!1,tk:!0})})};var Ysw=a=>b=>{const c=g_(d=>{a.rFa(b.store,d)},[b.store]);return VZ(Xsw,{...b,yv:c})};var Zsw=({Nea:a,o$a:b,SGc:c,sc:d})=>{const e=a_(({store:k,ZB:l})=>{const n=g_(p=>c.oXf(k,p),[k]);return VZ(Wsw,{media:k.media,Ri:!0,xv:n,ZB:l})}),{Pcp:f,UQq:g}=Rsw({sc:d}),h=a_(({media:k,ZB:l,Itr:n})=>{const p=g_(q=>{g.bWn(q,k)},[k]);return n&&k.length>0?VZ(Msw,{media:k,Gka:()=>{},bea:void 0}):VZ(Wsw,{media:k,onClick:p,ZB:l})});f_(()=>{a.zjj=e;b.o4l=f;b.aHh=h})},$sw=({Nea:a,SGc:b})=>{const c=Ysw(b);f_(()=>{a.Exa=c})};var atw=({P:a,Ha:b,c8p:c,ma:d,OD:e,Na:f,Bk:g,$f:h,k9:k,gsa:l,eT:n,errorService:p,VT:q,sc:r,Nea:t,o$a:v,$a:w,QSa:x,ka:y,Of:z,locale:B,qa:C,la:G,X:H,Aqb:K,fK:L})=>{const N=q?.qh.$U;q=new Mow(N);Jsw({P:a,OD:e,$f:h,Nea:t,$a:w,currentUser:K(),V:c,SGc:q});Zsw({Nea:t,o$a:v,SGc:q,sc:r});Pb("619068ef",!1)&&N&&$sw({Nea:t,SGc:q});b=jsw({P:a,gsa:l,errorService:p,eT:n,Ha:b,locale:B,la:G,X:H,Nea:t});gsw({...b,P:a,Nea:t});({bKd:a}=wlw({ka:y,Of:z,P:a,ma:d,Na:f,Bk:g,k9:k,gsa:l,errorService:p,$a:w,QSa:x,qa:C,o$a:v,
eT:n,Aqb:K,fK:L,...b}));return{SGc:q,bKd:a,o6c:b.o6c}};var btw=a=>{var b=window.location.hash;b=b.startsWith("#comment-")?b.slice(9):void 0;if(b)return{type:"thread",gi:b};if(a.bwm)switch(a=a.bwm,a.type){case "THREAD":return a.MLc?{type:"thread",gi:a.MLc,Wba:a.vJe}:void 0;case "ALL":if(a.filter){a:switch(a=a.filter,a){case 2:a="unread";break a;case 1:a="for_you";break a;default:throw new u(a);}a={type:"panel",dG:a}}else a=void 0;return a;default:throw new u(a);}else if(a.MLc)return{type:"thread",gi:a.MLc,Wba:a.vJe}};var ctw=F(()=>({object:S("object",1),mg:S("thread",2),body:D("body",3,mnw)}));var dtw=F(()=>({object:S("object",1),mg:S("thread",2),id:S("id",3),body:D("body",4,nnw)}));var etw=F(()=>({object:S("object",1),accessToken:U("accessToken",2),mg:S("thread",3),id:S("id",4),Okb:__c.Xa("replyContext",5,gnw)}));var Slw=new __c.Si("temp_comment_"),ftw=class{static G(a){O(a,{cN:q_.shallow})}constructor(){this.cN=(ftw.G(this),new Map)}},htw=class{static G(a){O(a,{aAl:l_.bound,DVl:l_.bound,rLl:l_.bound,Jgb:l_.bound,IWb:l_.bound,Tyb:l_.bound})}aAl(a){this.I.store.cN.set(a.mg.comment.gi,a)}pMe(a){return this.I.store.cN.get(a)}async Ebd(a){const b=await Plw(this,a);this.DVl(a,b)}DVl(a,b){const c=new Map(a.mg.kF.filter(e=>e.gW==="error").map(e=>[e.id,e]));let d=[];b.forEach(e=>{const f=c.get(e.id);f?(d.push(f),
c.delete(f.id)):d.push(e)});d=[...d,...c.values()];a.mg.kF=d;a.mg.Lta=d.length;a.mg.Xpd=d.filter(Qlw).length}rLl(a,b){var c=this.I.store;b?(a=c.cN.get(a),c=a?.mg.kF.find(d=>d.id===b),a&&c&&gtw(a,c)):c.cN.delete(a)}async Jgb({store:a,value:b,uq:c,vGs:d}){const e=this.I.OD,f=this.I.ka,g=this.I.Of,h=this.I.gC,k=this.I.N;let l;l=d?d:Tlw(this,a,b);const n=a.mg.comment.gi;return a.mg.comment.gW?La():Wlw(this,{grant:b.grant,HEa:()=>Xlw(this,n,()=>e.Jgb(new ctw({object:f,mg:n,body:new mnw({object:f,accessToken:g,
mg:n,content:b.content,qu:b.qu,attachments:b.attachments,Okb:this.Okb,FIg:Ylw(this,b.content,b.qu)})}))),nk:l_(p=>{const q=b.wA.length>0,r=b.attachments.length>0;m(h)(["commented",q?"mentioned":void 0,r?"used-stickers":void 0].filter(sb));k.track(fpw,{type:"reply",ka:f,Vk:n,Wba:p.id,tAd:q,hVe:Zlw(this,b.wA),fbb:b.qu?Khw(b.qu):!!b.content,f_a:b.qu?Lhw(b.qu):Jhw(b.content),u5a:r,media:xhw(b.attachments),e1g:Shw(b.wA),uq:c});l.id=p.id;l.created=p.created;l.updated=p.created;l.gW=void 0;l.mqa=void 0;
return l}),onError:l_(()=>l.gW="error")})}IWb({store:a,fZ:b,value:c,uq:d}){b.content=c.content;b.qu=c.qu;b.wA=c.wA;b.attachments=c.attachments;b.updated=Date.now();b.gW="pending";b.mqa=c;const e=this.I.OD,f=this.I.ka,g=this.I.Of,h=this.I.gC,k=this.I.N,l=a.mg.comment.gi;return Wlw(this,{grant:c.grant,HEa:()=>Xlw(this,l,()=>e.EVl(new dtw({object:f,id:b.id,mg:l,body:new nnw({object:f,accessToken:g,mg:l,id:b.id,content:c.content,qu:c.qu,attachments:c.attachments,Okb:this.Okb})}))),nk:l_(n=>{b.updated=
n.updated;b.gW=void 0;b.mqa=void 0;n=c.wA.length>0;const p=c.attachments.length>0;m(h)(["edited-comment",n?"mentioned":void 0,p?"used-stickers":void 0].filter(sb));k.track(epw,{type:"reply",ka:f,Vk:l,Wba:b.id,tAd:n,hVe:Zlw(this,c.wA),fbb:c.qu?Khw(c.qu):!!c.content,f_a:c.qu?Lhw(c.qu):Jhw(c.content),u5a:p,media:xhw(c.attachments),e1g:Shw(c.wA),uq:d})}),onError:l_(()=>b.gW="error")})}async Tyb({store:a,fZ:b,uq:c}){const d=this.I.OD,e=this.I.ka;var f=this.I.Of;const g=this.I.gC,h=this.I.N,k=a.mg.comment.gi;
b.gW="pending";const l=new etw({object:e,accessToken:f,mg:k,id:b.id,Okb:this.Okb});f=await Xlw(this,k,()=>Vlw(()=>d.Tyb(l)));f_(()=>b.gW=void 0);return f.ok?(gtw(a,b),h.track(pmw,{type:"reply",ka:e,Vk:k,Wba:b.id,uq:c}),m(g)(["deleted"]),La()):f}async eAh(a,b){const c=this.I.OD,d=this.I.ka,e=this.I.Of;var f=this.I.Aqb;const g=a.mg.comment,h=a.mg.kF,k=f();f=h.filter(n=>!k||n.author?.id!==k.id).map(n=>n.created);const l=Math.max(g.created,...f);if(!(l<=a.mg.ecb))try{b?.V4u||a.mg.comment.gi.startsWith("placeholder_comment")||
await c.Vjl(new lnw({object:d,accessToken:e,views:[{mg:a.mg.comment.gi,Jxc:l}]})),f_(()=>a.mg.ecb=Math.max(a.mg.ecb,l))}catch(n){}}lwi(a){a=a.mg.comment.gi;a.startsWith("placeholder_comment")||(this.I.v6a.pLf?this.I.v6a.pLf(a):(this.Qah.Qj.add(a),this.Qah.oC||(this.Qah.oC=tjw(()=>!!this.I.v6a.pLf,()=>{this.Qah.Qj.forEach(b=>{this.I.v6a.pLf?.(b)});this.Qah.Qj.clear()}))))}constructor(a){this.I=a;this.NTf=(htw.G(this),new Set);this.Qah={Qj:new Set,oC:void 0}}},gtw=l_((a,b)=>{const c=a.mg.kF.findIndex(d=>
d.id===b.id);sa(c>=0);a.mg.kF.splice(c,1);a.mg.Lta--;b.type==="ai"&&a.mg.Xpd--}),Vlw=async a=>{try{const b=await a();return La(b)}catch(b){return Ma(b)}};var jtw=a=>{const b=a.dis,c=a.t8,d=a.Fu,e=a.QS,f=a.LWh,g=a.la,h=a.ma,k=a.P,l=a.WGc,n=a.EF;tjw(()=>!!e.n$a?.tNb&&d.Tf===3,()=>{b?.type==="thread"?itw({vWn:b,t8:c,Fu:d,QS:e,ma:h,P:k,source:"comment_link"}):b?.type==="panel"?e.Yza({type:"all",bhb:!1,dG:b?.dG}):n&&!l.bvs&&(e.jEc!=="comment_panel"||!e.gqn)&&d.ded.size>0&&g.layout===1&&e.Yza({type:"all",bhb:!1})});UZ(()=>f?.get(),p=>{if(p){var q=p.MLc;p=p.vJe;q&&itw({vWn:{type:"thread",gi:q,Wba:p},t8:c,Fu:d,QS:e,ma:h,P:k,source:"notification"})}})},itw=
async({vWn:a,t8:b,Fu:c,QS:d,ma:e,P:f,source:g})=>{const h=a.gi;a=a.Wba;let k;var l=b.pMe(h);if(l){b=l.mg.comment.type;l=l.mg.comment.kj;var n=b==="suggestion"&&(l==="accepted"||l==="rejected");b==="comment"&&l?k=M("DLh9+A"):n&&(k=M("NaDLSA"));g={type:"thread",gi:h,Wba:a,KNc:!0,Gub:!0,source:g,bhb:!1};Gpw&&c.ded.has(h)?(d.n$a?.Rnc(),d.Brg?.Yza(g)):d.n$a?.Yza(g);f.track(mpw,{Vk:h,Wba:a})}else try{switch(n=await b.qMe(h),n){case "not_found":k=M("oQ2eQw");break;case "deleted":k=M("c8rAiw");break;case "unresolved":case "resolved":case "accepted":case "rejected":throw Error(`Thread found with status: ${n}`);
default:throw new u(n);}}catch(p){e.Ib({Db:M("oQ2eQw")})}k&&e.Ib({Db:k})};var ktw=class{Uu(a){return!this.gtf&&a.yz?.id===this.uj&&a.type==="comment"}Axe(a){return this.ftf||a.type==="ai"&&a.cuc?!1:a.yz?.id===this.uj||this.F5c&&this.F5c===this.uj?!0:!1}zng(){return this.Xf>=5}constructor(a,b,c,d,e){this.uj=a;this.F5c=b;this.gtf=c;this.ftf=d;this.Xf=e}};var ltw=class{static G(a){O(a,{Tf:q_.ref,v_j:q_.ref,cN:b_({equals:__c.fk()}),xa:b_,isLoaded:b_})}get cN(){const a=new Map;[...this.kqt.cN.entries()].forEach(([b,c])=>{a.set(b,c)});[...this.maa.cN.entries()].forEach(([b,c])=>{a.set(b,c)});[...this.Uqs.cN.entries()].forEach(([b,c])=>{a.set(b,c)});return a}get xa(){return this.Tf===2}get isLoaded(){return this.Tf===3}constructor(a,b,c){this.kqt=a;this.maa=b;this.Uqs=c;this.Tf=(ltw.G(this),1);this.v_j=!1}},mtw=class{static G(a){O(a,{Kuc:l_.bound,iDf:l_.bound,
$sm:l_.bound,aud:l_.bound,NBc:l_.bound,$Vl:l_,LGo:l_})}async Kuc(){if(this.store.xa||this.store.isLoaded&&this.store.v_j)return Promise.resolve();this.store.Tf=2;try{await Promise.all([this.Veb.Kuc(),this.jea.Kuc()]),f_(()=>{this.store.Tf=3;this.store.v_j=!0})}catch(a){throw f_(()=>this.store.Tf=4),a;}}Ebd(a){return this.Xad(a)?this.Veb.Ebd(a):this.jea.Ebd(a)}async qMe(a){return(await Promise.all([this.Veb.qMe(a),this.jea.qMe(a)])).find(b=>b!=="not_found")||"not_found"}URj(a){return this.Veb.URj(a)}async ATj(a){var b=
a.ref,c=this.document.Ka==="fixed"?ojw(b,this.document,this.hb):new __c.W7c({});b=b.page?.type==="fixed"?amw(this,b.page):void 0;c=await this.Veb.ATj({...a,Ked:b,LQa:c});if(c.ok){const d=a.ref,e=!!d&&(hhw(d)||ihw(d)||phw(d)),f=$Z(a.store);this.undo.TZ(l_(()=>{e?d.target.Qj=[...(d.target.Qj||[]),f]:XZ(d)&&zgw(this.DC,f,d.ZS);d&&(XZ(d)||YZ(d))&&__c.E7f(this.DC);this.Veb.aAl(a.store)}));this.I4b()}return c}o$b(a){return this.Veb.o$b(a)}async iQb({store:a,uq:b,action:c}){if(this.Xad(a))return this.Veb.iQb({store:a,
uq:b});c=m(c,"No action provided when resolving a suggestion");const d=$Z(a),e=l_(()=>this.undo.TZ(()=>{switch(c){case "accepted":this.DC.xUd(d);break;case "rejected":this.DC.WWf(d);break;case void 0:break;default:throw new u(c);}}));if(Tow(a.mg.comment)&&!this.gfd.iLi.has(d))return e(),La();a=await this.jea.iQb({store:a,uq:b,action:c});a.ok&&e();return a}async FBc({store:a,KQd:b}){if(this.Xad(a))return this.Veb.FBc({store:a,KQd:b});throw Error("Attempting to unresolve a suggestion. This is not possible.");
}async hpb({store:a,uq:b}){const c=$Z(a);if(this.Xad(a))return b=await this.Veb.hpb({store:a,uq:b}),b.ok&&this.$sm(a),b;a=await this.jea.hpb({store:a});a.ok&&f_(()=>this.undo.TZ(()=>this.DC.WWf(c)));return a}$sm(a){const b=a.mg.comment.gi,c=d=>{const e=d.Qj.indexOf(b);e!==-1&&(d.Qj=[...d.Qj.slice(0,e),...d.Qj.slice(e+1)])};this.undo.TZ(()=>{this.DC.hRi(b);__c.$t.Mv(this.document).forEach(d=>{c(d);d.elements.forEach(e=>{c(e);e.type==="group"&&e.pb.forEach(c)})})})}Jgb({store:a,...b}){return this.Xad(a)?
this.Veb.Jgb({...b,store:a}):this.jea.Jgb({...b,store:a})}IWb({store:a,...b}){return this.Xad(a)?this.Veb.IWb({...b,store:a}):this.jea.IWb({...b,store:a})}Tyb({store:a,...b}){return this.Xad(a)?this.Veb.Tyb({...b,store:a}):this.jea.Tyb({...b,store:a})}eAh(a,b){return this.Xad(a)?this.Veb.eAh(a,b):Tow(a.mg.comment)?Promise.resolve():this.jea.eAh(a,b)}lwi(a){this.Xad(a)?this.Veb.lwi(a):Tow(a.mg.comment)||this.jea.lwi(a)}constructor(a,b,c,d,e,f,g,h,k,l,n,p,q,r,t,v,w){this.store=a;this.Veb=b;this.jea=
c;this.gfd=d;this.DC=e;this.OD=f;this.undo=g;this.N=h;this.hb=k;this.Fma=l;this.SF=n;this.document=p;this.kb=q;this.I4b=r;this.xUa=t;this.ka=v;this.Of=w;this.iDf=(mtw.G(this),async x=>{const y=x.gi,z=x.Wba;let B=!1;switch(x.type){case "ADDED":await this.Veb.yLl(y,z);B=!0;break;case "MODIFIED":this.Veb.xLl(y,z);break;case "DELETED":this.Veb.rLl(y,z);B=!0;break;case "SUGGESTION_ADDED":await this.jea.yLl(y,z);B=!0;break;case "SUGGESTION_MODIFIED":this.jea.xLl(y,z);break;case "SUGGESTION_DELETED":this.jea.rLl(y,
z);B=!0;break;case "RESPONSE_GENERATION_STATE":this.Veb.K5i(y,z);break;default:throw new u(x);}B&&this.LGo(y)});this.aud=async({gxa:x})=>{const y=this.store.cN.get(x);if(!y||this.Xad(y))return Ma();const z=this.document.Ka==="fixed"&&y.ref?.page?.type==="responsive"&&ghw(y.ref)?this.document.pages.toArray().indexOf(y.ref.page)+1:void 0,B=new __c.W7c({Bd:z}),C=await emw(this.gfd,x,()=>this.jea.aud({store:y,LQa:B}));C.ok&&(f_(()=>{this.gfd.store.cN.delete(x);this.jea.aAl(y);this.DC.lmh(x,C.value)}),
this.I4b());return C};this.NBc=__c.Db(async x=>this.jea.WLm(x),3E3);this.$Vl=(x,y,z)=>{y=y.reduce((B,{userId:C})=>{if(!B.has(C)){const G=z.get(C),H=this.xUa(C)?.background;B.set(C,{id:C,name:BA(G),Bh:G?.Jc?.images?.[0].url,backgroundColor:H,borderColor:H||"",tu:C})}return B},new Map);y.size>0&&(x.mg.Aah=y)};this.RHr=async()=>{try{const {MIo:x,PFo:y,profiles:z}=await this.FWm(),B=new Map([...x.entries(),...y.entries()]);for(const [C,{sTf:G}]of B.entries()){const H=this.store.cN.get(C);H&&G.length&&
this.$Vl(H,G,z)}}catch(x){}};this.LGo=async x=>{try{const L=this.store.cN.get(x);if(L){var y=L.mg.Lta,z=L.mg.Aah,B=L.mg.kF.filter(N=>!!N.gW).length;if(y&&y!==B){var {MIo:C,PFo:G,profiles:H}=await this.FWm(),K=new Map([...C.entries(),...G.entries()]);this.$Vl(L,K.get(x)?.sTf??[],H)}else z.clear()}}catch(L){}};this.FWm=()=>this.OD.egk(new jnw({object:this.ka,accessToken:this.Of}));this.XTq=async x=>{if(!x)return[];try{var y=new inw({object:this.ka,accessToken:this.Of,qy:[x],kj:!1});const z=await this.OD.Jfk(y),
B=z.wA,C=z.Q7s;y=[];B.has(x)&&y.push(...B.get(x).wA);C.has(x)&&y.push(...C.get(x).wA);return y}catch(z){return[]}};this.pMe=x=>this.store.cN.get(x);this.Xad=x=>x.mg.comment.type==="comment"||x.mg.comment.type==="ai";this.Rwh=x=>{this.N.track(gpw,x)};this.hht=x=>{this.N.track(kpw,x)}}};var ntw=class{static G(a){O(a,{lJc:q_.deep,U1b:q_.deep})}constructor(){this.lJc=(ntw.G(this),new Map);this.U1b=new Map}},otw=class{static G(a){O(a,{wcm:l_.bound,Gll:l_.bound,Pcm:l_.bound,e$n:l_.bound})}wcm({store:a,ref:b}){this.I.store.lJc.set($Z(a),{store:a,ref:b})}Gll(a){this.I.store.lJc.delete(a)}Pcm({store:a,ref:b}){this.I.store.U1b.set($Z(a),{store:a,ref:b})}e$n(a){this.I.store.U1b.delete(a)}constructor(a){this.I=a;otw.G(this)}};var ptw=class{static G(a){O(a,{kF:q_.shallow,Lta:q_.ref,Xpd:q_.ref,comment:q_.ref,ecb:q_.ref,Aah:q_.shallow,C_n:b_({equals:d_.shallow}),Yla:b_,sBb:b_})}get C_n(){return Array.from(this.Aah.values())}get Yla(){return this.comment.type==="comment"?this.comment.Yla:void 0}get sBb(){return this.comment.type==="comment"?!!this.comment.Yla:!1}constructor({comment:a,kF:b,Lta:c,Xpd:d=0,ecb:e}){this.kF=(ptw.G(this),void 0);this.Aah=new Map;this.comment=a;this.kF=b;this.Lta=c;this.Xpd=d;e!=null?this.ecb=e:
(b=b.map(f=>f.created),this.ecb=Math.max(a.created,...b))}};var qtw=class{constructor(a,b,c,d,e,f){this.store=a;this.DC=b;this.Na=c;this.Bk=d;this.Aqb=e;this.createStore=f;this.LXl=new Map;this.iLi=new Set}},rtw=class{fBk(){UZ(()=>this.Tqs.get(),(a,b)=>{this.P8s(a,b)},{fireImmediately:!0})}constructor(a,b,c,d){this.gfd=a;this.Tqs=b;this.Aqb=c;this.Amb=d;this.WDm=new Map;this.OFo=[];this.P8s=(f,g)=>{var h=[...f.keys()],k=g?[...g.keys()]:[];const l=this.Aqb()?.id,n=h.filter(p=>!g?.has(p));k=k.filter(p=>!f.has(p));h=h.filter(p=>g?.has(p)&&f.get(p)?.content!==
g.get(p)?.content);n.forEach(p=>{const q=m(f.get(p));var r=this.gfd,t=r.createStore,v=r.Aqb;const w=q.content,x=q.gxa,y=q.timestamp;var z=q.userId;const B=v();z=(v=B?.id===z)?B:{id:z,displayName:M("i5Adfg"),Jc:new __c.Cp({status:1})};t=t(new ptw({comment:new Vhw({id:x,gi:x,ZQe:!0,yz:z,created:y,updated:y,LNa:4,content:w}),kF:[],Lta:0,ecb:v?y:0}));r.store.cN.set(t.mg.comment.gi,t);l&&l===q.userId&&this.D6n(p);gmw(this.gfd,p,q.userId)});k.forEach(p=>{this.gfd.store.cN.delete(p)});h.forEach(p=>{const q=
m(f.get(p));var r=this.gfd;const t=r.store.cN.get(p);r=r.DC.Ou.k5i.get(p);t&&r&&t.mg.comment.content!==r.content&&(t.mg.comment.content=r.content);l&&l===q.userId&&this.D6n(p)})};this.D6n=f=>{const g=this.WDm.get(f)||this.Gdq(f);this.WDm.set(f,g);g()};this.Gdq=f=>__c.Db(()=>{this.OFo.push(f)},3E3);const e=()=>{setTimeout(()=>{e();const f=this.OFo.shift();f&&this.Amb({gxa:f})},500)};e()}};var stw=F(()=>({object:S(1),id:S(2),accessToken:U(3)}));var ttw=[1,2,3],utw=class extends htw{static G(a){O(a,{gAc:l_.bound,rfh:l_.bound,K5i:l_.bound,aud:l_.bound,WLm:l_.bound,hpb:l_.bound,iQb:l_.bound})}async Kuc(){const a=this.I.OD,b=this.I.ka,c=this.I.Of;do{var d=new __c.uQg({object:b,accessToken:c,dD:ttw,continuation:d,limit:100});d=await a.SDd(d);this.gAc(d);d=d.continuation}while(d)}gAc(a){const b=this.I.createStore,c=this.I.store;var d=a.suggestions;const e=a.profiles,f=a.PBb,g=a.$Db;a=a.Jxc;for(const k of d){d=g.get(k.id)||0;var h=f.get(k.id);
h=h?[Rhw(h,e,!!Xhw(k.status))]:[];d=new ptw({comment:Yhw(k,e),kF:h,Lta:d,Xpd:0,ecb:a.get(k.id)});d=b(d);!c.cN.has(k.id)&&c.cN.set(k.id,d)}}async rfh(a){const b=this.I.store,c=a.profiles,d=a.PBb,e=a.$Db,f=a.Jxc;a=a.suggestions.map(g=>{if(!this.NTf.has(g.id)){var h=b.cN.get(g.id)?.mg;if(h){h.comment.updated!==g.updated&&(h.comment=Yhw(g,c));var k=e.get(g.id)||0,l=d.get(g.id),n=h.Lta,p=h.kF.slice(-1).pop(),q=f.get(g.id)||0;h.ecb=Math.max(h.ecb,q);if(p?.updated!==l?.updated||n!==k||!this.NTf.has(g.id))return g=
m(b.cN.get(g.id)),Rlw(this,g)}}});await Promise.all(a.map(g=>g?.catch(()=>{})))}e5m(a,b){return this.I.OD.mMk(new qnw({object:this.I.ka,accessToken:this.I.Of,mg:a.mg.comment.id,limit:100,continuation:b}))}async yLl(a,b){const c=this.I.store;if(!b||!c.cN.has(a)){const d=await this.lyd(a);this.gAc(d);if(!b)return}return this.Ebd(m(c.cN.get(a)))}async xLl(a,b){const c=this.I.store;let d=c.cN.get(a);if(!b||!d){const e=await this.lyd(a);if(e.suggestions.length===1){const f=e.suggestions[0];if(d){const g=
Xhw(f.status);f_(()=>{d.mg.comment.kj=g;d.mg.kF.forEach(h=>h.kj=!!g)});this.rfh(e)}else this.gAc(e)}if(!b)return}(d=c.cN.get(a))&&this.Ebd(d)}async K5i(a,b){if(b){b=this.I.store;if(!b.cN.has(a)){const c=await this.lyd(a);this.gAc(c)}return this.Ebd(m(b.cN.get(a)))}}async lyd(a){return this.I.OD.$fk(new pnw({object:this.I.ka,accessToken:this.I.Of,Rg:[a],dD:ttw}))}async qMe(a){({suggestions:a}=await this.lyd(a));if(a.length===1)switch(a[0].status){case 1:return"unresolved";case 2:return"accepted";case 3:return"rejected";
case 4:return"deleted"}return"not_found"}aud({store:a,LQa:b}){const c=this.I.OD,d=this.I.ka,e=this.I.Of,f=a.mg.comment;f.gW="pending";return Wlw(this,{grant:void 0,HEa:()=>c.aud(new onw({object:d,accessToken:e,content:Wow(f.content),LQa:b})),nk:l_(g=>{f.id=g.Ou.id;f.gi=g.Ou.id;f.created=g.Ou.created;f.updated=g.Ou.updated;f.gW=void 0;f.ZQe=void 0;jmw(this,g.Ou.id,"add_suggestion",f.content);return g.Ou.id}),onError:l_(()=>f.gW="error")})}WLm({store:a}){const b=this.I.OD,c=this.I.ka,d=this.I.Of,e=
a.mg.comment;e.gW="pending";return Wlw(this,{grant:void 0,HEa:()=>Xlw(this,e.id,()=>b.NBc(new __c.tQg({id:e.id,object:c,accessToken:d,content:Wow(e.content)}))),nk:l_(f=>{e.updated=f.Ou.updated;e.gW=void 0;jmw(this,f.Ou.id,"edit_existing",e.content)}),onError:l_(()=>e.gW=void 0)})}async hpb({store:a}){const b=this.I.OD;var c=this.I.ka;const d=this.I.Of,e=this.I.store;a.mg.comment.gW="pending";const f=a.mg.comment.gi;c=new stw({object:c,accessToken:d,id:f});try{return await b.LYj(c),f_(()=>e.cN.delete(f)),
La()}catch(g){return f_(()=>a.mg.comment.gW=void 0),Ma()}}async iQb({store:a,action:b}){const c=this.I.OD,d=this.I.ka,e=this.I.Of;a.mg.comment.LNa=b==="accepted"?0:1;const f=l_(()=>{a.mg.comment.kj=b;a.mg.kF.forEach(g=>g.kj=!0);a.mg.comment.LNa=4});if(a.mg.comment.kj)return f(),La();if((await Xlw(this,a.mg.comment.id,()=>Vlw(()=>c.NBc(new __c.tQg({object:d,id:a.mg.comment.id,accessToken:e,status:b==="accepted"?2:3}))))).ok)return f(),lmw(this,a.mg.comment.id,b==="accepted"?"accept":"reject",a.mg.comment.content),
La();f_(()=>{a.mg.comment.LNa=4});return Ma()}constructor(...a){super(...a);this.Okb=(utw.G(this),2)}},hmw=a=>{const b=a.add?.length??!1,c=a.remove?.length??!1;if(b&&c)return"replace";if(b)return"add";if(c)return"delete";if(a.formats?.length??!1)return"format"};var vtw=F(()=>({object:S("object",1),body:D("body",2,__c.b8c)}));var wtw=F(()=>({object:S("object",1),id:S("id",2),body:D("body",3,__c.c8c)}));var xtw=F(()=>({object:S("object",1),accessToken:U("accessToken",2),id:S("id",3)}));var rmw=Symbol("ResolvingCommentToast"),ytw=class extends htw{static G(a){O(a,{gAc:l_.bound,rfh:l_.bound,K5i:l_.bound,o$b:l_.bound,hpb:l_.bound,iQb:l_.bound,FBc:l_.bound})}async Kuc(){await Promise.all([nmw(this),omw(this)])}gAc(a){const b=this.I.createStore,c=this.I.store,d=a.profiles,e=a.PBb,f=a.$Db,g=a.fem,h=a.Jxc;a.comments.forEach(k=>{var l=f.get(k.id)||0,n=e.get(k.id);n=n?[Rhw(n,d,k.kj)]:[];l=new ptw({comment:Ohw(k,d),kF:n,Lta:l,Xpd:g.get(k.id),ecb:h.get(k.id)});l=b(l);!c.cN.has(k.id)&&c.cN.set(k.id,
l)})}async rfh(a){const b=this.I.store,c=a.profiles,d=a.PBb,e=a.$Db,f=a.Jxc;a=a.comments.map(g=>{if(!this.NTf.has(g.id)){var h=b.cN.get(g.id)?.mg;if(h){h.comment.updated!==g.updated&&(h.comment=Ohw(g,c));var k=e.get(g.id)||0,l=d.get(g.id),n=h.Lta,p=h.kF.slice(-1).pop(),q=f.get(g.id)||0;h.ecb=Math.max(h.ecb,q);if(p?.updated!==l?.updated||n!==k||!this.NTf.has(g.id))return g=m(b.cN.get(g.id)),Rlw(this,g)}}});await Promise.all(a.map(g=>g?.catch(()=>{})))}e5m(a,b){return this.I.OD.lMk(new hnw({object:this.I.ka,
accessToken:this.I.Of,mg:a.mg.comment.id,limit:100,continuation:b}))}async yLl(a,b){const c=this.I.store;if(!b||!c.cN.has(a)){const d=await this.lyd(a);this.gAc(d);if(!b)return}return this.Ebd(m(c.cN.get(a)))}async xLl(a,b){let c=this.I.store.cN.get(a);if(!b||!c){const d=await this.lyd(a);if(d.comments.length===1){const e=d.comments[0];c?(f_(()=>{c.mg.comment.kj=e.kj;c.mg.kF.forEach(f=>f.kj=e.kj)}),this.rfh(d)):this.gAc(d)}if(!b)return}(c=this.I.store.cN.get(a))&&this.Ebd(c)}async K5i(a,b){if(b){b=
this.I.store;if(!b.cN.has(a)){const c=await this.lyd(a);this.gAc(c)}return this.Ebd(m(b.cN.get(a)))}}async lyd(a){const b=this.I.ka,c=this.I.Of,d=this.I.OD,e=new fnw({object:b,accessToken:c,Rg:[a],kj:!1});a=new fnw({object:b,accessToken:c,Rg:[a],kj:!0});const [f,g]=await Promise.all([d.hbi(e),d.hbi(a)]);return f.comments.length>0?f:g}async qMe(a){({comments:a}=await this.lyd(a));return a.length===1?a[0].kj?"resolved":"unresolved":"not_found"}URj(a){const b=this.I.createStore,c=this.I.Aqb,d=Date.now(),
e=Slw.next();return b(new ptw({comment:new Mhw({id:e,gi:e,yz:m(c()),created:d,updated:d,LNa:4,content:a.content,qu:a.qu,wA:a.wA,attachments:a.attachments,Yla:a.UN?.id,UN:a.UN,gW:"pending",mqa:a}),kF:[],Lta:0,Xpd:0}))}ATj({store:a,uq:b,Ked:c,LQa:d}){const e=this.I.OD,f=this.I.ka,g=this.I.Of,h=this.I.gC,k=this.I.N,l=a.mg.comment;return Wlw(this,{grant:l.mqa?.grant,HEa:()=>e.createComment(new vtw({object:f,body:new __c.b8c({object:f,accessToken:g,content:l.content,qu:l.qu,Yla:l.UN?.id,attachments:l.attachments,
Ked:c,LQa:d,FIg:Ylw(this,l.content,l.qu)})})),nk:l_(n=>{const p=l.wA.length>0,q=l.attachments.length>0;m(h)(["commented",p?"mentioned":void 0,q?"used-stickers":void 0,l.UN?.id?"assigned":void 0].filter(sb));k.track(fpw,{type:"comment",ka:f,Vk:n.id,tAd:p,hVe:Zlw(this,l.wA),Yla:l.UN?.id,fbb:l.qu?Khw(l.qu):!!l.content,u5a:q,media:xhw(l.attachments),f_a:l.qu?Lhw(l.qu):Jhw(l.content),e1g:Shw(l.wA),uq:b});l.id=n.id;l.gi=n.id;l.mqa=void 0;l.gW=void 0;l.created=n.created;l.updated=n.created})})}o$b({store:a,
value:b,uq:c}){const d=this.I.OD,e=this.I.ka,f=this.I.Of,g=this.I.gC,h=this.I.N,k=a.mg.comment;k.content=b.content;k.qu=b.qu;k.wA=b.wA;k.attachments=b.attachments;k.updated=Date.now();k.gW="pending";k.mqa=b;return Wlw(this,{grant:b.grant,HEa:()=>Xlw(this,k.id,()=>d.GW(new wtw({id:k.id,object:e,body:new __c.c8c({object:e,accessToken:f,id:k.id,content:b.content,qu:b.qu,attachments:b.attachments})}))),nk:l_(l=>{k.updated=l.updated;k.mqa=void 0;k.gW=void 0;l=b.wA.length>0;const n=b.attachments.length>
0;m(g)(["edited-comment",l?"mentioned":void 0,n?"used-stickers":void 0].filter(sb));h.track(epw,{type:"comment",ka:e,Vk:k.id,tAd:l,hVe:Zlw(this,b.wA),fbb:b.qu?Khw(b.qu):!!b.content,f_a:b.qu?Lhw(b.qu):Jhw(b.content),u5a:n,media:xhw(b.attachments),e1g:Shw(b.wA),uq:c})}),onError:l_(()=>k.gW="error")})}async hpb({store:a,uq:b}){const c=this.I.OD;var d=this.I.ka;const e=this.I.Of,f=this.I.store;a.mg.comment.gW="pending";const g=a.mg.comment.gi;d=new xtw({object:d,accessToken:e,id:g});try{return await c.Toc(d),
f_(()=>f.cN.delete(g)),qmw(this,a,b),La()}catch(h){return f_(()=>a.mg.comment.gW=void 0),Ma()}}async iQb({store:a,uq:b}){const c=this.I.OD,d=this.I.ka,e=this.I.Of;a.mg.comment.LNa=2;const f=()=>{a.mg.comment.kj&&this.FBc({store:a,KQd:"toast_notification"})},g=l_(()=>{a.mg.comment.kj=!0;a.mg.kF.forEach(h=>h.kj=!0);a.mg.comment.LNa=4;smw(this,{buttonText:M("rnE3Tg"),onClick:f})});if(a.mg.comment.kj)return g(),La();if((await Xlw(this,a.mg.comment.id,()=>Vlw(()=>c.GW(new wtw({object:d,id:a.mg.comment.id,
body:new __c.c8c({object:d,accessToken:e,id:a.mg.comment.id,kj:!0})}))))).ok)return g(),umw(this,a,b),La();f_(()=>{a.mg.comment.LNa=4});vmw(this,{buttonText:M("KENS+w"),onClick:()=>{this.iQb({store:a,uq:b})}});return Ma()}async FBc({store:a,KQd:b}){const c=this.I.ma,d=this.I.OD,e=this.I.ka,f=this.I.Of,g=a.mg.comment.gi;a.mg.comment.LNa=3;const h=l_(()=>{a.mg.comment.kj=!1;a.mg.kF.forEach(l=>l.kj=!1);a.mg.comment.LNa=4;c.Ib({Db:M("7rcPhQ"),group:b!=="toast_notification"?rmw:void 0})});if(!a.mg.comment.kj)return h(),
La();const k=await Xlw(this,g,()=>Vlw(()=>d.GW(new wtw({id:g,object:e,body:new __c.c8c({object:e,accessToken:f,id:g,kj:!1})}))));if(k.ok)return h(),xmw(this,a,b),La();f_(()=>{a.mg.comment.LNa=4});return k}constructor(...a){super(...a);this.Okb=(ytw.G(this),1)}};var ztw=a=>{const b=a.ea;var c=a.Aqb,d=a.xUa,e=a.Bk;const f=a.OD;var g=a.errorService,h=a.Ra,k=a.Na;const l=a.DC,n=a.SF;var p=a.viewport,q=a.v6a;const r=a.ma,t=a.Mmb,v=a.goc,w=a.BTk,x=a.hoc,y=a.kb,z=a.Fma,B=a.hb,C=a.P,G=a.Dq,H=a.uj;a=b.id;const K=b.document,L=b.extension,N=b.undo,P=H?__c.Rbt({userId:H,errorService:g,Ra:h}).gC:void 0,T=W=>new Qow({mg:W,uj:H,goc:v,hoc:x});h=new ftw;g=new ytw({store:h,N:C,Dq:G,viewport:p,ka:a,Of:L,OD:f,Mmb:t,ma:r,v6a:q,Aqb:c,createStore:T,KBf:w.KBf,gC:P});const V=new ftw;
p=new utw({store:V,N:C,Dq:G,viewport:p,ka:a,Of:L,OD:f,Mmb:t,ma:r,v6a:q,Aqb:c,createStore:T,KBf:w.KBf,gC:P});q=new ftw;c=new qtw(q,l,k,e,c,T);e=new ntw;k=new otw({store:e});h=new ltw(h,V,q);d=new mtw(h,g,p,c,l,f,N,C,B,z,n,K,y,()=>b.sync(),d,a,L);return{KHa:e,KKf:k,Yoa:h,t8:d,gfd:c}};var Atw=class{static G(a){O(a,{Y9c:q_.struct})}constructor(){this.Y9c=(Atw.G(this),void 0)}},Btw=class{static G(a){O(a,{ayk:l_,Nmh:l_.bound})}Z9c({store:a,action:b,Ohd:c}){this.Nmh({ref:a.ref,store:a,action:b,source:"thread",Ohd:c})}onMouseMove(a,b){var c=this.I.DC;const d=this.I.Fu;var e=this.I.viewport;if(e.MF&&e.iN){var f=Oj({top:a.clientY,left:a.clientX,height:0,width:0}).transform(e.iN);a=[...d.fEd.entries()].filter(([g,h])=>d.gVd.has(g)&&h.some(k=>k.bounds.tD(f))).map(([g])=>g);e=[...d.fEd.entries()].filter(([g,
h])=>d.tmc.has(g)&&h.some(k=>k.bounds.tD(f))).map(([g])=>g);c=[...c.cqd.values()].filter(g=>g.jU.some(h=>h.tD(f))).map(({Vk:g})=>g);c=[...a,...e,...c];this.ayk({jvh:c,action:c.length>0?"enter":"leave",Ohd:b})}}ayk({jvh:a,action:b,Ohd:c}){const d=this.I.store.Y9c;b==="leave"?d?.source==="highlight"&&this.Nmh({store:d.store,ref:void 0,action:"leave",source:"highlight",Ohd:c}):(a=zmw(this,a))&&this.Nmh({store:a,ref:void 0,action:"enter",source:"highlight",Ohd:c})}Nmh({store:a,ref:b,action:c,source:d,
Ohd:e}){const f=a?$Z(a):void 0;var g=(c=c==="enter")?b:void 0,h=this.I.vib,k=this.I.store.Y9c?.ref;!k||g&&g.equals(k)||h.kbb&&h.DJb(h.kbb);g=c?f:void 0;h=this.I.DC;k=this.I.store.Y9c;(k?.source==="highlight"||k?.source==="thread")&&(k=k.store?$Z(k.store):void 0)&&k!==e&&(d==="highlight"&&k===g||Bgw(h,k));this.I.store.Y9c=c?{store:a,source:d,ref:b}:void 0;if(c)if(qhw(b)){if(b.page?.type==="fixed"){var l;mhw(b)||khw(b)?l={page:b.page,sheet:b.sheet,type:"sheet-cell",tb:b.tb,box:b.pPa(1)}:ihw(b)?l={page:b.page,
element:b.element,type:"element"}:hhw(b)&&(l={page:b.page,type:"page"});l&&this.I.vib.B1a(l)}}else YZ(b)?this.I.vib.B1a({type:"sheet-item-cell",sheet:b.sheet,tb:b.tb}):!b&&f&&this.I.DC.jUb.has(f)&&Agw(this.I.DC,f)}constructor(a){this.I=a;Btw.G(this)}};var Ctw=class{static G(a){O(a,{crb:b_({equals:d_.shallow}),RGm:b_({equals:d_.shallow})})}get crb(){return Array.from(this.I.Fu.EEc.entries()).filter(([a,b])=>b.mg.comment.type==="comment"&&!b.mg.comment.kj&&(XZ(b.ref)||this.I.DC.jUb.has(a))).map(([a])=>a)}get RGm(){const a=this.I.Fu.gVd;return[...this.I.Fu.tmc.values(),...a.values()].filter(({ref:b})=>XZ(b)&&b.ZS.collapsed)}fBk(){Amw(this);Bmw(this);Cmw(this);Gmw(this)}constructor(a){this.I=a;Ctw.G(this)}},Emw=a=>!!a&&(qhw(a)||ZZ(a)||YZ(a));var Dtw=class{constructor(a){this.ub=a;this.cSi=b=>{this.ub?.MU({oU:__c.Fv({source:"comment",contentId:b})})}}};var Etw=class{$Oe(){const a=this.tMi;a&&(this.document.addEventListener("visibilitychange",()=>{this.document.visibilityState==="visible"&&(this.Mci=!0)}),UZ(()=>{const b=this.G2j.get();return!(b===5||b===6)&&this.Hga.get().open>0},b=>{b?this.yRb(a):a.nFb()},{fireImmediately:!0}),UZ(()=>this.brg.get(),()=>this.Mci=!0))}yRb(a){a.yRb(async()=>{const b=this.document.visibilityState!=="visible";if(this.Mci||!(this.brg.get()<=1||b)){this.Mci=!1;try{await this.l2e?.()}catch(c){c instanceof __c.rh||c instanceof
__c.sh?a.nFb():a.YEg!==void 0&&c instanceof __c.Ap&&(a.Qbh=a.RQi,a.YEg=void 0)}}})}constructor({G2j:a,brg:b,Hga:c,y9k:d,document:e,ka:f,Of:g,OD:h,tMi:k,vNk:l,l2e:n,ECe:p,iDf:q}){this.t7n=this.Mci=!1;this.G2j=a;this.brg=b;this.Hga=c;this.y9k=d;this.document=e;this.ka=f;this.Of=g;this.OD=h;this.tMi=k;this.vNk=l;this.l2e=n;this.ECe=p;this.iDf=q}};var Ftw=class{yRb(a){const b=async()=>{try{await a()}finally{this.uMi&&(this.uMi=window.setTimeout(()=>b(),this.Qbh))}};this.uMi=window.setTimeout(()=>b(),this.initialDelay)}nFb(){window.clearTimeout(this.uMi);this.uMi=void 0}constructor({initialDelay:a,RQi:b,XEg:c}){this.bTq=12E4;this.RQi=this.Qbh=b;this.XEg=c;this.initialDelay=a}};var Gtw=a=>{const b=a.ea,c=a.Yoa,d=a.Fu,e=a.t8,f=a.bKd;var g=a.OD;const h=a.ma;var k=a.WGc;const l=a.ECe,n=a.Ydr;a=(k.Z7p||0)*1E3;var p=(k.Y7p||0)*1E3;k=a>0&&p>0;a=a>0?new Ftw({initialDelay:a,RQi:a,XEg:p}):void 0;const q=b_(()=>[...d.EEc.values()].filter(kkw),{equals:d_.shallow});p=b_(()=>{const y=q.get().length;return{open:y,kj:d.EEc.size-y}},{equals:d_.structural});const r=b.id,t=b.extension,v=b.clients;g=new Etw({G2j:b_(()=>b.xP),brg:b_(()=>v?.size??0),Hga:p,y9k:q,document:window.document,ka:r,
Of:t,OD:g,tMi:a,ECe:l,vNk:e.Kuc,l2e:f.l2e,iDf:e.iDf});const w=l_(async()=>{try{l()||n?(await e.Kuc(),e.RHr()):c.Tf=3}catch(y){h.Ib({Db:M("fq9A5Q"),Jq:{buttonText:M("Tb2Muw"),onClick:()=>w()}})}}),x=async()=>{try{f.Tf.get()!=="loaded"&&await f.y$d()}catch(y){f.qEi()}};w();tjw(()=>d.EEc.size>0,()=>{x()});Imw(g);a&&(g.$Oe(),k&&Kmw(g))};var Htw=class{startSession(a){if(!this.s8a){var b=this.V.wb("comment_editing_full_session",{Hb:{name:"ui.collaborating.commenting.comment_editing_session"},timeout:12E5}),c=this.BSj(["keydown","keypress","keyup"]);c.start();this.s8a={span:b,lbk:c,$Hl:a,SXc:0}}}bzf(a,b){if(this.s8a){var c=this.s8a.span.end();if(this.s8a.SXc!==0){c=c.Oi();var d=this.s8a.lbk.a0b();this.P.track(dpw,{Vk:b,BIl:this.s8a.$Hl,Cak:a,SXc:this.s8a.SXc,zEg:d,Tb:c});a=d.get("keydown");a?.G9h&&this.V.wb("comment_editing_session_summary",
{Hb:{name:"ui.collaborating.commenting.type_comment"},startTime:0}).end("ok",a.H_g||0)}this.s8a=void 0}}constructor(a,b,c=d=>new __c.vJh(d)){this.V=a;this.P=b;this.BSj=c;this.fqa=()=>{this.s8a&&this.s8a.SXc++}}};var Lmw=class{cve(){throw Error("Not implemented");}Imc(a){return this.L.Imc(this.store,a)}Tec(){throw Error("Not implemented");}Nda(){this.L.Nda(this.store)}GX(){this.L.GX(this.store)}sQf(){throw Error("Not implemented");}$5g(){throw Error("Not implemented");}IKd(a){this.L.IKd(this.store,a)}onCopy(){this.L.onCopy(this.store)}nJe(){throw Error("Not implemented");}oG(){this.L.oG(this.store)}hE(){this.L.hE(this.store)}constructor(a,b){this.store=a;this.L=b}},Itw=class{static G(a){O(a,{Imc:l_.bound,
oG:l_.bound,hE:l_.bound,Nda:l_.bound,GX:l_.bound,IKd:l_.bound,kRi:l_.bound,i1f:l_.bound,NMd:l_.bound,hC:l_.bound})}async Imc(a,b){a.link={type:"url",href:b};if(a.quill&&a.Rqf){const c=a.Rqf;this.Ofq(a,b,c);a.H_b=a.quill.getText(c.index,c.length)}}oG(a){a.R8d=!0;a.dtd.wSh()}hE(a){a.R8d=!1}Nda(a){a.dtd.wSh();if(a.Rqf){const b=this.KWq(a);b?(a.link={type:"url",href:b.href},a.H_b=b.text):(a.link=void 0,a.H_b=void 0)}a.quill?.disable();a.R8d=!0}GX(a){a.R8d=!1;a.quill?.enable();a.quill?.focus();a.link=
void 0;a.H_b=void 0}IKd(a,b){a.H_b=b;this.cnt(a,b,a.Rqf)&&a.dtd.wSh()}onCopy(a){a.link?.type==="url"&&navigator.clipboard?.writeText?.(a.link.href)}kRi(a){a.link=void 0;a.H_b=void 0}i1f(a,b){a.quill=b}NMd(a,b){a.dtd.Mmo(b)}hC(a){a.link=void 0;a.dtd.itm();a.H_b=void 0;a.R8d=!1;a.quill=void 0}constructor(){this.Ofq=(Itw.G(this),(a,b,c)=>{a.quill&&c&&a.quill.formatText(c.index,c.length,{link:b})});this.KWq=a=>{const b=a.Rqf;if(a.quill&&b){var c=a.quill.getFormat(b)?.link;if(c)return{text:a.quill.getText(b.index,
b.length),href:c}}};this.cnt=(a,b,c)=>{if((a=a.quill)&&c){var d=c.index,e=c.length;if(c=a.getFormat(c)?.link)return c=(new bo).retain(d).delete(e).insert(b,{link:c}),a.updateContents(c,"user"),b={index:d,length:b.length},a.setSelection(b.index,b.length,"user"),b}};this.vwr=(a,b)=>{const c=a.quill;a=a.dtd.lnc;return c&&a?!!c.getFormat(b)?.link:!1};this.GWq=(a,b)=>{const c=a.quill?.getContents();if(c&&c.ops&&c.ops.length!==0){a=-1;var d=0,e=0;for(var f of c.ops){const h=f.insert?typeof f.insert==="string"?
f.insert.length:1:0,k=f.attributes||{};if(k.link&&e<=b&&b<e+h){var g=k.link;break}e+=h}if(g){e=0;for(const h of c.ops){b=h.insert?typeof h.insert==="string"?h.insert.length:1:0;f=(h.attributes||{}).link;if(f===g)a===-1&&(a=e),d+=b;else if(a!==-1&&f!==g)break;e+=b}if(a!==-1&&d!==0)return{index:a,length:d}}}};this.Bbr=(a,b)=>{if(b)if(b.length>0)this.oG(a);else if(b=this.GWq(a,b.index))return this.oG(a),b}}};var Mmw=(a,b,c)=>{const d=a_(k=>VZ(__c.dOr,{...k,value:a.njc,error:a.ODd!=="none",WSe:a.WSe,onChange:b.G1k,onSubmit:b.H1k})),e=a_(k=>{const l=k.oa,n=k.Tub,p=g_(()=>{b.onSubmit();l?.()},[l]),q=g_(()=>{b.onRemove();l?.()},[l]);return VZ(n?__c.iOr:__c.hOr,{...k,Tqb:a.Tqb,CCd:!0,link:a.link,sdc:a.sdc,loading:a.Ltc,O$:p,onCopy:()=>c.onCopy(),Tec:b.Tec,onRemove:q})}),f=a_(()=>VZ(__c.fOr,{onClick:()=>c.onCopy(),disabled:a.link.type==="page"||!a.Tqb})),g=a_(()=>VZ(__c.gOr,{onClick:b.onRemove,disabled:!a.Tqb})),
h=a_(k=>VZ(__c.eOr,{...k,disabled:a.Ltc,MFa:a.MFa,value:a.ju,error:a.R0i,sdc:a.sdc,ifa:a.ifa,$vd:a.$vd,Hx:a.Hx,onSubmit:b.onSubmit,onChange:b.n1b,$i:b.Kjb,onFocus:b.EIi,sEf:b.sEf,o6e:b.o6e}));return{Mcg:d,Buttons:e,ZEh:f,hIh:g,rq:h}};var Ktw=a_(a=>{const b=a.Oof,c=a.uba,d=a.X4b;return Vmw&&b.Ksj?VZ(b.Ksj,{WCc:()=>VZ(Jtw,{...a}),uba:c,X4b:d}):VZ(Jtw,{...a})}),Jtw=a_(a=>{const b=a.Oof,c=a.comment,d=a.source,e=a.bta,f=a.Sra,g=a.ZB,h=a.JNc,k=a.H3k,l=a.uSs,n=a.o9g;return o_($q,{spacing:"0.5u",Fa:"center",children:[b.hnj&&VZ(Yq,{children:VZ(WZ,{OEa:!1,children:VZ(b.hnj,{gi:c?.gi,Vk:c?.id,source:d,active:e.V8d,H3k:k})})}),b.Pjj&&VZ(Yq,{children:VZ(WZ,{OEa:!1,children:VZ(b.Pjj,{w0a:l,o9g:n?()=>n(l):void 0,source:d})})}),!h&&b.xrj&&VZ(Yq,
{children:VZ(WZ,{OEa:!1,children:VZ(b.xrj,{store:f,source:d,jjs:g})})}),b.Exa&&VZ(Yq,{children:VZ(WZ,{OEa:!1,children:VZ(b.Exa,{onClick:()=>{},yv:()=>{},store:f})})}),Vmw&&b.Vpj&&VZ(Yq,{children:VZ(WZ,{OEa:!1,children:VZ(b.Vpj,{X4b:a.X4b})})})]})});var Xmw=Pb("cb4d8ffb",!1),Ltw=Pb("217e1a5b",!1);var Wmw=class{static G(a){O(a,{uba:q_.ref,Kte:q_.ref,tdf:q_.ref,u6d:b_,r2f:b_})}get u6d(){return!!this.uba?.rha?.length}get r2f(){return this.W9j?(this.u6d||this.tdf==="open")&&this.tdf!=="close":this.tdf==="open"}constructor(a,b){this.W9j=(Wmw.G(this),void 0);this.Kte="default";this.tdf=void 0;this.uba=a;this.W9j=b}};var Mtw=p_(a=>{const b=a.nbm;return VZ(ir,{variant:"primary",icon:a.comment?sr:__c.tC,size:"xsmall",disabled:a.Ypn,onClick:a.YP,ariaLabel:b,ib:b})}),Otw=a_(a=>{const b=a.d5o,c=a.type,d=a.source,e=a.comment,f=a.gPe;var g=a.goc,h=a.hoc,k=a.uba,l=a.Sra;const n=a.SGc,p=a.ye,q=a.ZB,r=a.JNc,t=a.oqh,v=a.h8p,w=a.onSubmit,x=a.kia,y=a.Oof;var z=a.uj;const B=a.o9g;var C=a.WD,G=a.yAn;const H=i_(null);a=i_(null);const K=i_(null),L=i_(null),N=i_(null),[P,T]=h_(!1),[V,W]=h_({width:0,height:0}),[aa,ba]=h_(0),da=
Rmw(e,k,z),la=Tmw(e,k);h=Umw(e,k,h);const ja=Zmw(e,k,da,la,h,g);g=Ymw(ja);const oa=anw(e,l),ma=cnw(ja,z),na=b_(()=>ja.l$m||oa.R$m).get(),qa=b_(()=>ja.MOc&&!oa.u5a).get(),ua=b_(()=>ja.xpf>2048).get(),za=b_(()=>p||qa||!na||ua||oa.Y8).get();l=b_(()=>c==="comment"&&!e&&ja.Wvk).get();z=b_(()=>!q&&da.V8d).get();k=b_(()=>!q&&la.ZOc).get();h=g_(()=>{da.bRe||Xgw(f,ja,"@")},[da,f,ja]);const va=g_(cb=>{f.HYi(ja,cb)},[f,ja]),xa=g_(cb=>{f.R0f(ja,cb)},[f,ja]),Ba=g_(cb=>{Xgw(f,ja,cb.mwd)},[f,ja]),pa=g_(cb=>{f.TRg(ja,
cb)},[f,ja]),ia=g_(()=>{if(za)throw Error("handleSubmit called with submission disabled");const cb=ja.content,ab=ja.qu,Ta=ja.wA,mb=ja.jii,pb=oa.attachments,xb=ma.UN,nb=f.Mmb&&f.Mmb.Vom?__c.HTf(f.Mmb,ja.yeh,4):[];f.hC(ja);n.hC(oa);ba(1-aa);w({content:cb,qu:ab,wA:Ta,attachments:pb,grant:mb>1?{xg:nb,Xf:mb}:void 0,UN:xb})},[za,ja,f,w,oa,n,ma,aa]);j_(()=>{const cb=c==="comment"||e,ab=c==="reply"&&!ja.MOc;(Xmw&&ab||cb)&&setTimeout(()=>{ja.quill?.focus();ja.quill?.setSelection(ja.quill.getLength(),0,void 0)})},
[]);j_(()=>{const cb=H.current;if(cb){var ab=new Knw["default"](()=>W({height:cb.clientHeight,width:cb.clientWidth}));ab.observe(cb);W({height:cb.clientHeight,width:cb.clientWidth});return()=>ab.unobserve(cb)}},[]);const wa=cb=>{N.current?.disconnect();cb&&(N.current=new Knw["default"](()=>L.current?.update()),N.current.observe(cb))},Ca=oa.zdb,Ha=ja.$Cm,Oa=b_(()=>{const cb=y?.rag??M("sCcq7A");if(!e)return c==="comment"?cb:M("VE1dcw")}).get(),Ka=k_(()=>c==="comment"?M("MN4+3w"):M("PGLyHw"),[c]),Ua=
k_(()=>e?c==="comment"?M("6hbT9Q"):M("qDuAvQ"):c==="comment"?M("bRA1pg"):M("YhRlUw"),[e,c]);C=Pmw(q,G,C,H,a);G=Omw(y,c,q,ja.MOc,C);return c==="reply"&&!e&&y.Opj?VZ(y.Opj,{ZB:q,oqh:t}):VZ(__c.nB,{nG:()=>T(!1),children:o_(c_,{children:[o_(R,{padding:!q&&t?"1.5u":"2u",borderRadius:q?void 0:"container",borderTop:q?"low":void 0,border:!q&&t?"low":void 0,ref:H,className:r_("eb2Aqg",{K_H60Q:!!e,Av9mdA:!q&&t&&P}),children:[VZ("div",{ref:K,className:"_81m0BQ",style:dnw(Ha)}),o_(Tc,{spacing:"2u",children:[VZ($q,
{Fa:"start",spacing:"1u",children:VZ(Yq,{children:o_("div",{className:"Drbgiw",children:[VZ("div",{className:"_4tmJlA",ref:a,children:VZ(b,{uba:ja,placeholder:Oa,ariaLabel:Ka,minHeight:G,maxHeight:C,onSubmit:za?void 0:ia,onFocus:()=>T(!0)},aa)}),y.zjj&&VZ(y.zjj,{ZB:v,store:oa}),y.Eeg&&Ca&&VZ(y.Eeg,{M1a:Ca,store:oa,source:d,align:"start"})]})})}),ja.xpf>1823&&VZ(__c.ov,{count:ja.xpf,max:2048,margins:"none",textSize:"small"}),VZ(Ntw,{O_g:f.O_g,cYs:l,Oof:y,Lhm:ma,uba:ja,R0f:xa}),o_($q,{Fa:"start",spacing:"0",
align:"spaceBetween",children:[VZ(Yq,{width:"content",children:VZ(Ktw,{Oof:y,comment:e,source:d,bta:da,Sra:oa,X4b:g,ZB:q,JNc:r??!1,H3k:h,uSs:Ba,o9g:B,uba:ja})}),VZ(Yq,{width:"content",children:o_($q,{Fa:"start",spacing:"0.5u",children:[x&&VZ(Yq,{children:VZ(ir,{variant:"secondary",icon:nr,size:"xsmall",onClick:x,ib:M("N89uyw"),ariaLabel:M("N89uyw")})}),VZ(Yq,{children:o_("div",{className:"Mp9b8A",children:[!q&&y.fhj&&VZ(y.fhj,{X4b:g}),y.Brj?VZ(y.Brj,{X4b:g,children:VZ(Mtw,{comment:e,Ypn:za,YP:ia,
nbm:Ua})}):VZ(Mtw,{comment:e,Ypn:za,YP:ia,nbm:Ua})]})})]})})]})]})]}),o_(Vc,{ref:L,placement:"top-start",open:z||k,reference:K.current,children:[z&&y.Vnd&&Ha&&VZ("div",{className:"C8Sp_g",ref:wa,style:{width:V.width},children:VZ(y.Vnd,{store:da,vQf:va})}),k&&y.lTb&&Ha&&VZ("div",{className:"ywNTug",ref:wa,style:{width:V.width},children:VZ(y.lTb,{onWheel:cb=>cb.stopPropagation(),w0a:pa})})]})]})})}),Ntw=a_(({O_g:a,cYs:b,Oof:c,Lhm:d,uba:e,R0f:f})=>{const g=g_(k=>{k&&e.tMf.has(m(d.r1c?.id))&&f(a)},[f,
e,d,a]),h=c.Gfj;c=c.f6l;return b&&h||e.tMf.size&&c?VZ(R,{Pc:"1.5u",Lb:"1.5u",borderRadius:"container",background:"neutralLow",className:"fxu1uw",children:o_(Tc,{spacing:"0.5u",children:[e.tMf.size>0&&c&&VZ(c,{sln:d.TGf&&!!d.r1c?.id&&e.tMf.has(d.r1c.id),$kn:e.jii,oQf:f}),b&&h&&VZ(h,{store:d,ndd:g})]})}):null});var Ptw=({ZB:a,oqh:b,jFl:c,Zc:d})=>VZ(R,{position:"relative",padding:!a&&b?"1.5u":"2u",borderRadius:a?void 0:"container",borderTop:a?"low":void 0,border:!a&&b?"low":void 0,children:o_(Tc,{spacing:"1.5u",children:[VZ(Q,{alignment:"center",children:J("JXE5lg",[d.getName(1)])}),VZ(Wi,{variant:"secondary",icon:__c.Ax,onClick:c,ariaLabel:M("yHVJyQ"),children:M("yHVJyQ")})]})});var Qtw=({Lwg:a,Nea:b,ve:c,Zc:d})=>{if(a){var e=()=>c.vC(__c.Il.pcg,"comment_edit_view",{trigger:"intentional"}),f=a_(g=>VZ(Ptw,{ZB:g.ZB,oqh:g.oqh,jFl:e,Zc:d}));f_(()=>b.Opj=f)}};var Stw=p_(a=>{const b=a.items,c=a.cTb;a=a.ZB;return b.length>0?VZ(Rtw,{items:b,cTb:c,ZB:a}):null}),Ttw=p_(a=>{const b=a.Kte,c=a.WCc,d=a.Wpj,e=a.uba;a=a.ZB;if(!c||!d)throw Error("ToggleTray must have both DefaultView and RichtextView");const f=i_(null),g=i_(null);return o_(R,{className:r_("UT6XlQ",{WNrjRQ:!a,KI26UQ:a}),children:[VZ(Wnw,{nodeRef:f,in:b==="default",timeout:100,classNames:{enter:"_0hGDtQ",exit:"tA88vw"},unmountOnExit:!0,children:VZ("div",{ref:f,className:"_8L_ow",children:VZ(c,{})})}),
VZ(Wnw,{nodeRef:g,in:b==="richtext",timeout:100,classNames:{enter:"_0hGDtQ",exit:"tA88vw"},unmountOnExit:!0,children:VZ("div",{ref:g,className:"_8L_ow",children:VZ(d,{uba:e})})})]})}),Rtw=p_(({items:a,cTb:b,ZB:c})=>o_($q,{Fa:"start",spacing:"0.5u",children:[(c||!Ltw)&&VZ(Yq,{children:VZ(b,{})}),a.map(d=>VZ(Yq,{children:VZ(Utw,{item:d})},d.key))]})),Utw=p_(({item:a})=>VZ(a.config.Button,{yi:Vtw})),Vtw=p_(a=>{const b=a.ib;return VZ(Qkw,{icon:a.icon,active:a.active,onClick:a.onClick,ib:b,ariaLabel:b,
disabled:!1})}),Wtw=p_(({active:a,onClick:b,ib:c})=>VZ(Qkw,{icon:__c.YSh,active:a,onClick:b,ib:c,ariaLabel:c,tk:!0,disabled:!1}));var Xtw=p_(({X4b:a,q8i:b})=>{const c=g_(()=>a&&b.RZi(a,"close"),[a,b]);return a?VZ(ir,{variant:"secondary",icon:__c.or,size:"xsmall",onClick:c,ib:M("oLIK/A"),ariaLabel:M("oLIK/A")}):null}),Ztw=({q8i:a,la:b,btd:c,EOj:d})=>{const e=a_(({X4b:k})=>{const l=b.layout===2,n=i_(null);return l?VZ(Xtw,{X4b:k,q8i:a}):VZ(Wnw,{nodeRef:n,in:k?.r2f,timeout:150,classNames:{enter:"_TIlWg",exit:"GpgVMQ"},unmountOnExit:!1,children:VZ("div",{ref:n,className:`${"PRyIyw"} ${k?.r2f?"hWjjbg":"_19KLQw"}`,children:VZ(Xtw,
{X4b:k,q8i:a})})})}),f=a_(({X4b:k,children:l})=>{const n=b.layout===2,p=i_(null);return VZ(Wnw,{nodeRef:p,in:n||!Ltw||!k?.r2f,timeout:150,classNames:{enter:"_23rqkA",exit:"vgbKUg"},unmountOnExit:!1,children:VZ("div",{ref:p,className:`${"PRyIyw"} ${!n&&Ltw&&k?.r2f?"_19KLQw":"hWjjbg"}`,children:l})})}),g=a_(({WCc:k,uba:l,X4b:n})=>{j_(()=>{if(n){var t=a.F_r(n);return()=>{t()}}},[n,l]);const p=k_(()=>Ytw(l,c,d),[l]);if(!n)return null;const q=b.layout===2,r=()=>VZ(e,{X4b:n});return VZ(Ttw,{Kte:n.Kte,WCc:k,
Wpj:()=>VZ(Stw,{items:p,cTb:r,ZB:q}),uba:l,ZB:q})}),h=a_(({X4b:k})=>k?VZ(Wtw,{active:k.Kte==="richtext",onClick:()=>a.RZi(k,"open"),ib:M("0RmMYw"),icon:__c.YSh}):null);return{B4o:e,YCp:f,REp:g,zzp:h}},$tw=a=>{const b=a.UJb,c=a.btd,d=a.xil,e=a.wil,f=a.Icon,g=a.EPl;return{Button:a_(({yi:h})=>{var k;if(k=!!b.quill?.getSelection())c.Pik.reportObserved(),k=b.quill?.getFormat(),k=(k==null?void 0:k[d])===e;const l=g_(()=>{c.K_q(b,d,e)},[]);return VZ(h,{icon:f,ib:g,active:k,onClick:l})})}},Ytw=(a,b,c)=>{const d=
[{key:"Bold",config:$tw({UJb:a,btd:b,xil:"font-weight",wil:"bold",Icon:__c.Anf,EPl:M("C0f62g")})},{key:"Italics",config:$tw({UJb:a,btd:b,xil:"font-style",wil:"italic",Icon:__c.Dnf,EPl:M("Ubl5LQ")})},{key:"Strikethrough",config:$tw({UJb:a,btd:b,xil:"text-decoration",wil:"line-through",Icon:__c.IUh,EPl:M("AyETpw")})}];sow&&d.push({key:"Hyperlink",config:{Button:a_(({yi:e})=>{const f=c.vwr(a.Ww,a.rha),g=g_(()=>{b.HFi(a)},[]);return VZ(e,{icon:__c.to,ib:M("RorO7A"),active:f,onClick:g})})}});return d.filter(e=>
!!e.config)};var auw=class{static G(a){O(a,{wlo:l_,RZi:l_})}constructor(){this.wlo=(auw.G(this),(a,b)=>{a.Kte=b});this.RZi=(a,b)=>{a.tdf=b};this.F_r=a=>{const b=UZ(()=>a.r2f,(d,e)=>{d!==void 0&&d!==e&&this.$mt(a,d)},{fireImmediately:!1}),c=UZ(()=>a.u6d,()=>{this.BQr(a)},{fireImmediately:!1});return()=>{b();c()}};this.$mt=(a,b)=>{b=b?"richtext":"default";b!==a.Kte&&this.wlo(a,b)};this.BQr=a=>{a.W9j&&(a.u6d||a.tdf!=="close"||this.RZi(a,void 0))}}};var buw=({btd:a,EOj:b,Nea:c,la:d})=>{const e=new auw,{B4o:f,YCp:g,REp:h,zzp:k}=Ztw({q8i:e,la:d,btd:a,EOj:b});f_(()=>{c.fhj=Vmw&&Ltw?f:void 0;c.Vpj=k;c.Ksj=h;c.Brj=Vmw?g:void 0})};var cuw=({Nea:a,P:b})=>{f_(()=>{a.hnj=({H3k:c,active:d,gi:e,Vk:f,source:g})=>VZ(Qkw,{icon:__c.sUf,active:d,onClick:()=>{c();b.track(ipw,{type:"mention",action:"expand",Vk:e,Wba:e===f?void 0:f,uq:g!=="other"?g:void 0})},ib:M("pdU88g"),ariaLabel:M("pdU88g"),disabled:!1})})};var duw=enw(4,M("girWKA")),euw=enw(5,M("yL97Gg")),fuw=({Xf:a,Nea:b})=>{f_(()=>{b.f6l=c=>{const d=k_(()=>{var e=c.sln;e=[enw(1,M("6iJBTA"),e?M("5nb/mw"):void 0,e)];a>=4&&e.push(duw);a>=5&&e.push(euw);return e},[c.sln]);return o_(c_,{children:[VZ(Q,{size:"small",weight:"bold",children:M("YgKTYQ")}),VZ(WZ,{OEa:!1,children:VZ(__c.mz,{onChange:c.oQf,options:d,value:c.$kn,stretch:!0})}),c.$kn>1&&VZ(Q,{size:"small",tone:"tertiary",children:M("3coi/g")})]})}})};var guw=({Xf:a,$Ed:b,Nea:c,P:d,fK:e})=>{if(!(a<4)){fuw({Xf:a,Nea:c});cuw({Nea:c,P:d});var f=new __c.Bk;f.B_(null,"0px");var g=h=>{const k=h.store,l=g_(()=>b.qTe(k),[k]),n=g_(()=>{k.wsb.xg.length>0?l():b.Pcf(k)},[k,l]);return VZ(R,{children:VZ(__c.tCh,{...h,Uo:f,qTe:l,hde:n,fK:e})})};f_(()=>{c.Vnd=g})}};var huw=({QSa:a,goc:b,hoc:c,la:d,qa:e,P:f,V:g,Nea:h,uj:k,BTk:l,SGc:n,o6c:p,Mmb:q,Xf:r,fK:t,Lwg:v,ve:w,Zc:x,Zo:y,Fv:z,S5a:B,e9:C})=>{l=new Oow(l.pie);const G=new Now(p);p=new Itw;const H=new yow(l,G,p,q,g,r);sow&&Nmw({U5a:p,Zo:y,Fv:z,Nea:h});const K=new Htw(g,f),L=N=>{const P=g_(()=>{N.onFocus?.();K.startSession(N.uba.xpf)},[N]),T=g_(()=>{K.bzf(N.uba.xpf,N.uba.Vk)},[N]);return VZ(srw,{...N,gPe:H,B8h:sow,onFocus:P,onBlur:T,fqa:K.fqa,e9:C,hk:B})};a=ahw(a,a_(N=>VZ(Otw,{...N,gPe:H,SGc:n,goc:b,hoc:c,ZB:d.layout===
2,ye:e.status===2,d5o:L,Oof:h,uj:k})));Vmw&&buw({btd:H,EOj:p,Nea:h,la:d});guw({Xf:r,$Ed:l,Nea:h,P:f,fK:t});Qtw({Lwg:v,Nea:h,ve:w,Zc:x});return{EJa:a,btd:H}};var iuw='<svg width="12" height="12" viewBox="0 0 12 12" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M9.561 2.439a1.499 1.499 0 0 0-2.12 0L3.495 6.387c-.336.336-.598.739-.769 1.183l-.694 1.806a.46.46 0 0 0 .593.593l1.806-.694c.444-.171.847-.433 1.183-.77l3.948-3.947a1.499 1.499 0 0 0 0-2.12Z" fill="currentColor"/></svg>';var juw=__c.Uq({dY:iuw});var kuw=({M1a:a})=>VZ(__c.Ru,{src:a.thumbnailUrl,className:"SVJLZg",alt:a.title}),luw=({M1a:a,size:b="medium"})=>VZ("div",{className:r_("_9KY7QQ",{a4KEbw:b==="small"}),children:VZ(kuw,{M1a:a,size:b})});var nuw=a_(a=>{const b=a.comment,c=a.DDa,d=a.Vma,e=a.RPa,f=a.ui,g=a.Jtc,h=a.ZNg,k=a.RichText;var l=a.fK,n=a.KWh;const p=a.source,q=a.x9g,r=a.y9g,t=a.onClick,v=a.Rk,w=a.WCb,x=a.wSc,y=a.qna,z=a.atb,B=a.xv;a=a.Snc;const C=n.R7l,G=n.Q7l,H=n.cIh,K=n.o4l,L=n.aHh;n=n.REh;const N=znw(),{QPa:P,Nhc:T}=gqw(),{iw:V,cDf:W,dDf:aa}=fqw(),ba=new __c.dd([new __c.qr({Jfa:750,yt:da=>{Cgw(da,la=>Xnw(la)&&da.target.getAttribute("data-comment-card-action")!=="true")||T(!0)}})]);l=VZ(l,{user:b.author,size:"small"});return o_("div",
{className:r_("ZPEU9w",{x9Mc_A:b.cuc,_3yssig:d}),onMouseEnter:W,onMouseLeave:aa,onClick:()=>t?.(),ref:f?ba.Gq:void 0,children:[VZ(R,{padding:"2u",className:"ZYwHAQ",children:o_($q,{Fa:"start",spacing:"1u",children:[VZ(Yq,{width:"content",children:VZ(R,{paddingTop:"0.5u",children:e?VZ(R,{className:"tV_BCA",children:VZ(__c.Pu,{tone:"critical",children:l})}):l})}),VZ(Yq,{children:o_(Tc,{spacing:"1u",children:[o_(Tc,{spacing:"0.5u",children:[o_(br,{spacing:"0",Fa:"center",children:[VZ(R,{du:"1u",children:VZ(Q,
{weight:"bold",tone:b.kj?"tertiary":void 0,lineClamp:1,lx:!0,children:BA(b.author)})}),VZ(__c.QF,{time:new Date(b.updated),children:da=>VZ(Q,{tone:"tertiary",lineClamp:1,size:"small",lx:!0,children:da})})]}),VZ(muw,{comment:b,contentId:N,source:p,RichText:k,REh:n,aHh:L,ui:f})]}),C&&!b.id.startsWith("placeholder_comment")&&VZ(C,{className:"kdoUCg",Vk:b.id,gi:b.gi,Bob:b.type,HOj:!!b.kj,x9g:q,y9g:r,source:p}),b.gW==="error"&&VZ(Ck,{tone:"critical",size:"small",title:M("FjWldw"),Icon:__c.Xt,Tg:!0,children:v&&
VZ(__c.Lt,{onClick:()=>v(b),children:M("WO4dSg")})}),h&&VZ(Yq,{width:"content",children:VZ(Nu,{tone:"infoLow",icon:VZ(juw,{size:"tiny"}),text:M("7ErMmg")})})]})})]})}),VZ(eqw,{iw:V,QPa:P,ui:f,Jtc:g,contentId:N,comment:b,DDa:c,WCb:w,wSc:x,qna:y,atb:z,xv:B,Snc:a,Nhc:T,mjl:f||b.kj||Tow(b)||!G?void 0:VZ(G,{Vk:b.id,gi:b.gi,Bob:b.type,Gwg:!0,Qc:"small",source:p}),feh:H&&r&&!b.kj&&!Tow(b)?da=>VZ(H,{Vk:b.id,gi:b.gi,Bob:b.type,source:p,Wec:r,onClick:da.onClick}):void 0}),K&&VZ(K,{ui:f??!1})]})}),muw=a_(({comment:a,
contentId:b,source:c,RichText:d,REh:e,aHh:f,ui:g})=>{const h=a.type==="comment",k=a.type==="ai";var l=h?a.wA:[];const n=k_(()=>{if(!h)return null;const r=a.attachments.find(Ahw);return r?{id:r.id,thumbnailUrl:r.thumbnailUrl,title:r.title}:null},[a,h]),p=k_(()=>{if(!h&&!k)return[];const r=a.attachments.filter(Bhw);return yhw(r)},[a,h,k]),q=!e_(a)&&Egw(a.qu);d=o_(R,{className:r_("tlPceQ",{I2hMVg:q}),tagName:"span",children:[e_(a)&&VZ(__c.sZr,{content:a.content}),(h||k)&&a.qu&&VZ(d,{node:a.qu,Vk:a.id,
gi:a.gi,source:c,wA:l,tone:a.kj?"tertiary":void 0})]});l=h&&a.created!==a.updated&&VZ(Q,{size:"small",tone:"tertiary",children:VZ("span",{className:"vbTROw",children:M("kdJ+sQ")})});return o_(c_,{children:[VZ(R,{tagName:"div",id:b,children:c!=="comment_panel"&&e?VZ(e,{comment:a,focused:!1,V7p:d,EAq:l}):o_(c_,{children:[d,l]})}),n&&VZ(R,{paddingTop:"1.5u",paddingBottom:"1u",tp:"0.5u",children:VZ(luw,{M1a:n})}),p.length>0&&f&&VZ(R,{paddingTop:"1u",children:VZ(f,{media:p,ZB:!!g,Itr:k})})]})});var ouw=({media:a})=>{if(!a.length)return null;const b=a.slice(0,4);return VZ("ul",{className:"__9a2w",children:b.map((c,d)=>VZ("li",{className:"str3Ww",style:{zIndex:b.length-d},children:VZ(__c.Yu,{className:"jS3YpQ",aspectRatio:1,src:c.thumbnailUrl,alt:c.title,height:"4u",width:"4u",borderRadius:"element",border:"none"})},c.id))})};var puw=p_(({M1a:a,XUe:b})=>a||b.length?VZ(R,{paddingTop:"1.5u",paddingBottom:"1u",tp:"0.5u",children:o_(br,{spacing:"0.5u",Fa:"center",children:[a&&VZ(luw,{M1a:a,size:"small"}),b.length>0&&VZ(ouw,{media:b})]})}):null),quw=a_(a=>{const {comment:b,DDa:c,uGs:d=[],Lta:e,Vma:f,ui:g,Jtc:h,tke:k,Bke:l,hasError:n,ZNg:p,iWr:q,source:r,KWh:{Ifj:t},RichText:v,fK:w,onClick:x,WCb:y,wSc:z,qna:B,atb:C,xv:G,Snc:H}=a;a=znw();const {QPa:K,Nhc:L}=gqw(),{iw:N,cDf:P,dDf:T}=fqw(),V=g?new __c.dd([new __c.qr({Jfa:750,yt:()=>
L(!0)})]):void 0;var W=d.length>3?2:3;const aa=d.slice(0,W);W=d.length>0?d.length-W:0;const ba=q==="all",da=b.type==="comment",la=b.type==="ai",ja=e_(b),oa=da?b.UN:void 0,ma=da||la?b.qu:void 0,na=da?b.wA:[],qa=k_(()=>{if(da){var pa=b.attachments.find(Ahw);if(pa)return{id:pa.id,thumbnailUrl:pa.thumbnailUrl,title:pa.title}}},[b,da]),ua=k_(()=>{if(!da&&!la)return[];const pa=b.attachments.filter(Bhw);return yhw(pa)},[b,da,la]),za=VZ(w,{user:b.author,size:"xsmall"});let va;b.kj==="accepted"?va={tone:"positiveLow",
text:M("FCVLZA")}:b.kj==="rejected"?va={tone:"criticalLow",text:M("xwCqcw")}:b.kj&&l&&(va={tone:"contrast",text:M("ktKjdQ")});const xa=e>0,Ba=Egw(ma);return o_(R,{className:r_("_2T0rA",{JFi2UA:xa,_7Q16xA:!g}),children:[xa&&VZ("div",{className:"nFiwgA",children:VZ("div",{className:r_("wvytPw",{Ak3x1A:f})})}),o_("div",{className:r_("XxFyRQ","RZq7cw",{Ak3x1A:f}),onMouseEnter:P,onMouseLeave:T,children:[VZ(__c.hr,{className:"NCR2JQ",Wi:V?.Gq,onClick:x,children:VZ(R,{padding:"2u",children:o_($q,{spacing:"1u",
Fa:"start",children:[VZ(Yq,{width:"content",children:ba?VZ(R,{className:"jxApRQ",children:VZ(__c.Pu,{tone:"critical",children:za})}):za}),VZ(Yq,{children:o_(Tc,{spacing:"0.5u",children:[o_(br,{spacing:"0",Fa:"center",children:[VZ(R,{du:"1u",children:VZ(Q,{weight:"bold",tone:b.kj?"tertiary":void 0,lineClamp:1,lx:!0,children:BA(b.author)})}),VZ(__c.QF,{time:new Date(b.updated),children:pa=>VZ(Q,{tone:"tertiary",lineClamp:1,size:"small",lx:!0,children:pa})})]}),o_(br,{spacing:"0.5u",children:[oa&&t&&
VZ(Yq,{width:"content",children:VZ(t,{UN:oa,kur:!0})}),va&&VZ(Yq,{width:"content",children:VZ(Nu,{...va})})]}),o_(R,{id:a,className:r_("pRbS0g",{nENWyg:k,sLMn2Q:Ba}),children:[ja&&VZ(__c.sZr,{content:b.content}),ma&&VZ(v,{node:ma,Vk:b.id,gi:b.gi,source:r,wA:na,tone:b.kj?"tertiary":void 0}),VZ(puw,{M1a:qa,XUe:ua})]}),(e>0||n||p)&&o_($q,{spacing:"1u",Fa:"center",children:[e>0&&o_(c_,{children:[VZ(Yq,{width:"content",children:o_(br,{spacing:"0.5u",Fa:"center",children:[aa.length>0&&VZ(__c.dah,{Ut:aa,
Fed:W,size:"2rem"}),VZ(Q,{weight:"bold",tone:"tertiary",size:"small",children:J("qAfOqg",[e])})]})}),q==="replies"&&VZ(Yq,{width:"content",children:VZ(R,{className:"_0WoJ8A",children:VZ(__c.Pu,{tone:"critical"})})})]}),n&&VZ(Yq,{width:"content",children:VZ(Nu,{tone:"criticalLow",icon:VZ(__c.Xt,{size:"tiny"}),text:M("8GlCVw")})}),!n&&p&&VZ(Yq,{width:"content",children:VZ(Nu,{tone:"infoLow",icon:VZ(juw,{size:"tiny"}),text:M("7ErMmg")})})]})]})})]})})}),VZ(eqw,{contentId:a,comment:b,DDa:c,iw:N,QPa:K,
ui:g,Jtc:h,WCb:y,wSc:z,qna:B,atb:C,xv:G,Snc:H,Nhc:L})]})]})});var ruw=({o$a:a})=>{const b=a_(({target:d,configuration:{Vk:e,source:f,gi:g}})=>a.ebg?VZ(a.ebg,{url:d.href,Vk:e,gi:g,source:f}):d.href),c=({userId:d,na:e,configuration:{wA:f}})=>{const g=k_(()=>f.find(h=>h.id===d),[f,d]);return VZ(__c.tZr,{user:g,na:e})};return({node:d,tone:e,...f})=>VZ(__c.ZYr,{node:d,e6l:c,Link:b,configuration:f,tone:e})};var suw=({ui:a,o$a:b,$T:c})=>{const d=c??__c.FCh,e=({user:h,size:k,gic:l})=>h?VZ(d,{id:h.id,name:h.displayName,Bh:__c.Fn(h.Jc?.isDefault?[]:h.Jc?.images,k),size:k,gic:l}):VZ(__c.FCh,{size:k}),f=ruw({o$a:b});c=a_(h=>VZ(nuw,{...h,ui:a.get(),KWh:b,fK:e,RichText:f}));const g=a_(h=>VZ(quw,{...h,ui:a.get(),KWh:b,fK:e,RichText:f}));return{fK:e,eTb:c,Jlc:g}};var tuw;tuw=({currentUser:a,Bk:b})=>{let c;a&&(c={...a,Jc:new __c.Cp({status:1})},b.MYb(new __c.b2j({user:a.id})).then(d=>{c.Jc=d.Jc}));return()=>c};
__c.LTe={wnr:function(a){const b=a.Ka,c=a.Xf,d=a.$a,e=a.X,f=a.ea,g=a.Bk,h=a.OD,k=a.Gb,l=a.eT,n=a.gsa,p=a.errorService,q=a.ub,r=a.iec,t=a.zC,v=a.Na,w=a.k9,x=a.$f,y=a.fe,z=a.Y8b,B=a.VT,C=a.sc,G=a.mha,H=a.ee,K=a.vib,L=a.zw,N=a.ma,P=a.DC,T=a.Za,V=a.SX,W=a.selection,aa=a.eo,ba=a.viewport,da=a.Gj,la=a.Pwa,ja=a.Pa,oa=a.ve,ma=a.Zc,na=a.LWh,qa=a.qa,ua=a.la,za=a.S0a,va=a.pd,xa=a.e9,Ba=a.Zo,pa=a.Fv,ia=a.S5a,wa=a.hb,Ca=a.P,Ha=a.Ha,Oa=a.WGc,Ka=a.locale,Ua=a.Wn,cb=a.fj,ab=f.id,Ta=f.document,mb=f.extension,pb=b===
"responsive",xb=e?.user,nb=xb?.id,qb=e?.Ab,Ob=tuw({currentUser:xb,Bk:g}),Rb=c===8,Va=Ha.Vd("editor.editing.collaboration.commenting"),yb=new __c.jjk({P:Ca,Erd:Ua!==void 0?{Wn:Ua}:void 0,ka:ab,FU:Rb,qWb:y.xc.gk?.user,fe:y}),Jb=new (__c.pCh?__c.ECh:__c.BCh)({na:qb?.brand.id,ka:ab,Of:mb,fe:y,OD:h,Na:v,zC:t,Bk:g,Tic:qb&&qb.brand.ov&&qb.brand.ov>=2?new __c.vUf(qb.brand.id,v,za):void 0,zvf:ijw}),Nb=new __c.kUf({ka:ab,Of:mb,uj:xb?.id,Xf:c,fe:y,Gb:k}),ub=new Aow,Yb=new zow,hc=new Eow(oa,e==null),jc=new Dow({la:ua}),
Ec=new xow({Mmb:Nb}),Qc=new Lqw({document:Ta,vg:W,Za:T}),bd=new Kqw({store:Qc,vg:W,viewport:ba,Za:T,DC:P,pd:va,hb:wa,Gj:da,document:Ta}),{KHa:sc,KKf:dc,Yoa:vb,t8:fc,gfd:wc}=ztw({...a,Aqb:Ob,xUa:z.LJb.RAf,Mmb:Nb,goc:Ec,BTk:Jb,Dq:yb,uj:nb,hoc:jc}),{Fu:yc}=Qqw({...a,KHa:sc,Yoa:vb,sR:Qc,document:Ta,hF:pb?void 0:a.hF}),Fc=new Vqw({document:Ta}),cd=new Wqw({store:Fc,N:Ca}),{yVb:wd}=Uqw({o$a:ub}),ce=new bpw({t8:fc,KKf:dc,sR:Qc,Uaa:bd,QSa:hc,goc:Ec,V:Va,errorService:p,uj:nb,viewport:ba,document:Ta,Fu:yc,
yVb:wd,vg:W,Za:T,DC:P,hoc:jc}),xe=new Atw,Se=new Btw({store:xe,Fu:yc,vib:K,DC:P,viewport:ba}),ad=()=>Ta.Ka==="fixed"&&Iqw(Ta).length>0||P.jUb.size>0||yc.Yvo>0,se=b_(()=>ua.layout===2),{fK:De,eTb:sd,Jlc:Ne}=suw({ui:se,o$a:ub,$T:z.$T}),{bKd:Fe,o6c:Zd,SGc:Kd}=atw({P:Ca,ma:N,OD:h,Na:v,Bk:g,$f:x,k9:w,gsa:n,eT:l,errorService:p,VT:B,sc:C,Ha,c8p:Va,Nea:Yb,o$a:ub,$a:d,QSa:hc,ka:ab,Of:mb,qa,la:ua,X:e,locale:Ka,Aqb:Ob,fK:De}),{EJa:Nd,btd:Rd}=huw({QSa:hc,goc:Ec,la:ua,qa,P:Ca,V:Va,Nea:Yb,uj:nb,BTk:Jb,SGc:Kd,o6c:Zd,
Mmb:Nb,Xf:c,fK:De,Lwg:Oa.Lwg,ve:oa,Zc:ma,hoc:jc,e9:xa,Zo:Ba,Fv:pa,S5a:ia});row({Nea:Yb,o$a:ub,uj:nb});ppw({P:Ca,o$a:ub,iec:r,e9:xa});const Sd=nb?new ktw(nb,y.xc.gk.user,Oa.gtf,Oa.ftf,c):void 0,Ud=new Urw(ab,mb,y,N,Ca,yb),ng=new Dtw(q),Ie=new Ipw({etd:Fc,sR:Qc,la:ua,Ka:Ta.Ka,Za:T,viewport:ba});Aiw(Ie);const {TGc:Yf,n$a:Hd,o1:lf}=yqw({t8:fc,sR:Qc,Uaa:bd,Fu:yc,rY:ce,VGc:cd,yVb:wd,ddb:xe,XPb:Se,Nea:Yb,o$a:ub,DC:P,Za:T,eo:aa,bKd:Fe,gPe:Rd,Ftd:Ud,MKd:ng,QS:Ie,V:Va,Xf:c,QSa:hc,qa,ee:H,permissions:Sd,viewport:ba,
document:Ta,P:Ca,Jlc:Ne,eTb:sd,EJa:Nd,fK:De,xUa:z.LJb.RAf,ui:se,Ka:b,O6j:Oa.O6j,OBg:Oa.OBg,E6j:Oa.E6j,fj:cb,uj:nb}),gg=e?.user.Zqa?.t7a===1&&__c.Qm()||e?.user.Zqa?.t7a===3||!tb.rd,rd=new Yqw;Gpw?Srw({etd:Fc,rY:ce,Fu:yc,t8:fc,sR:Qc,Uaa:bd,o1:lf,yVb:wd,QS:Ie,Gj:da,xqg:rd,Pa:ja,viewport:ba,V:Va,DC:P,Za:T,pd:va,document:Ta,QSa:hc,permissions:Sd,Ftd:Ud,MKd:ng,uj:nb,ddb:xe,XPb:Se,Kkb:gg,fj:cb,eTb:sd,EJa:Nd,fK:De,hb:wa}):wrw({rY:ce,o1:lf,n$a:Hd,QS:Ie,Pa:ja,viewport:ba,V:Va,xqg:rd,EJa:Nd});Fqw({TGc:Yf,o1:lf,
sR:Qc,Uaa:bd,Fu:yc,QS:Ie,viewport:ba,qa,Pa:ja,hb:wa});__c.tfa(L.Tlf,()=>!!yc.tmc.size||!!yc.gVd.size);const pe=new rtw(wc,b_(()=>P.Ou.k5i),Ob,uf=>Ie.Amb(uf));la.tAq=ce.NBc;pe.fBk();(new Ctw({Fu:yc,QS:Ie,SX:V,DC:P,viewport:ba})).fBk();Xqw({mha:G,Fu:yc,o1:lf,QS:Ie,DC:P,errorService:p,uj:nb});const $e=Pkw({...a,X:e,xc:y.xc,mode:ja.mode,Nea:Yb,TGc:Yf,ui:se,ECe:ad});$rw({...a,uj:nb,Uaa:bd,Fu:yc,VGc:cd,QS:Ie,sR:Qc,Msk:$e,jg:pb?a.jg:!1});bsw({fWs:pb?a.kJa:a.j2,Fu:yc,VGc:cd,QS:Ie,Pa:ja});pb||Zjw({etd:Fc,
VGc:cd,ee:H,ged:()=>Ie.Yza({type:"all",source:"file_menu",bhb:!1}),sof:()=>Ie.Rnc()});ziw({sR:Qc,Uaa:bd,Fu:yc,etd:Fc,o1:lf,QS:Ie,ddb:xe,XPb:Se,viewport:ba,la:ua,hb:wa,pd:va,Pa:ja,Gj:da,xqg:rd,Mgb:pb?void 0:a.Mgb,uj:nb,fj:cb,fK:De});const Xg=btw(Oa);Gtw({ea:f,Yoa:vb,Fu:yc,t8:fc,bKd:Fe,OD:h,ma:N,WGc:Oa,ECe:ad,Ydr:!!Xg});jtw({dis:Xg,t8:fc,Fu:yc,QS:Ie,LWh:na,la:ua,ma:N,P:Ca,WGc:Oa,EF:pb})}};
}).call(self, self._456c437108d2d2713799e19380be528d);}

}])
//# sourceMappingURL=sourcemaps/34bfa1d398fa0623.js.map