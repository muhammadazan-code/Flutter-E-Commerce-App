"use strict";(self.webpackChunk_canva_web=self.webpackChunk_canva_web||[]).push([[18719],{3393:(t,e,i)=>{i.d(e,{A:()=>f});var s=i(506099),n=i(499928),r=i(799521),o=i(969197),a=i(750460),l=i(527817),u=i(639361),h=i(558670),c=i(168724),d=i(202237),g=i(56732);class f{constructor(t,e,i,s,n,r,o,a,l,u,h,c){this.on=t,this.u=e,this.zo=i,this.wt=s,this.ri=n,this.yt=r,this.rn=o,this.Go=a,this.Wo=l,this.Vo=u,this.appVersion=h,this.Xh=c,this.$h=t=>null==t?"":`${t} `,this.on=t,this.u=e,this.zo=i,this.wt=s,this.ri=n,this.yt=r,this.rn=o,this.Go=a,this.Wo=l,this.Vo=u,this.appVersion=h,this.Xh=c,this.Hh=["npm"]}Js(t,e=!1,i=!1){const s=this.on.ce(!i),n=s.Ir(),o=this.u.j(h.d.C.Ca);(0,a.n4)(o,n)||(t.device=n),t.api_key=this.rn,t.time=(0,r.UK)((new Date).valueOf(),!0);const l=this.u.j(h.d.C.Yh)||[],u=this.u.j(h.d.C.Jh)||"";if(this.Hh.length>0&&(!(0,a.n4)(l,this.Hh)||u!==this.ri.Si())&&(t.sdk_metadata=this.Hh),t.sdk_version=this.Wo,this.Vo&&(t.sdk_flavor=this.Vo),t.app_version=this.appVersion,t.app_version_code=this.Xh,t.device_id=s.id,e){const e=this.wt.getUserId();null!=e&&(t.user_id=e)}if(!t.user_id&&!this.zo.Fh()){const e=(0,g.b)(this.u);e&&(t.alias=e)}return t}Ks(t,e,i){const n=e.auth_error,r=e.error;if(!n&&!r)return!0;if(n){let e;this.zo.Bh();const s={errorCode:n.error_code};for(const t of i)(0,a.cy)(t)&&"X-Braze-Auth-Signature"===t[0]&&(s.signature=t[1]);t.respond_with&&t.respond_with.user_id?s.userId=t.respond_with.user_id:t.user_id&&(s.userId=t.user_id);const r=n.reason;return r?(s.reason=r,e=`due to ${r}`):e=`with error code ${n.error_code}.`,this.zo.Fh()||(e+=' Please use the "enableSdkAuthentication" initialization option to enable authentication.'),l.A.error(`SDK Authentication failed ${e}`),this.Qh(t.events||[],t.attributes||[]),this.zo.qh(s),!1}if(r){let i,n=r;switch(n){case s.A.Zh:return i="Received successful response with empty body.",o.A.q(u.w.qs,{e:i}),l.A.info(i),!1;case s.A.Ra:return i="Received successful response with invalid JSON",o.A.q(u.w.qs,{e:i+": "+e.response}),l.A.info(i),!1;case s.A.qa:n=`The API key "${t.api_key}" is invalid for the baseUrl ${this.Go}`;break;case s.A.Aa:n="Sorry, we are not currently accepting your requests. If you think this is in error, please contact us.";break;case s.A.Ba:n="No device identifier. Please contact support@braze.com"}l.A.error("Backend error: "+n)}return!1}Na(t,e,i,s){return!!(t&&0!==t.length||e&&0!==e.length||i||s)}Xa(t,e,i,s,n=!1){const r=[],o=t=>t||"",a=o(this.wt.getUserId());let l=this.Zi(t,e);const u=[],h=[];let d,g=null;if(i.length>0){const t=[];for(const e of i){if(d=e.Ir(),this.zo.Fh()){if(a&&!d.user_id){g||(g={}),g.events||(g.events=[]),g.events.push(d);continue}if(o(d.user_id)!==a){h.push(d);continue}}t.push(d)}t.length>0&&(l.events=t)}if(s.length>0){const t=[];for(const e of s)e&&(this.zo.Fh()&&o(e.user_id)!==a?u.push(e):t.push(e));t.length>0&&(l.attributes=t)}if(this.Qh(h,u),l=this.Js(l,!0,n),g){g=this.Js(g,!1,n);const t={requestData:g,headers:this.$s(g,c.A.Ps.$a)};r.push(t)}if(l&&!this.Na(l.events,l.attributes,t,e))return g?r:null;const f={requestData:l,headers:this.$s(l,c.A.Ps.$a)};return r.push(f),r}Qh(t,e){if(t){const e=[];for(const i of t){const t=n.A.fromJson(i);t.time=(0,r.YX)(t.time),e.push(t)}this.u.xo(e)}if(e)for(const i of e)this.u.La(i)}Vs(t,e){let i="HTTP error ";null!=t&&(i+=t+" "),i+=e,l.A.error(i)}qr(t){return o.A.q(u.w.Ea,{n:t})}Zi(t,e,i){const s={};t&&(s.feed=!0),e&&(s.triggers=!0);const n=null!=i?i:this.wt.getUserId();if(n&&(s.user_id=n),!s.user_id&&!this.zo.Fh()){const t=(0,g.b)(this.u);t&&(s.alias=t)}return s.config={config_time:this.yt.ii()},{respond_with:s}}Ka(t){const e=(new Date).valueOf();let i=d.mO.toString();const s=c.A.Pa(this.u,t);return-1!==s&&(i=(e-s).toString()),i}$s(t,e,i=!1){const s=[["X-Braze-Api-Key",this.rn]],n=this.Ka(e);s.push(["X-Braze-Last-Req-Ms-Ago",n]);const r=c.A.Ua(this.u,e).toString();s.push(["X-Braze-Req-Attempt",r]);let o=!1;if(null!=t.respond_with&&t.respond_with.triggers&&(s.push(["X-Braze-TriggersRequest","true"]),o=!0),null!=t.respond_with&&t.respond_with.feed&&(s.push(["X-Braze-FeedRequest","true"]),o=!0),e===c.A.Ps.Bs){s.push(["X-Braze-ContentCardsRequest","true"]);let t=this.u.j(h.d.C.As);t&&i||(t=0,this.u.k(h.d.C.As,t)),s.push(["BRAZE-SYNC-RETRY-COUNT",t.toString()]),o=!0}if(e===c.A.Ps.bi&&(s.push(["X-Braze-FeatureFlagsRequest","true"]),o=!0),o&&s.push(["X-Braze-DataRequest","true"]),this.zo.Fh()){const t=this.zo.kh();null!=t&&s.push(["X-Braze-Auth-Signature",t])}return s}Ga(t,e,i,s){window.setTimeout((()=>{l.A.info(`Retrying rate limited ${this.$h(s)}SDK request.`),this.Xs(e,i,s)}),t)}Xs(t,e,i,s){if(!this.Ha(i))return l.A.info(`${this.$h(i)}SDK request being rate limited.`),void("function"==typeof s&&s());const n=this.Wa();if(!n.Ya)return l.A.info(`${this.$h(i)}SDK request being rate limited. Request will be retried in ${Math.trunc(n.Ja/1e3)} seconds.`),void this.Ga(n.Ja,t,e,i);this.u.k(h.d.C.Qa,(new Date).valueOf());const r=t.device;r&&r.os_version instanceof Promise?r.os_version.then((i=>{t.device.os_version=i,e(n.Va)})):e(n.Va)}Za(t){var e;null===(e=this.u)||void 0===e||e.k(h.d.C.au,t)}du(t,e){let i=this.fu();null==i&&(i={}),i[t]=e,this.u.k(h.d.C.vu,i)}Ru(){var t;return null===(t=this.u)||void 0===t?void 0:t.j(h.d.C.au)}fu(){var t;return null===(t=this.u)||void 0===t?void 0:t.j(h.d.C.vu)}gu(t,e,i,s,n=""){let r;if(n){const t=this.fu();r=null==t||isNaN(t[n])?e:t[n]}else r=this.Ru(),(null==r||isNaN(r))&&(r=e);const o=(t-s)/1e3;return r=Math.min(r+o/i,e),r}pu(t,e){return Math.max(0,(1-t)*e*1e3)}bu(t,e=""){var i,s,n,r,o;const a={Ya:!0,Va:-1,Ja:0};if(null==t&&(t=!0),!t&&!e)return a;let l,u,d=null;if(t)d=null===(i=this.u)||void 0===i?void 0:i.j(h.d.C.Qa);else{const t=c.A.qu(this.u);if(null==t||null==t[e])return a;d=t[e]}if(null==d||isNaN(d))return a;if(t?(l=(null===(s=this.yt)||void 0===s?void 0:s.Au())||-1,u=(null===(n=this.yt)||void 0===n?void 0:n.Du())||-1):(l=(null===(r=this.yt)||void 0===r?void 0:r.Tu(e))||-1,u=(null===(o=this.yt)||void 0===o?void 0:o.ku(e))||-1),-1===l||-1===u)return a;const g=(new Date).valueOf();let f=this.gu(g,l,u,d,e);return f<1?(a.Ya=!1,a.Ja=this.pu(f,u),a):(f=Math.trunc(f)-1,a.Va=f,t?this.Za(f):this.du(e,f),a)}Wa(){return this.bu(!0)}Ha(t){const e=this.bu(!1,t);return!(e&&!e.Ya)}Os(){this.zo.Os()}Hs(){return this.Go}addSdkMetadata(t){for(const e of t)-1===this.Hh.indexOf(e)&&this.Hh.push(e)}}},10467:(t,e,i)=>{i.d(e,{A:()=>n});var s=i(750460);class n{constructor(){}ef(){}rf(){}Ta(t){}static sf(t,e){if(t&&e)if(t=t.toLowerCase(),(0,s.cy)(e.ff)){for(let i=0;i<e.ff.length;i++)if(-1!==t.indexOf(e.ff[i].toLowerCase()))return e.identity}else if(-1!==t.indexOf(e.ff.toLowerCase()))return e.identity}}},17592:(t,e,i)=>{i.d(e,{A:()=>s});const s={W:function(){const t=(t=!1)=>{const e=(Math.random().toString(16)+"000000000").substr(2,8);return t?"-"+e.substr(0,4)+"-"+e.substr(4,4):e};return t()+t(!0)+t(!0)+t()}}},41225:(t,e,i)=>{i.d(e,{A:()=>o});var s=i(558670),n=i(527817);const r={Qo:function(t,e=!1){let i=!1;try{if(localStorage&&localStorage.getItem)try{localStorage.setItem(s.d.C.ec,"true"),localStorage.getItem(s.d.C.ec)&&(localStorage.removeItem(s.d.C.ec),i=!0)}catch(t){if(!(t instanceof Error&&("QuotaExceededError"===t.name||"NS_ERROR_DOM_QUOTA_REACHED"===t.name)&&localStorage.length>0))throw t;i=!0}}catch(t){n.A.info("Local Storage not supported!")}const o=r.oc(),a=new s.A.tc(t,o&&!e,i);let l;return l=i?new s.A.rc(t):new s.A.ac,new s.A(a,l)},oc:function(){return navigator.cookieEnabled||"cookie"in document&&(document.cookie.length>0||(document.cookie="test").indexOf.call(document.cookie,"test")>-1)}},o=r},49830:(t,e,i)=>{i.d(e,{Is:()=>s.I,fA:()=>o.f,n_:()=>r.n,o_:()=>a.o,zr:()=>n.z});var s=i(714686),n=i(828308),r=i(543558),o=i(449073),a=i(328984)},56732:(t,e,i)=>{i.d(e,{b:()=>n});var s=i(558670);function n(t){const e=null==t?void 0:t.j(s.d.C._E);let i;return e&&(i={label:e.l,name:e.a}),i}},58480:(t,e,i)=>{i.d(e,{A:()=>a});var s=i(17592),n=i(527817),r=i(750460),o=i(410911);class a{constructor(t,e,i){this.eu=t,null==t&&(t=s.A.W()),!i||isNaN(i)?this.Dl=(new Date).valueOf():this.Dl=i,this.eu=t,this.Wl=(new Date).valueOf(),this.Hl=e}Y(){return`g:${encodeURIComponent(this.eu)}|e:${this.Hl}|c:${this.Dl}|l:${this.Wl}`}static hE(t){if("string"!=typeof t)return null;const e=t.lastIndexOf("|e:"),i=t.substring(0,e),s=i.split("g:")[1];let n;return n=/[|:]/.test(s)?encodeURIComponent(s):s,t.replace(i,`g:${n}`)}static qn(t){let e;if("string"==typeof t)try{const i=t.split("|");if(!(0,r.cy)(i)||4!==i.length)return null;const s=t=>t.split(":")[1],n=t=>{const e=parseInt(s(t));if(!isNaN(e))return e};e=new a(decodeURIComponent(s(i[0])),n(i[1]),n(i[2])),e.Wl=n(i[3])}catch(e){n.A.info(`Unable to parse cookie string ${t}, failed with error: ${(0,o.u)(e)}`)}else{if(null==t||null==t.g)return null;e=new a(t.g,t.e,t.c),e.Wl=t.l}return e}}},61299:(t,e,i)=>{i.d(e,{A:()=>n});const s={dn:()=>"serviceWorker"in navigator&&"undefined"!=typeof ServiceWorkerRegistration&&"showNotification"in ServiceWorkerRegistration.prototype&&"PushManager"in window,bn:()=>"safari"in window&&"pushNotification"in window.safari&&"function"==typeof window.safari.pushNotification.permission&&"function"==typeof window.safari.pushNotification.requestPermission,isPushSupported:()=>s.dn()||s.bn(),isPushBlocked:()=>{const t=s.isPushSupported()&&"Notification"in window&&null!=window.Notification&&null!=window.Notification.permission&&"denied"===window.Notification.permission,e=s.isPushSupported()&&(!("Notification"in window)||null==window.Notification);return t||e},isPushPermissionGranted:()=>s.isPushSupported()&&"Notification"in window&&null!=window.Notification&&null!=window.Notification.permission&&"granted"===window.Notification.permission,Vi:()=>!s.isPushBlocked()&&s.isPushSupported()&&!s.isPushPermissionGranted()},n=s},96746:(t,e,i)=>{i.d(e,{g:()=>c,x:()=>d});var s=i(988360),n=i(842224),r=i(480769),o=i(975843),a=i(574010),l=i(935476),u=i(462720),h=i(527817);function c(t){if(!t)return null;if(t.is_control)return n.A.fromJson(t);let e=t.type;null!=e&&(e=e.toUpperCase());const i=t.message,c=t.text_align_message,d=t.slide_from,g=t.extras,f=t.trigger_id,p=t.click_action,A=t.uri,m=t.open_target,v=t.message_close,b=t.duration,y=t.icon,w=t.image_url,E=t.image_style,S=t.icon_color,_=t.icon_bg_color,C=t.bg_color,k=t.text_color,T=t.close_btn_color,I=t.header,N=t.text_align_header,O=t.header_text_color,D=t.frame_color,$=[];let x=t.btns;null==x&&(x=[]);for(let s=0;s<x.length;s++)$.push(a.A.fromJson(x[s]));const B=t.crop_type,z=t.orientation,P=t.animate_in,L=t.animate_out;let R=t.html_id,U=t.css;null!=R&&""!==R&&null!=U&&""!==U||(R=void 0,U=void 0);const q=t.message_extras;let j;if(e===l.A.it||e===s.A.qe.Ve)j=new l.A(i,c,g,f,p,A,m,v,b,y,w,E,S,_,C,k,T,P,L,I,N,O,D,$,B,R,U,q);else if(e===r.A.it)j=new r.A(i,c,g,f,p,A,m,v,b,y,w,E,S,_,C,k,T,P,L,I,N,O,D,$,B,z,R,U,q);else if(e===u.A.it)j=new u.A(i,c,d,g,f,p,A,m,v,b,y,w,S,_,C,k,T,P,L,R,U,q);else{if(e!==o.A.it&&e!==s.A.qe.$e&&e!==s.A.qe.We)return void h.A.error("Ignoring message with unknown type "+e);{const e=t.message_fields;j=new o.A(i,g,f,v,b,P,L,D,R,U,e,q),j.trusted=t.trusted||!1}}return j.we=e,j}function d(t){const e=[];for(const i of t)e.push(new a.A(i.text,i.backgroundColor,i.textColor,i.borderColor,i.clickAction,i.uri,i.id));return e}},153759:(t,e,i)=>{i.d(e,{A:()=>u});var s=i(750460),n=i(527817),r=i(639361),o=i(793790),a=i(202237),l=i(799521);class u{constructor(t,e){this.wt=t,this.zi=e,this.wt=t,this.zi=e}getUserId(t){const e=this.wt.getUserId();if("function"!=typeof t)return e;n.A.warn("The callback for getUserId is deprecated. You can access its return value directly instead (e.g. `const id = braze.getUser().getUserId()`)"),t(e)}addAlias(t,e){return!(0,o.rK)(t,"add alias","the alias",!1)||t.length<=0?(n.A.error("addAlias requires a non-empty alias"),!1):!(0,o.rK)(e,"add alias","the label",!1)||e.length<=0?(n.A.error("addAlias requires a non-empty label"),!1):this.zi.Cn(t,e).L}setFirstName(t){return!!(0,o.rK)(t,"set first name","the firstName",!0)&&this.wt.nu("first_name",t)}setLastName(t){return!!(0,o.rK)(t,"set last name","the lastName",!0)&&this.wt.nu("last_name",t)}setEmail(t){return null===t||(0,o.B9)(t)?this.wt.nu("email",t):(n.A.error(`Cannot set email address - "${t}" did not pass RFC-5322 validation.`),!1)}setGender(t){return"string"==typeof t&&(t=t.toLowerCase()),!(null!==t&&!(0,s.BY)(u.Genders,t,`Gender "${t}" is not a valid gender.`,"User.Genders"))&&this.wt.nu("gender",t)}setDateOfBirth(t,e,i){return null===t&&null===e&&null===i?this.wt.nu("dob",null):(t=null!=t?parseInt(t.toString()):null,e=null!=e?parseInt(e.toString()):null,i=null!=i?parseInt(i.toString()):null,null==t||null==e||null==i||isNaN(t)||isNaN(e)||isNaN(i)||e>12||e<1||i>31||i<1?(n.A.error("Cannot set date of birth - parameters should comprise a valid date e.g. setDateOfBirth(1776, 7, 4);"),!1):this.wt.nu("dob",`${t}-${e}-${i}`))}setCountry(t){return!!(0,o.rK)(t,"set country","the country",!0)&&this.wt.nu("country",t)}setHomeCity(t){return!!(0,o.rK)(t,"set home city","the homeCity",!0)&&this.wt.nu("home_city",t)}setLanguage(t){return!!(0,o.rK)(t,"set language","the language",!0)&&this.wt.nu("language",t)}setEmailNotificationSubscriptionType(t){return!!(0,s.BY)(u.NotificationSubscriptionTypes,t,`Email notification setting "${t}" is not a valid subscription type.`,"User.NotificationSubscriptionTypes")&&this.wt.nu("email_subscribe",t)}setPushNotificationSubscriptionType(t){return!!(0,s.BY)(u.NotificationSubscriptionTypes,t,`Push notification setting "${t}" is not a valid subscription type.`,"User.NotificationSubscriptionTypes")&&this.wt.nu("push_subscribe",t)}setPhoneNumber(t){return!!(0,o.rK)(t,"set phone number","the phoneNumber",!0)&&(null===t||t.match(u.En)?this.wt.nu("phone",t):(n.A.error(`Cannot set phone number - "${t}" did not pass validation.`),!1))}setLastKnownLocation(t,e,i,s,r){return null==t||null==e?(n.A.error("Cannot set last-known location - latitude and longitude are required."),!1):(t=parseFloat(t.toString()),e=parseFloat(e.toString()),null!=i&&(i=parseFloat(i.toString())),null!=s&&(s=parseFloat(s.toString())),null!=r&&(r=parseFloat(r.toString())),isNaN(t)||isNaN(e)||null!=i&&isNaN(i)||null!=s&&isNaN(s)||null!=r&&isNaN(r)?(n.A.error("Cannot set last-known location - all supplied parameters must be numeric."),!1):t>90||t<-90||e>180||e<-180?(n.A.error("Cannot set last-known location - latitude and longitude are bounded by ±90 and ±180 respectively."),!1):null!=i&&i<0||null!=r&&r<0?(n.A.error("Cannot set last-known location - accuracy and altitudeAccuracy may not be negative."),!1):this.zi.setLastKnownLocation(this.wt.getUserId(),t,e,s,i,r).L)}setCustomUserAttribute(t,e,i){if(!(0,o.ZJ)(t))return!1;const n=e=>{const[i]=(0,o.fB)(e,a.KG,"attribute value",`set custom user attribute "${t}"`,"custom user attribute");return i};if((0,s.cy)(e)){const[i,s]=(0,o.Z2)(t,e);if(!i&&!s&&0!==e.length)return!1;if(i||0===e.length)return this.zi.Fn(r.w.$n,t,e).L;for(const t of e)if(!n(t))return!1}else if((0,s.Gv)(e)){if(!n(e))return!1;if(i)return this.zi.Fn(r.w.Bn,t,e).L}else{if(void 0===e||!(0,o.uZ)(e))return!1;if((0,s.$P)(e)&&(e=(0,l.EQ)(e)),"string"==typeof e&&!(0,o.Dz)(e,`set custom user attribute "${t}"`,"the element in the given array"))return!1}return this.wt.setCustomUserAttribute(t,e)}addToCustomAttributeArray(t,e){return!!(0,o.Dz)(t,"add to custom user attribute array","the given key")&&!(null!=e&&!(0,o.Dz)(e,"add to custom user attribute array","the given value"))&&this.zi.Fn(r.w.Ln,t,e).L}removeFromCustomAttributeArray(t,e){return!!(0,o.Dz)(t,"remove from custom user attribute array","the given key")&&!(null!=e&&!(0,o.Dz)(e,"remove from custom user attribute array","the given value"))&&this.zi.Fn(r.w.Rn,t,e).L}incrementCustomUserAttribute(t,e){if(!(0,o.Dz)(t,"increment custom user attribute","the given key"))return!1;null==e&&(e=1);const i=parseInt(e.toString());return isNaN(i)||i!==parseFloat(e.toString())?(n.A.error(`Cannot increment custom user attribute because the given incrementValue "${e}" is not an integer.`),!1):this.zi.Fn(r.w.On,t,i).L}setCustomLocationAttribute(t,e,i){return!!(0,o.Dz)(t,"set custom location attribute","the given key")&&((null!==e||null!==i)&&(e=null!=e?parseFloat(e.toString()):null,i=null!=i?parseFloat(i.toString()):null,null==e&&null!=i||null!=e&&null==i||null!=e&&(isNaN(e)||e>90||e<-90)||null!=i&&(isNaN(i)||i>180||i<-180))?(n.A.error("Received invalid values for latitude and/or longitude. Latitude and longitude are bounded by ±90 and ±180 respectively, or must both be null for removal."),!1):this.zi.Gn(t,e,i).L)}addToSubscriptionGroup(t){return!(0,o.rK)(t,"add user to subscription group","subscription group ID",!1)||t.length<=0?(n.A.error("addToSubscriptionGroup requires a non-empty subscription group ID"),!1):this.zi.Hn(t,u.Kn.SUBSCRIBED).L}removeFromSubscriptionGroup(t){return!(0,o.rK)(t,"remove user from subscription group","subscription group ID",!1)||t.length<=0?(n.A.error("removeFromSubscriptionGroup requires a non-empty subscription group ID"),!1):this.zi.Hn(t,u.Kn.UNSUBSCRIBED).L}kn(t,e,i,s,n){this.wt.kn(t,e,i,s,n),this.zi.Mn()}Dn(t){this.wt.Dn(t)}}u.Genders={MALE:"m",FEMALE:"f",OTHER:"o",UNKNOWN:"u",NOT_APPLICABLE:"n",PREFER_NOT_TO_SAY:"p"},u.NotificationSubscriptionTypes={OPTED_IN:"opted_in",SUBSCRIBED:"subscribed",UNSUBSCRIBED:"unsubscribed"},u.En=/^[0-9 .\\(\\)\\+\\-]+$/,u.Kn={SUBSCRIBED:"subscribed",UNSUBSCRIBED:"unsubscribed"},u.Yn="user_id",u.lu="custom",u.lr=997},155355:(t,e,i)=>{i.d(e,{A:()=>a});var s=i(799521),n=i(527817),r=i(686539),o=i(750460);class a{constructor(t,e=[],i,s,n=0,r,o,l=0,u=a.td,h,c,d){this.id=t,this.sd=e,this.startTime=i,this.endTime=s,this.priority=n,this.type=r,this.data=o,this.ed=l,this.rd=u,this.Nr=h,this.hd=c,this.od=d,this.id=t,this.sd=e||[],void 0===i&&(i=null),this.startTime=i,void 0===s&&(s=null),this.endTime=s,this.priority=n||0,this.type=r,this.ed=l||0,null==h&&(h=1e3*(this.ed+30)),this.Nr=h,this.data=o,null!=u&&(this.rd=u),this.hd=c,this.od=d||null}nd(t){return null==this.od||this.rd!==a.td&&t-this.od>=1e3*this.rd}ad(t){this.od=t}ud(t){const e=t+1e3*this.ed;return Math.max(e-(new Date).valueOf(),0)}dd(t){const e=(new Date).valueOf()-t,i=null==t||isNaN(e)||null==this.Nr||e<this.Nr;return i||n.A.info(`Trigger action ${this.type} is no longer eligible for display - fired ${e}ms ago and has a timeout of ${this.Nr}ms.`),!i}static fromJson(t){const e=t.id,i=[];for(let s=0;s<t.trigger_condition.length;s++)i.push(r.A.fromJson(t.trigger_condition[s]));const n=(0,s.Zo)(t.start_time),l=(0,s.Zo)(t.end_time),u=t.priority,h=t.type,c=t.delay,d=t.re_eligibility,g=t.timeout,f=t.data,p=t.min_seconds_since_last_trigger;return(0,o.BY)(a._r,h,"Could not construct Trigger from server data","Trigger.Types")?new a(e,i,n,l,u,h,f,c,d,g,p):null}Y(){const t=[];for(let e=0;e<this.sd.length;e++)t.push(this.sd[e].Y());return{i:this.id,c:t,s:this.startTime,e:this.endTime,p:this.priority,t:this.type,da:this.data,d:this.ed,r:this.rd,tm:this.Nr,ss:this.hd,ld:this.od}}static qn(t){const e=[],i=t.c||[];for(let s=0;s<i.length;s++)e.push(r.A.qn(i[s]));return new a(t.i,e,(0,s.jU)(t.s),(0,s.jU)(t.e),t.p,t.t,t.da,t.d,t.r,t.tm,t.ss,t.ld)}}a._r={Br:"inapp",md:"templated_iam"},a.td=-1},168724:(t,e,i)=>{i.d(e,{A:()=>o});var s=i(202237),n=i(558670);const r={Ps:{$a:"data",Bs:"content_cards/sync",bi:"feature_flags/sync",Mr:"template"},qu:t=>null==t?void 0:t.j(n.d.C.lE),sm:t=>null==t?void 0:t.j(n.d.C.SE),nm:(t,e)=>{null==t||t.k(n.d.C.lE,e)},um:(t,e)=>{null==t||t.k(n.d.C.SE,e)},Pa:(t,e)=>{if(!t||!e)return-1;const i=r.qu(t);if(null==i)return-1;const s=i[e];return null==s||isNaN(s)?-1:s},Ua:(t,e)=>{let i=s.et;if(!t||!e)return i;const n=r.sm(t);return null==n?i:(i=n[e],null==i||isNaN(i)?s.et:i)},_s:(t,e,i)=>{if(!t||!e)return;let s=r.qu(t);null==s&&(s={}),s[e]=i,r.nm(t,s)},Qs:(t,e,i)=>{if(!t||!e)return;let s=r.sm(t);null==s&&(s={}),s[e]=i,r.um(t,s)},Ys:(t,e)=>{if(!t||!e)return;const i=r.Ua(t,e);r.Qs(t,e,i+1)}},o=r},169892:(t,e,i)=>{i.d(e,{A:()=>r});var s=i(10467),n=i(905807);class r extends s.A{constructor(){super(),this.fd=r.hc(navigator.userAgent||"")}ef(){return this.fd[0]||"Unknown Browser"}rf(){return this.fd[1]||"Unknown Version"}Ta(t){for(let e=0;e<t.length;e++){const i=t[e].string;let s=r.sf(i,t[e]);if(s)return s===n.u.Pg&&navigator.maxTouchPoints>1&&(s=n.u.io),Promise.resolve(s)}return Promise.resolve(navigator.platform)}static hc(t){let e,i=t.match(/(samsungbrowser|tizen|roku|konqueror|icab|crios|opera|ucbrowser|chrome|safari|firefox|camino|msie|trident(?=\/))\/?\s*(\.?\d+(\.\d+)*)/i)||[];if(-1!==t.indexOf("(Web0S; Linux/SmartTV)"))return["LG Smart TV",null];if(-1!==t.indexOf("CrKey"))return["Chromecast",null];if(-1!==t.indexOf("BRAVIA")||-1!==t.indexOf("SonyCEBrowser")||-1!==t.indexOf("SonyDTV"))return["Sony Smart TV",null];if(-1!==t.indexOf("PhilipsTV"))return["Philips Smart TV",null];if(t.match(/\b(Roku)\b/))return["Roku",null];if(t.match(/\bAFTM\b/))return["Amazon Fire Stick",null];if(i[1]===n.c.rO&&(e=t.match(/\b(OPR|Edge|EdgA|Edg|UCBrowser)\/(\.?\d+(\.\d+)*)/),null!=e))return e=e.slice(1),e[0]=e[0].replace("OPR",n.c.oO),e[0]=e[0].replace("EdgA",n.c.eO),"Edg"===e[0]&&(e[0]=n.c.eO),[e[0],e[1]];if(i[1]===n.c.Bg&&(e=t.match(/\b(EdgiOS)\/(\.?\d+(\.\d+)*)/),null!=e))return e=e.slice(1),e[0]=e[0].replace("EdgiOS",n.c.eO),[e[0],e[1]];if(i=i[2]?[i[1],i[2]]:[null,null],i[0]===n.c.Bg&&null!=(e=t.match(/version\/(\.?\d+(\.\d+)*)/i))&&i.splice(1,1,e[1]),null!=(e=t.match(/\b(UCBrowser)\/(\.?\d+(\.\d+)*)/))&&i.splice(1,1,e[2]),i[0]===n.c.oO&&null!=(e=t.match(/mini\/(\.?\d+(\.\d+)*)/i)))return["Opera Mini",e[1]||""];if(i[0]){const t=i[0].toLowerCase();"crios"===t&&(i[0]=n.c.rO),"tizen"===t&&(i[0]="Samsung Smart TV",i[1]=null),"samsungbrowser"===t&&(i[0]="Samsung Browser")}return i}}},202237:(t,e,i)=>{i.d(e,{Fn:()=>o,KG:()=>s,et:()=>l,mO:()=>a,uy:()=>r,xE:()=>n});const s="setCustomUserAttribute",n="Braze must be initialized before calling methods.",r=30,o=30,a=72e5,l=1},248742:(t,e,i)=>{i.d(e,{A:()=>n});var s=i(17592);class n{constructor(){this._e={}}It(t){if("function"!=typeof t)return null;const e=s.A.W();return this._e[e]=t,e}removeSubscription(t){delete this._e[t]}removeAllSubscriptions(){this._e={}}ic(){return Object.keys(this._e).length}Dt(t){const e=[];for(const i in this._e){const s=this._e[i];e.push(s(t))}return e}}},264488:(t,e,i)=>{i.d(e,{A:()=>r});var s=i(323093),n=i(750460);class r{constructor(t){this.filters=t,this.filters=t}Jl(t){let e=!0;for(let i=0;i<this.filters.length;i++){const s=this.filters[i];let n=!1;for(let e=0;e<s.length;e++)if(s[e].Jl(t)){n=!0;break}if(!n){e=!1;break}}return e}static fromJson(t){if(null==t||!(0,n.cy)(t))return null;const e=[];for(let i=0;i<t.length;i++){const n=[],r=t[i];for(let t=0;t<r.length;t++)n.push(s.A.fromJson(r[t]));e.push(n)}return new r(e)}Y(){const t=[];for(let e=0;e<this.filters.length;e++){const i=this.filters[e],s=[];for(let t=0;t<i.length;t++)s.push(i[t].Y());t.push(s)}return t}static qn(t){const e=[];for(let i=0;i<t.length;i++){const n=[],r=t[i];for(let t=0;t<r.length;t++)n.push(s.A.qn(r[t]));e.push(n)}return new r(e)}}},307312:(t,e,i)=>{i.d(e,{A:()=>s});const s={Eo:"allowCrawlerActivity",_o:"baseUrl",Io:"noCookies",Ao:"devicePropertyAllowlist",_a:"disablePushTokenMaintenance",So:"enableLogging",No:"enableSdkAuthentication",Ma:"manageServiceWorkerExternally",Oo:"minimumIntervalBetweenTriggerActionsInSeconds",Po:"sessionTimeoutInSeconds",Ro:"appVersion",Lo:"appVersionNumber",wa:"serviceWorkerLocation",ya:"safariWebsitePushId",zn:"localization",bo:"contentSecurityNonce",Do:"allowUserSuppliedJavascript",jo:"inAppMessageZIndex",ho:"openInAppMessagesInNewTab",en:"openNewsFeedCardsInNewTab",Lh:"requireExplicitInAppMessageDismissal",Mo:"doNotLoadFontAwesome",Uo:"deviceId",Bo:"sdkFlavor",tn:"openCardsInNewTab"}},323093:(t,e,i)=>{i.d(e,{A:()=>r});var s=i(750460),n=i(799521);class r{constructor(t,e,i,s){this.Tl=t,this._l=e,this.comparator=i,this.Ll=s,this.Tl=t,this._l=e,this.comparator=i,this.Ll=s,this._l===r.Ol.Il&&this.comparator!==r.Ql.Ul&&this.comparator!==r.Ql.Xl&&this.comparator!==r.Ql.Fl&&this.comparator!==r.Ql.Kl&&(this.Ll=(0,n.Zo)(this.Ll))}Jl(t){let e=null;switch(null!=t&&(e=t[this.Tl]),this.comparator){case r.Ql.Pl:return null!=e&&e.valueOf()===this.Ll.valueOf();case r.Ql.Yl:return null==e||e.valueOf()!==this.Ll.valueOf();case r.Ql.Zl:return null!=e&&typeof e==typeof this.Ll&&e>this.Ll;case r.Ql.Ul:return this._l===r.Ol.Il?null!=e&&(0,s.$P)(e)&&(0,n.Jd)(e)<=this.Ll.valueOf():null!=e&&typeof e==typeof this.Ll&&e>=this.Ll;case r.Ql.$l:return null!=e&&typeof e==typeof this.Ll&&e<this.Ll;case r.Ql.Xl:return this._l===r.Ol.Il?null!=e&&(0,s.$P)(e)&&(0,n.Jd)(e)>=this.Ll.valueOf():null!=e&&typeof e==typeof this.Ll&&e<=this.Ll;case r.Ql.Hu:return null!=e&&"string"==typeof e&&typeof e==typeof this.Ll&&null!=e.match(this.Ll);case r.Ql.Qu:return null!=e;case r.Ql.Xu:return null==e;case r.Ql.Fl:return null!=e&&(0,s.$P)(e)&&(0,n.DA)(e)<this.Ll;case r.Ql.Kl:return null!=e&&(0,s.$P)(e)&&(0,n.DA)(e)>this.Ll;case r.Ql.Gu:return null==e||typeof e!=typeof this.Ll||"string"!=typeof e||null==e.match(this.Ll)}return!1}static fromJson(t){return new r(t.property_key,t.property_type,t.comparator,t.property_value)}Y(){let t=this.Ll;return(0,s.$P)(this.Ll)&&(t=(0,n.UK)(t.valueOf())),{k:this.Tl,t:this._l,c:this.comparator,v:t}}static qn(t){return new r(t.k,t.t,t.c,t.v)}}r.Ol={Vu:"boolean",Wu:"number",Yu:"string",Il:"date"},r.Ql={Pl:1,Yl:2,Zl:3,Ul:4,$l:5,Xl:6,Hu:10,Qu:11,Xu:12,Fl:15,Kl:16,Gu:17}},328984:(t,e,i)=>{i.d(e,{o:()=>l});var s=i(744371),n=i(750460),r=i(527817),o=i(687109),a=i(202237);function l(){const t=s.Ay.l();if(null==t)return void r.A.warn(a.xE);t.clearData();const e=(0,n.HP)(o.A.Yt);for(let i=0;i<e.length;i++){const t=e[i],s=o.A.Yt[t];new o.A(s,r.A).clearData()}if(s.Ay.X())for(const i of s.Ay.gr())i.clearData(!0)}},357133:(t,e,i)=>{i.d(e,{A:()=>s});class s{constructor(t,e,i,s,n){this.triggerId=t,this.Er=e,this.Tr=i,this.Gr=s,this.Nr=n,this.triggerId=t,this.Er=e,this.Tr=i,this.Gr=s,this.Nr=n}static fromJson(t,e,i,n,r){return null==t||null==t.trigger_id?null:new s(t.trigger_id,e,i,n,r)}}},360411:(t,e,i)=>{i.d(e,{C:()=>s});const s=(t,e)=>(t=Math.ceil(t),e=Math.floor(e),Math.floor(Math.random()*(e-t+1))+t)},373840:(t,e,i)=>{i.d(e,{N:()=>n,u:()=>r});var s=i(527817);function n(t){let e=t.length;for(let i=t.length-1;i>=0;i--){const s=t.charCodeAt(i);s>127&&s<=2047?e++:s>2047&&s<=65535&&(e+=2),s>=56320&&s<=57343&&i--}return e}function r(t){try{t=t.replace(/-/g,"+").replace(/_/g,"/");const e=window.atob(t),i=new Uint8Array(e.length);for(let t=0;t<e.length;t++)i[t]=e.charCodeAt(t);const s=new Uint16Array(i.buffer);return String.fromCharCode(...s)}catch(t){return s.A.error("Unable to decode Base64: "+t),null}}},410261:(t,e,i)=>{i.d(e,{A:()=>s});class s{constructor(t){this.productId=t,this.productId=t}Jl(t){return null==this.productId||t[0]===this.productId}static fromJson(t){return new s(t?t.product_id:null)}Y(){return this.productId}}},410911:(t,e,i)=>{i.d(e,{u:()=>s});const s=t=>t instanceof Error?t.message:String(t)},411918:(t,e,i)=>{i.d(e,{A:()=>s});const s={BROWSER:"browser",BROWSER_VERSION:"browserVersion",OS:"os",RESOLUTION:"resolution",LANGUAGE:"language",TIME_ZONE:"timeZone",USER_AGENT:"userAgent"}},416529:(t,e,i)=>{i.d(e,{A:()=>h});var s=i(58480),n=i(373840),r=i(876367),o=i(527817),a=i(687109),l=i(558670),u=i(153759);class h{constructor(t,e){this.yt=t,this.u=e,this.yt=t,this.u=e}getUserId(){const t=this.u.tu(l.d.iu.su);if(null==t)return null;let e=t.eu,i=(0,n.N)(e);if(i>u.A.lr){for(;i>u.A.lr;)e=e.slice(0,e.length-1),i=(0,n.N)(e);t.eu=e,this.u.uu(l.d.iu.su,t)}return e}ou(t){const e=null==this.getUserId();this.u.uu(l.d.iu.su,new s.A(t)),e&&this.u.ru(t)}setCustomUserAttribute(t,e){if(this.yt.hu(t))return o.A.info('Custom Attribute "'+t+'" is blocklisted, ignoring.'),!1;const i={};return i[t]=e,this.nu(u.A.lu,i,!0)}nu(t,e,i=!1,s=!1){const n=this.u.mu(this.getUserId(),t,e);let r="",a=t,l=e;return i&&(r=" custom","object"==typeof e&&(a=Object.keys(e)[0],l=e[a],"object"==typeof l&&(l=JSON.stringify(l,null,2)))),!s&&n&&o.A.info(`Logged${r} attribute ${a} with value ${l}`),n}kn(t,e,i,s,n){this.nu("push_token",t,!1,!0),this.nu("custom_push_public_key",i,!1,!0),this.nu("custom_push_user_auth",s,!1,!0),this.nu("custom_push_vapid_public_key",n,!1,!0);const u=a.A.Yt.Qt,h=new a.A(u,o.A),c=new r.A(t,e,i,s,n);this.u.k(l.d.C.In,c.Y()),h.setItem(u.ss.cu,u.ie,!0)}Dn(t){if(this.nu("push_token",null,!1,!0),this.nu("custom_push_public_key",null,!1,!0),this.nu("custom_push_user_auth",null,!1,!0),this.nu("custom_push_vapid_public_key",null,!1,!0),t){const t=a.A.Yt.Qt,e=new a.A(t,o.A);this.u.k(l.d.C.In,!1),e.setItem(t.ss.cu,t.ie,!1)}}}},419209:(t,e,i)=>{i.d(e,{A:()=>a});var s=i(558670),n=i(248742),r=i(687109),o=i(527817);class a{constructor(t,e,i){this.u=t,this.Jn=e,this.Qn=i,this.u=t,this.Jn=e||!1,this.Qn=i,this.Xn=new n.A,this.Zn=0,this.gh=1}Fh(){return this.Jn}kh(){return this.u.j(s.d.C.wh)}setSdkAuthenticationSignature(t){const e=this.kh();this.u.k(s.d.C.wh,t);const i=r.A.Yt.Qt;new r.A(i,o.A).setItem(i.ss.jh,this.gh,t),e!==t&&this.Os()}xh(){this.u.ti(s.d.C.wh);const t=r.A.Yt.Qt;new r.A(t,o.A).re(t.ss.jh,this.gh)}subscribeToSdkAuthenticationFailures(t){return this.Qn.It(t)}qh(t){this.Qn.Dt(t)}yh(){this.Xn.removeAllSubscriptions()}Bh(){this.Zn+=1}Gh(){return this.Zn}Os(){this.Zn=0}}},435071:(t,e,i)=>{i.d(e,{A:()=>n});var s=i(686539);class n{constructor(t){this.Zu=t,this.Zu=t}Jl(t){return null==this.Zu||s.A.if(t[0],this.Zu)}static fromJson(t){return new n(t?t.campaign_id:null)}Y(){return this.Zu}}},437629:(t,e,i)=>{i.d(e,{c:()=>s});const s={Fo:32,lo:9,To:13,mh:27}},449073:(t,e,i)=>{i.d(e,{f:()=>l});var s=i(744371),n=i(687109),r=i(527817),o=i(944225),a=i(757742);function l(){if(!s.Ay.X())return;const t=s.Ay.cr();if(!t)return;t.openSession();const e=n.A.Yt.Qt,i=new n.A(e,r.A);i.jr(e.ss.hr,((s,n)=>{const l=n.lastClick,u=n.trackingString;r.A.info(`Firing push click trigger from ${u} push click at ${l}`);const h=t.kr(l,u),c=function(){a.B.rr().fe(o.A.vr,[u],h)};t.$r(c,c),i.re(e.ss.hr,s)})),i.Zt(e.ss.wr,(function(e){t.yr(e)}))}},462720:(t,e,i)=>{i.d(e,{A:()=>r});var s=i(988360),n=i(728441);class r extends s.A{constructor(t,e,i,n,r,o,a,l,u,h,c,d,g,f,p,A,m,v,b,y,w,E){A=A||s.A.th.Dh,p=p||s.A.th.Mh,super(t,e=e||s.A.TextAlignment.START,i,n,r,o,a,l,u,h,c,d,void 0,g,f,p,A,m,v,b,void 0,void 0,void 0,void 0,void 0,void 0,void 0,y,w,E),this.De=s.A.TextAlignment.START}ze(){return!1}Je(){const t=document.createElement("span");return t.appendChild(document.createTextNode(this.message||"")),t}Oh(t){const e=t.getElementsByClassName("ab-in-app-message")[0];n.e0.po(e,!0,!0)||(this.slideFrom===s.A.SlideFrom.TOP?e.style.top="0px":e.style.bottom="0px"),super.Oh(t)}Y(){return super.Y(r.it)}static Xr(t){return new r(t[s.A.tt.Vr],t[s.A.tt.Wr],t[s.A.tt.Rh],t[s.A.tt.bt],t[s.A.tt.Yr],t[s.A.tt.Zr],t[s.A.tt.URI],t[s.A.tt.ea],t[s.A.tt.ra],t[s.A.tt.sa],t[s.A.tt.ta],t[s.A.tt.ot],t[s.A.tt.aa],t[s.A.tt.oa],t[s.A.tt.pa],t[s.A.tt.ma],t[s.A.tt.na],t[s.A.tt.ua],t[s.A.tt.ca],t[s.A.tt.ha],t[s.A.tt.CSS],t[s.A.tt.va])}}r.it=s.A.qe.Kr},480769:(t,e,i)=>{i.d(e,{A:()=>r});var s=i(96746),n=i(988360);class r extends n.A{constructor(t,e,i,s,r,o,a,l,u,h,c,d,g,f,p,A,m,v,b,y,w,E,S,_,C,k,T,I,N){l=l||n.A.DismissType.MANUAL,k=k||n.A.Orientation.PORTRAIT,super(t,e,void 0,i,s,r,o,a,l,u,h,c,d,g,f,p,A,m,v,b,y,w,E,S,_,C=C||n.A.CropType.CENTER_CROP,k,T,I,N),this.De=n.A.TextAlignment.CENTER}Y(){return super.Y(r.it)}static Xr(t){return new r(t[n.A.tt.Vr],t[n.A.tt.Wr],t[n.A.tt.bt],t[n.A.tt.Yr],t[n.A.tt.Zr],t[n.A.tt.URI],t[n.A.tt.ea],t[n.A.tt.ra],t[n.A.tt.sa],t[n.A.tt.ta],t[n.A.tt.ot],t[n.A.tt.ia],t[n.A.tt.aa],t[n.A.tt.oa],t[n.A.tt.pa],t[n.A.tt.ma],t[n.A.tt.na],t[n.A.tt.ua],t[n.A.tt.ca],t[n.A.tt.fa],t[n.A.tt.da],t[n.A.tt.la],t[n.A.tt.ga],(0,s.x)(t[n.A.tt.ja]),t[n.A.tt.xa],t[n.A.tt.za],t[n.A.tt.ha],t[n.A.tt.CSS],t[n.A.tt.va])}}r.it=n.A.qe.Or},499487:(t,e,i)=>{i.d(e,{A:()=>l});var s=i(558670),n=i(248742),r=i(791072),o=i(969197),a=i(639361);class l{constructor(t){this.u=t,this.u=t,this.tl=new n.A,this.el=new n.A,this.il=new n.A,this.sl=null,this.rl=null}ll(){if(null==this.rl){const t=this.u.j(s.d.C.ul);this.rl=null!=t?r.A.qn(t):new r.A}return this.rl}ii(){return this.ll().hl}al(t){if(null!=t&&null!=t.config){const e=t.config;if(e.time>this.ll().hl){const t=t=>null==t?this.ll().ol:t,i=new r.A(e.time,e.events_blacklist,e.attributes_blacklist,e.purchases_blacklist,e.messaging_session_timeout,e.vapid_public_key,e.content_cards,e.feature_flags,t(e.global_request_rate_limit));let n=!1;null!=i.cl&&this.Wn()!==i.cl&&(n=!0);let o=!1;null!=i.ml.enabled&&this.si()!==i.ml.enabled&&(o=!0);let a=!1;null!=i.hi.enabled&&this.ci()!==i.hi.enabled&&(a=!0),this.rl=i,this.u.k(s.d.C.ul,i.Y()),n&&this.tl.Dt(),o&&this.el.Dt(),a&&this.il.Dt()}}}_n(t){const e=this.tl.It(t);return this.sl&&this.tl.removeSubscription(this.sl),this.sl=e,e}Is(t){return this.el.It(t)}ji(t){return this.il.It(t)}me(t){return-1!==this.ll().gl.indexOf(t)}hu(t){return-1!==this.ll().fl.indexOf(t)}Dr(t){return-1!==this.ll().bl.indexOf(t)}dl(){return this.ll().Rl}Wn(){return this.ll().cl}si(){return this.ll().ml.enabled||!1}Cl(){const t=this.ll().ol;return!(!t||null==t.enabled)&&t.enabled}Au(){if(!this.Cl())return-1;const t=this.ll().ol;return null==t.capacity||t.capacity<10?-1:t.capacity}Du(){if(!this.Cl())return-1;const t=this.ll().ol;return null==t.refill_rate||t.refill_rate<=0?-1:t.refill_rate}vl(t){const e=this.ll().ol.endpoint_overrides;return null==e?null:e[t]}Tu(t){const e=this.vl(t);return null==e||isNaN(e.capacity)||e.capacity<=0?-1:e.capacity}ku(t){const e=this.vl(t);return null==e||isNaN(e.refill_rate)||e.refill_rate<=0?-1:e.refill_rate}ci(){return this.ll().hi.enabled&&null==this.Ri()?(o.A.q(a.w.qs,{e:"Missing feature flag refresh_rate_limit."}),!1):this.ll().hi.enabled||!1}Ri(){return this.ll().hi.refresh_rate_limit}}},499928:(t,e,i)=>{i.d(e,{A:()=>a});var s=i(744371),n=i(56732),r=i(750460),o=i(799521);class a{constructor(t,e,i,s,n){this.userId=t,this.type=e,this.time=i,this.sessionId=s,this.data=n,this.userId=t,this.type=e,this.time=(0,o.S3)(i),this.sessionId=s,this.data=n}Ir(){var t;const e={name:this.type,time:(0,o.UK)(this.time),data:this.data||{},session_id:this.sessionId};null!=this.userId&&(e.user_id=this.userId);const i=(null===(t=s.Ay.Sr())||void 0===t?void 0:t.Fh())||!1;if(!e.user_id&&!i){const t=(0,n.b)(s.Ay.l());t&&(e.alias=t)}return e}Y(){return{u:this.userId,t:this.type,ts:this.time,s:this.sessionId,d:this.data}}static fromJson(t){return new a(t.user_id,t.name,t.time,t.session_id,t.data)}static RE(t){return null!=t&&(0,r.Gv)(t)&&null!=t.t&&""!==t.t}static qn(t){return new a(t.u,t.t,t.ts,t.s,t.d)}}},505792:(t,e,i)=>{i.d(e,{A:()=>n});var s=i(264488);class n{constructor(t,e){this.Bl=t,this.Ml=e,this.Bl=t,this.Ml=e}Jl(t){if(null==this.Bl||null==this.Ml)return!1;const e=t[0],i=t[1];return e===this.Bl&&this.Ml.Jl(i)}static fromJson(t){return new n(t?t.event_name:null,t?s.A.fromJson(t.property_filters):null)}Y(){return{e:this.Bl,pf:this.Ml?this.Ml.Y():null}}}},506099:(t,e,i)=>{i.d(e,{A:()=>s});const s={qa:"invalid_api_key",Aa:"blacklisted",Ba:"no_device_identifier",Ra:"invalid_json_response",Zh:"empty_response",__:"sdk_auth_error"}},524676:(t,e,i)=>{i.d(e,{A:()=>a});var s=i(962961),n=i(169892),r=i(905807);class o{constructor(){const t=navigator.userAgentData?s.A:n.A;this.Sg=new t,this.userAgent=navigator.userAgent,this.browser=this.Sg.ef(),this.version=this.Sg.rf(),this.OS=null,this.Ta().then((t=>this.OS=t));const e=navigator;this.language=(e.userLanguage||e.language||e.browserLanguage||e.systemLanguage||"").toLowerCase(),this.Zo=o.vg(this.userAgent)}IE(){return this.browser===r.c.Bg}Oa(){return this.OS||null}Ta(){return this.OS?Promise.resolve(this.OS):this.Sg.Ta(o.kg).then((t=>(this.OS=t,t)))}static vg(t){t=t.toLowerCase();const e=["googlebot","bingbot","slurp","duckduckbot","baiduspider","yandex","facebookexternalhit","sogou","ia_archiver","https://github.com/prerender/prerender","aolbuild","bingpreview","msnbot","adsbot","mediapartners-google","teoma","taiko"];for(let i=0;i<e.length;i++)if(-1!==t.indexOf(e[i]))return!0;return!1}}o.kg=[{string:navigator.platform,ff:"Win",identity:r.u.Og},{string:navigator.platform,ff:"Mac",identity:r.u.Pg},{string:navigator.platform,ff:"BlackBerry",identity:"BlackBerry"},{string:navigator.platform,ff:"FreeBSD",identity:"FreeBSD"},{string:navigator.platform,ff:"OpenBSD",identity:"OpenBSD"},{string:navigator.platform,ff:"Nintendo",identity:"Nintendo"},{string:navigator.platform,ff:"SunOS",identity:"SunOS"},{string:navigator.platform,ff:"PlayStation",identity:"PlayStation"},{string:navigator.platform,ff:"X11",identity:"X11"},{string:navigator.userAgent,ff:["iPhone","iPad","iPod"],identity:r.u.io},{string:navigator.platform,ff:"Pike v",identity:r.u.io},{string:navigator.userAgent,ff:["Web0S"],identity:"WebOS"},{string:navigator.platform,ff:["Linux armv7l","Android"],identity:r.u.xg},{string:navigator.userAgent,ff:["Android"],identity:r.u.xg},{string:navigator.platform,ff:"Linux",identity:"Linux"}];const a=new o},527817:(t,e,i)=>{i.d(e,{A:()=>n});const s={init:function(t){void 0===t&&void 0!==s.zg||(s.zg=!!t),s.t||(s.t=!0)},destroy:function(){s.t=!1,s.zg=void 0,s.vd=void 0},setLogger:function(t){"function"==typeof t?(s.init(),s.vd=t):s.info("Ignoring setLogger call since logger is not a function")},toggleLogging:function(){s.init(),s.zg?(console.log("Disabling Braze logging"),s.zg=!1):(console.log("Enabled Braze logging"),s.zg=!0)},info:function(t){if(s.zg){const e="Braze: "+t;null!=s.vd?s.vd(e):console.log(e)}},warn:function(t){if(s.zg){const e="Braze SDK Warning: "+t+" (v5.3.0)";null!=s.vd?s.vd(e):console.warn(e)}},error:function(t){if(s.zg){const e="Braze SDK Error: "+t+" (v5.3.0)";null!=s.vd?s.vd(e):console.error(e)}}},n=s},528548:(t,e,i)=>{i.d(e,{changeUser:()=>s.Is,destroy:()=>s.zr,initialize:()=>s.n_,openSession:()=>s.fA,wipeData:()=>s.o_});var s=i(49830)},542912:(t,e,i)=>{function s(t){null==t&&(t="");const e=t.split("?").slice(1).join("?"),i={};if(null!=e){const t=e.split("&");for(let e=0;e<t.length;e++){const s=t[e].split("=");""!==s[0]&&(i[s[0]]=s[1])}}return i}i.d(e,{y:()=>s})},543558:(t,e,i)=>{i.d(e,{n:()=>n});var s=i(744371);function n(t,e){return s.Ay.initialize(t,e)}},554137:(t,e,i)=>{i.d(e,{$6:()=>u,V:()=>a,dy:()=>g,jj:()=>h,mY:()=>l,qj:()=>d});var s=i(527817),n=i(410911),r=i(373840),o=i(793790);const a={types:{ro:"container",logCustomEvent:"logCustomEvent",setEmailNotificationSubscriptionType:"setEmailNotificationSubscriptionType",setPushNotificationSubscriptionType:"setPushNotificationSubscriptionType",setCustomUserAttribute:"setCustomUserAttribute",requestPushPermission:"requestPushPermission",addToSubscriptionGroup:"addToSubscriptionGroup",removeFromSubscriptionGroup:"removeFromSubscriptionGroup",addToCustomAttributeArray:"addToCustomAttributeArray",removeFromCustomAttributeArray:"removeFromCustomAttributeArray",no:"openLink",ao:"openLinkInWebView"},properties:{type:"type",oo:"steps",eo:"args"}},l={Qi:"unknownBrazeAction",Wi:"noPushPrompt"},u=(t,e)=>{switch(t){case l.Qi:return`${e} contains an unknown braze action type and will not be displayed.`;case l.Wi:return`${e} contains a push prompt braze action, but is not eligible for a push prompt. Ignoring.`;default:return""}};function h(t){try{const e=t.match(o.nx),i=e?e[0].length:null,n=i?t.substring(i):null;if(null==i||i>t.length-1||!n)return void s.A.error(`Did not find base64 encoded brazeAction in url to process : ${t}`);const a=(0,r.u)(n);return a?JSON.parse(a):void s.A.error(`Failed to decode base64 encoded brazeAction: ${n}`)}catch(e){return void s.A.error(`Failed to process brazeAction URL ${t} : ${(0,n.u)(e)}`)}}function c(t,e){let i=!1;if(e)for(const s of e)if(i=i||t(s),i)return!0;return!1}function d(t){const e=a.properties.type,i=a.properties.oo;try{if(null==t)return!0;const s=t[e];return s===a.types.ro?c(d,t[i]):!(0,o.To)(s)}catch(t){return!0}}function g(t){if(!t||!(0,o.xs)(t))return!1;const e=a.properties.type,i=a.properties.oo,s=t[e];return s===a.types.ro?c(g,t[i]):s===a.types.requestPushPermission}},558670:(t,e,i)=>{i.d(e,{A:()=>d,d:()=>c});var s=i(499928),n=i(58480),r=i(750460),o=i(639361),a=i(527817),l=i(153759),u=i(524676),h=i(410911);const c={iu:{su:"ab.storage.userId",Uo:"ab.storage.deviceId",El:"ab.storage.sessionId"},C:{ec:"ab.test",tE:"ab.storage.events",eE:"ab.storage.attributes",sE:"ab.storage.attributes.anonymous_user",Ca:"ab.storage.device",Yh:"ab.storage.sdk_metadata",Jh:"ab.storage.session_id_for_cached_metadata",In:"ab.storage.pushToken",Ui:"ab.storage.newsFeed",ki:"ab.storage.lastNewsFeedRefresh",J:"ab.storage.cardImpressions",ul:"ab.storage.serverConfig",rE:"ab.storage.triggers",oE:"ab.storage.triggers.ts",Nl:"ab.storage.messagingSessionStart",ws:"ab.storage.cc",gs:"ab.storage.ccLastFullSync",ys:"ab.storage.ccLastCardUpdated",nE:"ab.storage.ccRateLimitCurrentTokenCount",au:"ab.storage.globalRateLimitCurrentTokenCount",vu:"ab.storage.dynamicRateLimitCurrentTokenCount",v:"ab.storage.ccClicks",H:"ab.storage.ccImpressions",A:"ab.storage.ccDismissals",aE:"ab.storage.lastDisplayedTriggerTimesById",iE:"ab.storage.lastDisplayedTriggerTime",EE:"ab.storage.triggerFireInstancesById",wh:"ab.storage.signature",As:"ab.storage.brazeSyncRetryCount",Ss:"ab.storage.sdkVersion",gi:"ab.storage.ff",vi:"ab.storage.ffImpressions",xi:"ab.storage.ffLastRefreshAt",Di:"ab.storage.ff.sessionId",lE:"ab.storage.lastReqToEndpoint",SE:"ab.storage.requestAttempts",Cr:"ab.storage.deferredIam",Qa:"ab.storage.lastSdkReq",_E:"ab.storage.alias"},se:"ab.optOut"};class d{constructor(t,e){this.uE=t,this.TE=e,this.uE=t,this.TE=e}Wh(t){const e=(0,r.HP)(c.iu),i=new d.ee(t);for(const s of e)i.remove(c.iu[s])}uu(t,e){let i=null;null!=e&&e instanceof n.A&&(i=e.Y()),this.uE.store(t,i)}cE(t){const e=this.tu(t);null!=e&&(e.Wl=(new Date).valueOf(),this.uu(t,e))}tu(t){const e=this.uE.br(t),i=(t=>{let e;try{e=JSON.parse(t)}catch(t){e=null}return e})(e);let s;if(i)s=n.A.qn(i)||null,s&&this.uu(t,s);else{const i=n.A.hE(e);s=n.A.qn(i)||null,i!==e&&s&&this.uu(t,s)}return s}Al(t){this.uE.remove(t)}Vh(){const t=(0,r.HP)(c.iu);let e;for(const i of t)e=this.tu(c.iu[i]),null!=e&&this.uu(c.iu[i],e)}xo(t){let e;if(null==t||0===t.length)return!1;e=(0,r.cy)(t)?t:[t];let i=this.TE.br(c.C.tE);null!=i&&(0,r.cy)(i)||(i=[]);for(let s=0;s<e.length;s++)i.push(e[s].Y());return this.TE.store(c.C.tE,i)}kl(t){return null!=t&&this.xo([t])}AE(){let t=this.TE.br(c.C.tE);this.TE.remove(c.C.tE),null==t&&(t=[]);const e=[];let i=!1,n=null;if((0,r.cy)(t))for(let r=0;r<t.length;r++)s.A.RE(t[r])?e.push(s.A.qn(t[r])):n=r;else i=!0;if(i||null!=n){let r="Stored events could not be deserialized as Events";i&&(r+=", was "+Object.prototype.toString.call(t)+" not an array"),null!=n&&(r+=", value at index "+n+" does not look like an event"),r+=", serialized values were of type "+typeof t+": "+JSON.stringify(t),e.push(new s.A(null,o.w.qs,(new Date).valueOf(),null,{e:r}))}return e}k(t,e){return!!(0,r.BY)(c.C,t,"StorageManager cannot store object.","STORAGE_KEYS.OBJECTS")&&this.TE.store(t,e)}j(t){return!!(0,r.BY)(c.C,t,"StorageManager cannot retrieve object.","STORAGE_KEYS.OBJECTS")&&this.TE.br(t)}ti(t){return!!(0,r.BY)(c.C,t,"StorageManager cannot remove object.","STORAGE_KEYS.OBJECTS")&&(this.TE.remove(t),!0)}clearData(){const t=(0,r.HP)(c.iu),e=(0,r.HP)(c.C);for(let i=0;i<t.length;i++){const e=t[i];this.uE.remove(c.iu[e])}for(let i=0;i<e.length;i++){const t=e[i];this.TE.remove(c.C[t])}}gE(t){return t||c.C.sE}La(t){let e=this.TE.br(c.C.eE);null==e&&(e={});const i=this.gE(t[l.A.Yn]),s=e[i];for(const n in t)n!==l.A.Yn&&(null==e[i]||s&&null==s[n])&&this.mu(t[l.A.Yn],n,t[n])}mu(t,e,i){let s=this.TE.br(c.C.eE);null==s&&(s={});const n=this.gE(t);let r=s[n];if(null==r&&(r={},null!=t&&(r[l.A.Yn]=t)),e===l.A.lu){null==r[e]&&(r[e]={});for(const t in i)r[e][t]=i[t]}else r[e]=i;return s[n]=r,this.TE.store(c.C.eE,s)}OE(){const t=this.TE.br(c.C.eE);this.TE.remove(c.C.eE);const e=[];for(const i in t)null!=t[i]&&e.push(t[i]);return e}ru(t){const e=this.TE.br(c.C.eE);if(null!=e){const i=this.gE(null),s=e[i];null!=s&&(e[i]=void 0,this.TE.store(c.C.eE,e),s[l.A.Yn]=t,this.La(s))}const i=this.tu(c.iu.El);let s=null;null!=i&&(s=i.eu);const n=this.AE();if(null!=n)for(let r=0;r<n.length;r++){const e=n[r];null==e.userId&&e.sessionId==s&&(e.userId=t),this.kl(e)}}dE(){return this.TE.fE}}d.rc=class{constructor(t){this.rn=t,this.rn=t,this.fE=u.A.IE()?3:10}bE(t){return t+"."+this.rn}store(t,e){const i={v:e};try{return localStorage.setItem(this.bE(t),JSON.stringify(i)),!0}catch(t){return a.A.info("Storage failure: "+(0,h.u)(t)),!1}}br(t){try{let e=null;const i=localStorage.getItem(this.bE(t));return null!=i&&(e=JSON.parse(i)),null==e?null:e.v}catch(t){return a.A.info("Storage retrieval failure: "+(0,h.u)(t)),null}}remove(t){try{localStorage.removeItem(this.bE(t))}catch(t){return a.A.info("Storage removal failure: "+(0,h.u)(t)),!1}}},d.ac=class{constructor(){this.mE={},this.KE=5242880,this.fE=3}store(t,e){const i={value:e},s=this.YE(e);return s>this.KE?(a.A.info("Storage failure: object is ≈"+s+" bytes which is greater than the max of "+this.KE),!1):(this.mE[t]=i,!0)}YE(t){const e=[],i=[t];let s=0;for(;i.length;){const t=i.pop();if("boolean"==typeof t)s+=4;else if("string"==typeof t)s+=2*t.length;else if("number"==typeof t)s+=8;else if("object"==typeof t&&-1===e.indexOf(t)){let s,n;e.push(t);for(const e in t)n=t,s=e,i.push(n[s])}}return s}br(t){const e=this.mE[t];return null==e?null:e.value}remove(t){this.mE[t]=null}},d.ee=class{constructor(t,e){this.rn=t,this.NE=e,this.rn=t,this.CE=this.GE(),this.DE=576e3,this.NE=!!e}bE(t){return null!=this.rn?t+"."+this.rn:t}GE(){let t=0,e=document.location.hostname;const i=e.split("."),s="ab._gd";for(;t<i.length-1&&-1===document.cookie.indexOf(s+"="+s);)t++,e="."+i.slice(-1-t).join("."),document.cookie=s+"="+s+";domain="+e+";";return document.cookie=s+"=;expires="+new Date(0).toUTCString()+";domain="+e+";",e}ne(){const t=new Date;return t.setTime(t.getTime()+60*this.DE*1e3),t.getFullYear()}ME(){const t=(0,r.zu)(c.iu),e=document.cookie.split(";");for(let i=0;i<e.length;i++){let s=e[i];for(;" "===s.charAt(0);)s=s.substring(1);let n=!1;for(let e=0;e<t.length;e++)if(0===s.indexOf(t[e])){n=!0;break}if(n){const t=s.split("=")[0];-1===t.indexOf("."+this.rn)&&this.pE(t)}}}store(t,e){this.ME();const i=new Date;i.setTime(i.getTime()+60*this.DE*1e3);const s="expires="+i.toUTCString(),n="domain="+this.CE;let r;r=this.NE?e:encodeURIComponent(e);const o=this.bE(t)+"="+r+";"+s+";"+n+";path=/";return o.length>=4093?(a.A.info("Storage failure: string is "+o.length+" chars which is too large to store as a cookie."),!1):(document.cookie=o,!0)}br(t){const e=[],i=this.bE(t)+"=",s=document.cookie.split(";");for(let n=0;n<s.length;n++){let r=s[n];for(;" "===r.charAt(0);)r=r.substring(1);if(0===r.indexOf(i))try{let t;t=this.NE?r.substring(i.length,r.length):decodeURIComponent(r.substring(i.length,r.length)),e.push(t)}catch(e){return a.A.info("Storage retrieval failure: "+(0,h.u)(e)),this.remove(t),null}}return e.length>0?e[e.length-1]:null}remove(t){this.pE(this.bE(t))}pE(t){const e=t+"=;expires="+new Date(0).toUTCString();document.cookie=e,document.cookie=e+";path=/";const i=e+";domain="+this.CE;document.cookie=i,document.cookie=i+";path=/"}},d.tc=class{constructor(t,e,i){this.rn=t,this.vE=[],e&&this.vE.push(new d.ee(t)),i&&this.vE.push(new d.rc(t)),this.vE.push(new d.ac)}store(t,e){let i=!0;for(let s=0;s<this.vE.length;s++)i=this.vE[s].store(t,e)&&i;return i}br(t){for(let e=0;e<this.vE.length;e++){const i=this.vE[e].br(t);if(null!=i)return i}return null}remove(t){new d.ee(this.rn).remove(t);for(let e=0;e<this.vE.length;e++)this.vE[e].remove(t)}}},574010:(t,e,i)=>{i.d(e,{A:()=>r});var s=i(988360),n=i(248742);class r{constructor(t,e,i,o,a,l,u){this.text=t,this.backgroundColor=e,this.textColor=i,this.borderColor=o,this.clickAction=a,this.uri=l,this.id=u,this.text=t||"",this.backgroundColor=e||s.A.th.sh,this.textColor=i||s.A.th.ih,this.borderColor=o||this.backgroundColor,this.clickAction=a||s.A.ClickAction.NONE,this.uri=l,null==u&&(u=r.Ji),this.id=u,this.vo=!1,this.Et=new n.A}subscribeToClickedEvent(t){return this.Et.It(t)}removeSubscription(t){this.Et.removeSubscription(t)}removeAllSubscriptions(){this.Et.removeAllSubscriptions()}p(){return!this.vo&&(this.vo=!0,this.Et.Dt(),!0)}static fromJson(t){return new r(t.text,t.bg_color,t.text_color,t.border_color,t.click_action,t.uri,t.id)}}r.Ji=-1},631939:(t,e,i)=>{i.d(e,{B:()=>s});const s=t=>null!==t&&"IFRAME"===t.tagName},639361:(t,e,i)=>{i.d(e,{w:()=>s});const s={CustomEvent:"ce",Pr:"p",_u:"pc",vc:"ca",Ea:"i",qs:"ie",M:"cci",R:"ccic",I:"ccc",F:"ccd",ql:"ss",xl:"se",Oi:"si",Ei:"sc",Gi:"sbc",Cc:"sfe",mo:"iec",Uu:"lr",zu:"uae",O:"ci",$:"cc",Ju:"lcaa",Eu:"lcar",On:"inc",Ln:"add",Rn:"rem",$n:"set",Bn:"ncam",Ku:"sgu",Fr:"ffi"}},665493:(t,e,i)=>{i.d(e,{A:()=>s});class s{constructor(t){this.id=t,this.id=t}Ir(){const t={};return null!=this.browser&&(t.browser=this.browser),null!=this.Ia&&(t.browser_version=this.Ia),null!=this.os&&(t.os_version=this.os),null!=this.resolution&&(t.resolution=this.resolution),null!=this.language&&(t.locale=this.language),null!=this.timeZone&&(t.time_zone=this.timeZone),null!=this.userAgent&&(t.user_agent=this.userAgent),t}}},683535:(t,e,i)=>{i.d(e,{A:()=>C});var s=i(783738),n=i(744371),r=i(842224),o=i(975843),a=i(988360),l=i(574010),u=i(969197),h=i(96746),c=i(360411),d=i(700670),g=i(639361),f=i(527817),p=i(248742),A=i(155355),m=i(793790),v=i(554137),b=i(61299),y=i(168724),w=i(558670),E=i(480769),S=i(935476),_=i(462720);class C{constructor(t,e,i,s){this.qt=t,this.ri=e,this.u=i,this.wt=s,this.qt=t,this.ri=e,this.u=i,this.wt=s,this._e=new p.A,n.Ay.$t(this._e),this.Xe=1e3,this.Ye=6e4,this.Ze=null}Mi(){return this._e}_i(t){return this._e.It(t)}Pi(){return this.Ze}$i(t){this.Ze=t}q(t,e,i,s){const n=new d.A;let a;if(t instanceof r.A)a={trigger_ids:[t.triggerId]};else{if(e===g.w.Ei||t instanceof o.A&&e===g.w.Gi){if(!t.p(s))return f.A.info("This in-app message has already received a click. Ignoring analytics event."),n}else if(e===g.w.Oi&&!t.K())return f.A.info("This in-app message has already received an impression. Ignoring analytics event."),n;a=this.Xi(t)}return null==a?n:(t.messageExtras&&(a.message_extras=t.messageExtras),null!=i&&(a.bid=i),u.A.q(e,a))}Hi(t,e){const i=new d.A;if(!t.p())return f.A.info("This in-app message button has already received a click. Ignoring analytics event."),i;const s=this.Xi(e);return null==s?i:t.id===l.A.Ji?(f.A.info("This in-app message button does not have a tracking id. Not logging event to Braze servers."),i):(null!=t.id&&(s.bid=t.id),u.A.q(g.w.Gi,s))}Ki(t){const e=t.messageFields;return null!=e&&e.is_push_primer||!1}Li(t){if(!(t instanceof a.A))return;const e=t=>{if(!t)return;const e=(0,v.jj)(t);return(0,v.qj)(e)?(0,v.$6)(v.mY.Qi,"In-App Message"):(0,v.dy)(e)&&!b.A.Vi()?(0,v.$6)(v.mY.Wi,"In-App Message"):void 0};if(this.Ki(t)&&!b.A.Vi())return"In-App Message contains a push prompt, but is not eligible for a push prompt. Ignoring.";const i=t.buttons||[];let s;for(const n of i)if(n.clickAction===a.A.ClickAction.URI&&n.uri&&m.nx.test(n.uri)&&(s=e(n.uri),s))return s;return t.clickAction===a.A.ClickAction.URI&&t.uri&&m.nx.test(t.uri)?e(t.uri):void 0}Yi(t,e,i,n){const r=this.qt;if(!r)return;const o=r.Zi(!1,!1),a=r.Js(o);a.template={trigger_id:t.triggerId,trigger_event_type:e},null!=i&&(a.template.data=i.Ir());const l=r.$s(a,y.A.Ps.Mr);r.Xs(a,((r=-1)=>{if(!this.qt)return;const o=(new Date).valueOf();y.A._s(this.u,y.A.Ps.Mr,o),-1!==r&&l.push(["X-Braze-Req-Tokens-Remaining",r.toString()]),s.A.Gs({url:`${this.qt.Hs()}/template/`,data:a,headers:l,L:e=>{if(y.A.Qs(this.u,y.A.Ps.Mr,1),!this.qt.Ks(a,e,l))return void("function"==typeof t.Tr&&t.Tr());if(this.qt.Os(),null==e||null==e.templated_message)return;const i=e.templated_message;if(i.type!==A.A._r.Br)return;const s=(0,h.g)(i.data);if(null==s)return;const n=this.Li(s);if(n)return f.A.error(n),void("function"==typeof t.Tr&&t.Tr());"function"==typeof t.Er&&t.Er(s)},error:s=>{let r=`getting user personalization for message ${t.triggerId}`;if((new Date).valueOf()-t.Gr<t.Nr){y.A.Ys(this.u,y.A.Ps.Mr);const s=Math.min(t.Nr,this.Ye),o=this.Xe;null==n&&(n=o);const a=Math.min(s,(0,c.C)(o,3*n));r+=`. Retrying in ${a} ms`,setTimeout((()=>{this.Yi(t,e,i,a)}),a)}this.qt.Vs(s,r)}})}),y.A.Ps.Mr)}Xi(t){if(null==t.triggerId)return f.A.info("The in-app message has no analytics id. Not logging event to Braze servers."),null;const e={};return null!=t.triggerId&&(e.trigger_ids=[t.triggerId]),e}je(t){return!!this.u&&!(!(t&&t instanceof a.A&&t.constructor!==a.A)||t instanceof r.A)&&this.u.k(w.d.C.Cr,t.Y())}Ue(){if(!this.u)return null;const t=this.u.j(w.d.C.Cr);if(!t)return null;let e;switch(t.type){case a.A.qe.Or:e=E.A.Xr(t);break;case a.A.qe.Hr:case a.A.qe.$e:case a.A.qe.We:e=o.A.Xr(t);break;case a.A.qe.Jr:case a.A.qe.Ve:e=S.A.Xr(t);break;case a.A.qe.Kr:e=_.A.Xr(t)}return e&&this.Lr(),e}Lr(){this.u&&this.u.ti(w.d.C.Cr)}}},686539:(t,e,i)=>{i.d(e,{A:()=>g});var s=i(791490),n=i(505792),r=i(264488),o=i(735738),a=i(410261),l=i(902289),u=i(435071),h=i(944225),c=i(527817),d=i(410911);class g{constructor(t,e){this.type=t,this.data=e,this.type=t,this.data=e}sc(t,e){return g.cc[this.type]===t&&(null==this.data||this.data.Jl(e))}static if(t,e){let i=null;try{i=window.atob(t)}catch(e){return c.A.info("Failed to unencode analytics id "+t+": "+(0,d.u)(e)),!1}return e===i.split("_")[0]}static fromJson(t){const e=t.type;let i=null;switch(e){case g._r.OPEN:case g._r.kt:break;case g._r.Rr:i=a.A.fromJson(t.data);break;case g._r.nc:i=l.A.fromJson(t.data);break;case g._r.vr:i=u.A.fromJson(t.data);break;case g._r.ue:i=s.A.fromJson(t.data);break;case g._r.lc:i=n.A.fromJson(t.data);break;case g._r.Qr:i=o.A.fromJson(t.data)}return new g(e,i)}Y(){return{t:this.type,d:this.data?this.data.Y():null}}static qn(t){let e,i=null;switch(t.t){case g._r.OPEN:case g._r.kt:break;case g._r.Rr:i=new a.A(t.d);break;case g._r.nc:e=t.d||{},i=new l.A(e.id,r.A.qn(e.pf||[]));break;case g._r.vr:i=new u.A(t.d);break;case g._r.ue:i=new s.A(t.d);break;case g._r.lc:e=t.d||{},i=new n.A(e.e,r.A.qn(e.pf||[]));break;case g._r.Qr:i=new o.A(t.d)}return new g(t.t,i)}}g._r={OPEN:"open",Rr:"purchase",nc:"purchase_property",vr:"push_click",ue:"custom_event",lc:"custom_event_property",Qr:"iam_click",kt:"test"},g.cc={},g.cc[g._r.OPEN]=h.A.OPEN,g.cc[g._r.Rr]=h.A.Rr,g.cc[g._r.nc]=h.A.Rr,g.cc[g._r.vr]=h.A.vr,g.cc[g._r.ue]=h.A.ue,g.cc[g._r.lc]=h.A.ue,g.cc[g._r.Qr]=h.A.Qr,g.cc[g._r.kt]=h.A.kt},687109:(t,e,i)=>{i.d(e,{A:()=>s});class s{constructor(t,e){this.database=t,this.vd=e,this.parent="undefined"==typeof window?self:window,this.database=t,this.vd=e}Dd(){if("indexedDB"in this.parent)return this.parent.indexedDB}isSupported(){var t;try{if(null==this.Dd())return!1;{const e=null===(t=this.Dd())||void 0===t?void 0:t.open("Braze IndexedDB Support Test");if(e&&(e.onupgradeneeded=()=>e.result.close(),e.onsuccess=()=>e.result.close()),"undefined"!=typeof window){const t=window,e=t.chrome||t.browser||t.pd;if(e&&e.runtime&&e.runtime.id)return this.vd.info("Not using IndexedDB for storage because we are running inside an extension"),!1}return!0}}catch(t){return this.vd.info("Not using IndexedDB for storage due to following error: "+t),!1}}Bd(t,e){var i;const s=null===(i=this.Dd())||void 0===i?void 0:i.open(this.database.Sd,this.database.VERSION);if(null==s)return"function"==typeof e&&e(),!1;const n=this;return s.onupgradeneeded=t=>{var e;n.vd.info("Upgrading indexedDB "+n.database.Sd+" to v"+n.database.VERSION+"...");const i=null===(e=t.target)||void 0===e?void 0:e.result;for(const s in n.database.ss){const t=s;n.database.ss.hasOwnProperty(s)&&!i.objectStoreNames.contains(n.database.ss[t])&&i.createObjectStore(n.database.ss[t])}},s.onsuccess=i=>{var s;const r=null===(s=i.target)||void 0===s?void 0:s.result;r.onversionchange=()=>{r.close(),"function"==typeof e&&e(),n.vd.error("Needed to close the database unexpectedly because of an upgrade in another tab")},t(r)},s.onerror=t=>{var i;const s=t;return n.vd.info("Could not open indexedDB "+n.database.Sd+" v"+n.database.VERSION+": "+(null===(i=s.target)||void 0===i?void 0:i.errorCode)),"function"==typeof e&&e(),!0},!0}setItem(t,e,i,s,n){if(!this.isSupported())return"function"==typeof n&&n(),!1;const r=this;return this.Bd((o=>{if(!o.objectStoreNames.contains(t))return r.vd.error("Could not store object "+e+" in "+t+" on indexedDB "+r.database.Sd+" - "+t+" is not a valid objectStore"),"function"==typeof n&&n(),void o.close();const a=o.transaction([t],"readwrite");a.oncomplete=()=>o.close();const l=a.objectStore(t).put(i,e);l.onerror=()=>{r.vd.error("Could not store object "+e+" in "+t+" on indexedDB "+r.database.Sd),"function"==typeof n&&n()},l.onsuccess=()=>{"function"==typeof s&&s()}}),n)}getItem(t,e,i){if(!this.isSupported())return!1;const s=this;return this.Bd((n=>{if(!n.objectStoreNames.contains(t))return s.vd.error("Could not retrieve object "+e+" in "+t+" on indexedDB "+s.database.Sd+" - "+t+" is not a valid objectStore"),void n.close();const r=n.transaction([t],"readonly");r.oncomplete=()=>n.close();const o=r.objectStore(t).get(e);o.onerror=()=>{s.vd.error("Could not retrieve object "+e+" in "+t+" on indexedDB "+s.database.Sd)},o.onsuccess=t=>{var e;const s=null===(e=t.target)||void 0===e?void 0:e.result;null!=s&&i(s)}}))}jr(t,e,i){if(!this.isSupported())return"function"==typeof i&&i(),!1;const s=this;return this.Bd((n=>{if(!n.objectStoreNames.contains(t))return s.vd.error("Could not retrieve last record from "+t+" on indexedDB "+s.database.Sd+" - "+t+" is not a valid objectStore"),"function"==typeof i&&i(),void n.close();const r=n.transaction([t],"readonly");r.oncomplete=()=>n.close();const o=r.objectStore(t).openCursor(null,"prev");o.onerror=()=>{s.vd.error("Could not open cursor for "+t+" on indexedDB "+s.database.Sd),"function"==typeof i&&i()},o.onsuccess=t=>{var s;const n=null===(s=t.target)||void 0===s?void 0:s.result;null!=n&&null!=n.value&&null!=n.key?e(n.key,n.value):"function"==typeof i&&i()}}),i)}re(t,e){if(!this.isSupported())return!1;const i=this;return this.Bd((s=>{if(!s.objectStoreNames.contains(t))return i.vd.error("Could not delete record "+e+" from "+t+" on indexedDB "+i.database.Sd+" - "+t+" is not a valid objectStore"),void s.close();const n=s.transaction([t],"readwrite");n.oncomplete=()=>s.close(),n.objectStore(t).delete(e).onerror=()=>{i.vd.error("Could not delete record "+e+" from "+t+" on indexedDB "+i.database.Sd)}}))}Zt(t,e){if(!this.isSupported())return!1;const i=this;return this.Bd((s=>{if(!s.objectStoreNames.contains(t))return i.vd.error("Could not retrieve objects from "+t+" on indexedDB "+i.database.Sd+" - "+t+" is not a valid objectStore"),void s.close();const n=s.transaction([t],"readwrite");n.oncomplete=()=>s.close();const r=n.objectStore(t),o=r.openCursor(),a=[];o.onerror=()=>{a.length>0?(i.vd.info("Cursor closed midway through for "+t+" on indexedDB "+i.database.Sd),e(a)):i.vd.error("Could not open cursor for "+t+" on indexedDB "+i.database.Sd)},o.onsuccess=t=>{var i;const s=null===(i=t.target)||void 0===i?void 0:i.result;null!=s?(null!=s.value&&null!=s.key&&(r.delete(s.key).onsuccess=()=>{a.push(s.value)}),"function"==typeof s.continue&&s.continue()):a.length>0&&e(a)}}))}clearData(){if(!this.isSupported())return!1;const t=[];for(const i in this.database.ss){const e=i;this.database.ss.hasOwnProperty(i)&&this.database.ss[e]!==this.database.ss.ae&&t.push(this.database.ss[e])}const e=this;return this.Bd((function(i){const s=i.transaction(t,"readwrite");s.oncomplete=()=>i.close();for(let n=0;n<t.length;n++){const i=t[n];s.objectStore(i).clear().onerror=function(){e.vd.error("Could not clear "+this.source.name+" on indexedDB "+e.database.Sd)}}s.onerror=function(){e.vd.error("Could not clear object stores on indexedDB "+e.database.Sd)}}))}}s.Yt={Qt:{Sd:"AppboyServiceWorkerAsyncStorage",VERSION:6,ss:{$a:"data",hr:"pushClicks",cu:"pushSubscribed",Cd:"fallbackDevice",ts:"cardUpdates",ae:"optOut",wr:"pendingData",jh:"sdkAuthenticationSignature"},ie:1}}},700670:(t,e,i)=>{i.d(e,{A:()=>s});class s{constructor(t=!1,e=[]){this.L=t,this.ge=e,this.L=t,this.ge=e}P(t){this.L=this.L&&t.L,this.ge.push(...t.ge)}}},701513:(t,e,i)=>{i.d(e,{uD:()=>r});const s=0,n=1;const r={openUri:function(t,e,i){t&&(e||null!=i&&i.metaKey?window.open(t):window.location=t)},fo:function(){return screen.width<=600},co:function(){if("orientation"in window)return 90===Math.abs(window.orientation)||270===window.orientation?n:s;const t=window;if("screen"in t){let e=t.screen.orientation||screen.mozOrientation||screen.msOrientation;return null!=e&&"object"==typeof e&&(e=e.type),"landscape-primary"===e||"landscape-secondary"===e?n:s}return s},Un:function(){return window.location.href}}},714686:(t,e,i)=>{i.d(e,{I:()=>l});var s=i(744371),n=i(373840),r=i(527817),o=i(153759),a=i(793790);function l(t,e){if(!s.Ay.X())return;if(null==t||0===t.length||t!=t)return void r.A.error("changeUser requires a non-empty userId.");if((0,n.N)(t)>o.A.lr)return void r.A.error(`Rejected user id "${t}" because it is longer than ${o.A.lr} bytes.`);if(null!=e&&!(0,a.rK)(e,"set signature for new user","signature"))return;const i=s.Ay.cr();i&&i.changeUser(t.toString(),s.Ay.gr(),e)}},728441:(t,e,i)=>{i.d(e,{CF:()=>o,e0:()=>r,jp:()=>a});var s=i(527817),n=i(410911);const r={dc:null,po:function(t,e=!1,i=!1,s=!1){if(null==t)return!1;e=e||!1,i=i||!1;const n=t.getBoundingClientRect();return null!=n&&(n.top>=0&&n.top<=(window.innerHeight||document.documentElement.clientHeight)||!e)&&(n.left>=0||!s)&&(n.bottom>=0&&n.bottom<=(window.innerHeight||document.documentElement.clientHeight)||!i)&&(n.right<=(window.innerWidth||document.documentElement.clientWidth)||!s)}};function o(){if(null==r.dc){r.dc=!1;try{const t=Object.defineProperty({},"passive",{get:()=>{r.dc=!0}});window.addEventListener("testPassive",(()=>{}),t),window.removeEventListener("testPassive",(()=>{}),t)}catch(t){s.A.error((0,n.u)(t))}}return r.dc}function a(t){if(t.onclick){const e=document.createEvent("MouseEvents");e.initEvent("click",!0,!0),t.onclick.apply(t,[e])}}},735738:(t,e,i)=>{i.d(e,{A:()=>n});var s=i(686539);class n{constructor(t,e){this.Zu=t,this.tf=e,this.Zu=t,this.tf=e}Jl(t){if(null==this.Zu)return!1;const e=s.A.if(t[0],this.Zu);if(!e)return!1;let i=null==this.tf||0===this.tf.length;if(null!=this.tf)for(let s=0;s<this.tf.length;s++)if(this.tf[s]===t[1]){i=!0;break}return e&&i}static fromJson(t){return new n(t?t.id:null,t?t.buttons:null)}Y(){return this.Zu}}},744371:(t,e,i)=>{i.d(e,{Ay:()=>k,lw:()=>C});var s=i(419209),n=i(920121),r=i(524676),o=i(938581),a=i(411918),l=i(750460),u=i(3393),h=i(822998),c=i(499487),d=i(943831),g=i(558670),f=i(41225),p=i(248742),A=i(757742),m=i(416529),v=i(153759),b=i(542912),y=i(701513),w=i(202237),E=i(527817),S=i(307312),_=i(58480);const C={Eo:"allowCrawlerActivity",_o:"baseUrl",Io:"noCookies",Ao:"devicePropertyAllowlist",_a:"disablePushTokenMaintenance",So:"enableLogging",No:"enableSdkAuthentication",Ma:"manageServiceWorkerExternally",Oo:"minimumIntervalBetweenTriggerActionsInSeconds",Po:"sessionTimeoutInSeconds",Ro:"appVersion",Lo:"appVersionNumber",wa:"serviceWorkerLocation",ya:"safariWebsitePushId",zn:"localization",bo:"contentSecurityNonce",Do:"allowUserSuppliedJavascript",jo:"inAppMessageZIndex",ho:"openInAppMessagesInNewTab",tn:"openCardsInNewTab",en:"openNewsFeedCardsInNewTab",Lh:"requireExplicitInAppMessageDismissal",Mo:"doNotLoadFontAwesome",Uo:"deviceId",Bo:"sdkFlavor"};const k=new class{constructor(){this.rn="",this.Wo="",this.Vo=void 0,this.zo=null,this.on=null,this.qt=null,this.zi=null,this.yt=null,this.ri=null,this.u=null,this.wt=null,this.Go="",this.Ko=!1,this.$o=!1,this.qo=new p.A,this.Jo=new p.A,this.options={},this.Yo=[],this.Ho=[],this._e=[],this.Wo="5.3.0"}Xo(t){this.qo.It(t)}Sh(t){this.Jo.It(t)}initialize(t,e){if(this.so())return E.A.info("Braze has already been initialized with an API key."),!0;this.options=e||{};let n=this.nn(C.So);const v=(0,b.y)(y.uD.Un());if(v&&"true"===v.brazeLogging&&(n=!0),E.A.init(n),E.A.info(`Initialization Options: ${JSON.stringify(this.options,null,2)}`),null==t||""===t||"string"!=typeof t)return E.A.error("Braze requires a valid API key to be initialized."),!1;this.rn=t;let w=this.nn(C._o);if(null==w||""===w||"string"!=typeof w)return E.A.error("Braze requires a valid baseUrl to be initialized."),!1;!1===/^https?:/.test(w)&&(w=`https://${w}`);const k=w;if(w=document.createElement("a"),w.href=k,"/"===w.pathname&&(w=`${w}api/v3`),this.Go=w.toString(),r.A.Zo&&!this.nn(C.Eo))return E.A.info("Ignoring activity from crawler bot "+navigator.userAgent),this.$o=!0,!1;const T=this.nn(C.Io)||!1;if(this.u=f.A.Qo(t,T),T&&this.u.Wh(t),new g.A.ee(null,!0).br(g.d.se))return E.A.info("Ignoring all activity due to previous opt out"),this.$o=!0,!1;for(const i of(0,l.HP)(this.options))-1===(0,l.zu)(S.A).indexOf(i)&&E.A.warn(`Ignoring unknown initialization option '${i}'.`);const I=["mparticle","wordpress","tealium"];if(null!=this.nn(C.Bo)){const t=this.nn(C.Bo);-1!==I.indexOf(t)?this.Vo=t:E.A.error("Invalid sdk flavor passed: "+t)}let N=this.nn(S.A.Ao);if(null!=N)if((0,l.cy)(N)){const t=[];for(let e=0;e<N.length;e++)(0,l.BY)(a.A,N[e],"devicePropertyAllowlist contained an invalid value.","DeviceProperties")&&t.push(N[e]);N=t}else E.A.error("devicePropertyAllowlist must be an array. Defaulting to all properties."),N=null;const O=this.nn(C.Uo);if(O){const t=new _.A(O);this.u.uu(g.d.iu.Uo,t)}this.on=new o.A(this.u,N),this.yt=new c.A(this.u),this.wt=new m.A(this.yt,this.u),this.ri=new d.A(this.u,this.wt,this.yt,this.nn(C.Po));const D=new p.A;return this.zo=new s.A(this.u,this.nn(C.No),D),this.$t(D),this.qt=new u.A(this.on,this.u,this.zo,this.wt,this.ri,this.yt,this.rn,this.Go,this.Wo,this.Vo||"",this.nn(C.Ro),this.nn(C.Lo)),this.zi=new h.A(this.rn,this.Go,this.ri,this.on,this.wt,this.yt,this.u,(t=>{if(this.so())for(const e of this.gr())e.Ns(t)}),this.zo,this.qt),this.zi.initialize(),T||this.u.Vh(),E.A.info(`Initialized for the Braze backend at "${this.nn(C._o)}" with API key "${this.rn}".`),A.B.o(),this.yt.ji((()=>{var t;this.Ko&&(null===(t=this.yt)||void 0===t?void 0:t.ci())&&i.me(881874).then((t=>{this.Ko&&(0,t.default)()}))})),this.zi.mr((()=>{var t;this.Ko&&(null===(t=this.yt)||void 0===t?void 0:t.ci())&&i.me(881874).then((t=>{this.Ko&&(0,t.default)(void 0,void 0,!0)}))})),this.qo.Dt(this.options),this.Ko=!0,!0}destroy(t){if(E.A.destroy(),this.so()){this.Jo.Dt(),this.Jo.removeAllSubscriptions();for(const t of this.Yo)t.destroy();this.Yo=[];for(const t of this.Ho)t.clearData(!1);this.Ho=[],this.removeAllSubscriptions(),this._e=[],null!=this.zi&&this.zi.destroy(),this.zi=null,this.zo=null,this.on=null,this.qt=null,this.yt=null,this.ri=null,this.wt=null,this.options={},this.Vo=void 0,this.Ko=!1,this.$o=!1,t&&(this.u=null)}}X(){return!(this.Kh()||!this.so()&&(console.warn(w.xE),1))}ba(){return this.rn}Sr(){return this.zo}Hs(){return this.Go}te(){return this.on}nr(){return this.qt}nn(t){return this.options[t]}gr(){return this.Ho}cr(){return this.zi}ir(){return this.yt}zr(){return this.ri}l(){return this.u}pr(){if(this.wt&&this.zi)return new v.A(this.wt,this.zi)}er(){return this.wt}tr(){return!0===this.nn(C.Do)}g(t){let e=!1;for(const i of this.Yo)i===t&&(e=!0);e||this.Yo.push(t)}ar(t){let e=!1;for(const i of this.Ho)i.constructor===t.constructor&&(e=!0);t instanceof n.A&&!e&&this.Ho.push(t)}$t(t){t instanceof p.A&&this._e.push(t)}removeAllSubscriptions(){if(this.X())for(const t of this._e)t.removeAllSubscriptions()}removeSubscription(t){if(this.X())for(const e of this._e)e.removeSubscription(t)}oe(t){this.$o=t}so(){return this.Ko}Kh(){return this.$o}Ds(){return this.Wo}}},750460:(t,e,i)=>{i.d(e,{$P:()=>a,BY:()=>r,Gv:()=>l,HP:()=>u,cy:()=>o,n4:()=>h,zu:()=>n});var s=i(527817);function n(t){const e=[];let i;for(const s in t)i=s,Object.prototype.hasOwnProperty.call(t,i)&&void 0!==t[i]&&e.push(t[i]);return e}function r(t,e,i,r){const o=n(t);return-1!==o.indexOf(e)||(s.A.error(`${i} Valid values from ${r} are "${o.join('"/"')}".`),!1)}function o(t){return Array.isArray?Array.isArray(t):"[object Array]"===Object.prototype.toString.call(t)}function a(t){return"[object Date]"===Object.prototype.toString.call(t)}function l(t){return"[object Object]"===Object.prototype.toString.call(t)}function u(t){const e=[];for(const i in t)Object.prototype.hasOwnProperty.call(t,i)&&e.push(i);return e}function h(t,e){if(t===e)return 0!==t||1/t==1/e;if(null==t||null==e)return t===e;const i=t.toString();if(i!==e.toString())return!1;switch(i){case"[object RegExp]":case"[object String]":return""+t==""+e;case"[object Number]":return+t!=+t?+e!=+e:0==+t?1/+t==1/e:+t==+e;case"[object Date]":case"[object Boolean]":return+t==+e}const s="[object Array]"===i;if(!s){if("object"!=typeof t||"object"!=typeof e)return!1;const i=t.constructor,s=e.constructor;if(i!==s&&!("function"==typeof i&&i instanceof i&&"function"==typeof s&&s instanceof s)&&"constructor"in t&&"constructor"in e)return!1}const n=[],r=[];let o=n.length;for(;o--;)if(n[o]===t)return r[o]===e;if(n.push(t),r.push(e),s){if(o=t.length,o!==e.length)return!1;for(;o--;)if(!h(t[o],e[o]))return!1}else{const i=u(t);let s;if(o=i.length,u(e).length!==o)return!1;for(;o--;)if(s=i[o],!Object.prototype.hasOwnProperty.call(e,s)||!h(t[s],e[s]))return!1}return n.pop(),r.pop(),!0}},757742:(t,e,i)=>{i.d(e,{B:()=>o});var s=i(919563),n=i(744371),r=i(964893);const o={t:!1,provider:null,rr:()=>(o.o(),o.provider||o.rg(),o.provider),rg:()=>{if(!o.provider){const t=n.Ay.nn(n.lw.Oo);o.provider=new r.A(null!=t?t:30,s.A.m().Mi(),n.Ay.l(),n.Ay.cr(),s.A.m()),n.Ay.ar(o.provider)}},o:()=>{o.t||(o.rg(),n.Ay.g(o),o.t=!0)},destroy:()=>{o.provider=null,o.t=!1}}},783738:(t,e,i)=>{i.d(e,{A:()=>o});var s=i(527817),n=i(506099),r=i(410911);const o={Gs:t=>{let e,i;try{const r=()=>{s.A.error("This browser does not have any supported ajax options!")};let o=!1;if(window.XMLHttpRequest&&(o=!0),!o)return void r();e=new XMLHttpRequest;const a=()=>{"function"==typeof t.error&&t.error(e.status),"function"==typeof t.Ws&&t.Ws(!1)};e.onload=()=>{let i=!1;if(4===e.readyState)if(i=e.status>=200&&e.status<300||304===e.status,i){if("function"==typeof t.L){let s,r;try{s=JSON.parse(e.responseText),r=e.getAllResponseHeaders()}catch(i){const s={error:""===e.responseText?n.A.Zh:n.A.Ra,response:e.responseText};(0,t.L)(s,r)}s&&t.L(s,r)}"function"==typeof t.Ws&&t.Ws(!0)}else a()},e.onerror=()=>{a()},e.ontimeout=()=>{a()},i=JSON.stringify(t.data),e.open("POST",t.url,!0),e.setRequestHeader("Content-type","application/json"),e.setRequestHeader("X-Requested-With","XMLHttpRequest");const l=t.headers||[];for(const t of l)e.setRequestHeader(t[0],t[1]);e.send(i)}catch(t){s.A.error(`Network request error: ${(0,r.u)(t)}`)}}}},791072:(t,e,i)=>{i.d(e,{A:()=>n});var s=i(202237);class n{constructor(t=0,e=[],i=[],n=[],r=null,o=null,a={enabled:!1},l={enabled:!1,refresh_rate_limit:void 0},u={enabled:!0,capacity:s.uy,refill_rate:s.Fn,endpoint_overrides:{}}){this.hl=t,this.gl=e,this.fl=i,this.bl=n,this.Rl=r,this.cl=o,this.ml=a,this.hi=l,this.ol=u,this.hl=t,this.gl=e,this.fl=i,this.bl=n,this.Rl=r,this.cl=o,this.ml=a,this.hi=l,this.ol=u}Y(){return{s:"5.3.0",l:this.hl,e:this.gl,a:this.fl,p:this.bl,m:this.Rl,v:this.cl,c:this.ml,f:this.hi,grl:this.ol}}static qn(t){let e=t.l;return"5.3.0"!==t.s&&(e=0),new n(e,t.e,t.a,t.p,t.m,t.v,t.c,t.f,t.grl)}}},791490:(t,e,i)=>{i.d(e,{A:()=>s});class s{constructor(t){this.Bl=t,this.Bl=t}Jl(t){return null==this.Bl||this.Bl===t[0]}static fromJson(t){return new s(t?t.event_name:null)}Y(){return this.Bl}}},793790:(t,e,i)=>{i.d(e,{B9:()=>E,Dz:()=>f,To:()=>_,Z2:()=>w,ZJ:()=>p,fB:()=>y,nx:()=>g,rK:()=>b,uZ:()=>A,xs:()=>S});var s=i(750460),n=i(373840),r=i(527817),o=i(799521),a=i(554137),l=i(202237);const u=/^[^\x00-\x1F\x22]+$/,h=/[$.]/,c=["$add","$update","$remove","$identifier_key","$identifier_value","$new_object","$time","$google_ad_personalization","$google_ad_user_data"],d=new RegExp(/^.+@.+\..+$/),g=/^brazeActions:\/\/v\d+\//;function f(t,e,i){const s=null!=t&&"string"==typeof t&&(""===t||null!=t.match(u));return s||r.A.error(`Cannot ${e} because ${i} "${t}" is invalid.`),s}function p(t){return null!=t&&t.match(h)&&-1===c.indexOf(t)&&r.A.warn("Custom attribute keys cannot contain '$' or '.'"),f(t,"set custom user attribute","the given key")}function A(t){const e=typeof t;return null==t||"number"===e||"boolean"===e||(0,s.$P)(t)||"string"===e}function m(t,e,i){const n=-1!==i;if(n&&i>50)return r.A.error("Nested attributes cannot be more than 50 levels deep."),!1;const a=n?i+1:-1;if((0,s.cy)(t)&&(0,s.cy)(e)){for(let r=0;r<t.length&&r<e.length;r++)if((0,s.$P)(t[r])&&(e[r]=(0,o.EQ)(t[r])),!m(t[r],e[r],a))return!1}else{if(!(0,s.Gv)(t))return A(t);for(const i of(0,s.HP)(t)){const r=t[i];if(n&&!p(i))return!1;if((0,s.$P)(r)&&(e[i]=(0,o.EQ)(r)),!m(r,e[i],a))return!1}}return!0}function v(t,e,i,n,o){let a;return a=(0,s.Gv)(t)||(0,s.cy)(t)?m(t,e,o?1:-1):A(t),a||r.A.error(`Cannot ${i} because ${n} "${t}" is invalid.`),a}function b(t,e,i,s=!1){const n="string"==typeof t||null===t&&s;return n||r.A.error(`Cannot ${e} because ${i} "${t}" is invalid.`),n}function y(t,e,i,a,u){if(null==t&&(t={}),"object"!=typeof t||(0,s.cy)(t))return r.A.error(`${e} requires that ${i} be an object. Ignoring ${u}.`),[!1,null];let h,c;e===l.KG?(h=76800,c="75KB"):(h=51200,c="50KB");const d=JSON.stringify(t);if((0,n.N)(d)>h)return r.A.error(`Could not ${a} because ${i} was greater than the max size of ${c}.`),[!1,null];let g;try{g=JSON.parse(d)}catch(t){return r.A.error(`Could not ${a} because ${i} did not contain valid JSON.`),[!1,null]}for(const n in t){if(e===l.KG&&!p(n))return[!1,null];if(!f(n,a,`the ${u} property name`))return[!1,null];const i=t[n];if(e===l.KG||null!=i){if((0,s.$P)(i)&&(g[n]=(0,o.EQ)(i)),!v(i,g[n],a,`the ${u} property "${n}"`,e===l.KG))return[!1,null]}else delete t[n],delete g[n]}return[!0,g]}function w(t,e){let i=!1,n=!1;const o=()=>{r.A.error("Custom attribute arrays must be either string arrays or object arrays.")};for(const r of e)if("string"==typeof r){if(n)return o(),[!1,!1];if(!f(r,`set custom user attribute "${t}"`,"the element in the given array"))return[!1,!1];i=!0}else{if(!(0,s.Gv)(r))return o(),[!1,!1];if(i)return o(),[!1,!1];if(!y(r,l.KG,"attribute value",`set custom user attribute "${t}"`,"custom user attribute"))return[!1,!1];n=!0}return[i,n]}function E(t){return"string"==typeof t&&null!=t.toLowerCase().match(d)}function S(t){if(!(a.V.properties.type in t))return!1;switch(t[a.V.properties.type]){case a.V.types.ro:if(a.V.properties.oo in t)return!0;break;case a.V.types.logCustomEvent:case a.V.types.setEmailNotificationSubscriptionType:case a.V.types.setPushNotificationSubscriptionType:case a.V.types.setCustomUserAttribute:case a.V.types.addToSubscriptionGroup:case a.V.types.removeFromSubscriptionGroup:case a.V.types.addToCustomAttributeArray:case a.V.types.removeFromCustomAttributeArray:case a.V.types.no:case a.V.types.ao:if(a.V.properties.eo in t)return!0;break;case a.V.types.requestPushPermission:return!0;default:return!1}return!1}function _(t){let e=!1;return Object.keys(a.V.types).forEach((i=>{a.V.types[i]!==t.toString()||(e=!0)})),e}},799521:(t,e,i)=>{i.d(e,{DA:()=>c,EQ:()=>a,Jd:()=>h,S3:()=>u,UK:()=>n,YX:()=>r,Zo:()=>o,jU:()=>l});var s=i(750460);function n(t,e=!1){let i=t/1e3;return e&&(i=Math.floor(i)),i}function r(t){return 1e3*t}function o(t){if(null==t)return null;const e=parseInt(t.toString());return isNaN(e)?null:new Date(1e3*e)}function a(t){return null!=t&&(0,s.$P)(t)?t.toISOString().replace(/\.[0-9]{3}Z$/,""):t}function l(t){return null==t||""===t?null:new Date(t)}function u(t){return null==t||""===t?(new Date).valueOf():t}function h(t){return((new Date).valueOf()-t.valueOf())/1e3}function c(t){return(t.valueOf()-(new Date).valueOf())/1e3}},822998:(t,e,i)=>{i.d(e,{A:()=>A});var s=i(783738),n=i(499928),r=i(969197),o=i(360411),a=i(700670),l=i(639361),u=i(527817),h=i(687109),c=i(17592),d=i(558670),g=i(248742),f=i(61299),p=i(168724);class A{constructor(t,e,i,s,n,r,o,a,l,u){this.rn=t,this.baseUrl=e,this.ri=i,this.on=s,this.wt=n,this.yt=r,this.u=o,this.wu=a,this.zo=l,this.qt=u,this.rn=t,this.baseUrl=e,this.yu=0,this.fE=o.dE()||0,this.ju=null,this.ri=i,this.on=s,this.wt=n,this.yt=r,this.u=o,this.zo=l,this.qt=u,this.wu=a,this.Su=new g.A,this.$u=null,this.Cu=50,this.Fu=!1}Lu(t,e){return!t&&!e&&this.zo.Gh()>=this.Cu}Mu(t){let e=this.ri.Gl();if(t.length>0){const i=this.wt.getUserId();for(const s of t){const t=!s.userId&&!i||s.userId===i;s.type===l.w.ql&&t&&(e=!0)}}return e}Pu(t=!1,e=!1,i=!0,n,r,a,l=!1,h=!1){i&&this.xu();const c=this.u.AE(),g=this.u.OE();let f=!1;const A=(t,e,l=-1)=>{let u=!1;const h=(new Date).valueOf();p.A._s(this.u,p.A.Ps.$a,h),-1!==l&&e.push(["X-Braze-Req-Tokens-Remaining",l.toString()]),s.A.Gs({url:this.baseUrl+"/data/",data:t,headers:e,L:i=>{null!=t.respond_with&&t.respond_with.triggers&&(this.yu=Math.max(this.yu-1,0)),this.qt.Ks(t,i,e)?(this.zo.Os(),this.yt.al(i),null!=t.respond_with&&t.respond_with.user_id!=this.wt.getUserId()||(null!=t.device&&this.u.k(d.d.C.Ca,t.device),null!=t.sdk_metadata&&(this.u.k(d.d.C.Yh,t.sdk_metadata),this.u.k(d.d.C.Jh,this.ri.Si())),this.wu(i),p.A.Qs(this.u,p.A.Ps.$a,1),"function"==typeof n&&n())):i.auth_error&&(u=!0)},error:()=>{null!=t.respond_with&&t.respond_with.triggers&&(this.yu=Math.max(this.yu-1,0)),this.qt.Qh(t.events,t.attributes),"function"==typeof r&&r()},Ws:t=>{if("function"==typeof a&&a(t),i&&!f){if(t&&!u)this.Iu();else{p.A.Ys(this.u,p.A.Ps.$a);let t=this.ju;(null==t||t<1e3*this.fE)&&(t=1e3*this.fE),this.Iu(Math.min(3e5,(0,o.C)(1e3*this.fE,3*t)))}f=!0}}})},m=this.Mu(c),v=e||m;if(this.Lu(l,m))return void u.A.info("Declining to flush data due to 50 consecutive authentication failures");if(i&&!this.qt.Na(c,g,t,v))return this.Iu(),void("function"==typeof a&&a(!0));const b=this.qt.Xa(t,v,c,g,h);v&&this.yu++;let y=!1;if(b)for(const s of b)this.qt.Xs(s.requestData,(t=>A(s.requestData,s.headers,t)),p.A.Ps.$a,r),y=!0;this.zo.Fh()&&i&&!y?this.Iu():m&&(u.A.info("Invoking new session subscriptions"),this.Su.Dt())}Nu(){return this.yu>0}Iu(t=1e3*this.fE){this.Fu||(this.xu(),this.$u=window.setTimeout((()=>{if(document.hidden){const t="visibilitychange",e=()=>{document.hidden||(document.removeEventListener(t,e,!1),this.Pu())};document.addEventListener(t,e,!1)}else this.Pu()}),t),this.ju=t)}xu(){null!=this.$u&&(clearTimeout(this.$u),this.$u=null)}initialize(){this.Fu=!1,this.Iu()}destroy(){this.Su.removeAllSubscriptions(),this.zo.yh(),this.xu(),this.Fu=!0,this.Pu(void 0,void 0,!1,void 0,void 0,void 0,void 0,!0),this.$u=null}mr(t){return this.Su.It(t)}openSession(){const t=this.ri.Si()!==this.ri.wo();t&&(this.u.cE(d.d.iu.Uo),this.u.cE(d.d.iu.su)),this.Pu(void 0,!1,void 0,(()=>{this.u.ti(d.d.C.vi)})),this.Mn(),t&&i.me(111460).then((t=>{if(this.Fu)return;const e=t.default.m();if(null!=e&&(f.A.isPushPermissionGranted()||f.A.isPushBlocked())){const t=()=>{e.mn()?u.A.info("Push token maintenance is disabled, not refreshing token for backend."):e.subscribe()},i=(e,i)=>{i&&t()},s=()=>{const e=this.u.j(d.d.C.In);(null==e||e)&&t()},n=h.A.Yt.Qt;new h.A(n,u.A).jr(n.ss.cu,i,s)}}))}Ou(){this.u.ti(d.d.C.gi),this.u.ti(d.d.C.ws),this.u.ti(d.d.C.Cr)}changeUser(t,e,i){const s=this.wt.getUserId();if(s!==t){this.ri.yl(),this.Ou(),null!=s&&this.Pu(void 0,!1,void 0,void 0,void 0),this.wt.ou(t),i?this.zo.setSdkAuthenticationSignature(i):this.zo.xh();for(let t=0;t<e.length;t++)e[t].changeUser(null==s);null!=s&&this.u.ti(d.d.C.J),this.u.ti(d.d.C.Ca),this.u.ti(d.d.C.nE),this.u.ti(d.d.C._E),this.openSession(),u.A.info('Changed user to "'+t+'".')}else{let e="Doing nothing.";i&&this.zo.kh()!==i&&(this.zo.setSdkAuthenticationSignature(i),e="Updated SDK authentication signature"),u.A.info(`Current user is already ${t}. ${e}`)}}requestImmediateDataFlush(t){this.xu(),this.ri.wo(),this.Pu(void 0,void 0,void 0,void 0,(()=>{u.A.error("Failed to flush data, request will be retried automatically.")}),t,!0)}requestFeedRefresh(){this.ri.wo(),this.Pu(!0)}$r(t,e){this.ri.wo(),u.A.info("Requesting explicit trigger refresh."),this.Pu(void 0,!0,void 0,t,e)}Cn(t,e){const i=l.w.zu,s={a:t,l:e},n=r.A.q(i,s);return n&&(u.A.info(`Logged alias ${t} with label ${e}`),this.u.k(d.d.C._E,s)),n}Fn(t,e,i){if(this.yt.hu(e))return u.A.info(`Custom Attribute "${e}" is blocklisted, ignoring.`),new a.A;const s={key:e,value:i},n=r.A.q(t,s);if(n){const t="object"==typeof i?JSON.stringify(i,null,2):i;u.A.info(`Logged custom attribute: ${e} with value: ${t}`)}return n}setLastKnownLocation(t,e,i,s,n,o){const a={latitude:e,longitude:i};null!=s&&(a.altitude=s),null!=n&&(a.ll_accuracy=n),null!=o&&(a.alt_accuracy=o);const h=r.A.q(l.w.Uu,a,t||void 0);return h&&u.A.info(`Set user last known location as ${JSON.stringify(a,null,2)}`),h}kr(t,e){const i=this.ri.wo();return new n.A(this.wt.getUserId(),l.w._u,t,i,{cid:e})}Bu(t,e){return new h.A(t,e)}Mn(){const t=h.A.Yt.Qt;this.Bu(t,u.A).setItem(t.ss.$a,1,{baseUrl:this.baseUrl,data:{api_key:this.rn,device_id:this.on.ce().id},userId:this.wt.getUserId(),sdkAuthEnabled:this.zo.Fh()})}yr(t){for(const e of t)if(e.api_key===this.rn)this.qt.Qh(e.events,e.attributes);else{const t=h.A.Yt.Qt;new h.A(t,u.A).setItem(t.ss.wr,c.A.W(),e)}}Gn(t,e,i){if(this.yt.hu(t))return u.A.info(`Custom Attribute "${t}" is blocklisted, ignoring.`),new a.A;let s,n;return null===e&&null===i?(s=l.w.Eu,n={key:t}):(s=l.w.Ju,n={key:t,latitude:e,longitude:i}),r.A.q(s,n)}Hn(t,e){const i={group_id:t,status:e};return r.A.q(l.w.Ku,i)}}},828308:(t,e,i)=>{i.d(e,{z:()=>r});var s=i(744371),n=i(527817);function r(){n.A.info("Destroying Braze instance"),s.Ay.destroy(!0)}},842224:(t,e,i)=>{i.d(e,{A:()=>s});class s{constructor(t,e){this.triggerId=t,this.messageExtras=e,this.triggerId=t,this.messageExtras=e,this.extras={},this.isControl=!0}static fromJson(t){return new s(t.trigger_id,t.message_extras)}}},876367:(t,e,i)=>{i.d(e,{A:()=>n});var s=i(799521);class n{constructor(t,e,i,s,n){this.endpoint=t,this.Vn=e,this.publicKey=i,this.Vl=s,this.cl=n,this.endpoint=t||null,this.Vn=e||null,this.publicKey=i||null,this.Vl=s||null,this.cl=n||null}Y(){return{e:this.endpoint,c:this.Vn,p:this.publicKey,u:this.Vl,v:this.cl}}static qn(t){return new n(t.e,(0,s.jU)(t.c),t.p,t.u,t.v)}}},902289:(t,e,i)=>{i.d(e,{A:()=>n});var s=i(264488);class n{constructor(t,e){this.productId=t,this.Ml=e,this.productId=t,this.Ml=e}Jl(t){if(null==this.productId||null==this.Ml)return!1;const e=t[0],i=t[1];return e===this.productId&&this.Ml.Jl(i)}static fromJson(t){return new n(t?t.product_id:null,t?s.A.fromJson(t.property_filters):null)}Y(){return{id:this.productId,pf:this.Ml?this.Ml.Y():null}}}},905807:(t,e,i)=>{i.d(e,{c:()=>s,u:()=>n});const s={rO:"Chrome",eO:"Edge",oO:"Opera",Bg:"Safari",OO:"Firefox"},n={xg:"Android",io:"iOS",Pg:"Mac",Og:"Windows"}},919563:(t,e,i)=>{i.d(e,{A:()=>o});var s=i(683535),n=i(744371);const r={i:null,t:!1,m:()=>(r.o(),r.i||(r.i=new s.A(n.Ay.nr(),n.Ay.zr(),n.Ay.l(),n.Ay.er())),r.i),o:()=>{r.t||(n.Ay.g(r),r.t=!0)},destroy:()=>{r.i=null,r.t=!1}},o=r},920121:(t,e,i)=>{i.d(e,{A:()=>s});class s{constructor(){}Ns(t){}changeUser(t=!1){}clearData(t=!1){}}},935476:(t,e,i)=>{i.d(e,{A:()=>r});var s=i(96746),n=i(988360);class r extends n.A{constructor(t,e,i,s,r,o,a,l,u,h,c,d,g,f,p,A,m,v,b,y,w,E,S,_,C,k,T,I){super(t,e,void 0,i,s,r,o,a,l=l||n.A.DismissType.MANUAL,u,h,c,d,g,f,p,A,m,v,b,y,w,E,S,_,C=C||n.A.CropType.FIT_CENTER,void 0,k,T,I),this.De=n.A.TextAlignment.CENTER}Y(){return super.Y(r.it)}static Xr(t){return new r(t[n.A.tt.Vr],t[n.A.tt.Wr],t[n.A.tt.bt],t[n.A.tt.Yr],t[n.A.tt.Zr],t[n.A.tt.URI],t[n.A.tt.ea],t[n.A.tt.ra],t[n.A.tt.sa],t[n.A.tt.ta],t[n.A.tt.ot],t[n.A.tt.ia],t[n.A.tt.aa],t[n.A.tt.oa],t[n.A.tt.pa],t[n.A.tt.ma],t[n.A.tt.na],t[n.A.tt.ua],t[n.A.tt.ca],t[n.A.tt.fa],t[n.A.tt.da],t[n.A.tt.la],t[n.A.tt.ga],(0,s.x)(t[n.A.tt.ja]),t[n.A.tt.xa],t[n.A.tt.ha],t[n.A.tt.CSS],t[n.A.tt.va])}}r.it=n.A.qe.Jr},938581:(t,e,i)=>{i.d(e,{A:()=>d});var s=i(524676),n=i(665493),r=i(411918),o=i(58480),a=i(17592),l=i(527817),u=i(558670),h=i(750460),c=i(410911);class d{constructor(t,e){this.u=t,this.ka=e,this.u=t,null==e&&(e=(0,h.zu)(r.A)),this.ka=e}ce(t=!0){let e=this.u.tu(u.d.iu.Uo);null==e&&(e=new o.A(a.A.W()),t&&this.u.uu(u.d.iu.Uo,e));const i=new n.A(e.eu);for(let n=0;n<this.ka.length;n++)switch(this.ka[n]){case r.A.BROWSER:i.browser=s.A.browser;break;case r.A.BROWSER_VERSION:i.Ia=s.A.version;break;case r.A.OS:i.os=this.Ta();break;case r.A.RESOLUTION:i.Da=screen.width+"x"+screen.height;break;case r.A.LANGUAGE:i.language=s.A.language;break;case r.A.TIME_ZONE:i.timeZone=this.Sa(new Date);break;case r.A.USER_AGENT:i.userAgent=s.A.userAgent}return i}Ta(){if(s.A.Oa())return s.A.Oa();const t=this.u.j(u.d.C.Ca);return t&&t.os_version?t.os_version:s.A.Ta()}Sa(t){let e=!1;if("undefined"!=typeof Intl&&"function"==typeof Intl.DateTimeFormat)try{if("function"==typeof Intl.DateTimeFormat().resolvedOptions){const t=Intl.DateTimeFormat().resolvedOptions().timeZone;if(null!=t&&""!==t)return t}}catch(t){l.A.info("Intl.DateTimeFormat threw an error, cannot detect user's time zone:"+(0,c.u)(t)),e=!0}if(e)return"";const i=t.getTimezoneOffset();return this.Fa(i)}Fa(t){const e=Math.trunc(t/60),i=Math.trunc(t%60);let s="GMT";return 0!==t&&(s+=t<0?"+":"-",s+=("00"+Math.abs(e)).slice(-2)+":"+("00"+Math.abs(i)).slice(-2)),s}}},943831:(t,e,i)=>{i.d(e,{A:()=>h});var s=i(558670),n=i(499928),r=i(58480),o=i(799521),a=i(527817),l=i(639361),u=i(17592);class h{constructor(t,e,i,s){this.u=t,this.wt=e,this.yt=i,this.wl=s,this.u=t,this.wt=e,this.yt=i,this.Sl=1e3,(null==s||isNaN(s))&&(s=1800),s<this.Sl/1e3&&(a.A.info("Specified session timeout of "+s+"s is too small, using the minimum session timeout of "+this.Sl/1e3+"s instead."),s=this.Sl/1e3),this.wl=s}jl(t,e){return new n.A(this.wt.getUserId(),l.w.xl,t,e.eu,{d:(0,o.UK)(t-e.Dl)})}Si(){const t=this.u.tu(s.d.iu.El);return null==t?null:t.eu}Gl(){const t=(new Date).valueOf(),e=this.yt.dl(),i=this.u.j(s.d.C.Nl);if(null!=i&&null==e)return!1;let n=!1;return null==i?n=!0:null!=e&&(n=t-i>1e3*e),n&&this.u.k(s.d.C.Nl,t),n}zl(t,e){return null==e||null==e.Hl||!(t-e.Dl<this.Sl)&&e.Hl<t}wo(){const t=(new Date).valueOf(),e=t+1e3*this.wl,i=this.u.tu(s.d.iu.El);if(this.zl(t,i)){let o="Generating session start event with time "+t;if(null!=i){let t=i.Wl;t-i.Dl<this.Sl&&(t=i.Dl+this.Sl),this.u.kl(this.jl(t,i)),o+=" (old session ended "+t+")"}o+=". Will expire "+e.valueOf(),a.A.info(o);const h=new r.A(u.A.W(),e);return this.u.kl(new n.A(this.wt.getUserId(),l.w.ql,t,h.eu)),this.u.uu(s.d.iu.El,h),null==this.u.j(s.d.C.Nl)&&this.u.k(s.d.C.Nl,t),h.eu}if(null!=i)return i.Wl=t,i.Hl=e,this.u.uu(s.d.iu.El,i),i.eu}yl(){const t=this.u.tu(s.d.iu.El);null!=t&&(this.u.Al(s.d.iu.El),this.u.kl(this.jl((new Date).valueOf(),t)))}}},944225:(t,e,i)=>{i.d(e,{A:()=>s});const s={OPEN:"open",Rr:"purchase",vr:"push_click",ue:"custom_event",Qr:"iam_click",kt:"test"}},962961:(t,e,i)=>{i.d(e,{A:()=>r});var s=i(10467),n=i(905807);class r extends s.A{constructor(){if(super(),this.userAgentData=navigator.userAgentData,this.browser=null,this.version=null,this.userAgentData){const t=this.hc();this.browser=t.browser||"Unknown Browser",this.version=t.version||"Unknown Version"}this.OS=null}ef(){return this.browser}rf(){return this.version}Ta(t){if(this.OS)return Promise.resolve(this.OS);const e=e=>{for(let i=0;i<t.length;i++){const s=r.sf(e,t[i]);if(s)return this.OS=s,this.OS}return e};return this.userAgentData.platform?Promise.resolve(e(this.userAgentData.platform)):this.getHighEntropyValues().then((t=>t.platform?e(t.platform):navigator.platform)).catch((()=>navigator.platform))}hc(){const t={},e=this.userAgentData.brands;if(e&&e.length)for(const i of e){const e=this.uc(n.c),s=i.brand.match(e);if(s&&s.length>0){t.browser=s[0],t.version=i.version;break}}return t}uc(t){const e=[];for(const i in t){const s=i;e.push(t[s])}return new RegExp("("+e.join("|")+")","i")}getHighEntropyValues(){return this.userAgentData.getHighEntropyValues?this.userAgentData.getHighEntropyValues(["platform"]):Promise.reject()}}},964893:(t,e,i)=>{i.d(e,{A:()=>d});var s=i(920121),n=i(96746),r=i(499928),o=i(750460),a=i(558670),l=i(357133),u=i(155355),h=i(944225),c=i(527817);class d extends s.A{constructor(t,e,i,s,n){super(),this.tg=t,this.Jt=e,this.u=i,this.zi=s,this.ig=n,this.tg=t,this.Jt=e,this.u=i,this.zi=s,this.ig=n,this.sg=[],this.eg=[],this.hg=null,this.ng={},this.og={},this.triggers=[],this.lg=0,this.ag(),this.gg()}fg(){if(this.u){this.hg=this.u.j(a.d.C.iE)||this.hg,this.ng=this.u.j(a.d.C.EE)||this.ng,this.og=this.u.j(a.d.C.aE)||this.og;for(let t=0;t<this.triggers.length;t++){const e=this.triggers[t];e.id&&null!=this.og[e.id]&&e.ad(this.og[e.id])}}}ag(){if(!this.u)return;this.lg=this.u.j(a.d.C.oE)||0;const t=this.u.j(a.d.C.rE)||[],e=[];for(let i=0;i<t.length;i++)e.push(u.A.qn(t[i]));this.triggers=e,this.fg()}gg(){const t=this,e=function(e,i,s,n,r){return function(){t.cg(e,i,s,n,r)}},i={};for(const n of this.triggers)n.id&&(i[n.id]=n);let s=!1;for(let n=0;n<this.triggers.length;n++){const t=this.triggers[n];if(t.id&&null!=this.ng[t.id]){const n=this.ng[t.id],a=[];for(let s=0;s<n.length;s++){const l=n[s],u=t.ud(l.Gr||0);if(u>0){let s,n;a.push(l),null!=l.ug&&(s=l.ug),null!=l.dg&&r.A.RE(l.dg)&&(n=r.A.qn(l.dg));const h=[];if(l.pg&&(0,o.cy)(l.pg))for(let t=0;t<l.pg.length;t++){const e=i[l.pg[t]];null!=e&&h.push(e)}this.eg.push(window.setTimeout(e(t,l.Gr||0,s,n,h),u))}}this.ng[t.id].length>a.length&&(this.ng[t.id]=a,s=!0,0===this.ng[t.id].length&&delete this.ng[t.id])}}s&&this.u&&this.u.k(a.d.C.EE,this.ng)}mg(){if(!this.u)return;const t=[];for(let e=0;e<this.triggers.length;e++)t.push(this.triggers[e].Y());this.lg=(new Date).valueOf(),this.u.k(a.d.C.rE,t),this.u.k(a.d.C.oE,this.lg)}bg(){this.u&&((this.u.j(a.d.C.oE)||0)>this.lg?this.ag():this.fg())}Ns(t){let e=!1;if(null!=t&&t.triggers){this.ig.Lr(),this.fg();const i={},s={};this.triggers=[];for(let o=0;o<t.triggers.length;o++){const n=u.A.fromJson(t.triggers[o]);if(n){n.id&&null!=this.og[n.id]&&(n.ad(this.og[n.id]),i[n.id]=this.og[n.id]),n.id&&null!=this.ng[n.id]&&(s[n.id]=this.ng[n.id]);for(let t=0;t<n.sd.length;t++)if(n.sd[t].sc(h.A.kt,null)){e=!0;break}this.triggers.push(n)}}(0,o.n4)(this.og,i)||(this.og=i,this.u&&this.u.k(a.d.C.aE,this.og)),(0,o.n4)(this.ng,s)||(this.ng=s,this.u&&this.u.k(a.d.C.EE,this.ng)),this.mg(),e&&(c.A.info("Trigger with test condition found, firing test."),this.fe(h.A.kt)),this.fe(h.A.OPEN);const n=this.sg;let r;this.sg=[];for(let t=0;t<n.length;t++)r=Array.prototype.slice.call(n[t]),this.fe(...r)}}cg(t,e,i,s,r){const o=s=>{this.fg();const n=(new Date).valueOf();t.dd(e)||(!1===navigator.onLine&&t.type===u.A._r.Br&&s.imageUrl?c.A.info(`Not showing ${t.type} trigger action ${t.id} due to offline state.`):t.nd(n)&&this.wg(t,n,i)?0===this.Jt.ic()?c.A.info(`Not displaying trigger ${t.id} because neither automaticallyShowInAppMessages() nor subscribeToInAppMessage() were called.`):(this.Jt.Dt([s]),this.yg(t,n)):c.A.info(`Not displaying trigger ${t.id} because display time fell outside of the acceptable time window.`))},a=()=>{this.fg();const n=r.pop();if(null!=n)if(this.Tg(n,e,i,s,r),n.dd(e)){let t=`Server aborted in-app message display, but the timeout on fallback trigger ${n.id} has already elapsed.`;r.length>0&&(t+=" Continuing to fall back."),c.A.info(t),a()}else{c.A.info(`Server aborted in-app message display. Falling back to lower priority ${n.type} trigger action ${t.id}.`);const o=1e3*n.ed-((new Date).valueOf()-e);o>0?this.eg.push(window.setTimeout((()=>{this.cg(n,e,i,s,r)}),o)):this.cg(n,e,i,s,r)}};let h,d,g;switch(t.type){case u.A._r.Br:if(h=(0,n.g)(t.data),null==h){c.A.error(`Could not parse trigger data for trigger ${t.id}, ignoring.`);break}if(d=this.ig.Li(h),d){c.A.error(d),a();break}o(h);break;case u.A._r.md:if(g=l.A.fromJson(t.data,o,a,e,t.Nr||0),null==g){c.A.error(`Could not parse trigger data for trigger ${t.id}, ignoring.`);break}this.ig.Yi(g,i,s);break;default:c.A.error(`Trigger ${t.id} was of unexpected type ${t.type}, ignoring.`)}}fe(t,e=null,i){if(!(0,o.BY)(h.A,t,"Cannot fire trigger action.","TriggerEvents"))return;if(this.zi&&this.zi.Nu())return c.A.info("Trigger sync is currently in progress, awaiting sync completion before firing trigger event."),void this.sg.push(arguments);this.bg();const s=(new Date).valueOf(),n=s-(this.hg||0);let r=!0,a=!0;const l=[];for(let o=0;o<this.triggers.length;o++){const i=this.triggers[o],n=s+1e3*i.ed;if(i.nd(n)&&(null==i.startTime||i.startTime.valueOf()<=s)&&(null==i.endTime||i.endTime.valueOf()>=s)){let s=!1;for(let n=0;n<i.sd.length;n++)if(i.sd[n].sc(t,e)){s=!0;break}s&&(r=!1,this.wg(i,n,t)&&(a=!1,l.push(i)))}}if(r)return void c.A.info(`Trigger event ${t} did not match any trigger conditions.`);if(a)return void c.A.info(`Ignoring ${t} trigger event because a trigger was displayed ${n/1e3}s ago.`);l.sort(((t,e)=>t.priority-e.priority));const u=l.pop();null!=u&&(c.A.info(`Firing ${u.type} trigger action ${u.id} from trigger event ${t}.`),this.Tg(u,s,t,i,l),0===u.ed?this.cg(u,s,t,i,l):this.eg.push(window.setTimeout((()=>{this.cg(u,s,t,i,l)}),1e3*u.ed)))}changeUser(t=!1){if(this.triggers=[],this.u&&this.u.ti(a.d.C.rE),!t){this.sg=[],this.hg=null,this.og={},this.ng={};for(let t=0;t<this.eg.length;t++)clearTimeout(this.eg[t]);this.eg=[],this.u&&(this.u.ti(a.d.C.iE),this.u.ti(a.d.C.aE),this.u.ti(a.d.C.EE))}}clearData(){this.triggers=[],this.hg=null,this.og={},this.ng={};for(let t=0;t<this.eg.length;t++)clearTimeout(this.eg[t]);this.eg=[]}wg(t,e,i){if(null==this.hg)return!0;if(i===h.A.kt)return c.A.info("Ignoring minimum interval between trigger because it is a test type."),!0;let s=t.hd;return null==s&&(s=this.tg),e-this.hg>=1e3*s}Tg(t,e,i,s,n){this.fg(),t.id&&(this.ng[t.id]=this.ng[t.id]||[]);const r={};let o;r.Gr=e,r.ug=i,null!=s&&(o=s.Y()),r.dg=o;const l=[];for(const a of n)a.id&&l.push(a.id);r.pg=l,t.id&&this.ng[t.id].push(r),this.u&&this.u.k(a.d.C.EE,this.ng)}yg(t,e){this.fg(),t.ad(e),this.hg=e,t.id&&(this.og[t.id]=e),this.u&&(this.u.k(a.d.C.iE,e),this.u.k(a.d.C.aE,this.og))}}},969197:(t,e,i)=>{i.d(e,{A:()=>a});var s=i(527817),n=i(744371),r=i(499928),o=i(700670);const a={q:(t,e,i)=>{var a,l;const u=new o.A,h=n.Ay.zr();if(!h)return s.A.info(`Not logging event with type "${t}" because the current session ID could not be found.`),u;const c=h.wo();return u.ge.push(new r.A(i||(null===(a=n.Ay.er())||void 0===a?void 0:a.getUserId()),t,(new Date).valueOf(),c,e)),u.L=(null===(l=n.Ay.l())||void 0===l?void 0:l.xo(u.ge))||!1,u}}},975843:(t,e,i)=>{i.d(e,{A:()=>n});var s=i(988360);class n extends s.A{constructor(t,e,i,n,r,o,a,l,u,h,c,d){super(t,void 0,void 0,e,i,void 0,void 0,void 0,n=n||s.A.DismissType.MANUAL,r,void 0,void 0,void 0,void 0,void 0,void 0,void 0,void 0,o,a,void 0,void 0,void 0,l,void 0,void 0,void 0,u,h,d),this.messageFields=c,this.messageFields=c}do(){return!1}p(t){if(this.we===s.A.qe.Hr){if(this.vo)return!1;this.vo=!0}return this.Et.Dt(t),!0}Y(){const t=super.Y(n.it);return t[s.A.tt.uo]=this.messageFields,t}static Xr(t){return new n(t[s.A.tt.Vr],t[s.A.tt.bt],t[s.A.tt.Yr],t[s.A.tt.ra],t[s.A.tt.sa],t[s.A.tt.ua],t[s.A.tt.ca],t[s.A.tt.ga],t[s.A.tt.ha],t[s.A.tt.CSS],t[s.A.tt.uo],t[s.A.tt.va])}}n.it=s.A.qe.Hr},988360:(t,e,i)=>{i.d(e,{A:()=>u});var s=i(744371),n=i(524676),r=i(728441),o=i(437629),a=i(248742),l=i(631939);class u{constructor(t,e,i,s,n,r,o,l,h,c,d,g,f,p,A,m,v,b,y,w,E,S,_,C,k,T,I,N,O,D){this.message=t,this.messageAlignment=e,this.slideFrom=i,this.extras=s,this.triggerId=n,this.clickAction=r,this.uri=o,this.openTarget=l,this.dismissType=h,this.duration=c,this.icon=d,this.imageUrl=g,this.imageStyle=f,this.iconColor=p,this.iconBackgroundColor=A,this.backgroundColor=m,this.textColor=v,this.closeButtonColor=b,this.animateIn=y,this.animateOut=w,this.header=E,this.headerAlignment=S,this.headerTextColor=_,this.frameColor=C,this.buttons=k,this.cropType=T,this.orientation=I,this.htmlId=N,this.css=O,this.messageExtras=D,this.message=t,this.messageAlignment=e||u.TextAlignment.CENTER,this.duration=c||5e3,this.slideFrom=i||u.SlideFrom.BOTTOM,this.extras=s||{},this.triggerId=n,this.clickAction=r||u.ClickAction.NONE,this.uri=o,this.openTarget=l||u.OpenTarget.NONE,this.dismissType=h||u.DismissType.AUTO_DISMISS,this.icon=d,this.imageUrl=g,this.imageStyle=f||u.ImageStyle.TOP,this.iconColor=p||u.th.ih,this.iconBackgroundColor=A||u.th.sh,this.backgroundColor=m||u.th.ih,this.textColor=v||u.th.hh,this.closeButtonColor=b||u.th.eh,this.animateIn=y,null==this.animateIn&&(this.animateIn=!0),this.animateOut=w,null==this.animateOut&&(this.animateOut=!0),this.header=E,this.headerAlignment=S||u.TextAlignment.CENTER,this.headerTextColor=_||u.th.hh,this.frameColor=C||u.th.Eh,this.buttons=k||[],this.cropType=T||u.CropType.FIT_CENTER,this.orientation=I,this.htmlId=N,this.css=O,this.isControl=!1,this.messageExtras=D,this.nh=!1,this.Th=!1,this.vo=!1,this.oh=!1,this.Me=null,this.ke=null,this.Et=new a.A,this.rh=new a.A,this.De=u.TextAlignment.CENTER}subscribeToClickedEvent(t){return this.Et.It(t)}subscribeToDismissedEvent(t){return this.rh.It(t)}removeSubscription(t){this.Et.removeSubscription(t),this.rh.removeSubscription(t)}removeAllSubscriptions(){this.Et.removeAllSubscriptions(),this.rh.removeAllSubscriptions()}closeMessage(){this.Ae(this.Me)}ze(){return!0}do(){return this.ze()}xe(){return null!=this.htmlId&&this.htmlId.length>4}Ce(){return this.xe()&&null!=this.css&&this.css.length>0}ve(){if(this.xe()&&this.Ce())return this.htmlId+"-css"}K(){return!this.Th&&(this.Th=!0,!0)}Ur(){return this.Th}p(t){return!this.vo&&(this.vo=!0,this.Et.Dt(),!0)}N(){return!this.oh&&(this.oh=!0,this.rh.Dt(),!0)}hide(t){if(t&&t.parentNode){let e=t.closest(".ab-iam-root");if(null==e&&(e=t),this.ze()&&null!=e.parentNode){const t=e.parentNode.classList;t&&t.contains(u.lh)&&t.remove(u.lh),document.body.removeEventListener("touchmove",u.uh)}e.className=e.className.replace(u.ah,u.Ih)}return this.animateOut||!1}Ae(t,e){if(null==t)return;let i;this.Me=null,i=-1===t.className.indexOf("ab-in-app-message")?t.getElementsByClassName("ab-in-app-message")[0]:t;let s=!1;i&&(s=this.hide(i));const r=document.body;let o;null!=r&&(o=r.scrollTop);const a=()=>{if(t&&t.parentNode){let e=t.closest(".ab-iam-root");null==e&&(e=t),e.parentNode&&e.parentNode.removeChild(e)}const i=this.ve();if(null!=i){const t=document.getElementById(i);t&&t.parentNode&&t.parentNode.removeChild(t)}null!=r&&"Safari"===n.A.browser&&(r.scrollTop=o),e?e():this.N()};s?setTimeout(a,u.Ah):a(),this.ke&&this.ke.focus()}Je(){return document.createTextNode(this.message||"")}Ge(t){let e="";this.message||this.header||!this.ze()||(e="Modal Image"),t.setAttribute("alt",e)}static uh(t){if(t.targetTouches&&t.targetTouches.length>1)return;const e=t.target;e&&e.classList&&e.classList.contains("ab-message-text")&&e.scrollHeight>e.clientHeight||document.querySelector(`.${u.lh}`)&&t.cancelable&&t.preventDefault()}Oh(t){const e=t.parentNode;this.ze()&&null!=e&&this.orientation!==u.Orientation.LANDSCAPE&&(null!=e.classList&&e.classList.add(u.lh),document.body.addEventListener("touchmove",u.uh,!!(0,r.CF)()&&{passive:!1})),t.className+=" "+u.ah}static _h(t){if(t.keyCode===o.c.mh&&!s.Ay.nn(s.lw.Lh)&&document.querySelectorAll(".ab-modal-interactions").length>0){const t=document.getElementsByClassName("ab-html-message");let e=!1;for(const i of t){let t=null;(0,l.B)(i)&&i.contentWindow&&(t=i.contentWindow.document.getElementsByClassName("ab-programmatic-close-button")[0]),null!=t&&((0,r.jp)(t),e=!0)}if(!e){const t=document.querySelectorAll(".ab-modal-interactions > .ab-close-button")[0];null!=t&&(0,r.jp)(t)}}}Nh(){this.nh||s.Ay.nn(s.lw.Lh)||(document.addEventListener("keydown",u._h,!1),s.Ay.Sh((()=>{document.removeEventListener("keydown",u._h)})),this.nh=!0)}Y(t){const e={};return t?(e[u.tt.Vr]=this.message,e[u.tt.Wr]=this.messageAlignment,e[u.tt.Rh]=this.slideFrom,e[u.tt.bt]=this.extras,e[u.tt.Yr]=this.triggerId,e[u.tt.Zr]=this.clickAction,e[u.tt.URI]=this.uri,e[u.tt.ea]=this.openTarget,e[u.tt.ra]=this.dismissType,e[u.tt.sa]=this.duration,e[u.tt.ta]=this.icon,e[u.tt.ot]=this.imageUrl,e[u.tt.ia]=this.imageStyle,e[u.tt.aa]=this.iconColor,e[u.tt.oa]=this.iconBackgroundColor,e[u.tt.pa]=this.backgroundColor,e[u.tt.ma]=this.textColor,e[u.tt.na]=this.closeButtonColor,e[u.tt.ua]=this.animateIn,e[u.tt.ca]=this.animateOut,e[u.tt.fa]=this.header,e[u.tt.da]=this.headerAlignment,e[u.tt.la]=this.headerTextColor,e[u.tt.ga]=this.frameColor,e[u.tt.ja]=this.buttons,e[u.tt.xa]=this.cropType,e[u.tt.za]=this.orientation,e[u.tt.ha]=this.htmlId,e[u.tt.CSS]=this.css,e[u.tt.Z]=t,e[u.tt.va]=this.messageExtras,e):e}}u.th={hh:4281545523,ih:4294967295,sh:4278219733,Mh:4293914607,Dh:4283782485,Eh:3224580915,eh:4288387995},u.Be={Ch:"hd",Le:"ias",dh:"of",Uh:"do",bh:"umt",Ph:"tf",ph:"te"},u.SlideFrom={TOP:"TOP",BOTTOM:"BOTTOM"},u.ClickAction={NEWS_FEED:"NEWS_FEED",URI:"URI",NONE:"NONE"},u.DismissType={AUTO_DISMISS:"AUTO_DISMISS",MANUAL:"SWIPE"},u.OpenTarget={NONE:"NONE",BLANK:"BLANK"},u.ImageStyle={TOP:"TOP",GRAPHIC:"GRAPHIC"},u.Orientation={PORTRAIT:"PORTRAIT",LANDSCAPE:"LANDSCAPE"},u.TextAlignment={START:"START",CENTER:"CENTER",END:"END"},u.CropType={CENTER_CROP:"CENTER_CROP",FIT_CENTER:"FIT_CENTER"},u.qe={Kr:"SLIDEUP",Jr:"MODAL",Ve:"MODAL_STYLED",Or:"FULL",Hr:"WEB_HTML",$e:"HTML",We:"HTML_FULL"},u.Ah=500,u.fh=200,u.ah="ab-show",u.Ih="ab-hide",u.lh="ab-pause-scrolling",u.tt={Vr:"m",Wr:"ma",Rh:"sf",bt:"e",Yr:"ti",Zr:"ca",URI:"u",ea:"oa",ra:"dt",sa:"d",ta:"i",ot:"iu",ia:"is",aa:"ic",oa:"ibc",pa:"bc",ma:"tc",na:"cbc",ua:"ai",ca:"ao",fa:"h",da:"ha",la:"htc",ga:"fc",ja:"b",xa:"ct",za:"o",ha:"hi",CSS:"css",Z:"type",uo:"messageFields",va:"me"}}}]);
//# sourceMappingURL=sourcemaps/70337298840629da.vendor.js.map