(self["webpackChunk_canva_web"] = self["webpackChunk_canva_web"] || []).push([[28411],{

/***/ 811820:
function(_, __, __webpack_require__) {__webpack_require__.n_x = __webpack_require__.n;const __web_req__ = __webpack_require__;__web_req__(905716);__web_req__(764820);__web_req__(369534);__web_req__(431557);__web_req__(817174);__web_req__(514415);__web_req__(672921);__web_req__(464899);__web_req__(249608);__web_req__(495003);__web_req__(417252);__web_req__(910707);__web_req__(829421);__web_req__(172444);__web_req__(764196);__web_req__(408657);__web_req__(700097);__web_req__(482624);__web_req__(873788);__web_req__(723564);__web_req__(912931);__web_req__(971188);__web_req__(587753);__web_req__(755384);__web_req__(183734);self._456c437108d2d2713799e19380be528d = self._456c437108d2d2713799e19380be528d || {};(function(__c) {var Ae=__c.Ae;var pj=__c.pj;var wj=__c.wj;var sj=__c.sj;var Oj=__c.Oj;var etr=__c.etr;var Tt=__c.Tt;var So=__c.So;var kv=__c.kv;var cE=__c.cE;var hPw;var tD=__c.tD;var sr=__c.sr;var cr=__c.cr;var pr=__c.pr;var Uc=__c.Uc;var tC=__c.tC;var id=__c.id;var hd=__c.hd;var Rt=__c.Rt;var dr=__c.dr;var Lt=__c.Lt;var $y=__c.$y;var Pc=__c.Pc;var Sc=__c.Sc;var Qt=__c.Qt;var wp=__c.wp;var Yo=__c.Yo;var Wi=__c.Wi;var Pk=__c.Pk;var TC=__c.TC;var Tc=__c.Tc;var Nm=__c.Nm;var O=__c.O;var eU=__c.eU;var S=__c.S;
var Gu=__c.Gu;var ir=__c.ir;var Xi=__c.Xi;var br=__c.br;var ra=__c.ra;var rv=__c.rv;var Pb=__c.Pb;var sa=__c.sa;var Qb=__c.Qb;var a9f=__c.a9f;var Gw=__c.Gw;var C2h=__c.C2h;var Kz=__c.Kz;var pD=__c.pD;var tB=__c.tB;var Iuh=__c.Iuh;var qD=__c.qD;var Guh=__c.Guh;var Cuh=__c.Cuh;var Euh=__c.Euh;var rPr=__c.rPr;var R=__c.R;var lv=__c.lv;var moe=__c.moe;var rD=__c.rD;var cc=__c.cc;var Jx=__c.Jx;var Na=__c.Na;var M=__c.M;var J=__c.J;var ak=__c.ak;var Q=__c.Q;var Yq=__c.Yq;var $q=__c.$q;var Ut=__c.Ut;
var cz=__c.cz;var m=__c.m;var Wj=__c.Wj;var u=__c.u;var sb=__c.sb;
var zIw,AIw,CIw,DIw,EIw,FIw,GIw,HIw,JIw,IIw,KIw,LIw,MIw,OIw,QIw,RIw,SIw,TIw,NIw,UIw,VIw,WIw,XIw,YIw,ZIw,$Iw,aJw,EJw,FJw,HJw,GJw,IJw,JJw,KJw,LJw,NJw,OJw,PJw,QJw,RJw,SJw,TJw,VJw,WJw,XJw,YJw,$Jw,ZJw,cKw,eKw,fKw,gKw,kKw,lKw,uKw,vKw,wKw,yKw,xKw,zKw,BKw,AKw,CKw,DKw,EKw,FKw,HKw,IKw,JKw,LKw,NKw,OKw,MKw,PKw,TKw,VKw,WKw,XKw,$Kw,aLw,cLw,gLw,hLw,iLw,pLw,eLw,fLw,uLw,vLw,wLw,xLw,yLw,ELw,GLw,HLw,ILw,JLw,KLw,LLw,FLw,MLw,NLw,PLw,QLw,OLw,RLw,SLw,ULw,VLw,WLw,TLw,XLw,YLw,ZLw,$Lw,aMw,fMw,cMw,hMw,iMw,jMw,kMw,lMw,mMw,oMw,
tMw,uMw,vMw,xMw,wMw,AMw,yMw,DMw,EMw,FMw,IMw,HMw,GMw,KMw,JMw,LMw,MMw,OMw,RMw,SMw,YMw,ZMw,wNw,BNw,HNw,INw,KNw,NNw,MNw,LNw,ONw,PNw,ZNw,$Nw,bOw,dOw,fOw,eOw,gOw,kOw,hOw,jOw,BIw,lOw,ALw,rLw,sKw,mOw,nOw,oOw,pOw,qOw,sOw,F_,w_,pKw,H_,C_,PIw;zIw=function(a,b){return __c.Ome(c=>({index:c.index,length:b<0?0:Math.min(c.length,b)}))(a)};AIw=function(a){return(a=a.match(/\w+/g))?a.length:0};CIw=function(a,b){a.P.track(BIw,{MCo:{...b}})};
DIw=async function(a,b){return(await a.NS.ork({userId:a.X.user.id,na:a.X.Ab.brand.id},b)).kM};EIw=function(a,b){return a.Vf?.Mu?new __c.ltr({prompt:b.prompt}):a.IAm(b)};FIw=function(a){return new __c.I2h({characters:`Page ${a}`})};GIw=function(a){return a.map(b=>{if(b.type==="text"&&!b.nT)return b.text.Ya}).filter(sb).join("\n")};HIw=function(a){return a.filter(b=>b.target.type==="TEXT_ELEMENT_TEXT_REGION").sort((b,c)=>b.YC-c.YC).map(b=>b.target).filter(b=>b.F1===0)};
JIw=function(a){var b=a.split(/\n/g);a=[];const c=[];for(const e of b){b=IIw(e.trimStart());switch(b){case "bulleted":case "numbered":var d=e.length-e.trimStart().length;let f=1;if(d>0)if(c.length===0)f=2,c.push({Mk:f,spaces:d});else if(d>c[c.length-1].spaces)f=c[c.length-1].Mk+1,c.push({Mk:f,spaces:d});else for(let g=c.pop();g&&g.spaces>=d;g=c.pop()){if(g.spaces===d){f=g.Mk;c.push(g);break}}else c.splice(0,c.length);d=f;a.push({type:b,text:b==="bulleted"?e.trimStart().replace(/^([-\u2022*])\s?/,
""):e.trimStart().replace(/^[a-z0-9]+[.)]\s?/i,""),Mk:d});break;case "none":c.splice(0,c.length);e.trim().length>0&&(b=a.length>0?a[a.length-1]:void 0,d&&b&&IIw(d)==="none"&&d.trim().length>0?b.text=b.text.concat("\n",e.trim()):a.push({type:"p",text:e.trim()}));break;default:throw new u(b);}d=e}return a};IIw=function(a){return KIw(a)?"bulleted":/^\d+[.)]\s?/.test(a)||/^[a-z]{1,2}[.)]\s?/i.test(a)||/^[ivmcldx]+[.)]\s?/i.test(a)?"numbered":"none"};KIw=function(a){return["-","\u2022","*"].some(b=>a.trimStart().startsWith(b))};
LIw=async function(a,{text:b,A7:c,v5h:d,span:e}){let f=c;if(!d)if(Wj(c))f=a.qc.Baa(__c.mfr,"static-sticky-note",{Xc:"text_generator",span:e});else return a.DBk({text:b,v5h:d,span:e});c=m(f.ed.first(),"Shape must have at least 1 text content");const g=__c.YRc.snapshot(c);c=a.O4d();const {text:h}=__c.Pgi(b,new __c.Moi(a.eH,void 0,c)).transform();w_(()=>{f.ed.set(0,{...g,text:h});a.kd.Wka(f)})};
MIw=function(a,{page:b,hSb:c,group:d}){return a.document.pages.has(b)?d!=null&&d.type==="group"?b.elements.has(d)&&d.pb.has(c):b.elements.has(c):!1};OIw=function(a,b,c){var d=b.hSb,e=b.page;b=b.group;const f=JIw(c);c=a.Ai.xb(e);e=b?c.Me(b).Me(d):c.Me(d);d=new __c.WA(d.text,e,c);m(a.KWa).wrapText(d).Cya(g=>{g.Er();f.forEach((h,k)=>{const {text:l,attributes:n}=NIw(h,k<f.length-1);g.append({text:l,attributes:n})})})};
QIw=function(a){a.nKk=PIw(()=>!!a.uDd&&!a.selection.Ma?.elements?.includes(a.uDd),()=>a.uDd=void 0)};RIw=function(a,b,c){const d=b.hSb;var e=b.page;b=b.group;const f=JIw(c);c=a.Ai.xb(e);e=b?c.Me(b).Me(d):c.Me(d);c=new __c.WA(d.text,e,c);m(a.KWa).wrapText(c).Cya(g=>{g.isEmpty()||g.append({text:"\n\n"});f.forEach((h,k)=>{const {text:l,attributes:n}=NIw(h,k!==f.length-1);g.append({text:l,attributes:n})})});a.uDd=d;QIw(a)};
SIw=function(a){return a.map((b,c)=>{switch(b.type){case "p":return c===a.length-1?b.text+"\n":b.text+"\n\n";case "bulleted":case "numbered":return b.text+"\n";default:throw new u(b);}}).join("")};
TIw=function(a,b,c){for(let d=0;d<c.length;d++){const e=c[d];switch(e.type){case "p":a+=e.text.length+(d===c.length-1?1:2);break;case "bulleted":case "numbered":const f=e.text.length+1;b.Zta({"list-marker":cz(e.type,e.Mk),"list-level":e.Mk,"head-indent":e.Mk*1700},{index:a,length:f});a+=f;break;default:throw new u(e);}}};
NIw=function(a,b=!0){switch(a.type){case "p":return{text:a.text+(b?"\n\n":""),attributes:{Mk:0,TAb:0,Dk:"none"}};case "bulleted":case "numbered":return{text:a.text+(b?"\n":""),attributes:{Dk:cz(a.type,a.Mk),Mk:a.Mk,TAb:a.Mk*1700}};default:throw new u(a);}};UIw=function(a){return x_(__c.C$d,{borderRadius:"legacyLarge",className:y_("EjPeAw usZ96Q",{FSmkcg:a.Fbi}),children:x_(__c.kr,{Tza:a.onClose,preventScroll:"always",children:a.children})})};
VIw=function(){const a=z_(null),b=(c,d)=>{a.current&&(c==="end"&&a.current.setSelectionRange(a.current.value.length,a.current.value.length),a.current.focus(),d?.())};A_(b,[a]);return{Jk:a,ifa:b}};
WIw=function({eB:a,Nza:b,Mga:c,Nz:d}){if(a.state==="error"||a.state==="loaded"&&a.kM.gt>c)return null;switch(a.state){case "loading":return x_("div",{className:"_EdRow",children:x_(Ut,{size:"small",index:1})});case "loaded":switch(c=Math.max(0,a.kM.gt),a.kM.lSb){case 1:return B_($q,{spacing:"0.5u",Fa:"center",children:[d&&x_(Yq,{width:"content",children:x_(d,{})}),x_(Yq,{children:x_(Q,{tagName:"span",size:"xsmall",tone:"tertiary",children:b?x_(ak,{message:J("+sRnLQ",[c]),Kx:"subtle",uf:b}):J("V5hF/g",
[c])})})]});case 2:if(!a.kM.HT)return null;a=J("bn0llw",[c,new Date(a.kM.HT)]);return x_(Q,{size:"xsmall",tone:"tertiary",children:a});default:throw new u(a.kM.lSb);}default:throw new u(a.state);}};XIw=function(a){const b=Math.ceil(a.length/2),c=a.slice(0,b);a=a.slice(b);return[c,a]};YIw=function(a){const b=Math.ceil(a.length/2),c=a.slice(0,b);a=a.slice(b);return[c,a]};
ZIw=function(a){switch(a){case 1:return M("Huch7g");case 6:return M("FVTS7A");case 2:return M("cI/dTQ");case 5:case 4:case 3:return M("VpdZpQ");case void 0:return M("cJQofw");default:throw new u(a);}};
$Iw=function(a,b,c,d){return{next:C_(e=>{switch(e.status){case "in_progress":return c.ob().addEvent("streamed_text_generation"),a.gDf(b,e.text);case "complete":c.ob().addEvent("fetched_text_generation_result");a.oNg(b);c.end();break;case "input_moderation_error":case "output_moderation_error":a.Gtk(b,e.category);c.end("ok",new Map([["error_type",e.status]]));break;case "unsupported_language":a.handleError(b,M("uU+a3g"));c.end("ok",new Map([["error_type",e.status]]));break;case "server_error":a.Xtk(b,
e.endUserMessage);c.end("error",new Map([["error_type",e.status]]));break;default:throw c.end("error"),new u(e);}}),error:()=>{c.end("error")},complete:C_(()=>{d?.()})}};aJw=function(a){return D_(()=>{if(a.Td.Scg)return x_(a.Td.Scg,{})})};__c.bJw=function(a,b){return __c.OA(471,a.Yh?.xm)?()=>Promise.resolve("user_history"):async()=>{await PIw(()=>!!b.nae);return m(b.nae)()}};
__c.CJw=function(a,b,c,d,e,f,g,h,k,l,n,p,q,r,t,v,w,x,y,z,B,C,G,H,K){const L=!x,N=x&&y?y:1,P=new cJw(c,f,p,n,t,w,B,Na(async()=>{const {ZTc:Nd}=z?await __webpack_require__.me(903002).then(()=>__c.xIw):await __webpack_require__.me(410632).then(()=>__c.yIw);return Nd}),x?Na(async()=>{const {pAa:Nd}=await __webpack_require__.me(321829).then(()=>({pAa:__c.wIw}));return Nd}):void 0,!1),T=new dJw(c.u8a,l),V=new eJw(c),W=new fJw(p,C,G,H),{Bc:aa,Rp:ba}=r("none"),da=new gJw(aa,q),la=aJw(v),ja=p.status===Jx.Ak?
()=>p.Rd("editor_magic_write_dialog","intentional"):void 0,oa=()=>K.lF("editor.text_generator.generate_text",{Hb:{name:"editor.text_generator.generate_text"}},Nd=>P.YP(T,W,Nd)),ma=Nd=>P.Rqb(T,Nd),na=()=>P.nNg(T),qa=()=>P.setState(T,"select_voice"),ua=()=>P.bbb(T),za=()=>T.Ez?P.cuk(T):P.bbb(T),va=()=>P.cuk(T,da),xa=()=>P.V5d(T),Ba=()=>P.V5d(T,"replace"),pa=()=>P.V5d(T,"append"),ia=()=>P.PMe(T),wa=Nd=>P.FNg(T,W,Nd),Ca=()=>P.e9m(T),Ha=L?()=>P.INg(T):void 0,Oa=L?async()=>{const Nd=K.wb("editor.text_generator.click_try_example",
{Hb:{name:"editor.text_generator.click_try_example"}});await Ha?.();Nd.qe()}:void 0,Ka=b?()=>b.MU({oU:__c.Fv({source:"aigc",contentId:a,appName:"magic_write"})}):void 0,Ua=Nd=>P.QMe(T,Nd),cb=()=>P.l8m(T),ab=()=>K.lF("editor.text_generator.edit_text",{Hb:{name:"editor.text_generator.edit_text",type:"customisation_instruction"}},Nd=>P.Ysk(T,Nd,"edit_panel")),Ta=()=>{V.F9c(W)},mb=()=>{V.mAd(W,da)},pb=Nd=>{ja?ja():(V.Y5d(W,Nd),P.setState(T,"default"))},xb=async()=>{const Nd=()=>{P.unh(T,!1)};ba.z2f&&
(P.unh(T,!0),await ba.z2f({onClose:Nd,fRf:mb,dba:"magic_write_dialog"}))},nb=()=>{ja?ja():(c.c9i(),P.setState(T,"configure_voice"))},qb=()=>{ja?ja():(c.M9i(),V.x8m(W),P.setState(T,"configure_voice"))},Ob=async()=>{await V.r8m(W,()=>{P.setState(T,"default");V.dispose(W)})},Rb=async()=>{await V.y9m(W,()=>{P.qba(T);V.dispose(W)})},Va=Nd=>{V.i8m(W,Nd)},yb=Nd=>{V.h8m(W,Nd)},Jb=Nd=>{V.j8m(W,Nd)},Nb=()=>{P.qba(T);V.dispose(W)},ub=async Nd=>{await V.gNg(W,Nd)},Yb=()=>{V.tKo(W)},hc=Nd=>P.U7m(T,Nd),jc=()=>
{const Nd=K.wb("editor.text_generator.apply_thisbut",{Hb:{name:"editor.text_generator.apply_thisbut"}});P.D9c(T,Nd,void 0);Nd.isRecording()&&Nd.end()},Ec=()=>{const Nd=K.wb("editor.text_generator.click_retry",{Hb:{name:"editor.text_generator.click_morelikethis"}});P.vNg(T,Nd);Nd.isRecording()&&Nd.end()},Qc=()=>P.I8m(T),bd=()=>P.K8m(T),sc=Nd=>{P.D1a(T,Nd);P.controller.WRa({action:Nd?"this_but_input_opened":"this_but_input_closed"})},dc=()=>{T.pGa&&(P.controller.WRa({action:"text_copied"}),navigator.clipboard.writeText(T.pGa),
cc()&&P.ma.Ib({Db:M("D38LFA")}))},vb=Nd=>{P.wio(T,Nd)},fc=/Mac/.test(navigator.platform)?"apple":"other",wc=()=>{p.Rd("editor_magic_write_dialog","intentional")},yc=Nd=>x_(hJw,{whg:W.fU.voice.id,jZ:W.jZ,kr:da.kr,z4g:nb,b8g:Ta,Z7g:mb,a8g:pb,d7g:ba.z2f?xb:void 0,oa:Nd.oa,Qqh:W.vUe,Nz:la}),Fc=D_(()=>x_(iJw,{text:W.fU.voice.name,wEk:W.fU.Sn!==3})),cd=()=>x_(jJw,{onClick:qb}),wd=D_(()=>x_(kJw,{label:x_(Fc,{}),wgh:Nd=>x_(yc,{oa:Nd}),OWj:W.fU.Sn===3?x_(cd,{}):void 0})),ce=D_(()=>x_(lJw,{disabled:T.Ez,onClose:ua,
mtt:x_(wd,{})})),xe=()=>x_(__c.ld,{title:M("Kha71g"),explanation:x_(Q,{children:x_(__c.Zj,{message:J("JtkU8Q",[__c.tx(W.Av.name)])})}),nH:"critical",buttons:[{children:M("/VS3Mg"),onClick:Ob},{children:M("k1aTfw"),onClick:Yb}]}),Se=D_(()=>{switch(N){case 2:return x_(mJw,{loading:T.ONb,pDe:g.layout===2,pAa:T.pAa,SYb:vb});default:return x_(nJw,{loading:T.ONb,pDe:g.layout===2,pAa:T.pAa,SYb:vb})}}),ad=D_(()=>{if(T.Uid)return x_(Se,{});const Nd=T.state==="customisation"?cb:na;return x_(oJw,{platform:fc,
store:T,Nza:p.status===Jx.Ak?wc:void 0,$i:T.JIj?Nd:void 0,Mga:k,Nz:la})}),se=()=>x_(pJw,{platform:fc,store:T,Nza:p.status===Jx.Ak?wc:void 0,la:g,h5g:Ka,E0a:va,onCopy:ia,Rk:T.Xfe==="default"||T.Xfe==="customisation"?wa:void 0,oQa:xa,C0a:Ba,CRc:pa,V:K}),De=D_(()=>x_(qJw,{platform:fc,Ez:T.Ez,CM:T.CM,gea:T.gea,Iyb:T.qKd,eB:T.u8a.eB,bDe:T.nDe,Nza:p.status===Jx.Ak?wc:void 0,E0a:va,oQa:xa,CRc:pa,C0a:Ba,onCopy:dc,Rk:Ec,D1a:sc,hXe:hc,XYe:jc})),sd=D_(()=>x_(rJw,{platform:fc,Ez:T.Ez,CM:T.CM,gea:T.gea,Iyb:T.qKd,
eB:T.u8a.eB,bDe:T.nDe,Nza:p.status===Jx.Ak?wc:void 0,E0a:va,oQa:xa,CRc:pa,C0a:Ba,onCopy:dc,D1a:sc,hXe:hc,XYe:jc,h5g:Ka})),Ne=D_(Nd=>{const Rd=T.state==="customisation"?cb:na;return x_(sJw,{store:T,BE:Nd.onChange,onSubmit:Nd.onSubmit,onClose:ua,N8g:Oa,p9k:qa,F5g:W.fU.Sn===3?qb:void 0,$i:T.JIj?Rd:void 0,OQa:n,dMh:W.fU.voice.name,Nza:p.status===Jx.Ak?wc:void 0,Mga:k,Nz:la,m7l:T.Uid?Se:void 0})}),Fe=D_(()=>{if(h!=null){var Nd=T.Zv&&__c.Bn.create(T.Zv.pages[0]);if(Nd!=null||T.nQe){var Rd=Nd&&__c.Af({pages:[Nd]}).xb(Nd);
return x_(tJw,{xa:T.nQe,qml:({vd:Sd,Df:Ud})=>Rd&&x_(h,{page:Rd,Df:Ud,vd:Sd})})}}}),Zd=D_(()=>{switch(T.state){case "post-generation":return B?x_(uJw,{Ez:T.Ez,Aud:T.Zob?.Pha||"",$S:T.e0+1,sJa:T.sJa,FUa:T.Zob?.prompt||"",gea:T.gea,mBe:T.Zob?.error,onClose:ua,Fb:Ca,oQa:xa,Rk:Ec,mXe:Qc,nXe:bd,D1a:sc,D9c:T.gea?jc:void 0,sb:sd,Zv:x_(Fe,{})}):x_(vJw,{oQa:xa,Fb:Ca,onClose:ua,store:T,la:g,sb:se,Zv:x_(Fe,{})});case "customisation":return x_(Ne,{onChange:Ua,onSubmit:ab});case "select_voice":return x_(wJw,{Fb:Nb,
onClose:ua,children:x_(hJw,{whg:W.fU.voice.id,jZ:W.jZ,kr:da.kr,z4g:nb,b8g:Ta,Z7g:mb,a8g:pb,d7g:xb,oa:Nb,Qqh:W.vUe,Nz:la})});case "configure_voice":return x_(xJw,{store:W,Ws:g.layout===2,onClose:ua,SCi:Jb,zGd:yb,Fb:Nb,RCi:Va,Pvc:ub,VDi:Yb,nwc:Rb,fFh:xe});default:return x_(Ne,{onChange:ma,onSubmit:oa})}}),Kd=D_(()=>{switch(T.state){case "post-generation":return B?x_(yJw,{Ez:T.Ez,Aud:T.pGa||"",$S:T.e0+1,sJa:T.sJa,FUa:T.Zob?.prompt||"",mBe:T.Joc,onClose:ua,Fb:Ca,oQa:xa,mXe:Qc,nXe:bd,D9c:T.gea?jc:void 0,
h5g:Ka,sb:De,Zv:x_(Fe,{})}):x_(vJw,{oQa:xa,Fb:Ca,onClose:ua,store:T,la:g,sb:se,Zv:x_(Fe,{})});case "customisation":return x_(zJw,{VQ:T.FTa,chb:T.chb,$yb:T.mIm,onChange:Ua,onSubmit:ab});case "configure_voice":return x_(xJw,{store:W,Ws:g.layout===2,onClose:ua,SCi:Jb,zGd:yb,Fb:Nb,RCi:Va,Pvc:ub,VDi:Yb,nwc:Rb,fFh:xe});default:return x_(AJw,{store:T,BE:ma,onSubmit:oa,N8g:Ha,Ge:ce,sb:ad,OQa:n,V:K})}});f=D_(()=>x_(d.FJa,{open:T.isOpen,yca:!0,height:{EUb:"full"},oa:za,children:x_(BJw,{children:x_(Zd,{})})}));
l=D_(()=>x_(UIw,{onClose:za,Fbi:T.state==="customisation",children:x_(Kd,{})}));return{L:P,store:T,j3f:V,k3f:W,XXc:da,dFf:(Nd,Rd)=>{switch(Rd.state){case "default":case "customisation":P.zpo(T,Nd,Rd.CM)}},m8m:Nd=>P.c9m(T,Nd),mYc:({location:Nd,CM:Rd,state:Sd})=>{switch(Sd){case "configure_voice":c.c9i({location:Nd});break;default:PIw(()=>c.u8a.eB.state!=="loading",()=>{v.Td.qQk?.();e.track(rD,{action:"shown",source:"editor",location:Nd,gt:c.u8a.eB.state==="loaded"?c.u8a.eB.kM.gt:void 0,vO:Rd?"selection":
void 0})})}},Yga:f,Dialog:l}};EJw=function(a){if(!a.open)return null;const b=a.s5d(),c=a.P8c();a=x_(__c.nB,{nG:a.GRc,children:a.children});return x_(E_,{children:b&&c?x_(DJw,{zul:b,k8:c,children:a}):x_("div",{className:"EN7oqA",children:x_("div",{className:"aQoe1A",children:a})})})};
FJw=function(a,b,c,d,e,f,g,h,k,l,n,p,q,r,t,v,w,x,y,z,B,C,G){const H=C_(({location:oa,CM:ma,state:na})=>{d.close();aa.xTe(ba);da.A$d(la,ja);aa.oG(ba);aa.setState(ba,na);c.nKk&&c.nKk();c.uDd=void 0;c.nKk=void 0;W({location:oa,CM:ma,state:na})}),K=C_(()=>{da.dispose(la);aa.hE(ba);e.track(rD,{action:"closed",source:"editor"})}),L=()=>{if(g.uh)return g.ey()},{Dialog:N,Yga:P,dFf:T,m8m:V,mYc:W,L:aa,store:ba,j3f:da,k3f:la,XXc:ja}=__c.CJw(a,b,c,d,e,K,f,void 0,k,l,n,p,q,r,t,v,w,!1,void 0,x,y,z,B,C,G);return{show:H,
dFf:T,store:ba,L:aa,k3f:la,XXc:ja,j3f:da,Overlay:()=>{switch(f.layout){case 1:return x_(EJw,{GRc:V,open:ba.isOpen,s5d:h,P8c:L,children:x_(N,{})});case 2:return x_(P,{});default:throw new u(f.layout);}}}};HJw=function(a){return a.map(GJw).join("\n").trimEnd()};GJw=function(a){switch(a.type){case "text":return IJw(a.text);case "shape":return Wj(a)?(a=a.ed.first())?IJw(a.text):"":a.ed.reduce((b,c)=>b.concat(IJw(c.text),"\n"),"");default:throw new u(a);}};
IJw=function(a){let b="",c=[],d=[];JJw(a).forEach(e=>{var f=e.nja["list-level"],g=e.nja["list-marker"];if(f&&g&&f>0&&g!=="none"){for(;f>c.length;)c.unshift(0);for(;f<c.length;)c.shift();for(;d.length<f;)d.push(d[d.length-1]??0);for(;d.length>f;)d.pop();a:switch(g){case "disc":case "circle":case "square":f="- ";break a;case "decimal":case "lower-alpha":case "lower-roman":f=`${c[0]+1}. `;break a;default:throw new u(g);}g=" ".repeat(d[d.length-1]??0);b+=g+f;c[0]+=1;d.push((d[d.length-1]??0)+f.length)}else c.length>
0&&(b+="\n",c=[],d=[]);b+=e.Xb});return b};JJw=function(a){const b=[];let c="";a.TSa.forEach(d=>{d.Ya.split(/(\n)/g).forEach(e=>{c+=e;e==="\n"&&(b.push({Xb:c,nja:__c.Be.pick("block",__c.he(__c.Be,d.attributes))}),c="")})});return b};KJw=function(a){PIw(()=>!!a.T9d&&!a.selection.Ma?.elements?.includes(a.T9d),()=>{a.T9d=void 0})};LJw=function(a){return a.type==="shape"&&!a.ed.empty||a.type==="text"&&!a.nT||a.type==="line"};
NJw=function(a){const b=Na(async()=>{const {rTj:d}=await __webpack_require__.me(423240).then(()=>({rTj:__c.aTi}));return await d({Rj:a.Rj,la:a.la,X:a.X,Ra:a.Ra,H9g:C_(e=>{const f=C_(()=>{a.Kc.w6b=void 0});a.Kc.w6b=()=>x_(e,{onClose:f})})})},{Zva:!0}),c=new MJw(a.X,a.viewport,a.Pa,a.selection,a.qc,a.kd,a.Wc,a.Wr,a.P,a.eH,a.Ra,async()=>(await b())?.());w_(()=>{c.KLj()});return{osb:c,PHb:D_(()=>c.eBh?null:x_(__c.Nu,{text:M("Z94whg"),tone:"assist"}))}};
OJw=async function(a,b){await a.IZe({location:"floating_toolbar"});a.L.Wmh(a.store,!0);a.L.apo(a.store,b);a.L.gDf(a.store,"")};PJw=async function(a,b,c){const d=await DIw(a.controller,{va:c});d.gt===0&&w_(()=>{b.dm=!1;switch(d.lSb){case 1:switch(a.u_.status){case Jx.Ak:a.u_.Rd(a.KFp,"paywall");break;default:a.showError(b,J("V5hF/g",[0]))}break;case 2:if(d.HT!=null){var e=a.showError;var f=J("bn0llw",[0,new Date(d.HT)]);e.call(a,b,f)}else a.uke(b);break;default:throw new u(d.lSb);}});return d.gt};
QJw=function(a){var b;(b=a.type==="shape"&&!a.ed.first()?.text.isEmpty)||(b=Wj(a)&&!__c.Xj(a).Suc.text.isEmpty);return b};RJw=async function(a,b,c){const d=m(b.JWb);if(a.Ac.nS(d.dh))a.ma.Ib({Db:M("sZmqxA"),group:moe});else if(a=await a.init({store:b,span:c}))return{selection:d,gt:a}};SJw=async function(a,b,c){const d=m(a.controller.Mu);if(a.Ac.nS(d.uBl))a.ma.Ib({Db:M("sZmqxA"),group:moe});else if(a=await a.init({store:b,span:c}))return{Mu:d,gt:a}};
TJw=async function(a,b,c){const d=m(a.osb,"MagicSummaryPresenter is not initialized"),e=m(d.JWb,"Selection cannot be used with Magic Summary.");if(a.Ac.nS(e.dh))a.ma.Ib({Db:M("sZmqxA"),group:moe});else if(a=await a.init({store:b,span:c,cvq:!0}))return{selection:e,gt:a,osb:d}};
VJw=async function(a,{store:b,span:c,location:d}){const e=await SJw(a,b,c);if(e){var f=e.Mu,g={location:d,gt:e.gt,vO:"selection"};a.controller.D9("TABLE_COLUMN",g);var h=new __c.ktr({prompt:"fill this automatically",Mu:f.YEa,DE:f.DE});return new Promise(k=>{k=a.controller.kfa(h).subscribe(a.observer(b,UJw,c,k));a.KR?.KSa(M("deDRwA"),h,g,k)})}c?.abort()};
WJw=async function(a,{store:b,span:c,location:d}){const e=await SJw(a,b,c);if(e){var f=e.Mu,g={location:d,gt:e.gt,vO:"selection"};a.controller.D9("SHORTEN_TABLE_COLUMN",g);var h=new __c.vtr({Mu:f.YEa,DE:f.DE});return new Promise(k=>{k=a.controller.kfa(h).subscribe(a.observer(b,UJw,c,k));a.KR?.KSa(M("Kdi2Qw"),h,g,k)})}c?.abort()};
XJw=async function(a,{store:b,span:c,location:d}){const e=await SJw(a,b,c);if(e){var f=e.Mu,g={location:d,gt:e.gt,vO:"selection"};a.controller.D9("REWRITE_TABLE_COLUMN",g);var h=new __c.utr({Mu:f.YEa,DE:f.DE});return new Promise(k=>{k=a.controller.kfa(h).subscribe(a.observer(b,UJw,c,k));a.KR?.KSa(M("lqWfBQ"),h,g,k)})}c?.abort()};
YJw=function(a){const b=a.JMb;return x_(a.yi,{className:"WFpZ4Q",icon:__c.vuh,zh:b?"icon":"icon-and-label",pressed:a.open,disabled:a.EVa===2,onClick:a.onClick,xa:a.loading,tooltip:b?M("c6DhJA"):void 0,children:M("c6DhJA")})};
$Jw=function(a){var b=a.usage,c=a.Nz;switch(b.state){case "error":return null;case "loading":return a.P6a?x_(ZJw,{end:x_(c,{}),children:x_(Ut,{size:"small"})}):null;case "loaded":if(b.kM.gt>a.Mga)return null;b=x_(Q,{tagName:"span",size:"small",weight:"bold",tone:"tertiary",children:J("V5hF/g",[b.kM.gt])});c=x_(c,{});return a.P6a?x_(lv,{onClick:a.P6a,end:c,children:b}):x_(ZJw,{end:c,children:b});default:throw new u(b);}};
ZJw=function(a){return x_(R,{tagName:"li",role:"none",Lb:"2u",Pc:"1u",children:B_($q,{tagName:"span",spacing:"1u",Fa:"center",children:[x_(Yq,{tagName:"span",children:a.children}),x_(Yq,{tagName:"span",width:"content",children:a.end})]})})};
cKw=function({ida:a,store:b,L:c,P6a:d,Nz:e,Mga:f,V:g}){const h=g.wb("editor.text_generator.edit_text",{Hb:{name:"editor.text_generator.edit_text",attrs:new Map([["location","generator_menu"]])}}),k=new aKw(b,c,h),l=g.wb("editor.text_generator.toggle_floating_toolbar_menu",{Hb:{name:"editor.text_generator.toggle_floating_toolbar_menu",type:"open"}});a.sb=D_(({oa:n})=>{A_(()=>void k.refresh(l),[]);const p=bKw(()=>{d?.();n()},[n]);return x_($Jw,{usage:k.eXl,Nz:e,Mga:f,P6a:p})});return{U$f:k}};
eKw=function({ida:a,YWc:b,xa:c,V:d,JYe:e,oHd:f,Qdd:g,KYe:h,QYe:k,PYe:l,OYe:n,XWc:p,owc:q,mHd:r,RUe:t,NIp:v,store:w,L:x,P6a:y,Nz:z,Mga:B}){var C=(G,H)=>async(...K)=>{var L=await t();if(L!=="never"&&L!=="recently"){L=d.wb("editor.text_generator.edit_text",{Hb:{name:"editor.text_generator.edit_text",type:H,attrs:new Map([["location","generator_menu"]])}});try{await G(L,...K),L.qe()}catch{L.end("error")}}};e=C(e,"expand");f=C(f,"summarize");g=C(g,"rewrite");k=C(k,"rephrase_fun");l=C(l,"rephrase_formal");
n=C(n,"rephrase_fantastical");h=C(h,"fix_spelling");q=C(q,"create_summary");a.items.bij={key:"CreateSummary",type:"single",label:M("h21PXA"),Icon:rPr,onClick:q,xa:c,Sd:p};p={type:"single",label:M("smevxA"),Icon:Euh,onClick:e,xa:c,Sd:b};q={type:"single",label:M("Kdi2Qw"),Icon:Cuh,onClick:f,xa:c,Sd:b};C={type:"single",label:M("lqWfBQ"),Icon:Guh,onClick:g,xa:c,Sd:b};e={type:"single",label:M("O5RcRg"),Icon:qD,onClick:k,xa:c,Sd:b};f={type:"single",label:M("1dppbg"),Icon:Iuh,onClick:l,xa:c,Sd:b};g={type:"single",
label:M("iMJNJQ"),Icon:tB,onClick:n,xa:c,Sd:b};k={type:"menu",label:M("yCQBWg"),Icon:__c.HEi,xa:c,pa:({oa:G})=>x_(v,{oa:G,We:"fill"}),Sd:b};h={type:"single",label:M("P03bvQ"),Icon:dKw,onClick:h,xa:c,Sd:b};b=[{type:"single",label:M("Qb4YPw"),Icon:pD,onClick:async()=>{await t()!=="never"&&await r()},xa:c,Sd:b},C,h,p,q,e,f,g,k];a.items.hsj={key:"TextGeneratorItem1",...b[0]};a.items.isj={key:"TextGeneratorItem2",...b[1]};a.items.jsj={key:"TextGeneratorItem3",...b[2]};a.items.ksj={key:"TextGeneratorItem4",
...b[3]};a.items.lsj={key:"TextGeneratorItem5",...b[4]};a.items.msj={key:"TextGeneratorItem6",...b[5]};a.items.nsj={key:"TextGeneratorItem7",...b[6]};a.items.osj={key:"TextGeneratorItem8",...b[7]};a.items.psj={key:"TextGeneratorItem9",...b[8]};({U$f:a}=cKw({ida:a,store:w,L:x,P6a:y,Nz:z,Mga:B,V:d}));return{U$f:a}};
fKw=function({YWc:a,XWc:b,djd:c,JYe:d,oHd:e,owc:f,Qdd:g,QYe:h,PYe:k,OYe:l,KYe:n,mHd:p,tGd:q,uGd:r}){const t=[];if(!a)return f?[{label:M("CN1sag"),options:[{label:M("V/YGCQ"),Icon:rPr,onClick:f}]}]:[];t.push({label:M("CN1sag"),options:[{label:M("ke+QQw"),Icon:Euh,onClick:d},{label:M("gAfhgg"),Icon:Cuh,onClick:e},{label:M("6fSbqw"),Icon:Guh,onClick:g},{label:M("P03bvQ"),Icon:dKw,onClick:n}].concat(b&&f?[{label:M("V/YGCQ"),Icon:rPr,onClick:f}]:[])});a=[];q&&a.push({label:M("1HFmHQ"),Icon:Kz,onClick:q});
c.length>0&&r&&(c=c.map(v=>({label:v.name,Icon:pD,onClick:()=>r(v.id)})),a.push(...c));a.length>0&&t.push({label:M("C34Qrw"),options:a});h=[{label:M("KSGCMA"),Icon:qD,onClick:h},{label:M("IlZ7Xw"),Icon:Iuh,onClick:k},{label:M("hy8qxg"),Icon:tB,onClick:l}];p&&h.push({label:M("Iut7bQ"),Icon:pD,onClick:p});t.push({label:M("yCQBWg"),options:h});return t};
gKw=function({usage:a,Nz:b,Nza:c}){switch(a.state){case "none":return null;case "loading":return x_(Ut,{size:"small"});case "loaded":return B_($q,{spacing:"0.5u",Fa:"center",children:[c&&x_(Yq,{width:"content",children:x_(b,{})}),x_(Yq,{children:x_(Q,{tagName:"span",size:"small",weight:"bold",tone:"tertiary",children:c?x_(ak,{message:J("+sRnLQ",[a.gt]),Kx:"subtle",uf:c}):J("V5hF/g",[a.gt])})})]});default:throw new u(a);}};
kKw=function({V:a,usage:b,Nz:c,cid:d,JYe:e,oHd:f,owc:g,Qdd:h,KYe:k,QYe:l,PYe:n,OYe:p,mHd:q,Nza:r,tGd:t,uGd:v,RUe:w}){const x=(aa,ba)=>async(...da)=>{var la=await w();if(la!=="never"&&la!=="recently"){la=a.wb("editor.text_generator.edit_text",{Hb:{name:"editor.text_generator.edit_text",type:ba,attrs:new Map([["location","sidebar"]])}});try{await aa(la,...da),la.qe()}catch{la.end("error")}}},y=t?x(t,"apply_brand_voice"):void 0,z=v?x(v,"apply_signature_voice"):void 0,B=x(e,"expand"),C=x(f,"summarize"),
G=g?x(g,"create_summary"):void 0,H=x(h,"rewrite"),K=x(l,"rephrase_fun"),L=x(n,"rephrase_formal"),N=x(p,"rephrase_fantastical"),P=x(k,"fix_spelling"),T=q?async()=>{await w()!=="never"&&await q()}:void 0,V=hKw(),W=aa=>V(aa)>83.8;return{bCp:aa=>x_(iKw,{loading:aa.loading,XWc:aa.XWc,YWc:aa.YWc,NBb:aa.NBb,Qdd:H,oHd:C,owc:G,cid:d,IWg:W}),$Bp:aa=>x_(jKw,{loading:aa.loading,usage:b,YWc:aa.YWc,XWc:aa.XWc,djd:aa.djd,NBb:aa.NBb,Nz:c,cid:d,JYe:B,oHd:C,owc:G,Qdd:H,KYe:P,QYe:K,PYe:L,OYe:N,mHd:T,Nza:r,tGd:y,uGd:z,
IWg:W})}};
__c.rKw=function(a,b,c,d,e,f,g,h,k,l,n,p,q,r,t,v,w,x,y,z){const B=async aa=>{switch(aa.action){case 1:await e.H9m({store:c,...aa});break;case 0:await e.z8m({store:c,...aa});break;case 2:await e.v9m({store:c,...aa});break;case 3:await e.p9m({store:c,...aa});break;case 4:await e.o9m({store:c,...aa});break;case 5:await e.n9m({store:c,...aa});break;case 6:await e.D8m({store:c,...aa});break;default:throw new u(aa);}},C=lKw(B,"floating_toolbar"),G=aa=>e.qNg({store:c,...aa}),H=aa=>e.XCf({store:c,XXc:n,...aa}),
K=async()=>{await v("default")},L=async()=>{T?T():await v("customisation")},N=async()=>{T?T():await w()},P=aJw(k),T=l.status===Jx.Ak?()=>l.Rd("editor_magic_write_toolbar","intentional"):void 0;k=D_(aa=>c.lqh?void 0:x_(mKw,{...aa,...C,xEl:c.cKa,wEl:c.B8b,tGd:n.kr?ba=>H({span:ba,location:"floating_toolbar"}):void 0,owc:c.B8b?ba=>G({span:ba,location:"floating_toolbar"}):void 0,mHd:L,uGd:(ba,da,la)=>e.T5d({store:c,span:ba,W1i:da,hGl:la,location:"floating_toolbar"}),y4g:d.dng?N:void 0,djd:d.jZ,usage:e.eB,
Mga:t,Nz:P,PHb:z,P6a:T,RUe:x,V:y}));const V={Button:D_(aa=>x_(YJw,{...aa,onClick:c.lqh?K:async()=>{const ba=y.wb("editor.text_generator.toggle_floating_toolbar_menu",{Hb:{name:"editor.text_generator.toggle_floating_toolbar_menu",type:aa.open?"close":"open"}});aa.onClick?.();aa.open||(e.Klm(c),await Promise.all([e.Ovn(c,ba),f.A$d(d,n)]));ba.qe()},loading:r?r.Ez:c.dm,EVa:h.status,JMb:c.xqh&&q||g.layout===2})),pa:k,vv:{sg:nKw}};a.plugins.a8=()=>({Sd:()=>p.mode>=30&&c.H1i,...V});({U$f:b}=eKw({ida:b,...lKw(B,
"generator_menu"),YWc:()=>h.status===1&&c.cKa,xa:()=>r?r.Ez:c.dm,V:y,mHd:L,RUe:x,store:c,L:e,P6a:T,Nz:P,XWc:()=>h.status===1&&c.B8b,owc:aa=>G({span:aa,location:"generator_menu"}),Mga:t,NIp:D_(aa=>x_(oKw,{...aa,tGd:n.kr?ba=>H({span:ba,location:"generator_menu"}):void 0,uGd:(ba,da,la)=>e.T5d({store:c,span:ba,W1i:da,hGl:la,location:"generator_menu"}),y4g:N,djd:d.jZ,Nz:P,V:y,RUe:x}))}));const W=lKw(B,"edit_panel");pKw(()=>p.mode===40&&c.y0i&&{XWc:c.B8b,YWc:c.cKa},aa=>{if(aa&&(aa.XWc||aa.YWc)){const {bCp:ba,
$Bp:da}=kKw({V:y,usage:c.usage,...W,cid:la=>e.cid(c,la),Nz:P,owc:G?la=>G({span:la,location:"edit_panel"}):void 0,mHd:L,Nza:T,tGd:n.kr?la=>H({span:la,location:"edit_panel"}):void 0,uGd:(la,ja)=>e.T5d({store:c,span:la,W1i:ja,location:"edit_panel"}),RUe:x});a.zKa.a8=()=>({label:{gn:qKw,pa:c.cKa?{pa:D_(()=>x_(da,{loading:c.dm,NBb:c.NBb,djd:d.jZ,YWc:c.cKa,XWc:c.B8b})),vv:{sg:qKw}}:void 0,Nh:()=>f.A$d(d,n)},pa:{pa:D_(()=>x_(ba,{loading:c.dm,YWc:c.cKa,XWc:c.B8b,NBb:c.NBb}))}})}else a.zKa.a8=void 0});return{dSp:B,
U$f:b}};lKw=function(a,b){return{oHd:c=>a({action:1,span:c,location:b}),JYe:c=>a({action:0,span:c,location:b}),Qdd:c=>a({action:2,span:c,location:b}),QYe:c=>a({action:3,span:c,location:b}),PYe:c=>a({action:4,span:c,location:b}),OYe:c=>a({action:5,span:c,location:b}),KYe:c=>a({action:6,span:c,location:b})}};
__c.tKw=function(a){const {vSd:b}=__c.d7e({...a,N:{Iha:"magic_write",y4i:"magic_write",UVm:"magic_write_credit_cta"},pMa:a.pMa});let c=__c.qQn;a.Oc.status===Jx.Ak&&(c=a.apn?sKw:__c.tQn);return{zNa:__c.nQn({config:c,errorService:a.fa.errorService,vSd:b})}};uKw=function(a){return new __c.I2h({characters:`Page ${a}`})};vKw=function(a){return a.map(b=>{if(b.type==="text"&&!b.nT)return b.text.Ya}).filter(sb).join("\n")};
wKw=function(a){return a.filter(b=>b.target.type==="TEXT_ELEMENT_TEXT_REGION").sort((b,c)=>b.YC-c.YC).map(b=>b.target).filter(b=>b.F1===0)};
yKw=function(a){var b=a.split(/\n/g);a=[];const c=[];for(const e of b){b=xKw(e.trimStart());switch(b){case "bulleted":case "numbered":var d=e.length-e.trimStart().length;let f=1;if(d>0)if(c.length===0)f=2,c.push({Mk:f,spaces:d});else if(d>c[c.length-1].spaces)f=c[c.length-1].Mk+1,c.push({Mk:f,spaces:d});else for(let g=c.pop();g&&g.spaces>=d;g=c.pop()){if(g.spaces===d){f=g.Mk;c.push(g);break}}else c.splice(0,c.length);d=f;a.push({type:b,text:b==="bulleted"?e.trimStart().replace(/^([-\u2022*])\s?/,
""):e.trimStart().replace(/^[a-z0-9]+[.)]\s?/i,""),Mk:d});break;case "none":c.splice(0,c.length);e.trim().length>0&&(b=a.length>0?a[a.length-1]:void 0,d&&b&&xKw(d)==="none"&&d.trim().length>0?b.text=b.text.concat("\n",e.trim()):a.push({type:"p",text:e.trim()}));break;default:throw new u(b);}d=e}return a};xKw=function(a){return zKw(a)?"bulleted":/^\d+[.)]\s?/.test(a)||/^[a-z]{1,2}[.)]\s?/i.test(a)||/^[ivmcldx]+[.)]\s?/i.test(a)?"numbered":"none"};zKw=function(a){return["-","\u2022","*"].some(b=>a.trimStart().startsWith(b))};
BKw=function(a){return AKw(a.text)};
AKw=function(a){let b="",c=[],d=[];CKw(a).forEach(e=>{var f=e.nja["list-level"],g=e.nja["list-marker"];if(f&&g&&f>0&&g!=="none"){for(;f>c.length;)c.unshift(0);for(;f<c.length;)c.shift();for(;d.length<f;)d.push(d[d.length-1]??0);for(;d.length>f;)d.pop();a:switch(g){case "disc":case "circle":case "square":f="- ";break a;case "decimal":case "lower-alpha":case "lower-roman":f=`${c[0]+1}. `;break a;default:throw new u(g);}g=" ".repeat(d[d.length-1]??0);b+=g+f;c[0]+=1;d.push((d[d.length-1]??0)+f.length)}else c.length>
0&&(b+="\n",c=[],d=[]);b+=e.Xb});return b};CKw=function(a){const b=[];let c="";a.TSa.forEach(d=>{d.Ya.split(/(\n)/g).forEach(e=>{c+=e;e==="\n"&&(b.push({Xb:c,nja:__c.Be.pick("block",__c.he(__c.Be,d.attributes))}),c="")})});return b};
DKw=async function(a,b){var c=b.length<69;const d=c?"default_title":"default";c={...a.oNl,...(c?a.gmk():a.O4d())};const {zyh:e}=await __webpack_require__.me(205688).then(()=>({zyh:C2h})),{text:f,GXc:g}=e(b,new __c.G2h(a.eH,a.PRa,c)).transform();g?.Pth?await a.qc.addTable(g.Pth,void 0,{Xc:"text_generator",span:void 0}):await __c.Eoe(a.qc,{text:f,context:{Xc:"text_generator",U0:d,span:void 0}})};
EKw=function(a,b=!0){switch(a.type){case "p":return{text:a.text+(b?"\n\n":""),attributes:{Mk:0,TAb:0,Dk:"none"}};case "bulleted":case "numbered":return{text:a.text+(b?"\n":""),attributes:{Dk:cz(a.type,a.Mk),Mk:a.Mk,TAb:a.Mk*1700}};default:throw new u(a);}};
FKw=function(a,b,c,d){const e=a.mapping.Grb(b);if(!e)return[];const f=[];let g=0,h=d;c.forEach(k=>{k=Gw.item(k);if(a.Za.$oa(b,k,d).aHe){var l=Gw.g7c([Gw.collapseToStart(h),Gw.collapseToStart(k)]),n=a9f(e.s1,l);n!==""&&n!=="\n"&&f.push({type:"textBlock",id:Qb(),text:n,Oh:{type:"responsive",Sc:b,range:l,snapshot:n,container:a.pd.m5a(b)}});g+1===c.size&&(l=Gw.g7c([Gw.collapseToEnd(k),Gw.collapseToEnd(d)]),n=a9f(e.s1,l),n!==""&&n!=="\n"&&f.push({type:"textBlock",id:Qb(),text:n,Oh:{type:"responsive",Sc:b,
range:l,snapshot:n,container:a.pd.m5a(b)}}))}h=Gw.collapseToEnd(k);g++});return f};HKw=function(a,b){if(b.length>0)return{text:a}=(new GKw(b,a.Zn,__c.HSb(b))).transform(),a};IKw=function(a){const b=a.Za.state;if(b&&b.type==="RANGE"){const c=Gw.tHe(b.range);a.Za.qv(b.Sc,c)}};JKw=function(a){const b=a.Za.state;if(b&&b.type==="RANGE"){const c=Gw.collapseToEnd(b.range);a.Za.qv(b.Sc,c)}};
LKw=async function(a,b,c,d=!0){const e=C2h(b,new KKw([],a.Zn,a.JS,c)).transform();return w_(()=>{var f=a.Za.lcc(e);f&&d&&(f=f.connect(),f.Sc&&a.Za.qv(f.Sc,f),f?.disconnect());setTimeout(()=>{a.Za.focused||a.Za.focus()})})};NKw=function(a){sa(MKw(a));return{type:"textBlock",id:a.id,text:a.type==="textBlock"?a.text:a.text.get(),Oh:{Sc:a.Oh.Sc,snapshot:a.Oh.snapshot,type:"responsive",range:Gw.g7c([a.Oh.range]),container:a.Oh.container}}};OKw=function(a,b,c){for(const d of b)if(c(a,d))return d};
MKw=function(a){return a.Oh.type==="responsive"&&(a.type==="textBlock"||a.type==="observableTextBlock"&&a.Oh.range?.connected)};PKw=function(a){const b=new Map;for(const c of a){sa(MKw(c));a=c.Oh.Sc;const d=b.get(a)??[];d.push(c);b.set(a,d)}return b};
TKw=function(a){var b=Pb("ba797cf6",!1);const c=Pb("36b12a7f",!1);b=new __c.QKw(a.Za,a.selection,a.Zn,a.undo,a.ula,a.viewport,a.pd,a.hj,a.fd,()=>{const d=a.viewport.ya;if(d.type==="responsive")return __c.zf(a.document).xb(d)},a.SX,a.CMa,a.errorService,b);return a.Ka==="responsive"?b:new RKw(b,a.viewport,a.document,a.Pa,a.mc,new SKw(a.wY,a.document,a.errorService),a.qc,a.hj,a.VRb,a.KWa,a.undo,a.eH,a.mZ,a.fd,a.selection,a.errorService,a.osb,c,a.Dzb,a.E4a)};
__c.YKw=async function(a){const b=a.Ikd,c=a.HLb,d=a.pr;a=new UKw(a.errorService,a.gha);switch(b.mi){case "TRANSFORM_TEXT":VKw({...b,HLb:c,pr:d,Blg:a});break;case "OPEN_TEXT_GENERATOR":WKw({j2b:b.j2b,HLb:c,pr:d,Blg:a});break;case "GENERATE_TEXT":XKw({j2b:b.j2b,Dpe:b.Dpe,HLb:c,pr:d,Blg:a});break;default:throw new u(b);}};VKw=async function(a){var b=a.bIo;const c=m(ZKw[a.action]);if(b=await a.Blg.Kxc(b))a.pr.UGg(),await a.HLb.uYc({action:c,text:b,PSa:{Y8f:"editor_magic_write_deep_link",location:"deep_link"}})};
WKw=async function(a){const b=a.j2b;let c;b&&(c=await a.Blg.Kxc(b));a.pr.UGg();await a.HLb.open({Fdh:"generic",view:"prompt_input",prompt:c,PSa:{Y8f:"editor_magic_write_deep_link",location:"deep_link"}})};XKw=async function(a){const b=await a.Blg.Kxc(a.j2b);b&&(a.pr.UGg(),await a.HLb.kfa({Fdh:"generic",prompt:b,PSa:{Y8f:"editor_magic_write_deep_link",location:"deep_link",FTe:"wonder_box",source:"homepage",Dpe:a.Dpe}}))};
$Kw=function(a){return a.type==="shape"&&!a.ed.empty||a.type==="text"&&!a.nT||a.type==="line"};aLw=function(a){switch(a.type){case "text":return a.text;case "line":return a.ed.first()?.text;case "shape":return a.ed.first()?.text;default:throw new u(a);}};
cLw=function(a){const b=Na(async()=>{const {rTj:d}=await __webpack_require__.me(979186).then(()=>({rTj:__c.vTi}));return await d({Rj:a.Rj,la:a.la,X:a.X,Ra:a.Ra,H9g:C_(e=>{const f=C_(()=>{a.Kc.w6b=void 0});a.Kc.w6b=()=>x_(e,{onClose:f})})})},{Zva:!0}),c=new bLw(a.X,a.viewport,a.Pa,a.selection,a.qc,a.kd,a.Wc,a.Wr,a.P,a.eH,a.Ra,async()=>(await b())?.());w_(()=>{c.KLj()});return{osb:c,PHb:D_(()=>c.eBh?null:x_(__c.Nu,{text:M("Z94whg"),tone:"assist"}))}};
gLw=async function(a,b,c,d){const e=await a.Txc();if(e.state==="error")throw Error("Could not refresh text usage");if(e.state==="loaded"&&e.kM.gt<=0)throw Error("No generations remaining");return a.NS.GPj(b,new dLw).pipe(eLw(a,b,d),fLw(a,b,d)).subscribe(c)};hLw=async function(a){const b=await a.v7.Apa({type:3,brand:a.X.Ab.brand.id,user:a.X.user.id}),c={state:"loaded",kM:{lSb:a.u_.status===Jx.Ak?1:2,HT:b.quota.dLd,gt:(b.quota.IQd?Infinity:b.quota.limit??0)-b.quota.q2a}};w_(()=>a.eB=c);return a.eB};
iLw=async function(a,b){const c={state:"loaded",kM:(await a.NS.ork({userId:a.X.user.id,na:a.X.Ab.brand.id},b)).kM};w_(()=>a.eB=c);return a.eB};pLw=function(a,b){var c={};return jLw(()=>a.NS.yxm(c,b)).pipe(kLw(d=>d.pipe(lLw((e,f)=>({attempt:e.attempt+1,delay:Math.pow(1.618,e.attempt)*1E3,fsn:f}),{attempt:1,delay:0,fsn:void 0}),mLw(({delay:e,fsn:f})=>{if(f instanceof __c.lob||f instanceof __c.Fl&&f.statusCode>=400&&f.statusCode<500)throw f;if(e>3E5)throw f;}),nLw(({delay:e})=>oLw(e)))))};
eLw=function(a,b,c){let d="";return qLw(e=>{if(e.type!=="COMPLETION")return d+=e.data,{status:"in_progress",text:d};var f=e.VCe,g=e.owg;a:switch(b.type){case "APPLY_TONE_OF_VOICE":case "APPLY_TONE_OF_VOICE_TABLE_COLUMN":var h=b.Bv.type==="BRAND_VOICE";break a;case "GENERIC_FIXED_EDITOR":case "GENERIC_RESPONSIVE_EDITOR":h=b.kr!=null;break a;case "TABLE":case "TABLE_COLUMN":case "REWRITE_TABLE_COLUMN":case "SHORTEN_TABLE_COLUMN":case "ITERATE_TABLE_BULK_ACTION":case "APPLY_CUSTOMISE_INSTRUCTION":case "MORE_LIKE_THIS":case "REWRITE":case "CREATE_SUMMARY_FIXED":case "SUMMARIZE_FIXED_EDITOR":case "EXPAND_RESPONSIVE_EDITOR":case "SUMMARIZE_RESPONSIVE_EDITOR":case "EXPAND_FIXED_EDITOR":case "CONTINUE":case "FIX_SPELLING_GRAMMAR":case "REPHRASE_FANTASTICAL":case "REPHRASE_FORMAL":case "REPHRASE_FUN":case "SPEAKER_NOTES":h=
!1;break a;default:throw new u(b);}a:switch(b.type){case "GENERIC_FIXED_EDITOR":case "GENERIC_RESPONSIVE_EDITOR":case "APPLY_TONE_OF_VOICE":case "APPLY_TONE_OF_VOICE_TABLE_COLUMN":var k=b.Bv?.type==="CUSTOM_VOICE";break a;case "TABLE":case "TABLE_COLUMN":case "REWRITE_TABLE_COLUMN":case "SHORTEN_TABLE_COLUMN":case "ITERATE_TABLE_BULK_ACTION":case "APPLY_CUSTOMISE_INSTRUCTION":case "MORE_LIKE_THIS":case "REWRITE":case "CREATE_SUMMARY_FIXED":case "SUMMARIZE_FIXED_EDITOR":case "EXPAND_RESPONSIVE_EDITOR":case "SUMMARIZE_RESPONSIVE_EDITOR":case "EXPAND_FIXED_EDITOR":case "CONTINUE":case "FIX_SPELLING_GRAMMAR":case "REPHRASE_FANTASTICAL":case "REPHRASE_FORMAL":case "REPHRASE_FUN":case "SPEAKER_NOTES":k=
!1;break a;default:throw new u(b);}f={VCe:f,owg:g,cCc:h,imd:k,nvc:e.nvc,wH:rLw[b.type],hp:b.hp,yBd:e.oLo?.Z3g,cId:e.oLo?.pYk,...c};switch(e.ljb){case 2:return a.P.kxh("input",e.owa,f),{status:"input_moderation_error",category:e.owa};case 3:return a.P.kxh("output",e.owa,f),{status:"output_moderation_error",category:e.owa};case 4:return a.P.Lxh("input",f),{status:"input_unsupported_language"};case 5:return a.P.Lxh("output",f),{status:"output_unsupported_language"};case 1:case void 0:return a.P.pRl(d,
f),a.Txc(),{status:"complete",text:d};default:throw new u(e.ljb);}})};fLw=function(a,b,c){return sLw(d=>{a.errorService.ra(d,{La:"text_generator stream:"});a.P.WRa("generation_failed",{wH:rLw[b.type],source:"editor",hp:b.hp,...c});return tLw({status:"server_error",error:d,endUserMessage:d.endUserMessage})})};uLw=async function(a,b,c){await a.NS.yyj({type:"ADD_TO_DESIGN_DICTIONARY_REQUEST",T0a:c,designId:b})};vLw=async function(a,b){await a.NS.yyj({type:"ADD_TO_GLOBAL_DICTIONARY_REQUEST",T0a:b})};
wLw=function(a){switch(a.action){case "continue":return new __c.ctr({prompt:a.input,...a.context});case "expand_elements":return new __c.itr({ljc:a.ljc,Yea:a.Yea,...a.context});case "summarize":return new __c.wtr({prompt:a.input,...a.context});case "rewrite":return new __c.ttr({prompt:a.input,...a.context});case "rewrite_formal":return new __c.rtr({prompt:a.input,...a.context});case "rewrite_fun":return new __c.str({prompt:a.input,...a.context});case "rewrite_fantastical":return new __c.qtr({prompt:a.input,
...a.context});case "fix_spelling":return new __c.jtr({prompt:a.input,...a.context});case "create_summary":return __c.htr.dpa({elements:a.elements,links:a.links,Yea:a.Yea,...a.context});case "customize":return new __c.Wsr({input:a.input,T$c:a.prompt,...a.context});case "more_like_this":return new __c.ptr({input:a.input,SZe:a.SZe,...a.context});case "apply_voice":return new __c.$sr({prompt:a.input,Bv:a.Bv,...a.context});default:throw new u(a);}};
xLw=function(a){switch(a.action){case "autofill":return new __c.ktr({Mu:a.Mu,DE:a.DE,yB:a.yB,...a.context});case "autofill_with_prompt":return new __c.ktr({Mu:a.Mu,DE:a.DE,prompt:a.prompt,yB:a.yB,...a.context});case "apply_brand_voice":return new __c.btr({Mu:a.Mu,DE:a.DE,Bv:a.Bv,yB:a.yB,...a.context});case "iterate_table":return new __c.otr({prompt:a.prompt,DE:a.DE,Och:a.Och,Mu:a.Mu,...a.context});default:throw new u(a);}};
yLw=function(a){switch(a.action){case "continue":return new __c.ctr({prompt:a.input,...a.context});case "expand_elements":throw Error("Method not supported in Responsive docType.");case "summarize":return new __c.xtr({prompt:a.input,...a.context});case "rewrite":return new __c.ttr({prompt:a.input,...a.context});case "rewrite_formal":return new __c.rtr({prompt:a.input,...a.context});case "rewrite_fun":return new __c.str({prompt:a.input,...a.context});case "rewrite_fantastical":return new __c.qtr({prompt:a.input,
...a.context});case "fix_spelling":return new __c.jtr({prompt:a.input,...a.context});case "create_summary":throw Error("Method not supported in Responsive docType.");case "more_like_this":return new __c.ptr({input:a.input,SZe:a.SZe,...a.context});case "customize":return new __c.Wsr({input:a.input,T$c:a.prompt,...a.context});case "apply_voice":return new __c.$sr({prompt:a.input,Bv:a.Bv,...a.context});default:throw new u(a);}};
__c.DLw=function(a){const b=new zLw(a.X,a.Ff,a.errorService),c=new ALw(a.P);return{$y:new BLw(c,b,new CLw(c,b,a.NS,a.X),a.NS,a.v7,a.errorService,a.X,a.viewport,a.Ka,a.u_,a.fJa,a.sqc,a.Q1c??[])}};ELw=async function(a,b){const c=a.store;switch(b.Fdh){case "generic":a.L.Rqb(c,b.prompt??"");break;case "prompt_library":const d=a.pAa?.find(e=>e.id===b.mVu);if(!d)throw Error("Invalid prompt library id supplied");a.L.SYb(c,d);break;default:throw new u(b);}a.L.ZCa(c,"prompt_input",b.PSa.location)};
GLw=async function(a,b){const c=a.store;FLw(a.L,b.PSa.Y8f,"incidental")||(a.L.atk(c,b.eYo??""),a.L.btk(c,b.mga??""),a.L.ZCa(c,"configure_voice",b.PSa.location))};HLw=async function(a,b){const c=a.store;if(!FLw(a.L,b.PSa.Y8f,"incidental")){if(!c.hOa)throw Error("Invalid or missing selection");a.L.QMe(c,b.FTa??"");a.L.ZCa(c,"customisation",b.PSa.location)}};
ILw=function(a){switch(a){case 1:return M("Huch7g");case 6:return M("FVTS7A");case 2:return M("cI/dTQ");case 5:case 4:case 3:return M("VpdZpQ");case void 0:return M("cJQofw");default:throw new u(a);}};JLw=function(a,b){var c=a.suggestions.get(b.$lf);if(c){var d=`${b.CT.toLowerCase()}`;if(c=c.get(d))return c.find(e=>a.pr.qaf(e.fFa,b.fFa))}};KLw=function(a,b){const c=`${b.CT.toLowerCase()}`;for(const d of a.suggestions.values()){const e=d.get(c);if(e)return e.find(f=>a.pr.qaf(f.fFa,b.fFa))}};
LLw=function(a,b){const c=[];for(const d of a.suggestions.values())for(const e of d.values())for(const f of e)a.pr.Z6i(f.fFa,b.fFa)&&c.push(f);return c.length>0?c:void 0};FLw=function(a,b,c){return a.u_.status===Jx.Ak?(a.u_.Rd(b,c),!0):!1};MLw=async function(a){const b=[];(await Promise.all(a.attachments)).forEach(c=>{switch(c.type){case "DESIGN":b.push(new __c.Ouh({ka:c.id,extension:c.extension}));break;case "FILE":b.push(new __c.Usr({...c}));break;default:throw new u(c);}});return b};
NLw=async function(a,b){var c={location:"quick_actions"};if(a.qa?.status===2)a.handleError(b,M("9JC53g"));else{var d=c.location;c=c.va;var e=a.pr.Mu;if(e&&e.selection.range)if(e.YEa.size===0)a.ma.Ib({Db:M("k7yG3w")});else if(e.selection.aym){e.selection.Pt>20&&(b.vUf=J("DPXIkg",[20]));b.Ez=!0;b.iMa=!0;b.vvd=!0;a.ZCa(b,"post-generation");var f=(h,k)=>a.$y.zld({action:"autofill",Mu:e.YEa,DE:e.selection.range,yB:e.selection.yB,context:{hp:a.hp}},a.oMc(b,h,k));d={wH:"autofill",location:d,gt:b.eB.state===
"loaded"?b.eB.kM.gt:void 0,vO:"selection",hp:a.hp};a.Mnb(b,M("ZQPCRw"),f,d);if(await a.Uqb(b))c?.abort(),a.handleClose(b);else{a.$y.P.D9(d);var g=await f(c);w_(()=>{a.Uac=g});return new Promise(h=>{g?.add(h)})}}else a.ma.Ib({Db:M("irsv/Q")});else c?.abort()}};PLw=function(a,b){const c=__c.Db(()=>OLw(a,b),3E3),d=a.pr.N1k(()=>{a.KUg=!0;a.j$n(b);c()}),e=pKw(()=>a.pr.P8c()?.width,()=>{c()});c();return()=>{d();e()}};
QLw=function(a,b){for(const c of b.suggestions.values())for(const d of c.values())if(b=d.find(e=>a.pr.BWj(e.fFa)))return b};OLw=async function(a,b){const c=RLw(a,b);a.K3f.clear();var d=SLw(a,c)?void 0:a.pr.XLg();d&&d.length!==0&&(d=await TLw(a,b,c,d))&&d.length!==0&&a.PRk(b,c,d)};RLw=function(a,b){const c=Qb();a.nWj=c;a.KUg=!1;a.CZm(b);return c};SLw=function(a,b){return a.nWj!==b||a.KUg};ULw=function(a,b){b=new Set(b.map(c=>c.id));for(const c of a.suggestions.keys())b.has(c)||a.igh(c)};
VLw=function(a,b){b.forEach(c=>{a.pr.qpc(c)})};WLw=function(a,b,c){SLw(a,c)||(a.nWj=void 0,a.KUg=!1,VLw(a,a.P0e),a.P0e=a.oWj.map(d=>a.pr.lpf(d)),a.J3f.forEach(d=>{b.igh(d.id)}),a.J3f=[],ULw(b,a.oWj))};TLw=async function(a,b,c,d){if(!SLw(a,c))return await a.$Xn(b,c,d),a.l9q(c)};
XLw=function(a,b,c,d){c.forEach(e=>{if(e.deb.length>0){var f=a.pr.wZk(d,{offset:e.offset,length:e.CT.length});if(f){e={id:Qb(),$lf:d.id,fFa:f,hasError:e.deb.some(h=>h.includes("!ERR")),...e};var g=b.vbi(e);f=!!g&&!!a.J3f.find(h=>h.id===g.$lf);g&&!f?a.pr.qpc(e.fFa):g&&f?b.cnl([g],e):(f=LLw(b,e))?b.cnl(f,e):b.J7b(e)}}})};
YLw=function(a,b){var c=b.zKe;a.EOd.LXg=b.Igl;for(const g of c)if(g.type==="LLM_BASED_GEC_METADATA"){b=g.wFd;var d=g.vYr,e=g.pYk;c=g.qZr;var f=a.EOd;f.yBd+=g.eZr;f.cId+=e;e=f;e.Imf+=d;d=e;d.R7f+=c;d.wFd=b}};ZLw=function(a){VLw(a,Array.from(a.Ytf.values()));a.Ytf.clear()};$Lw=function(a,b,c){if(!a.Lpl&&b.UKa===c){if(a.izh&&(c=QLw(a,b))&&c===b.UKa?.Ou)return;a.Jcn=setTimeout(()=>{w_(()=>{b.UKa=void 0;a.Jcn=void 0})},100)}};aMw=function(a){return a.draft.sI.thumbnail.images.find(b=>b.url!=null)?.url};
fMw=async function(a){sa(bMw.includes(a.type));const b=await cMw(a);var c=`${a.name}_${a.size}_${a.type}`,d=a.name,e=dMw[a.type];a=eMw.includes(a.type)?URL.createObjectURL(a):void 0;return{type:"FILE",id:c,fileName:d,IUq:b,fileType:e,thumbnail:a}};cMw=function(a){return new Promise((b,c)=>{const d=new FileReader;d.onloadend=()=>b(d.result);d.onerror=c;d.readAsDataURL(a)})};
hMw=function(a){return{type:a.type==="DOCUMENT"?"canva_document":"file_upload",ka:a.type==="DOCUMENT"?a.ka:void 0,vyf:a.type==="FILE"?gMw[a.fileType]:void 0}};iMw=function(a){a.KWf+=1;return a};jMw=function(a){var b=Date.now();a.vvh=a.QX?b-a.QX:0;a.QX=b};kMw=function(a){a.Npf+=1};lMw=function(a){return D_(()=>{if(a.Td.Scg)return x_(a.Td.Scg,{})})};
mMw=function(a){const b=a.store,c=a.L,d=()=>{c.K9m(b)};a.wl.GAo=()=>({label:"Show Spelling and Grammar",Fq:d,CB:F_(()=>b.zjd),disabled:F_(()=>a.pr.kN!=="responsive"),Icon:dKw})};
oMw=function(a){const b=a.store,c=a.L,d=a.pr,e=g=>{const h=z_(null),k=nMw(),l=g.box,n=g.Ltk,p=g.iuk;A_(()=>{const q=h.current;if(q)return n(q,k),()=>{p(q,k)}},[n,p,k]);return x_("div",{ref:h,"data-text-block-id":k,style:{pointerEvents:"none",position:"absolute",top:l.top,left:l.left,width:l.width,height:l.height}})},f=D_(g=>{const h=z_([]),k=b.CBi,l=g.Ltk,n=g.iuk;A_(()=>{c.Qii(b,h.current.map(p=>p.fFa));h.current=[...k]},[k]);return k.map((p,q)=>{const r=p.fFa;return x_(e,{box:p.box.Nb(),Ltk:(t,v)=>
l(t,v,r),iuk:(t,v)=>n(t,v,r)},q)})});return D_(()=>{const g=z_(null),h=z_(null),k=z_({});A_(()=>{h.current=new IntersectionObserver(q=>{const r=[],t=[];q.forEach(v=>{var w=v.target.getAttribute("data-text-block-id");w&&(w=k.current[w])&&(v.isIntersecting?r.push(w):t.push(w))});r.length>0&&c.T8m(b,r);t.length>0&&c.Qii(b,t)},{root:g.current,rootMargin:"100% 0px",threshold:0});return()=>{c.Qii(b,Object.values(k.current));k.current={};h.current?.disconnect()}},[]);const l=bKw((q,r,t)=>{h.current&&q&&
!k.current[r]&&(k.current[r]=t,h.current?.observe(q))},[]),n=bKw((q,r)=>{h.current&&q&&k.current[r]&&(delete k.current[r],h.current?.unobserve(q))},[]),p=d.P8c();if(p)return x_("div",{ref:g,style:{pointerEvents:"none",position:"fixed",width:p.Nb().width,height:"100vh"},children:x_("div",{style:{position:"absolute",top:-(d.scrollTop??0)},children:x_(f,{Ltk:l,iuk:n})})})})};
tMw=function(a){const b=a.store,c=a.L,d=()=>c.Ktf(b),e=oMw({store:b,L:c,pr:a.pr}),f=D_(q=>{const r=b.UKa;if(r)return x_(pMw,{NBa:r.box.Nb(),oa:()=>$Lw(c,b,r),children:q.children})}),g=D_(()=>{if(b.rth.size!==0){var q=b.UKa,r=b.qDe,t=[];for(const [v,w]of b.rth.entries()){const x=Array.from(w.entries());for(let y=0;y<x.length;y++){const [z,B]=x[y];B.forEach((C,G)=>{t.push(x_(qMw,{Cuq:r,box:C.box.Nb(),mEl:q?.Ou.id===z.id,onMouseEnter:()=>c.$tk(b,C),onMouseLeave:()=>$Lw(c,b,C)},`${v}_${z.id}_${G}`))})}}return t}}),
h=D_(()=>{const q=b.UKa,r=q?.Ou;if(r)return x_(rMw,{deb:r.hasError?M("SPK/tw"):r.deb[0]||r.CT,rv:!r.deb[0],onMouseEnter:()=>c.$tk(b,q),onMouseLeave:()=>$Lw(c,b,q),O$:r.hasError?void 0:()=>c.Usk(b,r),PEi:()=>c.Atk(b,q),DJn:()=>c.Wsk(b,q)})}),k=D_(()=>{const q=z_(void 0),r=()=>{q.current||(q.current=setTimeout(()=>{c.guk(b,!0);q.current=void 0},100))},t=()=>{clearTimeout(q.current);q.current=void 0;b.qDe&&c.guk(b,!1)};A_(()=>{document.addEventListener("pointerdown",r);document.addEventListener("pointerup",
t);return()=>{document.removeEventListener("pointerdown",r);document.removeEventListener("pointerup",t)}},[]);return B_("div",{style:{pointerEvents:"none"},children:[x_(g,{}),x_(f,{children:x_(h,{})})]})}),l=D_(()=>{if(b.rth.size!==0){var q=b.UKa,r=[];for(const [t,v]of b.rth.entries())for(const [w,x]of v.entries())x.forEach((y,z)=>{r.push(x_(sMw,{box:y.box.Nb(),mEl:q?.Ou.id===w.id},`${t}_${w.id}_${z}`))});return r}}),n=D_(()=>{const q=b.UKa,r=q?.Ou;if(r){var t=r.hasError;return x_(rMw,{deb:t?M("SPK/tw"):
r.deb[0]||r.CT,rv:!r.deb[0],O$:t?void 0:()=>c.Usk(b,r),PEi:()=>c.Atk(b,q),DJn:()=>c.Wsk(b,q)})}}),p=D_(()=>{A_(()=>{c.d9n(b);return()=>{c.u1j(b)}},[]);return B_("div",{style:{pointerEvents:"none"},children:[x_(l,{}),x_(f,{children:x_(n,{})})]})});return D_(()=>{const q=__c.Zc({default:!0,ie:!1});A_(()=>{c.hvn(b);c.Vkl(b);window.addEventListener("beforeunload",d);return()=>{window.removeEventListener("beforeunload",d);c.Ktf(b)}},[]);if(b.zjd)return B_(E_,{children:[q?x_(p,{}):x_(k,{}),x_(e,{})]})})};
uMw=function(a){const b=tMw({store:a.store,L:a.L,pr:a.pr});a.canvas.jc(c=>c>=30&&a.pr.kN==="responsive",(c,d)=>{c.Bn.FL.qsj=d?b:void 0})};vMw=function(a){switch(a){case "B":return M("RNZDzg");case "C":return M("bGw4aA");case "D":return M("2Kk7vg");case "E":return M("SSewtw");case "F":return M("c4McZQ");default:return M("Qb4YPw")}};
xMw=function(a){var b=a.usage,c=a.Nz,d=a.R2a;switch(b.state){case "error":return null;case "loading":return a.P6a?x_(wMw,{end:x_(c,{}),children:x_(Ut,{size:"small"})}):null;case "loaded":b=b.kM.gt;if(b>a.Mga)return null;if(d)return x_(R,{tagName:"li",role:"none",Lb:"2u",Pc:"1u",children:x_($q,{tagName:"span",spacing:"1u",Fa:"center",children:x_(Yq,{tagName:"span",children:x_(d,{UC:a.P6a})})})});d=x_(Q,{tagName:"span",size:"small",weight:"bold",tone:"tertiary",children:J("V5hF/g",[b])});c=x_(c,{});
return a.P6a?x_(lv,{onClick:a.P6a,end:c,children:d}):x_(wMw,{end:c,children:d});default:throw new u(b);}};wMw=function(a){return x_(R,{tagName:"li",role:"none",Lb:"2u",Pc:"1u",children:B_($q,{tagName:"span",spacing:"1u",Fa:"center",children:[x_(Yq,{tagName:"span",children:a.children}),x_(Yq,{tagName:"span",width:"content",children:a.end})]})})};
AMw=function(a){const b=a.store,c=a.L,d=()=>FLw(c,"floating_toolbar","incidental"),e=async r=>c.qNg(b,"floating_toolbar",r),f=r=>c.PAb(b,{action:"continue",location:"floating_toolbar",va:r}),g=r=>c.PAb(b,{action:"fix_spelling",location:"floating_toolbar",va:r}),h=r=>c.PAb(b,{action:"rewrite_fantastical",location:"floating_toolbar",va:r}),k=r=>c.PAb(b,{action:"rewrite_formal",location:"floating_toolbar",va:r}),l=r=>c.PAb(b,{action:"rewrite_fun",location:"floating_toolbar",va:r}),n=r=>c.PAb(b,{action:"rewrite",
location:"floating_toolbar",va:r}),p=r=>c.PAb(b,{action:"summarize",location:"floating_toolbar",va:r}),q=yMw({store:b,L:c,V:a.V,Nz:a.Nz});return D_(r=>x_(zMw,{wBe:a.wBe,MPd:a.MPd,Nz:a.Nz,PHb:a.PHb,D3p:x_(q,{oa:r.oa}),oa:r.oa,owc:b.B8b?G_(e,r.oa,a.V,"create_summary"):void 0,mHd:async()=>{r.oa();await c.Wtk(b,"floating_toolbar")},JYe:G_(f,r.oa,a.V,"expand"),KYe:G_(g,r.oa,a.V,"fix_spelling"),OYe:G_(h,r.oa,a.V,"rephrase_fantastical"),PYe:G_(k,r.oa,a.V,"rephrase_formal"),QYe:G_(l,r.oa,a.V,"rephrase_fun"),
Qdd:G_(n,r.oa,a.V,"rewrite"),oHd:G_(p,r.oa,a.V,"summarize"),P6a:b.nLc===Jx.Ak?d:void 0,wEl:b.B8b,xEl:b.hOa,djd:b.jZ,usage:b.eB,R2a:a.R2a,Mga:b.Mga}))};yMw=function(a){const b=a.store,c=a.L,d=f=>c.XCf(b,{location:"floating_toolbar",va:f}),e=async(f,g)=>c.T5d(b,{id:g,location:"floating_toolbar",va:f});return D_(f=>x_(BMw,{djd:b.jZ,WWl:x_(a.Nz,{}),y4g:b.dng?()=>{f.oa();c.Vsk(b,"floating_toolbar")}:void 0,tGd:b.kr?G_(d,f.oa,a.V,"apply_brand_voice"):void 0,uGd:G_(e,f.oa,a.V,"apply_signature_voice")}))};
DMw=function(){return({children:a})=>x_(CMw,{children:a})};
EMw=function(a){const b=a.store,c=a.L,d=a.R2a;return D_(e=>{A_(()=>{(async()=>{const g=a.V.wb("editor.text_generator.toggle_floating_toolbar_menu",{Hb:{name:"editor.text_generator.toggle_floating_toolbar_menu",type:"open"}});await c.refresh(b);g.qe()})();return()=>{a.V.wb("editor.text_generator.toggle_floating_toolbar_menu",{Hb:{name:"editor.text_generator.toggle_floating_toolbar_menu",type:"close"}}).qe()}},[]);const f=e.oa;e=bKw(()=>{FLw(c,"floating_toolbar","incidental");f()},[f]);return x_(xMw,
{usage:b.eB,Mga:b.Mga,Nz:a.Nz,P6a:e,R2a:d})})};
FMw=function(a){const b=a.store,c=a.L,d=a.ida;var e=a.R2a,f=a.wzb?DMw():a.Nz,g=t=>c.PAb(b,{action:"rewrite_fantastical",location:"floating_toolbar",va:t}),h=t=>c.PAb(b,{action:"rewrite_fun",location:"floating_toolbar",va:t});const k=yMw({store:b,L:c,V:a.V,Nz:a.Nz}),l=EMw({store:b,L:c,Nz:a.Nz,R2a:e,V:a.V});d.items.bij={key:"CreateSummary",type:"single",label:M("h21PXA"),Icon:rPr,onClick:G_(async t=>c.qNg(b,"floating_toolbar",t),void 0,a.V,"create_summary"),xa:()=>b.Ez,Sd:()=>b.B8b,badge:a.PHb?x_(a.PHb,
{}):void 0};e={type:"single",label:vMw(a.wBe),Icon:pD,onClick:()=>c.Wtk(b,"floating_toolbar"),xa:()=>b.Ez,Sd:()=>b.hOa,badge:x_(f,{})};f={type:"single",label:M("lqWfBQ"),Icon:Guh,onClick:G_(t=>c.PAb(b,{action:"rewrite",location:"floating_toolbar",va:t}),void 0,a.V,"rewrite"),xa:()=>b.Ez,Sd:()=>b.hOa};const n={type:"single",label:M("P03bvQ"),Icon:dKw,onClick:G_(t=>c.PAb(b,{action:"fix_spelling",location:"floating_toolbar",va:t}),void 0,a.V,"fix_spelling"),xa:()=>b.Ez,Sd:()=>b.hOa},p={type:"single",
label:M("smevxA"),Icon:Euh,onClick:G_(t=>c.PAb(b,{action:"continue",location:"floating_toolbar",va:t}),void 0,a.V,"expand"),xa:()=>b.Ez,Sd:()=>b.hOa},q={type:"single",label:M("Kdi2Qw"),Icon:Cuh,onClick:G_(t=>c.PAb(b,{action:"summarize",location:"floating_toolbar",va:t}),void 0,a.V,"summarize"),xa:()=>b.Ez,Sd:()=>b.hOa};h=a.MPd!=="B"?{type:"single",label:M("O5RcRg"),Icon:qD,onClick:G_(h,void 0,a.V,"rephrase_fun"),xa:()=>b.Ez,Sd:()=>b.hOa}:void 0;const r={type:"single",label:M("1dppbg"),Icon:Iuh,onClick:G_(t=>
c.PAb(b,{action:"rewrite_formal",location:"floating_toolbar",va:t}),void 0,a.V,"rephrase_formal"),xa:()=>b.Ez,Sd:()=>b.hOa};a=a.MPd!=="C"?{type:"single",label:M("iMJNJQ"),Icon:tB,onClick:G_(g,void 0,a.V,"rephrase_fantastical"),xa:()=>b.Ez,Sd:()=>b.hOa}:void 0;g={type:"menu",label:M("yCQBWg"),Icon:__c.HEi,xa:()=>b.Ez,pa:({oa:t})=>x_(k,{oa:t}),Sd:()=>b.hOa};a=[e,f,n,p,q,h,r,a,g];a[0]&&(d.items.hsj={key:"TextGeneratorItem1",...a[0]});a[1]&&(d.items.isj={key:"TextGeneratorItem2",...a[1]});a[2]&&(d.items.jsj=
{key:"TextGeneratorItem3",...a[2]});a[3]&&(d.items.ksj={key:"TextGeneratorItem4",...a[3]});a[4]&&(d.items.lsj={key:"TextGeneratorItem5",...a[4]});a[5]&&(d.items.msj={key:"TextGeneratorItem6",...a[5]});a[6]&&(d.items.nsj={key:"TextGeneratorItem7",...a[6]});a[7]&&(d.items.osj={key:"TextGeneratorItem8",...a[7]});a[8]&&(d.items.psj={key:"TextGeneratorItem9",...a[8]});d.sb=({oa:t})=>x_(l,{oa:t})};
IMw=function(a){const b=a.store,c=a.L,d=a.Se,e=a.pr,f=a.YCg,g=async k=>{const l=a.V.wb("editor.text_generator.open_dialog",{Hb:{name:"editor.text_generator.open_dialog",attrs:new Map([["location","quick_actions"],["view","prompt_input"]])}});c.ZCa(b,k);l.qe()},h=GMw({Era:a.wzb?{qg:DMw()}:void 0,Se:d,execute:async()=>g("prompt_input")});a.he.ym(()=>!e.fwa&&e.Ymf,h);f&&HMw(b,c,a.he,d,e,async()=>g("customisation"),async()=>g("prompt_input"),a.Jb)};
HMw=function(a,b,c,d,e,f,g,h){h=JMw(h);const k=()=>e.fwa;c.ym(k,KMw({execute:async()=>{d.QK({});d.close({trigger:"show_dialog"});g()},name:M("psRsvw"),key:"text-generator-generate-table",Icon:pD}));c.ym(k,KMw({execute:async()=>{d.QK({});d.close({trigger:"show_dialog"});await NLw(b,a)},name:M("ZQPCRw"),key:"text-generator-autofill",Icon:__c.lat}));c.ym(k,KMw({execute:async()=>{d.QK({});d.close({trigger:"show_dialog"});f()},name:M("4BankA"),key:"text-generator-autofill-with-prompt",Icon:pD}));c.ym(()=>
e.fwa&&!!a.kr,KMw({Era:h,execute:async()=>{d.QK({});d.close({trigger:"show_dialog"});await b.Xsk(a,{location:"quick_actions",Te:"editor_quick_actions_selection"})},name:M("l/AxZQ"),key:"text-generator-brand-voice",Icon:Kz}))};GMw=function({Se:a,execute:b,Era:c}){return{type:"simple",key:"text-generator",name:M("thtTZw"),aliases:[M("X9/Mzg"),M("pTDsxg"),M("X8zsyQ")],Icon:pD,hI:!1,nPa:c?()=>c:void 0,execute:async()=>{a.QK({});a.close({trigger:"show_dialog"});await b()}}};
KMw=function({name:a,key:b,Icon:c,Era:d,execute:e}){return{type:"simple",key:b,name:a,aliases:[M("X9/Mzg"),M("pTDsxg"),M("X8zsyQ")],Icon:c,hI:!1,nPa:d?()=>d:void 0,execute:e}};JMw=function(a){return{qg:lMw(a),B3:a.Td.qQk}};
LMw=function(a){const b=a.store,c=a.L,d=async()=>{const e=a.V.wb("editor.text_generator.open_dialog",{Hb:{name:"editor.text_generator.open_dialog",attrs:new Map([["location","ribbon_toolbar"],["view","prompt_input"]])}});c.ZCa(b,"prompt_input");e.qe()};return D_(e=>x_(e.yi,{...e,className:"DJfiQg",icon:__c.vuh,zh:a.la.layout===1?"icon-and-label":"icon",onClick:async()=>{if(a.pr.hOa&&cc()){const f=a.V.wb("editor.text_generator.toggle_floating_toolbar_menu",{Hb:{name:"editor.text_generator.toggle_floating_toolbar_menu",
type:e.open?"close":"open"}});e.onClick?.();e.open||await c.refresh(b);f.qe()}else d()},disabled:a.qa.status===2,xa:b.Ez,children:M("4BankA")}))};MMw=function(a){const b=LMw({store:a.store,L:a.L,la:a.la,qa:a.qa,V:a.V,pr:a.pr}),c=AMw({store:a.store,L:a.L,wBe:a.wBe,MPd:a.MPd,Nz:a.Nz,R2a:a.R2a,V:a.V});a.Jd.plugins.a8=()=>({Sd:()=>a.pr.kN!=="responsive"?!1:a.Pa.mode>=30&&a.pr.Ymf&&a.selection.Kb?.container.type!=="sheet-item-cell-richtext"||a.pr.hOa&&cc()?!0:!1,Button:b,pa:cc()?c:void 0,vv:{sg:()=>M("4BankA")}})};
OMw=function(a){const b=a.store,c=a.L,d=()=>c.q8m(b),e=()=>c.J9m(b),f=()=>c.handleClose(b),g=r=>c.btk(b,r),h=r=>c.atk(b,r),k=()=>c.qba(b),l=r=>c.g8m(b,r),n=r=>c.gNg(b,r),p=()=>c.w9m(b),q=()=>x_(__c.ld,{title:M("Kha71g"),explanation:x_(Q,{children:x_(__c.Zj,{message:J("JtkU8Q",[__c.tx(b.Av.name)])})}),nH:"critical",buttons:[{children:M("/VS3Mg"),onClick:d},{children:M("k1aTfw"),onClick:e}]});return{w5o:D_(()=>x_(NMw,{store:b,Ws:a.la.layout===2,onClose:f,SCi:g,zGd:h,Fb:k,RCi:l,Pvc:n,VDi:e,nwc:p,fFh:q}))}};
RMw=function(a){const b=a.store,c=a.L,d=a.wzb,e=l=>c.QMe(b,l),f=async()=>a.V.lF("editor.text_generator.edit_text",{Hb:{name:"editor.text_generator.edit_text",type:"customisation_instruction"}},l=>c.Zsk(b,l,"floating_toolbar")),g=D_(()=>{const l=d?J("kvzozw",[b.JVi]):M("tXT6uw");return x_(rv,{disabled:b.chb,ft:!0,onChange:e,onKeyDown:void 0,value:b.FTa,placeholder:l})}),h=D_(()=>x_(PMw,{input:x_(g,{}),onSubmit:f,$yb:b.d0j})),k=D_(()=>x_(QMw,{input:x_(g,{}),onSubmit:f,$yb:b.d0j}));return{P8o:h,Q8o:k}};
SMw=function(){const a=z_(null),b=(c,d)=>{a.current&&(c==="end"&&a.current.setSelectionRange(a.current.value.length,a.current.value.length),a.current.focus(),d?.())};A_(b,[a]);return{Jk:a,ifa:b}};
YMw=function(a){const b=a.store,c=a.L,d=/Mac/.test(navigator.platform)?"apple":"other",e=()=>c.qba(b),f=()=>c.jDf(b),g=()=>{const L=a.V.wb("editor.text_generator.insert_generation",{Hb:{name:"editor.text_generator.insert_generation"}});c.Pii(b,"append","text_inserted",L);L.isRecording()&&L.end()},h=()=>{const L=a.V.wb("editor.text_generator.append_generation",{Hb:{name:"editor.text_generator.append_generation"}});c.Pii(b,"add_below","text_appended",L);L.isRecording()&&L.end()},k=()=>{const L=a.V.wb("editor.text_generator.replace_generation",
{Hb:{name:"editor.text_generator.replace_generation"}});c.Pii(b,"replace","text_replaced",L);L.isRecording()&&L.end()},l=L=>c.j9m(b,L),n=async()=>{const L=a.V.wb("editor.text_generator.click_retry",{Hb:{name:"editor.text_generator.click_morelikethis"}});await c.vNg(b,L);L.isRecording()&&L.end()},p=async()=>{const L=a.V.wb("editor.text_generator.apply_thisbut",{Hb:{name:"editor.text_generator.apply_thisbut"}});await c.T7m(b,L,void 0);L.isRecording()&&L.end()},q=()=>c.o8m(b),r=L=>c.L9m(b,L),t=()=>c.H8m(b),
v=()=>c.J8m(b),w=()=>FLw(c,"editor_magic_write_dialog","intentional"),x=()=>c.handleClose(b),y=D_(()=>{if(b.vUf)return x_(__c.Ck,{Tg:!0,size:"small",tone:"info",children:x_(Q,{children:b.vUf})})}),z=D_(()=>{const L=a.uc;if(L!=null){var N=b.Zv&&__c.Bn.create(b.Zv.pages[0]);if(N!=null||b.nQe){ra(N!=null);var P=N.dimensions;ra(P!=null,"Banner Page is missing dimensions");P=__c.$g.create({...__c.Bs,dimensions:P,doctype:{...__c.As,...P}});var T=__c.zf(P).xb(N);return x_(TMw,{xa:b.nQe,qml:({vd:V,Df:W})=>
N&&x_(L,{page:T,Df:W,vd:V})})}}}),B=()=>x_(__c.Sx,{Kx:"subtle",sp:({gw:L})=>{var N=L("ai-terms-anchor");L=L("magic-write-feedback-anchor");return J("fXsacQ",[N,L])},Ot:new Map([["ai-terms-anchor",c.HOp],["magic-write-feedback-anchor",c.CGs]])}),C=D_(()=>x_(UMw,{platform:d,Ez:b.Ez,i7j:!b.vvd&&b.CM,gea:b.gea,Iyb:b.pKd,eB:b.eB,bDe:b.nDe,Nza:w,E0a:f,oQa:g,CRc:h,C0a:k,onCopy:b.Z7e?q:void 0,Rk:n,D1a:r,hXe:l,XYe:p})),G=D_(()=>x_(VMw,{Ez:b.Ez,Aud:b.pGa||"",$S:b.e0+1,sJa:b.sJa,FUa:b.Zob?.u1m||"",mBe:b.Joc,
Fb:e,oQa:!b.vvd&&b.CM?k:g,mXe:t,nXe:v,D9c:b.gea?p:void 0,sb:C,Zv:x_(z,{}),info:x_(y,{}),Q0j:x_(B,{})})),H=D_(()=>x_(WMw,{platform:d,Ez:b.Ez,i7j:!b.vvd&&b.CM,gea:b.gea,Iyb:b.pKd,eB:b.eB,bDe:b.nDe,Nza:w,E0a:f,oQa:g,CRc:h,C0a:k,onCopy:b.Z7e?q:void 0,D1a:r,hXe:l,XYe:p,Q0j:x_(B,{})})),K=D_(()=>x_(XMw,{Ez:b.Ez,Aud:b.Zob?.Pha||"",$S:b.e0+1,sJa:b.sJa,FUa:b.Zob?.u1m||"",gea:b.gea,mBe:b.Zob?.error,onClose:x,Fb:e,oQa:g,Rk:n,mXe:t,nXe:v,D1a:r,D9c:b.gea?p:void 0,sb:H,Zv:x_(z,{}),info:x_(y,{})}));return{Wvp:G,
Xvp:K}};ZMw=function(a){const b=Math.floor(a.length/2),c=a.slice(0,b);a=a.slice(b);return[c,a]};
wNw=function(a){const b=Pb("6f443cfd",!1),c=Pb("70702181",!1),d=a.store,e=a.L,f=a.R2a,g=a.swd,h=/Mac/.test(navigator.platform)?"apple":"other",k=()=>e.xtk(d),l=()=>e.handleClose(d),n=va=>e.Rqb(d,va),p=()=>e.nNg(d),q=()=>e.lLo(d),r=async va=>{const xa=a.V.wb("editor.text_generator.click_try_example",{Hb:{name:"editor.text_generator.click_try_example"}});await e.INg(d);xa.ob().addEvent("loaded_example");va?.();xa.ob().addEvent("input_focused");xa.qe()},t=()=>FLw(e,"editor_magic_write_dialog","intentional"),
v=va=>e.SYb(d,va),w=()=>{const va=a.V.wb("editor.text_generator.open_dialog",{Hb:{name:"editor.text_generator.open_dialog",attrs:new Map([["location","floating_toolbar"],["view","select_voice"]])}});e.ZCa(d,"select_voice");va.qe()},x=()=>{const va=a.V.wb("editor.text_generator.open_dialog",{Hb:{name:"editor.text_generator.open_dialog",attrs:new Map([["location","floating_toolbar"],["view","select_model"]])}});e.ZCa(d,"select_model");va.qe()},y=()=>e.itk(d),z=D_(()=>{var va=d.eB,xa=d.Mga;if(va.state===
"error"||va.state==="loaded"&&va.kM.gt>xa)return null;if(va.state==="loading")return x_("div",{className:"Ku_O7A",children:x_(Ut,{size:"small",index:1})});if(va.state==="loaded"){va=va.kM;xa=Math.max(0,va.gt);if(f)return x_($Mw,{Nza:t,R2a:f});switch(va.lSb){case 1:return x_(aNw,{gt:xa,Nza:t,Nz:a.Nz});case 2:return x_(bNw,{gt:xa,HT:va.HT});default:throw new u(va.lSb);}}}),B=D_(va=>x_(cNw,{disabled:!d.prompt.trim(),platform:h,JMb:va.JMb})),C=va=>x_(dNw,{onClick:p,JMb:va.JMb}),G=D_(()=>x_(eNw,{active:d.zoe,
onClick:q})),H=D_(va=>x_(fNw,{disabled:d.chb,loading:d.Ibd,onClick:va.onClick,retry:d.Cmb,JMb:va.JMb})),K=D_(()=>x_(gNw,{loading:d.ONb,pDe:a.la.layout===2,pAa:d.pAa,SYb:v})),L=D_(()=>x_(hNw,{loading:d.ONb,pDe:a.la.layout===2,pAa:d.pAa,SYb:v})),N=D_(()=>x_(iNw,{SIa:d.SIa,children:x_(z,{})})),P=D_(()=>d.error?x_(jNw,{error:d.error}):void 0),T=a.Ge??kNw,V=D_(()=>d.fwa||!a.khf?x_(T,{}):B_(br,{spacing:"0.5u",Fa:"center",children:[x_(T,{}),a.khf&&x_(a.khf,{})]})),W=D_(()=>x_(lNw,{$tq:d.Ez,onClose:l,start:x_(V,
{})})),aa=D_(()=>{var va=d.eB.state==="loaded"?d.eB.kM.gt:void 0;if(d.Uid&&va)return x_(K,{});va=[d.error?x_(P,{},"error"):x_(N,{},"textUsage")];const xa=[];d.prompt&&xa.push(x_(C,{},"clear"));d.error||xa.push(x_(B,{},"generate"));return x_(mNw,{start:va,end:xa})}),ba=D_(()=>{if(d.error)return x_(P,{},"error");const va=d.eB.state==="loaded"?d.eB.kM.gt:void 0;return x_(nNw,{F1q:x_(B,{JMb:!0},"generate"),Kbt:d.Uid?void 0:x_(N,{},"textUsage"),pAa:d.Uid&&va?x_(L,{}):void 0,f5p:d.prompt?x_(C,{JMb:!0},
"clear"):void 0,ven:c?x_(G,{}):void 0,kPh:da})}),da=a.cqe?x_(a.cqe,{}):void 0,la=D_(()=>{const {Jk:va,ifa:xa}=SMw(),Ba=a.wzb?J("+lD7Kw",[d.JVi]):M("bQVBtA");return x_(oNw,{ref:va,disabled:d.chb,Ln:1,onChange:n,placeholder:d.fwa?M("j/gIHA"):Ba,Ukt:d.EFl?x_(H,{onClick:()=>r(xa)}):void 0,kPh:b?void 0:da,value:d.prompt,GC:d.$El?d.zVf:void 0,Q$f:d.OQa})}),ja=D_(()=>x_(pNw,{header:x_(W,{}),input:x_(la,{}),onSubmit:k,footer:b?x_(ba,{}):x_(aa,{}),pwq:!b})),oa=D_(()=>x_(qNw,{dMh:d.fU.voice.name,p9k:w})),ma=
D_(()=>x_(rNw,{hMp:d.z0c?.model??sNw.model,ejs:x})),na=D_(()=>x_(tNw,{onClose:l,F5g:d.fU.Sn===3?y:void 0,NPs:x_(oa,{}),jio:g&&!d.fwa?x_(ma,{}):void 0})),qa=D_(va=>{var xa=d.eB.state==="loaded"?d.eB.kM.gt:void 0;if(d.Uid&&xa)return x_(K,{});xa=[d.error?x_(P,{},"error"):x_(N,{},"textUsage")];const Ba=[];d.EFl&&Ba.push(x_(H,{onClick:()=>r(va.N8g),JMb:!0}));d.prompt&&Ba.push(x_(C,{JMb:!0},"clear"));d.error||Ba.push(x_(B,{JMb:!0},"generate"));return x_(mNw,{start:xa,end:Ba})}),ua=D_(uNw((va,xa)=>{va=a.wzb?
J("+lD7Kw",[d.JVi]):M("bQVBtA");return x_(oNw,{ref:xa,Ln:3,kPh:da,value:d.prompt,placeholder:d.fwa?M("j/gIHA"):va,disabled:d.chb,GC:d.$El?d.zVf:void 0,Q$f:d.OQa,onChange:n})})),za=D_(()=>{const {Jk:va,ifa:xa}=SMw();return x_(vNw,{header:x_(na,{}),footer:x_(qa,{N8g:()=>xa("end")}),onSubmit:k,input:x_(ua,{ref:va})})});return{Iwp:ja,Jwp:za}};
BNw=function(a){const b=a.store,c=a.L,d=l=>c.GNg(b,l),e=()=>c.qba(b),f=()=>c.handleClose(b),g=D_(l=>x_(xNw,{mRd:b.mRd,Lbm:b.z0c?.id,oa:l.oa,GNg:d})),h=D_(()=>x_(yNw,{text:b.z0c?.model||sNw.model,dvr:b.z0c?.id===sNw.id}));a=D_(()=>{if(!b.fwa)return x_(zNw,{label:x_(h,{}),wgh:l=>x_(g,{oa:l})})});const k=D_(()=>{if(!b.fwa)return x_(ANw,{Fb:e,onClose:f,children:x_(xNw,{mRd:b.mRd,Lbm:b.z0c?.id,oa:e,GNg:d})})});return{khf:a,t8l:k}};
HNw=function(a){const b=a.store,c=a.L,d=()=>c.Vsk(b),e=()=>c.F9c(b),f=()=>c.mAd(b),g=w=>c.Y5d(b,w),h=()=>c.itk(b),k=()=>c.b9m(b,"magic_write_dialog"),l=()=>c.qba(b),n=()=>c.handleClose(b),p=w=>x_(CNw,{whg:b.fU.voice.id,jZ:b.jZ,kr:b.kr,z4g:d,b8g:e,Z7g:f,a8g:g,d7g:b.mJj?k:void 0,oa:w.oa,Qqh:b.vUe,Nz:a.Nz}),q=D_(()=>x_(DNw,{text:b.fU.voice.name,wEk:b.fU.Sn!==3})),r=()=>x_(ENw,{onClick:h}),t=D_(()=>x_(FNw,{label:x_(q,{}),wgh:w=>x_(p,{oa:w}),OWj:b.fU.Sn===3?x_(r,{}):void 0})),v=D_(()=>x_(GNw,{Fb:l,onClose:n,
children:x_(CNw,{whg:b.fU.voice.id,jZ:b.jZ,kr:b.kr,z4g:d,b8g:e,Z7g:f,a8g:g,d7g:b.mJj?k:void 0,oa:l,Qqh:b.vUe,Nz:a.Nz})}));return{VAp:t,WAp:v}};INw=function(a){return B_("div",{children:[x_(__c.C$d,{borderRadius:"legacyLarge",className:y_("JO7KyQ usZ96Q",{E81hiw:a.Fbi,WdjJgQ:!a.Fbi}),children:x_(__c.kr,{Tza:a.IOb,preventScroll:"always",autoFocus:!0,returnFocus:!0,children:a.children})}),a.Lh&&x_(a.Lh,{})]})};
KNw=function(a){const b=a.store,c=a.L,d=a.Overlay,e=a.Nz,f=a.R2a,g=a.wzb,h=a.swd,k=()=>b.Ez?c.jDf(b):c.handleClose(b),{VAp:l,WAp:n}=HNw({store:b,L:c,Nz:e}),{khf:p,t8l:q}=a.swd?BNw({store:b,L:c}):{khf:void 0,t8l:void 0},{Iwp:r,Jwp:t}=wNw({store:b,L:c,Nz:e,R2a:f,cqe:a.cqe,Ge:l,khf:p,wzb:g,swd:h,YTc:a.YTc,la:a.la,V:a.V}),{Wvp:v,Xvp:w}=YMw({store:b,L:c,uc:a.uc,V:a.V}),{w5o:x}=OMw({store:b,L:c,la:a.la}),{P8o:y,Q8o:z}=RMw({store:b,L:c,Nz:e,V:a.V,wzb:g}),B=D_(()=>{switch(b.view){case "prompt_input":return x_(r,
{});case "post-generation":return x_(v,{});case "customisation":return x_(y,{});case "configure_voice":return x_(x,{});default:return null}}),C=D_(()=>x_(d,{children:x_(INw,{IOb:k,Fbi:b.view==="customisation",Lh:a.YDh,children:x_(B,{})})})),G=D_(()=>{switch(b.view){case "prompt_input":return x_(t,{});case "post-generation":return x_(w,{});case "customisation":return x_(z,{});case "configure_voice":return x_(x,{});case "select_voice":return x_(n,{});case "select_model":return q?x_(q,{}):null;default:return null}}),
H=()=>x_(d,{children:x_(JNw,{children:x_(G,{})})});return{qEp:()=>{switch(a.la.layout){case 1:return x_(C,{});case 2:return x_(H,{});default:throw new u(a.la.layout);}}}};
NNw=function(a){return{dqe:D_(({attachments:b,Vxc:c,z9:d=48})=>{if(b.length===0)return null;const e=f=>y_("q6hkiQ",{X7PfIw:f%2===0,qQ20VA:f%2===1});return x_(E_,{children:b.map((f,g)=>f.case({pending:()=>x_(R,{className:e(g),padding:"0",children:x_(__c.Qu,{width:d,ratio:1,children:x_(Xi,{shape:"rectangle"})})},g),fulfilled:h=>{switch(h.type){case "DESIGN":return x_(R,{className:e(g),padding:"0",children:x_(__c.mXr,{id:h.id,thumbnail:h.thumbnail,z9:d,title:h.title,extension:h.extension,Jvb:1,onRemove:c?
()=>c(h.id):void 0,Ob:a.Ob})},h.id);case "FILE":return x_(R,{className:e(g),padding:"0",children:h.thumbnail?x_(LNw,{A9:h.thumbnail,tooltip:h.fileName,z9:d,onRemove:c&&(()=>c(h.id))}):x_(MNw,{fileName:h.fileName,z9:d,onRemove:c&&(()=>c(h.id))})},g);default:throw new u(h);}},rejected:()=>null}))})})}};
MNw=function(a){const b=a.fileName;var c=a.z9;a=a.onRemove;c=x_(__c.Ko,{Rr:a&&x_(__c.jXr,{onRemove:a}),thumbnail:x_(__c.Uu,{height:c,aspectRatio:1,padding:"none",children:x_(R,{width:"full",height:"full",padding:"1u",background:"elevationSurfaceSunken",children:x_(Q,{lineClamp:1,children:b})})})});return x_(__c.er,{label:b,children:c})};
LNw=function(a){var b=a.A9;const c=a.tooltip,d=a.z9;a=a.onRemove;b=x_(__c.Ko,{Rr:a&&x_(__c.jXr,{onRemove:a}),thumbnail:x_(__c.Yu,{height:d,aspectRatio:1,src:b,alt:c})});return c?x_(__c.er,{label:c,lineClamp:1,children:b}):b};
ONw=function({store:a,L:b,Wp:c,Ob:d}){if(!Pb("cb123f55",!1))return{YDh:void 0,cqe:void 0};const e=Pb("ade72167",!1),f=x=>b.l9m(a,x),{dqe:g}=NNw({Ob:d}),h=D_(()=>x_(g,{attachments:a.attachments,Vxc:f})),k=uNw((x,y)=>x_(R,{borderRadius:"elementRound",background:"surface",className:"fUBtxg",children:x_(ir,{ib:M("2O5N0w"),disabled:x.disabled,ek:"right",icon:x.Ir?__c.nr:Gu,Qc:"medium",variant:"secondary",size:"small",onClick:x.onClick,ref:y,className:"fUBtxg"})}));d=D_(()=>a.NQk&&a.view==="prompt_input"?
x_(R,{className:"bSC0KQ",children:x_(R,{className:"tfUe_g",children:x_(Q,{size:"small",tone:"primary",children:J("G5Ra3g",[a.nAn])})})}):void 0);const {jFh:l,u2h:n}=__c.tXr({YMb:()=>Promise.resolve(c)}),p=()=>{b.t6f(a,!1);n.LJ()},q=()=>{n.Ng();b.t6f(a,!0)},r=()=>{n.Ng();b.t6f(a,!1)},t=()=>b.t6f(a,!0),v=async x=>{x=m(x.at(0));b.t6f(a,!1);await b.X7m(a,x)},w=D_(()=>{const x=z_(null),y=a.mTg||n.Ir.get(),z=a.NQk;return B_(E_,{children:[x_(__c.Io,{open:a.mTg,oa:r,trigger:B=>B_(R,{className:"K7xrHg",padding:"0",
display:"flex",flexDirection:"row",alignItems:"center",children:[x_(k,{Ir:y,onClick:y?r:t,ref:x,disabled:z,...B}),x_(h,{})]}),children:B_(__c.Qo,{role:"menu",children:[x_(__c.St,{label:M("d/DaFA"),start:x_(__c.hz,{size:"medium"}),onClick:p}),e&&x_(__c.xz,{yv:v,mimeTypes:bMw,multiple:!1,children:({onClick:B})=>x_(__c.St,{label:M("odyhjQ"),start:x_(__c.sfj,{size:"medium"}),onClick:B})})]})}),x_(l,{trigger:x.current,Fb:q,D0a:B=>b.W7m(a,B)})]})});return{YDh:d,cqe:w}};
PNw=function(a){const b=a.store,c=a.L,d=a.Jb,e=a.YTc,f=a.la,{Overlay:g}=a.UZh({store:b,L:c}),{YDh:h,cqe:k}=ONw({store:b,L:c,Wp:a.Wp,Ob:a.Ob}),{qEp:l}=KNw({store:b,L:c,Overlay:g,Jb:d,YTc:e,la:f,wzb:a.wzb,swd:a.swd,YDh:h,cqe:k,Nz:a.Nz,R2a:a.R2a,uc:a.uc,V:a.V});a.Kc.a8=D_(()=>{if(b.isOpen)return x_(l,{})})};
__c.XNw=function(a){const b=Pb("86ab3440","A"),c=Pb("52db8e03","A");var d=Pb("83aad652",3);const e=Pb("c27c03d",!1),f=Pb("a809d2c4",!1);var g=Na(async()=>{const {ZTc:q}=a.bootstrap.Q6h?await __webpack_require__.me(572232).then(()=>__c.QNw):await __webpack_require__.me(768422).then(()=>__c.RNw);return q}),h=Na(async()=>{const {diq:q}=await __webpack_require__.me(599430).then(()=>({diq:__c.SNw}));return q(a.bootstrap.Q6h)});const {Bc:k,Rp:l}=a.mr("none"),n=new TNw(a.$y,a.pr,a.u_,k,l,a.dH,a.qa,a.bootstrap.pge,
e,a.bootstrap.OQa,a.bootstrap.Mga,a.bootstrap.jGl,a.bootstrap.iGl,a.bootstrap.gGl,d),p=new UNw(a.$y,a.pr,a.u_,a.ma,a.ea,a.ub,a.rb,a.qa,l,!1,f,g,h,a.V,new VNw,a.Ac,a.osb);d=lMw(a.Jb);g=a.bootstrap.sqc?a.gVj(!0).zNa:void 0;h=a.bootstrap.sqc?a.gVj(!1).zNa:void 0;PNw({store:n,L:p,Kc:a.Kc,UZh:a.UZh,Jb:a.Jb,YTc:a.bootstrap.YTc,la:a.la,wzb:a.bootstrap.wzb,swd:f,Nz:d,Wp:a.Wp,Ob:a.Ob,R2a:g,uc:a.uc,V:a.V});IMw({store:n,L:p,pr:a.pr,Se:a.Se,he:a.he,Jb:a.Jb,YCg:a.bootstrap.YCg,wzb:a.bootstrap.wzb,V:a.V});MMw({store:n,
L:p,selection:a.selection,wBe:b,MPd:c,pr:a.pr,dda:a.dda,qa:a.qa,la:a.la,Pa:a.Pa,Jd:a.Jd,V:a.V,Nz:d,R2a:h});FMw({store:n,L:p,wBe:b,wzb:a.bootstrap.wzb,MPd:c,ida:a.ida,V:a.V,Nz:d,R2a:h,PHb:a.PHb});e&&uMw({store:n,L:p,canvas:a.canvas,pr:a.pr});e&&__c.Nl(a.fV.wl,q=>mMw({store:n,L:p,wl:q,pr:a.pr}));return{HLb:new WNw(n,p)}};ZNw=function(a){if(!a.open)return null;const b=a.s5d(),c=a.P8c();return x_(__c.nB,{nG:a.GRc,children:b&&c?x_(YNw,{zul:b,k8:c,children:a.children}):x_("div",{className:"ySBQPw",children:a.children})})};
$Nw=function(a){const b=a.store,c=a.L,d=()=>c.handleClose(a.store),e=()=>a.pr.s5d(),f=()=>a.pr.P8c(),g=()=>b.Ez?c.jDf(b):c.handleClose(b);return{Overlay:D_(({children:h})=>{switch(a.la.layout){case 1:return x_(ZNw,{GRc:d,open:a.store.isOpen,s5d:e,P8c:f,children:h});case 2:return x_(a.Vf.FJa,{open:b.isOpen,yca:!0,height:{EUb:"full"},oa:g,children:h});default:throw new u(a.la.layout);}})}};
bOw=function(a){if(a.open){var b=a.B1,c=a.h8;return x_(__c.nB,{nG:a.GRc,children:b&&c?x_(aOw,{B1:b,h8:c,AAj:a.AAj,children:a.children}):x_("div",{className:"ySBQPw",children:a.children})})}};
__c.cOw=function(a){const b=a.store,c=a.L,d=()=>c.handleClose(a.store),e=()=>b.Ez?c.jDf(b):c.handleClose(b);return{Overlay:D_(({children:f})=>{switch(a.la.layout){case 1:return x_(bOw,{open:b.isOpen,GRc:d,B1:a.pr.s5d(),h8:a.pr.P8c(),AAj:a.pr.hOa,children:f});case 2:return x_(a.Vf.FJa,{open:b.isOpen,yca:!0,height:{EUb:"full"},oa:e,children:f});default:throw new u(a.la.layout);}})}};
dOw=function(a){if(a.Ka==="responsive")return __c.cOw(a);const {Overlay:b}=__c.cOw(a),{Overlay:c}=$Nw(a),d=D_(({children:e})=>a.pr.kN==="responsive"?x_(b,{children:e}):x_(c,{children:e}));return{Overlay:D_(({children:e})=>B_(E_,{children:[x_("div",{className:y_("_4xWNWw",{PAK62g:a.store.iMa})}),x_(d,{children:e})]}))}};
fOw=function(a){var b=a.Ha.Vd("editor.editing.design_automation.text_generator");const c=a.errorService.Ef("text_generator"),{$y:d}=__c.DLw({NS:a.NS,P:a.P,X:a.X,viewport:a.viewport,Ka:"fixed",errorService:c,Ff:a.Ff,v7:a.v7,fJa:a.fJa,Q1c:eOw(a.gvd),u_:a.u_,sqc:a.bootstrap.sqc}),{PHb:e,osb:f}=cLw({qc:a.qc,P:a.P,X:a.X,eH:a.eH,Rj:a.Rj,Ra:a.Ra,la:a.la,kd:a.kd,Wc:a.Wc,Wr:a.Wr,selection:a.selection,Pa:a.Pa,Kc:a.Kc,viewport:a.viewport}),g=TKw({viewport:a.viewport,document:a.document,Pa:a.Pa,selection:a.selection,
mc:a.mc,SX:a.SX,CMa:a.CMa,qc:a.qc,VRb:a.JS,KWa:a.KWa,undo:a.undo,eH:a.eH,mZ:a.mZ,fd:a.fd,errorService:c,osb:f,Dzb:a.Dzb,E4a:a.E4a,Ka:"fixed",Za:a.Za,Zn:a.Zn,hj:a.hj,ula:a.ula,pd:a.pd,wY:a.wY});({HLb:b}=__c.XNw({canvas:a.canvas,pr:g,$y:d,selection:a.selection,Pa:a.Pa,Kc:a.Kc,dda:a.dda,ida:a.ida,Jd:a.Jd,qa:a.qa,la:a.la,he:a.he,Se:a.Se,X:a.X,gVj:l=>__c.tKw({Oc:a.u_,fa:{v7:a.v7,errorService:c},X:a.X,pMa:a.mba,ve:new __c.D3b,apn:l}),pg:a.pg,Jb:a.Jb,dH:a.dH,Ob:a.Ob,Wp:a.Wp,mr:a.mr,UZh:({store:l,L:n})=>
dOw({store:l,L:n,pr:g,la:a.la,Vf:a.Vf,Ka:"fixed"}),ea:a.ea,uc:a.uc,PHb:e,osb:f,Ac:a.Ac,ub:a.ub,rb:a.rb,ma:a.ma,u_:a.u_,V:b,fV:a.fV,bootstrap:{...a.bootstrap,YTc:a.bootstrap.YTc??1}}));const h=a.bootstrap.Ikd,k=a.gha;h&&k&&__c.YKw({Ikd:h,gha:k,pr:g,errorService:a.errorService,HLb:b});return{$y:d,HLb:b}};eOw=function(a){return a==null?[]:a.w5f.animated};gOw=function(a){return{qg:aJw(a),B3:a.Td.qQk}};__c.iOw=function(a,b,c,d){d=gOw(d);a.ym(b,hOw({Era:d,execute:c}))};
kOw=function(a,b,c,d,e,f,g,h,k){k=gOw(k);a.ym(b,jOw({Era:k,execute:d,name:M("deDRwA"),key:"text-generator-autofill",Icon:pD}));a.ym(b,jOw({Era:k,execute:e,name:M("/8DoLw"),key:"text-generator-autofill-with-prompt",Icon:pD}));a.ym(c,jOw({Era:k,execute:f,name:M("lqWfBQ"),key:"text-generator-rewrite",Icon:Guh}));a.ym(c,jOw({Era:k,execute:g,name:M("Kdi2Qw"),key:"text-generator-summarize",Icon:Cuh}));a.ym(c,jOw({Era:k,execute:h,name:M("l/AxZQ"),key:"text-generator-brand-voice",Icon:Kz}))};
hOw=function({Era:a,execute:b}){return{type:"simple",key:"text-generator",name:M("EqkVmw"),aliases:[M("X9/Mzg"),M("pTDsxg"),M("X8zsyQ")],Icon:pD,hI:!1,nPa:()=>a,execute:b}};jOw=function({name:a,key:b,Icon:c,Era:d,execute:e}){return{type:"simple",key:b,name:a,aliases:[M("X9/Mzg"),M("pTDsxg"),M("X8zsyQ")],Icon:c,hI:!1,nPa:()=>d,execute:e}};
BIw={eventType:"writing_suggestions_shown",Oa(a){a.MCo==null?a=void 0:(a=a.MCo,a=__c.jf({refresh_count:a.KWf,time_since_last_refresh:a.vvh,input_tokens:a.yBd,output_tokens:a.cId,input_words:a.ORg,uncached_corrections_suggested:a.R7f,cached_corrections_suggested:a.Imf,corrections_accepted:a.Npf,model_id:a.wFd,latency_milliseconds:a.LXg,current_cached_corrections_suggestions:a.Y_t,current_uncached_corrections_suggestions:a.e0t,current_words:a.f0t,trigger:a.trigger}));return __c.jf({spelling_and_grammar:a})}};
lOw={[1]:"medical",[2]:"political",[3]:"sexual",[4]:"offensive",[5]:"illegal",[6]:"self"};
ALw=class{WRa(a,b){this.P.track(rD,{source:"editor",...b,action:a})}D9(a){this.P.track(rD,{...a,action:"text_submitted",source:"editor"})}pRl(a,b){this.P.track(rD,{...b,action:"text_returned",wJ:[...a].length,GC:AIw(a),source:"editor"})}jxh(a,b){this.P.track(rD,{...b,action:a,source:"editor"})}oRl(a,b){this.P.track(rD,{...b,action:"stopped_generation",wJ:[...a].length,GC:AIw(a),source:"editor"})}kxh(a,b,c){this.P.track(rD,{...c,action:`${a}_moderated`,source:"editor",owa:b&&lOw[b]})}Lxh(a,b){this.P.track(rD,
{...b,action:`unsupported_${a}_language`,source:"editor"})}gne(a,b){this.P.track(__c.m$g,{xd:a,Ls:"brand_voice",source:b==="brand_tab_object_panel"?"brand_tab":"other",location:"editor_magic_write_dialog",action:"design"})}vQl(a,b){this.P.track(rD,{...b,action:"analyze_tone_of_voice_text_submitted",wJ:[...a].length,GC:AIw(a),source:"editor"})}uQl(a,b){this.P.track(rD,{...b,action:"analyze_tone_of_voice_text_returned",wJ:[...a].length,GC:AIw(a),source:"editor"})}tQl(a){this.P.track(rD,{...a,action:"analyze_tone_of_voice_failed",
source:"editor"})}Kwh(a,b,c){this.P.track(rD,{...c,action:`analyze_tone_of_voice_${a}_moderated`,source:"editor",owa:b&&lOw[b]})}Lwh(a,b){this.P.track(rD,{...b,action:`analyze_tone_of_voice_unsupported_${a}_language`,source:"editor"})}c9i(a){this.P.track(rD,{...a,action:"create_signature_voice",source:"editor"})}RQl(a){this.P.track(rD,{...a,action:"created_signature_voice",source:"editor"})}M9i(a){this.P.track(rD,{...a,action:"update_signature_voice",source:"editor"})}ZRl(a){this.P.track(rD,{...a,
action:"updated_signature_voice",source:"editor"})}TQl(a){this.P.track(rD,{...a,action:"delete_signature_voice",source:"editor"})}Obf(a){this.P.track(rD,{...a,action:"select_active_voice",source:"editor"})}LRl(a){this.P.track(rD,{action:"prompt_library_item_selected",source:"editor",C5n:"pill",B5n:a.id,hp:a.hp})}constructor(a){this.P=a}};
rLw={GENERIC_FIXED_EDITOR:"generic",GENERIC_RESPONSIVE_EDITOR:"generic",TABLE:"generate_table",TABLE_COLUMN:"generate_table_column",REWRITE_TABLE_COLUMN:"rewrite_table_column",SHORTEN_TABLE_COLUMN:"shorten_table_column",APPLY_TONE_OF_VOICE_TABLE_COLUMN:"apply_tone_of_voice_table_column",ITERATE_TABLE_BULK_ACTION:"iterate_table_bulk_action",CREATE_SUMMARY_FIXED:"magic_summary",SUMMARIZE_FIXED_EDITOR:"summarize",SUMMARIZE_RESPONSIVE_EDITOR:"summarize",EXPAND_FIXED_EDITOR:"expand",EXPAND_RESPONSIVE_EDITOR:"expand",
REWRITE:"rewrite",REPHRASE_FUN:"rephrase_fun",REPHRASE_FORMAL:"rephrase_formal",REPHRASE_FANTASTICAL:"rephrase_fantastical",CONTINUE:"continue",FIX_SPELLING_GRAMMAR:"fix_spelling_grammar",APPLY_TONE_OF_VOICE:"apply_tone_of_voice",APPLY_CUSTOMISE_INSTRUCTION:"apply_customise_instruction",MORE_LIKE_THIS:"more_like_this",SPEAKER_NOTES:"speaker_notes"};
sKw={rmj:a=>{const b=a.ega.response.qG;return(0,__c.lQn)(br,{spacing:"0.5u",children:[b>0?void 0:(0,__c.oQ)(__c.Ax,{}),__c.oQ(__c.sQn,{onClick:a.UC,disabled:!1,children:b>0?J("PJTNOw",[b]):M("fCIUGQ")})]})},Und:()=>__c.oQ(__c.rQn,{})};mOw=__c.F(()=>({...__c.Zgi(),request:__c.A("A?",5,"ANALYZE_TONE_OF_VOICE")}));nOw=__c.F(()=>({na:S(1),userId:S(2),continuation:__c.U(3),limit:__c.gp(4,100)}));oOw=__c.F(()=>({na:S(1),userId:S(2),id:S(3)}));
pOw={GENERIC_FIXED_EDITOR:"generic",GENERIC_RESPONSIVE_EDITOR:"generic",TABLE:"generate_table",TABLE_COLUMN:"generate_table_column",APPLY_TONE_OF_VOICE_TABLE_COLUMN:"apply_tone_of_voice_table_column",ITERATE_TABLE_BULK_ACTION:"iterate_table_bulk_action",SHORTEN_TABLE_COLUMN:"shorten_table_column",REWRITE_TABLE_COLUMN:"rewrite_table_column",CREATE_SUMMARY_FIXED:"magic_summary",SUMMARIZE_FIXED_EDITOR:"summarize",SUMMARIZE_RESPONSIVE_EDITOR:"summarize",EXPAND_FIXED_EDITOR:"expand",EXPAND_RESPONSIVE_EDITOR:"expand",
REWRITE:"rewrite",REPHRASE_FUN:"rephrase_fun",REPHRASE_FORMAL:"rephrase_formal",REPHRASE_FANTASTICAL:"rephrase_fantastical",CONTINUE:"continue",FIX_SPELLING_GRAMMAR:"fix_spelling_grammar",APPLY_TONE_OF_VOICE:"apply_tone_of_voice",APPLY_CUSTOMISE_INSTRUCTION:"apply_customise_instruction",MORE_LIKE_THIS:"more_like_this",SPEAKER_NOTES:"speaker_notes"};qOw={[1]:"medical",[2]:"political",[3]:"sexual",[4]:"offensive",[5]:"illegal",[6]:"self"};
__c.rOw=class{async xTe(a){let b={state:"loading"};try{return b={state:"loaded",kM:await DIw(this,{va:a?.va})},(0,__c.ePr)(()=>this.u8a.eB=b),b}catch(c){throw(0,__c.ePr)(()=>this.u8a.eB={state:"error"}),c;}}YP(a,b){const {vba:c,...d}=a,e=!!this.Vf?.Mu;a=EIw(this,a);this.D9(e?"TABLE":a.type,{...b,cCc:!!d.kr,imd:!!d.Bug});return this.kfa(a)}kfa(a){let b="";return this.NS.GPj(a,new __c.fPr).pipe((0,__c.gPr)(c=>{if(c.type!=="COMPLETION")return b+=c.data,{status:"in_progress",text:b};var d={VCe:c.VCe,
owg:c.owg};a:switch(a.type){case "APPLY_TONE_OF_VOICE":case "APPLY_TONE_OF_VOICE_TABLE_COLUMN":var e=a.Bv.type==="BRAND_VOICE";break a;case "GENERIC_FIXED_EDITOR":case "GENERIC_RESPONSIVE_EDITOR":e=a.kr!=null;break a;case "TABLE":case "TABLE_COLUMN":case "REWRITE_TABLE_COLUMN":case "SHORTEN_TABLE_COLUMN":case "ITERATE_TABLE_BULK_ACTION":case "APPLY_CUSTOMISE_INSTRUCTION":case "MORE_LIKE_THIS":case "REWRITE":case "CREATE_SUMMARY_FIXED":case "SUMMARIZE_FIXED_EDITOR":case "EXPAND_RESPONSIVE_EDITOR":case "SUMMARIZE_RESPONSIVE_EDITOR":case "EXPAND_FIXED_EDITOR":case "CONTINUE":case "FIX_SPELLING_GRAMMAR":case "REPHRASE_FANTASTICAL":case "REPHRASE_FORMAL":case "REPHRASE_FUN":case "SPEAKER_NOTES":e=
!1;break a;default:throw new u(a);}a:switch(a.type){case "GENERIC_FIXED_EDITOR":case "GENERIC_RESPONSIVE_EDITOR":case "APPLY_TONE_OF_VOICE":case "APPLY_TONE_OF_VOICE_TABLE_COLUMN":var f=a.Bv?.type==="CUSTOM_VOICE";break a;case "TABLE":case "TABLE_COLUMN":case "REWRITE_TABLE_COLUMN":case "SHORTEN_TABLE_COLUMN":case "ITERATE_TABLE_BULK_ACTION":case "APPLY_CUSTOMISE_INSTRUCTION":case "MORE_LIKE_THIS":case "REWRITE":case "CREATE_SUMMARY_FIXED":case "SUMMARIZE_FIXED_EDITOR":case "EXPAND_RESPONSIVE_EDITOR":case "SUMMARIZE_RESPONSIVE_EDITOR":case "EXPAND_FIXED_EDITOR":case "CONTINUE":case "FIX_SPELLING_GRAMMAR":case "REPHRASE_FANTASTICAL":case "REPHRASE_FORMAL":case "REPHRASE_FUN":case "SPEAKER_NOTES":f=
!1;break a;default:throw new u(a);}d={...d,cCc:e,imd:f,nvc:c.nvc};switch(c.ljb){case 2:return this.kxh("input",a.type,c.owa,d),{status:"input_moderation_error",category:c.owa};case 3:return this.kxh("output",a.type,c.owa,d),{status:"output_moderation_error",category:c.owa};case 4:return this.Lxh("input",a.type,d),{status:"unsupported_language"};case 5:return this.Lxh("output",a.type,d),{status:"unsupported_language"};case 1:case void 0:return this.pRl(b,a.type,d),this.xTe(),{status:"complete",text:b};
default:throw new u(c.ljb);}}),(0,__c.hPr)(c=>{this.errorService.ra(c,{La:"text_generator stream:"});this.WRa({action:"generation_failed",wH:pOw[a.type]});return(0,__c.iPr)({status:"server_error",endUserMessage:c.endUserMessage})}))}async uAj(a){a=new __c.aPr({mga:a.mga});const {wc:b}=await this.NS.Ytd(a);({result:a}=__c.Qh(async()=>{var c=await this.NS.pJd(new mOw({wc:b,userId:this.X.user.id,na:this.X.Ab.brand.id}));ra(c.response==="ANALYZE_TONE_OF_VOICE");switch(c.Pna.response){case "PENDING":break;
case "SUCCESS":var d=c.Pna.Bv;c=c.Pna.description;this.uQl(c);return{status:"complete",Bv:d,description:c};case "MODERATED":switch(d=c.Pna.ljb,c=c.Pna.owa,d){case 2:return this.Kwh("input",c),{status:"input_moderation_error",category:c};case 3:return this.Kwh("output",c),{status:"output_moderation_error",category:c};case 4:return this.Lwh("input"),{status:"unsupported_language"};case 5:return this.Lwh("output"),{status:"unsupported_language"};default:throw new u(d);}case "ERROR":return this.tQl(),
{status:"error",AY:c.Pna.AY};default:throw new u(c.Pna);}},1E3,{Js:3E4}));return await a}async PIe(a){a=new nOw({na:this.X.Ab.brand.id,userId:this.X.user.id,limit:a?.limit});({HW:a}=await this.NS.PIe(a));return a}async MAe(a){a=new __c.bPr({...a});({id:a}=await this.NS.MAe(a));return a}async Scf(a){a=new __c.dPr({na:this.X.Ab.brand.id,userId:this.X.user.id,...a});await this.NS.Scf(a)}async $Be(a){const b=new oOw({na:this.X.Ab.brand.id,userId:this.X.user.id,...a});await this.NS.$Be(b);this.KYj(a.id,
3)}async Vjk(a){a=new __c.Pli({text:a.prompt});a=await this.NS.Bsg(a);ra(a.type==="GENERATE_TEXT_TITLES");return a}WRa(a){this.P.track(rD,{action:a.action,wH:a.wH,YFb:a.YFb,tAb:a.tAb,source:"editor"})}D9(a,b){this.P.track(rD,{...b,action:"text_submitted",wH:pOw[a],source:"editor"})}pRl(a,b,c){this.P.track(rD,{...c,action:"text_returned",wH:pOw[b],wJ:[...a].length,GC:eU(a),source:"editor"})}jxh(a,b){this.P.track(rD,{action:a,wH:b.wH,YFb:b.YFb,tAb:b.tAb,source:"editor"})}oRl(a,b,c){this.P.track(rD,
{...c,action:"stopped_generation",wH:b,wJ:[...a].length,GC:eU(a),source:"editor"})}kxh(a,b,c,d){this.P.track(rD,{...d,action:`${a}_moderated`,source:"editor",wH:pOw[b],owa:c&&qOw[c]})}Lxh(a,b,c){this.P.track(rD,{...c,action:`unsupported_${a}_language`,source:"editor",wH:pOw[b]})}gne(a){this.P.track(__c.m$g,{xd:a,Ls:"brand_voice",source:"other",location:"editor_magic_write_dialog",action:"design"})}vQl(a){this.P.track(rD,{action:"analyze_tone_of_voice_text_submitted",wJ:[...a].length,GC:eU(a),source:"editor"})}uQl(a){this.P.track(rD,
{action:"analyze_tone_of_voice_text_returned",wJ:[...a].length,GC:eU(a),source:"editor"})}tQl(){this.P.track(rD,{action:"analyze_tone_of_voice_failed",source:"editor"})}Kwh(a,b){this.P.track(rD,{action:`analyze_tone_of_voice_${a}_moderated`,source:"editor",owa:b&&qOw[b]})}Lwh(a){this.P.track(rD,{action:`analyze_tone_of_voice_unsupported_${a}_language`,source:"editor"})}c9i(a){this.P.track(rD,{...a,action:"create_signature_voice",source:"editor"})}RQl(){this.P.track(rD,{action:"created_signature_voice",
source:"editor"})}M9i(){this.P.track(rD,{action:"update_signature_voice",source:"editor"})}ZRl(){this.P.track(rD,{action:"updated_signature_voice",source:"editor"})}TQl(){this.P.track(rD,{action:"delete_signature_voice",source:"editor"})}Obf(){this.P.track(rD,{action:"select_active_voice",source:"editor"})}LRl(a){this.P.track(rD,{action:"prompt_library_item_selected",source:"editor",C5n:"pill",B5n:a.id})}async Mqk(a,b){if(this.u8h)try{const {usage:c}=await this.Ff.hMg(new __c.Zmd({user:this.X.user.id,
brand:this.X.Ab.brand.id,mBo:a,Sn:b,rf:40}));return c}catch(c){}}async KYj(a,b){if(this.u8h&&(a=await this.Mqk(a,b)))try{await this.Ff.Gvg(new __c.nej({user:this.X.user.id,brand:this.X.Ab.brand.id,rf:40,token:a.token}))}catch(c){this.errorService.ra(c,{La:"text_generator delete usage: "})}}async Wfk(){if(!this.u8h)return[];const {usages:a}=await this.Ff.rqb(new __c.vjf({brand:this.X.Ab.brand.id,user:this.X.user.id,rf:40,type:[29],limit:1}));return a}async Dgc(a,b){this.u8h&&await this.Ff.Gta(new __c.Iz({user:this.X.user.id,
brand:this.X.Ab.brand.id,item:new __c.QSg({id:a,Sn:b}),gya:[40],timestamp:this.Sb.now(),context:__c.bTg.dpa({mi:1})}))}constructor(a,b,c,d,e,f,g,h,k){this.u8a=a;this.u8h=b;this.Ff=c;this.NS=d;this.errorService=e;this.X=f;this.P=g;this.Sb=h;this.Vf=k}};sOw=__webpack_require__(186901);F_=sOw.EW;w_=sOw.h5;pKw=sOw.mJ;H_=sOw.sH;C_=sOw.XI;PIw=sOw.z7;var tOw=__webpack_require__(31968),E_=tOw.Fragment,x_=tOw.jsx,B_=tOw.jsxs;var uOw=__webpack_require__,vOw=uOw(208463),y_=uOw.n_x(vOw)();var wOw=__webpack_require__(845212),uNw=wOw.forwardRef,xOw=wOw.memo,bKw=wOw.useCallback,A_=wOw.useEffect,nMw=wOw.useId,yOw=wOw.useMemo,z_=wOw.useRef,zOw=wOw.useState;var D_=__webpack_require__(647370).PA;var AOw=__webpack_require__(536618).Sx;var BOw=__webpack_require__(671142).A;var COw=__webpack_require__(628181).Y;var DOw=__webpack_require__(247684).x;var EOw=__webpack_require__(659897).c;var UJw=__webpack_require__(506104).l;var jLw=__webpack_require__(807747).v;var kLw=__webpack_require__(847469).l;var lLw=__webpack_require__(67498).S;var mLw=__webpack_require__(741430).M;var nLw=__webpack_require__(895693).ZZ;var oLw=__webpack_require__(943474).O;var dLw=__webpack_require__(226260).c;var sLw=__webpack_require__(779900).W;var tLw=__webpack_require__(322546).of;var qLw=__webpack_require__(535921).T;var FOw=__webpack_require__(450117).B7;var GOw=__webpack_require__(268245).p;var HOw=class{async Prc({page:a,elements:b}){let c,d;try{const e=__c.Bn.snapshot(a),f=await this.Oqk(e),g=a.elements.toArray(),h=f.map(l=>l.oN!=null?g[l.BJ].pb.toArray()[l.oN]:g[l.BJ]),k=b.map(l=>h.indexOf(l));c=GIw(h.slice(0,Math.min(...k)));d=GIw(h.slice(Math.max(...k)+1))}catch(e){this.errorService.ra(e,{La:"fixed_context_controller context from page: "})}return{G3:c,F3:d}}async Oqk(a){const b=__c.Wg.hWc(a);ra(b.type==="FIXED");a=new __c.q3h({pages:[b],io:a.dimensions??this.document.dimensions,
qk:1,Aue:!0});a=(await this.wY.$0c(a)).pages[0].lYa;a=__c.ihi([a],FIw);return HIw(a[0])}constructor(a,b,c){this.wY=a;this.document=b;this.errorService=c}};var IOw=class extends __c.rOw{static G(a){O(a,{uDd:H_.ref,DBk:C_})}IAm(a){return a.Bug?new __c.mtr({prompt:a.prompt,Bv:{type:"CUSTOM_VOICE",id:a.Bug}}):a.kr?new __c.mtr({prompt:a.prompt,kr:a.kr,Bv:{type:"BRAND_VOICE",voice:a.kr}}):new __c.mtr({prompt:a.prompt})}get Mu(){return this.Vf?.Mu}get Uom(){return!!this.Vf?.Mu?.cKa}async insertText(a){const b=this.selection.Ma;this.Vf?.Mu?this.Vf.insertText(a.text):b&&b.type==="elements"&&b.Hg?.type==="shape"?await LIw(this,{...a,A7:b.Hg}):await this.DBk(a)}async DBk({text:a,
v5h:b,span:c}){const d=this.selection.Ma?.elements;if(d)if(d&&d.length>1&&!b)await this.Doc(a,c);else{var e=this.selection.Ma.Fp;if(d&&d.length>1&&b){const f=this.undo.startBuffering();for(const g of d)e.elements.delete(g);await this.Doc(a,c);w_(()=>{f.stop()})}else this.selection.Ma?.Hg?.type!=="text"?await this.Doc(a,c):b?this.OUc({page:e,hSb:this.selection.Ma.Hg},a):await this.Doc(a,c)}else await this.Doc(a,c)}OUc(a,b,c){MIw(this,a)?(a.hSb.text.setAttributes(this.Y6i),this.KWa==null?this.Lwa(a.page,
a.hSb,b):OIw(this,a,b),this.uDd=a.hSb,QIw(this)):this.Doc(b,c)}Lwa(a,b,c){const d=b.text;c=JIw(c);const e=SIw(c);d.Ywa(e);TIw(0,d,c);this.kd.K0(this.Ai.xb(a),b)}K9a(a,b,c){if(MIw(this,a)){if(this.KWa!=null)return RIw(this,a,b);c=a.page;a=a.hSb;var d=a.text;b=JIw(b);var e=SIw(b),f=d.charLength;d.isEmpty?d.Ywa(e+"\n"):d.kdb([{index:f-1,length:1}],"\n\n"+e);TIw(f+1,d,b);this.kd.K0(this.Ai.xb(c),a);this.uDd=a;QIw(this)}else this.Doc(b,c)}async Doc(a,b){var c=a.length<69;const d=c?"default_title":"default";
c={...this.oNl,...(c?this.gmk():this.O4d())};const {zyh:e}=await __webpack_require__.me(495003).then(()=>({zyh:__c.Pgi})),{text:f,GXc:g}=e(a,new __c.Moi(this.eH,this.PRa,c)).transform();if(g?.Pth)await this.qc.addTable(g.Pth,void 0,{Xc:"text_generator",span:b});else{const h=await __c.Eoe(this.qc,{text:f,context:{Xc:"text_generator",U0:d,span:b}});w_(()=>this.uDd=h)}QIw(this)}JEd(){return Promise.resolve(void 0)}I$c(){throw Error("Method not supported in Fixed doctype.");}A2b(){throw Error("Method not supported in Fixed doctype.");
}constructor(a,b,c,d,e,f,g,h,k,l,n,p,q,r,t,v,w,x,y=__c.Tb){super(a,b,c,d,e,f,g,y,h);this.selection=k;this.document=l;this.qc=n;this.PRa=p;this.KWa=q;this.kd=r;this.eH=t;this.undo=v;this.uDd=(IOw.G(this),void 0);this.O4d=()=>{const z=this.eH.anc;let B={style:"body"};z&&(B={...B,...z});return B};this.gmk=()=>{const z=this.eH.L7i;let B={style:"title","font-size":__c.Qje("supertitle").size*16/12,"font-weight":"bold"};z&&(B={...B,...z});return B};this.Ai=__c.zf(this.document);a={"font-kerning":"normal"};
w&&(a["font-feature-liga"]="on",a["font-feature-clig"]="on",a["font-feature-calt"]="on");this.oNl=a;w={"font-kerning":"normal"};x&&(w["font-feature-liga"]="on",w["font-feature-clig"]="on",w["font-feature-calt"]="on");this.Y6i=w}};var JOw=class{},KOw=class extends JOw{static G(a){O(a,{insertText:C_,Mu:F_})}insertText(a){if(this.Mu&&this.PRa){var b=this.Mu.uBl.ia.sheet,c=this.Mu.zXq,d=c.row,e=c.column;({GXc:c}=__c.Pgi(a,new __c.Moi(this.eH,this.PRa,{})).transform());var f=b.kL(d),g=b.zL(e);if(c)for(const h of c.Soa){const k=b.nEb(f+h.row),l=b.$xb(g+h.column);k&&l?this.fd.Ew(n=>{n.KEb(b,{row:k,column:l},__c.Fg.create(h.text))}):this.errorService.error("Invalid cell accessed")}else this.fd.Ew(h=>{h.RIa(b,{row:d,column:e},a)}),
this.errorService.error("Table parsing failed, inserting into singular cell")}}get Mu(){const a=this.selection.Ma;if(a?.Ri()&&a.type==="pages"&&a.inner?.type==="sheet"&&__c.hf(a.inner.page)){const b=new Map,c=Array.from(a.inner.cells),d=a.inner.page.sheet;let e=!1;d.layout.cells.forEach((k,l)=>{if(k.content.ref){var n=l.ec,p=l.$b;k=Nm({column:n,row:p},d);l=this.hLd(d,p,n);k&&l&&b.set(k,l);c.filter(({row:q,column:r})=>p===q&&n===r).length>0&&l?.trim()&&(e=!0)}});const f=Nm(c[0],d),g=Nm(c[c.length-
1],d);let h="";f&&g&&(h=`${f}:${g}`);return{tBl:a.inner.page,uBl:a.inner.container,YEa:b,zXq:{...c[0]},DE:h,cKa:e}}}hLd(a,b,c){if(b=this.fd.getContent(a,b,c))return a=b.Nr,b=b.hU,a?.type==="number"?a.value.toString():b}constructor(a,b,c,d,e){super();this.fd=a;this.selection=b;this.errorService=c;this.eH=d;this.PRa=e;this.dF=(KOw.G(this),new __c.mu)}};__c.LOw=class{static G(a){O(a,{eB:H_.ref,Rvk:F_})}get Rvk(){return this.eB.state==="loaded"&&this.eB.kM.gt>0}constructor(){this.eB=(__c.LOw.G(this),{state:"loading"})}};var BJw=a=>x_("div",{className:"QK5NLg",children:a.children});var MOw=({count:a,max:b})=>x_("div",{className:"YVxciA",children:x_(Q,{margins:"legacy",size:"xsmall",alignment:"end",tone:a>b?"critical":"tertiary",children:B_("span",{"aria-label":J("pBrsaw",[a,b]),"aria-live":"polite",children:[a,"/",b]})})});var NOw=uNw(function({GC:a,Q$f:b,...c},d){a=a!=null?x_(Tc,{spacing:"0",align:"end",children:x_(MOw,{count:a,max:b})}):null;return x_(TC,{...c,maxRows:10,cOa:0,ref:d,footer:a,placeholder:c.placeholder??M("bQVBtA"),tN:"yeSe3g",className:"KrT7uA",ft:!0,PK:!0})});var AJw=D_(a=>{const b=a.store,c=a.V,d=a.N8g,e=a.onSubmit,f=a.Ge,g=a.sb,{Jk:h,ifa:k}=VIw();var l=bKw(async()=>{const p=c.wb("editor.text_generator.click_try_example",{Hb:{name:"editor.text_generator.click_try_example"}});await d?.();p.ob().addEvent("loaded_example");k("end",()=>p.ob().addEvent("input_focused"));p.qe()},[d,k,c]);const n=[[Pk("Enter"),e]];l=!d||b.input&&!b.Cmb?void 0:x_("div",{className:"sLDoiQ",children:x_(Wi,{variant:"tertiary",onClick:l,size:"small",icon:b.Cmb?__c.Ju:tB,Qc:"medium",
alignment:"start",loading:b.Ibd,disabled:b.chb,children:b.Cmb?M("1Pv3Pg"):M("d4TDmg")})});return x_(Yo,{onSubmit:e,className:"J3xeeQ",children:B_(wp,{map:n,Hr:!0,children:[x_(R,{padding:"1.5u",paddingTop:"1u",children:B_(Tc,{spacing:"0.5u",children:[x_(f,{}),B_("div",{className:"i_HYow",children:[x_(NOw,{Ln:1,ref:h,disabled:b.chb,GC:b.Mqh?b.GC:void 0,Q$f:a.OQa,onChange:a.BE,onKeyDown:void 0,value:b.input}),l]})]})}),x_(Qt,{}),x_("div",{className:"haLt9A",children:x_(g,{})})]})})});var oJw=D_(a=>{const b=a.platform;var c=a.store;const d=a.$i?x_(Wi,{variant:"tertiary",size:"small",onClick:a.$i,children:M("Ih+h2Q")}):void 0;if(c.error)return c=x_("div",{className:"tTp_lQ",children:x_(Q,{size:"xsmall",tone:"critical",children:c.error})}),B_(br,{spacing:"0.5u",oY:"small",align:"spaceBetween",Fa:"center",children:[c,d]});a=x_("div",{className:y_({ubd8RQ:c.SIa}),children:x_(WIw,{eB:c.u8a.eB,Nza:a.Nza,Mga:a.Mga,Nz:a.Nz})});c=x_(Wi,{variant:"primary",size:"small",type:"submit",disabled:c.$yb,
className:"xjvNfQ",children:B_(br,{tagName:"span",spacing:"1u",Fa:"center",children:[M("64vVQQ"),x_(Sc,{light:c.$yb?"light":"dark",Qm:c.$yb?"light":"dark",children:e=>x_("div",{className:e.className,children:x_(Pc,{platform:b,size:"medium",Xoa:Pk("Enter"),compact:!0})})})]})});return B_(br,{spacing:"0.5u",oY:"small",align:"spaceBetween",Fa:"center",children:[a,B_(br,{spacing:"1u",oY:"small",align:"end",Fa:"center",children:[d,c]})]})});var lJw=({disabled:a,onClose:b,mtt:c})=>B_(br,{tagName:"header",spacing:"0.5u",Fa:"center",align:"spaceBetween",children:[c,x_(Wi,{variant:"tertiary",size:"tiny",Qc:"small",className:"su8qdA",onClick:b,icon:__c.nr,disabled:a,ib:M("W+m9sQ")})]});var mJw=D_(a=>{if(a.loading)return x_(OOw,{EWe:15});const b=a.SYb,c=a.pDe,[d,e]=XIw(a.pAa);a=[];const f=Math.max(d.length,e.length);for(let g=0;g<f;g++){const h=d[g],k=e[g];a.push(B_(Tc,{spacing:"1u",children:[h&&x_(POw,{start:h.Bi,title:h.title,onClick:()=>b(h),description:h.description},`top_${g}`),k&&x_(POw,{start:k.Bi,title:k.title,onClick:()=>b(k),description:k.description},`bottom_${g}`)]},"carousel"))}return x_($y,{kn:c?"none":"chevron",name:"prompt_library",ku:"small",children:a})}),POw=a=>
{const b=a.title,c=a.description;return x_("div",{className:"sdo3Sg",style:{width:220},onClick:a.onClick,children:B_($q,{Fa:"start",spacing:"1u",children:[x_(Yq,{width:"content",children:x_(Q,{size:"large",children:a.start})}),x_(Yq,{children:B_(Tc,{spacing:"0",children:[x_(Q,{size:"small",tone:"primary",weight:"bold",children:b}),x_(Q,{size:"small",tone:"secondary",lineClamp:2,children:c})]})})]})})},OOw=a=>{const b=[];for(let e=0;e<a.EWe;e++)b.push(x_("div",{className:"G5JCYA",children:x_(Xi,{shape:"rectangle"})}));
const [c,d]=XIw(b);return x_($y,{kn:"none",name:"prompt_library",expand:"large",children:[B_(Tc,{spacing:"1u",children:[x_(br,{spacing:"1u",Fa:"center",children:c}),x_(br,{spacing:"1u",Fa:"center",children:d})]},"carousel")]})};var QOw='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M17.69 10.345c-2.486-.496-3.558-1.694-4.056-4.115A.306.306 0 0 0 13.34 6c-.144 0-.26.1-.295.233-.497 2.483-1.631 3.616-4.054 4.112a.31.31 0 1 0 0 .62c2.485.497 3.552 1.67 4.05 4.09a.306.306 0 0 0 .299.256.306.306 0 0 0 .296-.24c.498-2.483 1.63-3.609 4.053-4.105a.31.31 0 1 0 0-.62Z" fill="url(#_1772921704__a)"/><path d="M8.553 13.584c.21 1.047.82 1.552 1.867 1.866a.228.228 0 1 1 0 .456c-1.048.21-1.553.819-1.867 1.866a.228.228 0 0 1-.457 0c-.21-1.047-.82-1.552-1.868-1.866a.228.228 0 1 1 0-.456c1.048-.21 1.553-.819 1.868-1.866a.228.228 0 0 1 .457 0Z" fill="url(#_1772921704__b)"/><defs><linearGradient id="_1772921704__a" x1="16.053" y1="26.301" x2="27.556" y2="13.524" gradientUnits="userSpaceOnUse"><stop stop-color="#AEADFF"/><stop offset="1" stop-color="#981BFA"/></linearGradient><linearGradient id="_1772921704__b" x1="16.053" y1="26.301" x2="27.556" y2="13.524" gradientUnits="userSpaceOnUse"><stop stop-color="#AEADFF"/><stop offset="1" stop-color="#981BFA"/></linearGradient></defs></svg>';var ROw='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M17.69 10.345c-2.486-.496-3.558-1.694-4.056-4.115A.306.306 0 0 0 13.34 6c-.144 0-.26.1-.295.233-.497 2.483-1.631 3.616-4.054 4.112a.31.31 0 1 0 0 .62c2.485.497 3.552 1.67 4.05 4.09a.306.306 0 0 0 .299.256.306.306 0 0 0 .296-.24c.498-2.483 1.63-3.609 4.053-4.105a.31.31 0 1 0 0-.62Z" fill="url(#_2627398116__a)"/><path d="M8.553 13.584c.21 1.047.82 1.552 1.867 1.866a.228.228 0 1 1 0 .456c-1.048.21-1.553.819-1.867 1.866a.228.228 0 0 1-.457 0c-.21-1.047-.82-1.552-1.868-1.866a.228.228 0 1 1 0-.456c1.048-.21 1.553-.819 1.868-1.866a.228.228 0 0 1 .457 0Z" fill="url(#_2627398116__b)"/><defs><linearGradient id="_2627398116__a" x1="16.053" y1="26.301" x2="27.556" y2="13.524" gradientUnits="userSpaceOnUse"><stop stop-color="#3C38FD"/><stop offset="1" stop-color="#981BFA"/></linearGradient><linearGradient id="_2627398116__b" x1="16.053" y1="26.301" x2="27.556" y2="13.524" gradientUnits="userSpaceOnUse"><stop stop-color="#3C38FD"/><stop offset="1" stop-color="#981BFA"/></linearGradient></defs></svg>';var SOw=__c.cyc({small:ROw},{small:{light:ROw,dark:QOw}});var TOw=a=>{const b=a.start,c=a.text;return x_(__c.hr,{className:"JjhHIQ",onClick:a.onClick,children:B_(br,{spacing:"1u",children:[b&&x_(Q,{children:b}),x_(Q,{children:c})]})})};var nJw=D_(a=>{const b=a.pAa,c=a.SYb,d=a.pDe;if(a.loading)return x_(UOw,{EWe:15});const [e,f]=YIw(b);return x_($y,{kn:d?"none":"chevron",name:"prompt_library",children:[B_(Tc,{spacing:"1u",children:[B_(br,{spacing:"1u",Fa:"center",children:[x_(SOw,{}),e.map((g,h)=>x_(TOw,{start:g.Bi,text:g.title,onClick:()=>c(g)},h))]}),x_(br,{spacing:"1u",children:f.map((g,h)=>x_(TOw,{start:g.Bi,text:g.title,onClick:()=>a.SYb(g)},h))})]},"carousel")]})}),UOw=a=>{const b=[];for(let e=0;e<a.EWe;e++)b.push([x_("div",
{className:"vbyg3A",children:x_(Xi,{shape:"rectangle"})},e)]);const [c,d]=YIw(b);return x_($y,{kn:"none",name:"prompt_library",expand:"large",children:[B_(Tc,{spacing:"1u",children:[B_(br,{spacing:"1u",Fa:"center",children:[x_(SOw,{}),c]}),x_(br,{spacing:"1u",Fa:"center",children:d})]},"carousel")]})};var cJw=class{static G(a){O(a,{Uqb:C_,xTe:C_,p0g:C_,PUe:C_,Rqb:C_,nNg:C_,zpo:C_,INg:C_,V5d:C_,cuk:C_,FNg:C_,e9m:C_,qba:C_,QMe:C_,l8m:C_,Ysk:C_,setState:C_,unh:C_,YP:C_,bbb:C_,c9m:C_,wio:C_,oG:C_,hE:C_,d0g:C_,oNg:C_,gDf:C_,Wmh:C_,apo:C_,D9c:C_,vNg:C_,U7m:C_,I8m:C_,K8m:C_,Mnb:C_,ave:C_,Gkf:C_,handleError:C_,ZLf:C_,D1a:C_})}Uqb(a){if(this.controller.u8a.eB.state==="loaded"&&this.controller.u8a.eB.kM.gt===0){if(this.controller.u8a.eB.kM.lSb===1)switch(this.u_.status){case Jx.Ak:this.u_.Rd("editor_magic_write_dialog",
"incidental");break;default:this.SIa(a)}else this.SIa(a);return!0}return!1}async xTe(a){a.error=void 0;try{const b=await this.controller.xTe();w_(()=>{b.state==="loaded"&&b.kM.gt===0&&this.SIa(a)})}catch(b){throw w_(()=>{a.error=M("g+AkHA")}),b;}}async p0g(a){if(!a.ZTc){w_(()=>{a.Ibd=!0});const b=await this.uHr();w_(()=>{a.ZTc=b;a.Ibd=!1})}}PUe(a){return this.controller.u8a.eB.state==="loaded"&&this.controller.u8a.eB.kM.gt===0?(this.SIa(a),!0):!1}Rqb(a,b){this.PUe(a)||(a.Cmb=!1,a.input=b.trim()?b:
"",a.error=void 0)}nNg(a){a.Cmb=!1;a.input="";a.error=void 0}zpo(a,b,c){this.Rqb(a,b);a.CM=c}async INg(a){await this.p0g(a);this.controller.WRa({action:"try_example_clicked"});w_(()=>{a.input=a.uhl[this.taf];a.Cmb=!0;a.error=void 0;this.taf=(this.taf+1)%a.uhl.length})}V5d(a,b){const c={YFb:a.sJa,tAb:a.e0};switch(b){case "append":this.controller.jxh("text_appended",c);b=!1;break;case "replace":this.controller.jxh("text_replaced",c);b=!0;break;default:this.controller.jxh("text_inserted",c),b=a.CM}this.controller.insertText({text:(this.MBg?
a.pGa:a.Pha)||"",v5h:b,Zv:a.Zv&&{...a.Zv,width:"100cqw",maxWidth:void 0}});a.C2e=!1;this.dispose(a);this.x5()}cuk(a,b){this.controller.oRl(a.Pha||"","generic",{cCc:!!b?.kr});this.xaf?.unsubscribe();a.Ez=!1}FNg(a,b,c){this.controller.WRa({action:"text_retried"});switch(a.Xfe){case "customisation":this.Ysk(a,c,"quick_actions");break;default:this.YP(a,b,c)}a.Pha=""}PMe(a){a.Pha&&(this.controller.WRa({action:"text_copied"}),navigator.clipboard.writeText(a.Pha),cc()&&this.ma.Ib({Db:M("D38LFA")}))}e9m(a){this.controller.WRa({action:"back"});
a.Pha="";a.Uya=[];this.qba(a)}qba(a){a.Xfe||a.iMa?(this.D1a(a,!1),a.state=a.Xfe??"default"):this.bbb(a)}QMe(a,b){this.PUe(a)||(a.FTa=b.trim()?b:"",a.error=void 0)}l8m(a){a.FTa="";a.error=void 0}Ysk(a,b,c){const d=this.controller.Mu;return d?this.Gkf({store:a,Mu:d.YEa,DE:d.DE,prompt:a.FTa,GC:a.NZd,va:b,location:c}):this.ave({store:a,text:a.input,Iyb:a.FTa,GC:a.NZd,va:b,location:c})}setState(a,b){a.state=b}unh(a,b){a.iMa=b}YP(a,b,c){this.D1a(a,!1);if(this.Uqb(a))return c.abort(),Promise.resolve();const d=
a.GC;if(d>this.OQa)return a.error=J("o15hng",[this.OQa]),c.abort(),Promise.resolve();c.ob().addEvent("input_validation_success");if(this.qa?.status===2)return a.error=M("9JC53g"),c.abort(),Promise.resolve();if(!a.input)return c.abort(),Promise.resolve();a.error=void 0;a.hWd=!1;const e=a.input.trim(),f=a.ZTc?.get(e);var g=()=>{a.hWd=!0};this.vRi?a.gwe=AOw(this.controller.JEd(e,g)):this.controller.JEd(e,g).then(p=>{p!=null&&(a.C2e=!0,this.controller.I$c({...p,width:"100cqw",maxWidth:void 0}))});let h;
b=b.fU;switch(b.Sn){case 3:var k=b.voice.id;break;case 2:g=b.voice.id,h=b.voice.Bv,this.controller.gne(g)}const l={prompt:e,vba:a.CM,kr:h,Bug:k};k=f?"sample_prompt":a.CM?"selection":void 0;a.state="post-generation";a.Ez=!0;const n={vO:k,mge:f,wJ:[...e].length,GC:d,jkm:a.hWd};this.Mnb(a,e,EIw(this.controller,l),n);return new Promise(p=>{this.xaf=this.controller.YP(l,n).subscribe($Iw(this,a,c,p))})}bbb(a){this.xaf?.unsubscribe();this.dispose(a);this.x5()}c9m(a,b){a.iMa?b?.preventDefault():this.bbb(a)}wio(a,
b){a.input=b.prompt;this.controller.LRl({id:b.id})}oG(a){a.isOpen=!0;this.ZLf(a)}hE(a){a.isOpen=!1}d0g(a){a.C2e&&this.controller.A2b()}oNg(a){a.Ez=!1}gDf(a,b){a.Pha=b;a.pGa=b}Wmh(a,b){a.Ez=b}apo(a,b){a.CM=b}D9c(a,b,c){const d=a.qKd;this.D1a(a,!1);this.controller.WRa({action:"this_but_submit_clicked"});a.qKd="";return this.ave({store:a,text:a.pGa||"",Iyb:d||"",GC:a.H8n,YFb:a.sJa,tAb:a.e0,u9f:!0,va:b,location:c})}vNg(a,b){const c=a.Zob;this.controller.WRa({action:"more_like_this_clicked"});if(!c||this.Uqb(a))return b.abort(),
Promise.resolve();if(this.qa?.status===2)return a.error=M("9JC53g"),b.abort(),Promise.resolve();a.error=void 0;a.Ez=!0;const d={...c.PSa,YFb:a.sJa,tAb:a.e0,vO:"iterative_buttons",mge:"more_like_this"};this.controller.D9(c.Nk.type,d);this.Mnb(a,M("NYUEbw"),c.Nk,d);return new Promise(e=>{this.xaf=this.controller.kfa(c.Nk).subscribe($Iw(this,a,b,e))})}U7m(a,b){a.qKd=b.trim()?b:"";a.error=void 0}I8m(a){this.controller.WRa({action:"next_iteration_clicked"});a.e0=Math.min(a.e0+1,a.Uya.length-1)}K8m(a){this.controller.WRa({action:"previous_iteration_clicked"});
a.e0=Math.max(0,a.e0-1)}Mnb(a,b,c,d){a.Pha="";a.Uya.push({Pha:"",prompt:b,Nk:c,PSa:d,error:void 0});a.e0=a.Uya.length-1}ave({store:a,text:b,Iyb:c,GC:d,va:e,location:f,u9f:g,YFb:h,tAb:k}){if(this.Uqb(a))return e.abort(),Promise.resolve();if(d>this.OQa)return a.error=J("o15hng",[this.OQa]),e.abort(),Promise.resolve();if(this.qa?.status===2)return a.error=M("9JC53g"),e.abort(),Promise.resolve();b=b.trim();c=c.trim();if(!b||!c)return e.abort(),Promise.resolve();a.error=void 0;a.state="post-generation";
a.Ez=!0;d={wJ:[...c].length,GC:d,location:f,YFb:h,tAb:k,mge:g?"this_but":void 0,vO:g?"iterative_buttons":"selection"};this.controller.D9("APPLY_CUSTOMISE_INSTRUCTION",d);const l=this.controller.Mu?new __c.ltr({prompt:c,Och:b}):new __c.Wsr({input:b,T$c:c});this.Mnb(a,c,l,d);return new Promise(n=>{this.xaf=this.controller.kfa(l).subscribe($Iw(this,a,e,n))})}Gkf({store:a,prompt:b,GC:c,va:d,Mu:e,DE:f,location:g,u9f:h,YFb:k,tAb:l}){if(this.Uqb(a))return d.abort(),Promise.resolve();if(c>this.OQa)return a.error=
J("o15hng",[this.OQa]),d.abort(),Promise.resolve();if(this.qa?.status===2)return a.error=M("9JC53g"),d.abort(),Promise.resolve();b=b.trim();a.error=void 0;a.state="post-generation";a.Ez=!0;c={wJ:[...b].length,GC:c,location:g,YFb:k,tAb:l,mge:h?"this_but":void 0,vO:h?"iterative_buttons":"selection"};this.controller.D9("APPLY_CUSTOMISE_INSTRUCTION",c);const n=new __c.ktr({prompt:b,Mu:e,DE:f});this.Mnb(a,b,n,c);return new Promise(p=>{this.xaf=this.controller.kfa(n).subscribe($Iw(this,a,d,p))})}handleError(a,
b){this.MBg||a.state!=="post-generation"||(a.state=a.Xfe??"default");a.Ez=!1;a.pGa="";a.Joc=b;a.error=b}async ZLf(a){if(this.yvn&&!a.pAa){a.ONb=!0;const b=await this.yvn();w_(()=>{a.pAa=b;a.ONb=!1})}}Gtk(a,b){this.handleError(a,ZIw(b))}Xtk(a,b){this.handleError(a,b||M("g+AkHA"))}D1a(a,b){a.gea=b;a.qKd=""}SIa(a){__c.tb.rd&&!a.SIa&&(a.SIa=!0,setTimeout(C_(()=>{a.SIa=!1}),750))}dispose(a){a.error=void 0;a.CM=!1;a.input="";a.SIa=!1;a.Cmb=!1;a.isOpen=!1;a.Pha="";a.state=void 0;a.Ez=!1;a.FTa="";a.iMa=!1;
a.Uya=[];a.e0=0;a.qKd="";a.gea=!1;a.ONb=!1}constructor(a,b,c,d,e,f,g,h,k,l){this.controller=a;this.x5=b;this.u_=c;this.OQa=d;this.qa=e;this.ma=f;this.MBg=g;this.uHr=h;this.yvn=k;this.vRi=l;this.xaf=(cJw.G(this),void 0);this.taf=0}};var sJw=D_(function(a){const b=a.store;var c=a.p9k;const {Jk:d,ifa:e}=VIw(),f=a.N8g;var g=!!f,h=bKw(()=>{f?.();e("end")},[f,e]);c=c?x_(Lt,{onClick:c,variant:"unstyled",children:B_(br,{spacing:"0.5u",Fa:"center",children:[x_(dr,{size:"xsmall",children:a.dMh}),x_(Rt,{size:"medium"})]})}):void 0;var k=b.error?x_("div",{className:"tTp_lQ",children:x_(Q,{size:"xsmall",tone:"critical",children:b.error})}):x_(WIw,{eB:b.u8a.eB,Nza:a.Nza,Mga:a.Mga,Nz:a.Nz});const l=b.state==="default"&&g?x_(Wi,{className:"sLDoiQ",
variant:"tertiary",onClick:h,loading:b.Ibd,icon:b.Cmb?__c.Ju:tB,ib:b.Cmb?M("1Pv3Pg"):M("d4TDmg")}):void 0;g=x_(hd,{onClick:a.onClose});h=a.F5g?B_(br,{spacing:"1u",Fa:"center",children:[x_(Wi,{ariaLabel:M("4LrC/w"),variant:"tertiary",size:"tiny",icon:__c.$x,Qc:"small",onClick:a.F5g}),g]}):void 0;k=B_($q,{spacing:"1u",Fa:"center",children:[x_(Yq,{children:k}),x_(Yq,{width:"content",children:l}),a.$i?x_(Yq,{width:"content",children:x_(ir,{variant:"tertiary",icon:__c.Ix,size:"small",ib:M("Ih+h2Q"),onClick:a.$i})}):
void 0,x_(Yq,{width:"content",children:x_(ir,{className:"xjvNfQ",type:"submit",variant:"primary",icon:__c.Ot,size:"small",ib:M("64vVQQ"),disabled:b.$yb,loading:b.Ez})})]});k=a.m7l?x_(a.m7l,{}):k;return B_("div",{className:"J3xeeQ",children:[b.state==="default"&&x_(id,{Wu:!0,start:B_(br,{spacing:"1.5u",Fa:"center",children:[x_(pD,{size:"medium",tone:"primary"}),c||a.dMh]}),end:h??g}),x_(R,{padding:"2u",children:x_(Yo,{onSubmit:a.onSubmit,children:B_(Tc,{spacing:"2u",children:[x_(NOw,{ref:d,Ln:3,value:b.state===
"customisation"?b.FTa:b.input,disabled:b.chb,GC:b.Mqh?b.GC:void 0,Q$f:a.OQa,onChange:a.BE,onKeyDown:void 0,placeholder:b.state==="customisation"?M("tXT6uw"):void 0}),k]})})})]})});var dJw=class{static G(a){O(a,{input:H_.ref,gwe:H_.ref,error:H_.ref,SIa:H_.ref,Cmb:H_.ref,Ibd:H_.ref,isOpen:H_.ref,ZTc:H_.ref,Pha:H_.ref,Xfe:H_.ref,_state:H_.ref,Ez:H_.ref,Avj:H_.ref,FTa:H_.ref,pAa:H_.ref,ONb:H_.ref,Uya:H_.deep,e0:H_.ref,gea:H_.ref,qKd:H_.ref,state:F_,iMa:F_,Mqh:F_,GC:F_,NZd:F_,chb:F_,$yb:F_,mIm:F_,uhl:F_,Uid:F_,Zob:F_,pGa:F_,Joc:F_,sJa:F_,H8n:F_,nDe:F_,JIj:F_,Zv:F_,nQe:F_})}get state(){return this._state}set state(a){a!==this._state&&(this.Xfe=a&&a!=="default"?this._state:void 0,
this._state=a)}get iMa(){return this.Avj||this.Ez}set iMa(a){this.Avj=a}get Mqh(){return this.GC>=this.pge}get GC(){return eU(this.input)}get NZd(){return eU(this.FTa)}get chb(){return this.Ez||this.u8a.eB.state==="error"}get $yb(){return this.chb||!this.u8a.Rvk||!this.input.trim()}get mIm(){return!this.FTa.trim()||this.chb||!this.u8a.Rvk}get uhl(){return this.ZTc?Array.from(this.ZTc.keys()):[]}get Uid(){return this.state==="default"&&!this.input.trim()&&(!!this.pAa||this.ONb)}get Zob(){if(this.e0>=
0&&this.e0<this.Uya.length)return this.Uya[this.e0]}get pGa(){return this.Zob?.Pha}set pGa(a){this.e0>=0&&this.e0<this.Uya.length&&(this.Uya[this.e0].Pha=a)}get Joc(){return this.Zob?.error}set Joc(a){this.e0>=0&&this.e0<this.Uya.length&&(this.Uya[this.e0].error=a)}get sJa(){return this.Uya.length}get H8n(){return eU(this.qKd)}get nDe(){return!!this.Joc||!this.pGa?.trim()}get JIj(){switch(this.state){case "customisation":return!!this.FTa;case "default":return!!this.input;default:return!1}}get Zv(){return this.gwe?.case({fulfilled:a=>
a})}get nQe(){return!!this.gwe?.case({pending:()=>!0,fulfilled:()=>!1})}constructor(a,b){this.u8a=a;this.pge=b;this.input=(dJw.G(this),"");this.CM=this.Avj=this.Ez=this.isOpen=this.Ibd=this.Cmb=this.SIa=this.hWd=this.C2e=!1;this.FTa="";this.ONb=!1;this.Uya=[];this.e0=0;this.gea=!1;this.qKd=""}};var zJw=D_(({VQ:a,chb:b,$yb:c,onChange:d,onSubmit:e})=>{const f=[[Pk("Enter"),e]];return x_(Yo,{onSubmit:e,className:"J3xeeQ",children:x_(wp,{map:f,Hr:!0,children:B_(R,{Pc:"0.5u",du:"1u",display:"flex",alignItems:"center",className:"_0Bi47A",children:[x_(rv,{disabled:b,ft:!0,onChange:d,onKeyDown:void 0,value:a,placeholder:M("tXT6uw")}),x_(ir,{variant:"primary",size:"xsmall",type:"submit",icon:tC,onClick:e,ib:M("e9v4Dw"),disabled:c})]})})})});var tJw=a=>{const b=a.xa,c=a.qml,[d,e]=zOw(500);a=bKw(h=>{h.client&&h.client.width>0&&e(h.client.width)},[]);const f=yOw(()=>VOw({vd:d,rI:Uc,Dvc:1,aspectRatio:10/3}),[d]),g=yOw(()=>c({vd:d,Df:f}),[c,d,f]);return B_(Tc,{spacing:"1u",align:"center",children:[x_(BOw,{client:!0,onResize:a,children:({measureRef:h})=>x_("div",{ref:h,style:{width:"100%",height:f},children:x_(__c.Nt,{expand:!0,loading:b,placeholder:x_(__c.Zy,{shape:"sharpRectangle"}),content:g})})}),x_(__c.jd,{size:"2u"})]})},VOw=({vd:a,
rI:b,Dvc:c,aspectRatio:d})=>(a-(c-1)*(b||0))/c/d;var WOw=()=>{const a=nMw();return B_("svg",{width:"20",height:"20",viewBox:"0 0 20 20",className:"h2HC_g",children:[x_("defs",{children:B_("linearGradient",{id:a,gradientTransform:"rotate(45)",children:[x_("stop",{stopColor:"#00C4CC"}),x_("stop",{offset:"1",stopColor:"#7D2AE8"})]})}),x_("g",{className:"oB2GCQ",children:x_("circle",{cx:"10",cy:"10",r:"9",stroke:`url(#${a})`,strokeWidth:"2",fill:"none",strokeDasharray:"28px",strokeDashoffset:"20px",className:"LsV_pA"})}),B_("g",{children:[x_("path",
{className:y_("qA1KPg","Um3xRg"),d:"M 11.6756 3.3582 c -0.01 -0.0506 -0.1013 -0.0506 -0.1112 0 c -0.1104 0.5561 -0.3959 1.6965 -0.9628 2.2634 c -0.5669 0.5669 -1.7073 0.8524 -2.2634 0.9628 c -0.0506 0.01 -0.0506 0.1013 0 0.1112 c 0.5561 0.1104 1.6965 0.3959 2.2634 0.9628 c 0.5669 0.5669 0.8524 1.7073 0.9628 2.2634 c 0.01 0.0506 0.1013 0.0506 0.1112 0 c 0.1104 -0.5561 0.3959 -1.6965 0.9628 -2.2634 c 0.5669 -0.5669 1.7073 -0.8524 2.2634 -0.9628 c 0.0506 -0.01 0.0506 -0.1013 0 -0.1112 c -0.5561 -0.1104 -1.6965 -0.3959 -2.2634 -0.9628 c -0.5669 -0.5669 -0.8524 -1.7073 -0.9628 -2.2634 z",
strokeWidth:"4px"}),x_("path",{className:y_("qA1KPg","Um3xRg"),d:"M 16.6598 0.0398 c -0.0108 -0.0531 -0.1079 -0.0531 -0.1195 0 c -0.0954 0.4507 -0.3154 1.2533 -0.7262 1.6641 c -0.4108 0.4117 -1.2135 0.6308 -1.665 0.7262 c -0.0523 0.0108 -0.0523 0.1079 0 0.1195 c 0.4515 0.0954 1.2533 0.3154 1.665 0.7262 c 0.4117 0.4108 0.6308 1.2135 0.7262 1.6641 c 0.0108 0.0531 0.1079 0.0531 0.1195 0 c 0.0954 -0.4507 0.3154 -1.2533 0.7262 -1.6641 c 0.4108 -0.4117 1.2135 -0.6308 1.665 -0.7262 c 0.0523 -0.0108 0.0523 -0.1079 0 -0.1195 c -0.4515 -0.0954 -1.2533 -0.3154 -1.665 -0.7262 c -0.4117 -0.4108 -0.6308 -1.2135 -0.7262 -1.6641 z",
strokeWidth:"4px"}),x_("path",{className:"qA1KPg",d:"M 11.722 3.3715 c -0.01 -0.0508 -0.1017 -0.0508 -0.1117 0 c -0.1108 0.5583 -0.3975 1.7033 -0.9666 2.2724 c -0.5691 0.5691 -1.7141 0.8558 -2.2724 0.9666 c -0.0508 0.01 -0.0508 0.1017 0 0.1117 c 0.5583 0.1108 1.7033 0.3975 2.2724 0.9666 c 0.5691 0.5691 0.8558 1.7141 0.9666 2.2724 c 0.01 0.0508 0.1017 0.0508 0.1117 0 c 0.1108 -0.5583 0.3975 -1.7033 0.9666 -2.2724 c 0.5691 -0.5691 1.7141 -0.8558 2.2724 -0.9666 c 0.0508 -0.01 0.0508 -0.1017 0 -0.1117 c -0.5583 -0.1108 -1.7033 -0.3975 -2.2724 -0.9666 c -0.5691 -0.5691 -0.8558 -1.7141 -0.9666 -2.2724 z",
fill:`url(#${a})`}),x_("path",{className:"qA1KPg",d:"M 16.6598 0.0398 c -0.0108 -0.0531 -0.1079 -0.0531 -0.1195 0 c -0.0954 0.4507 -0.3154 1.2533 -0.7262 1.6641 c -0.4108 0.4117 -1.2135 0.6308 -1.665 0.7262 c -0.0523 0.0108 -0.0523 0.1079 0 0.1195 c 0.4515 0.0954 1.2533 0.3154 1.665 0.7262 c 0.4117 0.4108 0.6308 1.2135 0.7262 1.6641 c 0.0108 0.0531 0.1079 0.0531 0.1195 0 c 0.0954 -0.4507 0.3154 -1.2533 0.7262 -1.6641 c 0.4108 -0.4117 1.2135 -0.6308 1.665 -0.7262 c 0.0523 -0.0108 0.0523 -0.1079 0 -0.1195 c -0.4515 -0.0954 -1.2533 -0.3154 -1.665 -0.7262 c -0.4117 -0.4108 -0.6308 -1.2135 -0.7262 -1.6641 z",
fill:`url(#${a})`})]})]})};var $Ow=({node:a})=>{switch(a.type){case "emphasis":case "strong":return x_("b",{children:XOw(a.children)});case "list":return x_(Q,{lx:!0,tagName:"div",children:a.ordered?x_("ol",{className:"WSy8OQ",start:a.start??void 0,children:XOw(a.children)}):x_("ul",{className:"WSy8OQ",children:XOw(a.children)})});case "listItem":return x_("li",{children:XOw(a.children)});case "link":return x_("b",{children:a.url});case "heading":return x_(YOw,{node:a});case "paragraph":return x_(Q,{lx:!0,children:XOw(a.children)});
case "root":return x_(Tc,{spacing:"1u",children:XOw(a.children)});case "text":case "inlineCode":return a.value;case "table":return x_(ZOw,{node:a});case "thematicBreak":return x_(Qt,{});case "break":return x_("br",{});case "code":return x_(Q,{lx:!0,children:a.value});default:return null}},ZOw=({node:a})=>x_("table",{className:"mTeYfw",children:a.children.map((b,c)=>x_("tr",{children:b.children.map((d,e)=>x_("td",{className:"X4KkOQ",children:d.children.map((f,g)=>x_(aPw,{content:f},g))},e))},c))}),
aPw=({content:a})=>a.type==="text"?x_(Q,{lx:!0,children:a.value}):x_($Ow,{node:a}),YOw=({node:a})=>x_(dr,{size:bPw(a.depth),lx:!0,children:XOw(a.children)}),bPw=a=>{switch(a){case 1:return"medium";case 2:return"small";case 3:return"xsmall";case 4:case 5:case 6:return"xxsmall";default:throw new u(a);}},XOw=a=>a.map((b,c)=>x_($Ow,{node:b},c));var vJw=D_(a=>{const b=a.Fb,c=a.store,d=a.sb,e=a.Zv,f=a.la.layout===2,g=COw(c.Pha||"",{extensions:[DOw()],mdastExtensions:[EOw()]}),h=c.Pha&&!c.Ez,k=z_(null);A_(()=>{if(c.Ez&&k.current){var p=k.current;p.scrollHeight-p.scrollTop-p.clientHeight<40&&(p.scrollTop=p.scrollHeight)}},[c.Pha,c.Ez]);const l=c.Xfe==="customisation"?c.FTa:c.input,n=x_(Q,{size:"small",tone:"secondary",weight:"bold",lineClamp:1,children:l});return x_(wp,{map:[["Enter",p=>{a.oQa();p.stopPropagation()}]],Hr:!0,children:B_("div",
{className:y_("J3xeeQ","n4Wf9Q"),children:[B_("div",{className:y_({h2jTVQ:!h&&!f}),children:[x_(id,{start:c.Ez?x_(WOw,{}):x_(pr,{onClick:b}),title:f?l:n,padding:"1.5u",Wu:f}),x_(R,{padding:"1.5u",paddingTop:f?"1.5u":"0",className:y_({h2jTVQ:!h&&f,OLqlCg:h&&f}),children:B_("section",{className:y_("lfB0Xg",{"_1MrC6A lfB0Xg":!f}),ref:k,children:[e,x_($Ow,{node:g}),c.Ez&&x_("span",{className:"_5FB0eQ"})]})}),!f&&x_(Qt,{})]}),x_("div",{className:"haLt9A",children:x_(d,{})})]})})});var yJw=D_(a=>{const b=a.Aud,c=a.mBe;var d=a.Fb,e=a.h5g;const f=a.D9c,g=a.Ez,h=a.sb,k=a.Zv,l=COw(b,{extensions:[DOw()],mdastExtensions:[EOw()]}),n=z_(null);A_(()=>{if(g&&n.current){var q=n.current;q.scrollHeight-q.scrollTop-q.clientHeight<40&&(q.scrollTop=q.scrollHeight)}},[b,g]);e=x_(Q,{size:"xsmall",tone:"tertiary",children:e&&!g&&x_(ak,{message:M("hFevrA"),uf:e,Kx:"subtle"})});const p=x_(Q,{size:"small",tone:"secondary",weight:"bold",lineClamp:1,children:a.FUa});d=g?x_(WOw,{}):a.sJa>1?x_(cPw,{$S:a.$S,
total:a.sJa,Sza:a.nXe,onNext:a.mXe}):x_(pr,{onClick:d});return x_(wp,{map:[["Enter",q=>{c||g||(f?f():(a.oQa(),q.stopPropagation()))}]],Hr:!0,children:B_("div",{className:y_("J3xeeQ","n4Wf9Q"),children:[B_("div",{className:y_({h2jTVQ:g}),children:[x_(id,{start:d,title:p,padding:"1.5u",Wu:!1}),x_(R,{Lb:"1.5u",paddingTop:"0",paddingBottom:"2u",children:B_(Tc,{spacing:"1.5u",children:[x_("section",{className:"_1MrC6A lfB0Xg",ref:n,children:c?x_(Q,{tone:"critical",children:c}):B_(E_,{children:[k,x_($Ow,
{node:l}),g&&x_("span",{className:"_5FB0eQ"})]})}),!g&&b.trim().length>0&&e]})}),x_(Qt,{})]}),x_("div",{className:"haLt9A",children:x_(h,{})})]})})}),cPw=({$S:a,total:b,Sza:c,onNext:d})=>B_(br,{spacing:"0.5u",Fa:"center",children:[x_(Wi,{variant:"tertiary",size:"small",icon:__c.lr,onClick:c,ariaLabel:M("Me7LTA"),disabled:a===1}),B_(dr,{size:"xsmall",ariaLabel:J("7Aha+w",[a,b]),children:[a,"/",b]}),x_(Wi,{variant:"tertiary",size:"small",icon:__c.mr,onClick:d,disabled:a===b,ariaLabel:M("PBVqiA")})]});var pJw=D_(a=>{var b=a.store,c=a.la;const d=a.Rk;var e=a.h5g;const f=a.V;var g=bKw(async()=>{const r=f.wb("editor.text_generator.click_retry",{Hb:{name:"editor.text_generator.click_retry"}});d?.(r);r.isRecording()&&r.end()},[d,f]),h=(c=c.layout===2)?"medium":"small",k=c?null:x_(Sc,{light:"dark",Qm:"dark",children:r=>x_("div",{className:r.className,children:x_(Pc,{platform:a.platform,size:"medium",Xoa:"Enter",compact:!0})})});const l=x_(Wi,{variant:"secondary",size:h,onClick:a.E0a,stretch:c,className:"RgDSrw",
children:B_(br,{spacing:"1u",align:c?"center":"start",Fa:"center",children:[M("xqSQtw"),!c&&x_(Pc,{platform:"apple",size:"medium",Xoa:"Escape"})]})}),n=x_(dPw,{Fmg:h,onClick:a.onCopy});g=d?x_(Wi,{variant:"tertiary",size:h,onClick:g,className:"_9LPn7w",icon:__c.Ju,ib:M("zZYIng")}):void 0;var p=x_(Wi,{variant:"secondary",size:h,onClick:a.CRc,stretch:c,className:"_nejLQ",children:x_(Q,{weight:"bold",tone:cr,lineClamp:1,children:M("yZwLnA")})});const q=x_(Wi,{variant:"primary",size:h,onClick:a.C0a,stretch:c,
className:"_nejLQ",children:B_(br,{spacing:"1u",align:c?"center":"start",children:[x_(Q,{weight:"bold",tone:cr,lineClamp:1,children:M("Zrw8Kg")}),k]})});h=x_(Wi,{variant:b.CM?"secondary":"primary",size:h,onClick:a.oQa,stretch:c,className:"_nejLQ",children:B_(br,{spacing:"1u",align:c?"center":"start",Fa:"center",children:[x_(Q,{weight:"bold",tone:cr,lineClamp:1,children:M("lz+XXQ")}),k]})});e=x_(Q,{size:"xsmall",tone:"tertiary",children:e&&!b.Ez&&x_(ak,{message:M("hFevrA"),uf:e,Kx:"subtle"})});k=b.CM?
B_(E_,{children:[p,q]}):h;k=B_($q,{spacing:"1u",align:"spaceBetween",Fa:"center",children:[x_(Yq,{children:e}),x_(Yq,{width:"content",children:b.Ez?l:B_(br,{spacing:"1u",Fa:"center",children:[n,g,k]})})]});p=b.CM?B_(E_,{children:[x_(Yq,{width:"containedContent",children:p}),x_(Yq,{width:"containedContent",children:q})]}):x_(Yq,{width:"containedContent",children:h});b=x_(Tc,{spacing:"1u",children:b.Ez?l:B_(E_,{children:[e,B_($q,{Fa:"start",spacing:"1u",children:[x_(Yq,{width:"content",children:n}),
x_(Yq,{width:"content",children:g}),x_(Yq,{}),p]})]})});return c?b:k}),dPw=({Fmg:a,onClick:b})=>{const [c,d]=zOw(!1),e=bKw(()=>{b();d(!0);setTimeout(()=>d(!1),3E3)},[b]);return x_(Wi,{variant:"tertiary",size:a,onClick:e,className:"_9LPn7w",ariaLabel:M("ishvKw"),ib:c?M("c8AREg"):void 0,icon:c?sr:tD})};var qJw=D_(a=>{var b=a.Ez,c=a.CM;const d=a.gea,e=a.bDe,f=a.eB;var g=a.Iyb,h=a.Rk,k=a.XYe;const l=a.D1a,n=z_(null);A_(()=>{const z=n.current;z!=null&&(z.focus(),z.blur())},[]);const {Jk:p,ifa:q}=VIw();A_(()=>{d&&q()},[p,d,q]);var r=x_(Sc,{light:e?"light":"dark",Qm:e?"light":"dark",children:z=>x_("div",{className:z.className,children:x_(Pc,{platform:a.platform,size:"medium",Xoa:"Enter",compact:!0})})});const t=x_(Wi,{variant:"secondary",size:"small",onClick:a.E0a,className:"RgDSrw",children:B_(br,{spacing:"1u",
children:[M("xqSQtw"),x_(Pc,{platform:"apple",size:"medium",Xoa:"Escape"})]})}),v=x_(ePw,{onClick:a.onCopy});h=b?void 0:x_(Wi,{variant:"secondary",size:"small",onClick:h,className:"_9LPn7w",disabled:e,children:M("NYUEbw")});const w=b?void 0:x_(Wi,{variant:"secondary",size:"small",onClick:()=>l(!0),disabled:e,children:M("qgG9uA")});var x=x_(Wi,{variant:"secondary",size:"small",onClick:a.CRc,className:"_nejLQ",disabled:e,children:x_(Q,{weight:"bold",tone:cr,lineClamp:1,children:M("yZwLnA")})});const y=
x_(Wi,{variant:"primary",size:"small",onClick:a.C0a,className:"_nejLQ",disabled:e,children:B_(br,{spacing:"1u",align:"start",Fa:"center",children:[x_(Q,{weight:"bold",tone:cr,lineClamp:1,children:M("Zrw8Kg")}),r]})});r=x_(Wi,{variant:c?"secondary":"primary",size:"small",onClick:a.oQa,className:"_nejLQ",disabled:e,children:B_(br,{spacing:"1u",align:"start",children:[x_(Q,{weight:"bold",tone:cr,lineClamp:1,children:M("lz+XXQ")}),r]})});c=c?B_(E_,{children:[x,y]}):r;r=x_(Wi,{variant:"secondary",size:"small",
icon:__c.or,ariaLabel:M("z7hZsg"),onClick:()=>l(!1)});x=!g.trim();k=x_(Wi,{variant:"primary",size:"small",type:"submit",onClick:k,disabled:x,children:B_(br,{tagName:"span",spacing:"1u",children:[M("64vVQQ"),x_(Sc,{light:x?"light":"dark",Qm:x?"light":"dark",children:z=>x_("div",{className:z.className,children:x_(Pc,{platform:a.platform,size:"medium",Xoa:"Enter",compact:!0})})})]})});g=B_($q,{spacing:"1u",align:"spaceBetween",Fa:"center",children:[B_(R,{Lb:"1u",width:"full",display:"flex",alignItems:"center",
children:[r,x_(rv,{type:"text",ref:p,value:g,onChange:a.hXe,ft:!0,placeholder:M("qgG9uA"),className:"Wsz5Vw"})]}),x_(Yq,{width:"content",children:k})]});b=a.gea?g:B_($q,{spacing:"1u",align:"spaceBetween",Fa:"center",children:[x_(Yq,{children:f.state==="loaded"&&f.kM.gt===0?x_(Q,{size:"small",tone:"critical",children:M("s4tL4Q")}):B_(br,{spacing:"1u",children:[h,w]})}),x_(Yq,{width:"content",children:b?t:B_(br,{spacing:"1u",Fa:"center",children:[!e&&v,c]})})]});return x_("div",{ref:n,tabIndex:-1,children:b})}),
ePw=({onClick:a})=>{const [b,c]=zOw(!1),d=bKw(()=>{a();c(!0);setTimeout(()=>c(!1),3E3)},[a]);return x_(Wi,{variant:"tertiary",size:"small",onClick:d,className:"_9LPn7w",ariaLabel:M("ishvKw"),ib:b?M("c8AREg"):void 0,icon:b?sr:tD})};var uJw=D_(a=>{var b=a.Aud;const c=a.mBe,d=a.Fb,e=a.D9c,f=a.Ez,g=a.sb,h=a.Zv,k=COw(b,{extensions:[DOw()],mdastExtensions:[EOw()]}),l=z_(null);A_(()=>{if(f&&l.current){var n=l.current;n.scrollHeight-n.scrollTop-n.clientHeight<40&&(n.scrollTop=n.scrollHeight)}},[b,f]);b=f?x_(WOw,{}):a.sJa>1?x_(fPw,{$S:a.$S,total:a.sJa,Sza:a.nXe,onNext:a.mXe}):x_(pr,{onClick:d});return B_(wp,{map:[["Enter",n=>{c||f||(e?e():(a.oQa(),n.stopPropagation()))}]],Hr:!0,children:[B_("div",{className:y_("J3xeeQ","n4Wf9Q"),children:[x_(id,
{start:b,title:a.FUa,padding:"1.5u"}),x_(R,{padding:"2u",paddingTop:"1.5u",className:y_({h2jTVQ:f}),children:B_(Tc,{spacing:"2u",children:[x_("section",{className:"VqPJjw _1MrC6A lfB0Xg",ref:l,children:c?x_(Q,{tone:"critical",children:c}):B_(E_,{children:[h,x_($Ow,{node:k}),f&&x_("span",{className:"_5FB0eQ"})]})}),!f&&!c&&!a.gea&&B_(br,{spacing:"1u",Fa:"center",children:[x_(SOw,{}),x_(TOw,{onClick:a.Rk,text:M("NYUEbw")}),x_(TOw,{onClick:()=>a.D1a(!0),text:M("qgG9uA")})]})]})}),!a.gea&&x_(Qt,{})]}),
x_(R,{padding:"2u",paddingTop:"1.5u",children:x_(g,{})})]})}),fPw=({$S:a,total:b,Sza:c,onNext:d})=>B_(br,{spacing:"0.5u",Fa:"center",children:[x_(Wi,{variant:"subtleLinkButton",icon:__c.lr,onClick:c,ariaLabel:M("Me7LTA"),disabled:a===1}),B_(dr,{size:"xsmall",ariaLabel:J("7Aha+w",[a,b]),children:[a,"/",b]}),x_(Wi,{variant:"subtleLinkButton",icon:__c.mr,onClick:d,disabled:a===b,ariaLabel:M("PBVqiA")})]});var rJw=D_(a=>{const b=a.Ez;var c=a.CM;const d=a.gea,e=a.bDe;var f=a.Iyb,g=a.h5g,h=a.XYe;const {Jk:k,ifa:l}=VIw();A_(()=>{d&&l()},[k,d,l]);g=x_(Q,{size:"xsmall",tone:"tertiary",children:g&&!b&&x_(ak,{message:M("hFevrA"),uf:g,Kx:"subtle"})});const n=x_(Wi,{variant:"secondary",size:"small",onClick:a.E0a,className:"RgDSrw",stretch:!0,children:M("xqSQtw")}),p=x_(gPw,{onClick:a.onCopy});var q=x_(Wi,{variant:"secondary",onClick:a.CRc,className:"_nejLQ",stretch:!0,disabled:e,children:M("yZwLnA")});const r=
x_(Wi,{variant:"primary",onClick:a.C0a,className:"_nejLQ",stretch:!0,disabled:e,children:M("Zrw8Kg")}),t=x_(Wi,{variant:c?"secondary":"primary",onClick:a.oQa,className:"_nejLQ",stretch:!0,disabled:e,children:M("lz+XXQ")});c=c?B_(E_,{children:[x_(Yq,{width:"fluid",children:q}),x_(Yq,{width:"fluid",children:r})]}):x_(Yq,{width:"fluid",children:t});q=x_(Wi,{variant:"tertiary",size:"small",icon:__c.or,ariaLabel:M("z7hZsg"),onClick:()=>a.D1a(!1)});h=x_(ir,{variant:"primary",size:"xsmall",type:"submit",
icon:tC,ariaLabel:M("64vVQQ"),onClick:h,disabled:!f.trim()});f=B_(R,{Lb:"1u",width:"full",display:"flex",justifyContent:"spaceBetween",alignItems:"center",className:"pEwOIw",children:[x_(rv,{start:q,type:"text",ref:k,value:f,onChange:a.hXe,ft:!0,placeholder:M("qgG9uA"),className:"Wsz5Vw"}),h]});return a.gea?f:x_(Tc,{spacing:"1u",children:b?n:B_(Tc,{spacing:"3u",children:[B_($q,{Fa:"start",spacing:"1u",children:[!e&&x_(Yq,{width:"content",children:p}),c]}),x_(R,{width:"full",display:"flex",flexDirection:"column",
alignItems:"center",children:g})]})})}),gPw=({onClick:a})=>{const [b,c]=zOw(!1),d=bKw(()=>{a();c(!0);setTimeout(()=>c(!1),3E3)},[a]);return x_(Wi,{variant:"tertiary",onClick:d,className:"_9LPn7w",ariaLabel:M("ishvKw"),ib:b?M("c8AREg"):void 0,icon:b?sr:tD})};var fJw,iPw;hPw=__c.hPw={voice:{id:"default",name:M("sWiSMA")},Sn:1};
fJw=class{static G(a){O(a,{Fse:H_.ref,Av:H_.deep,jZ:H_.ref,state:H_.ref,fGc:H_.ref,tZ:H_.shallow,error:H_.ref,dHc:H_.ref,jNb:H_.ref,fU:F_,dng:F_,nOg:F_,zNc:F_,Bdf:F_})}get fU(){return this.u_.status===Jx.ei?this.Fse:hPw}set fU(a){this.Fse=a}get xa(){return this.state==="loading"||this.state==="analyzing"||this.state==="saving"}get dng(){return this.state==="loaded"&&this.jZ.length<this.vUe}get nOg(){return this.tZ.has(1)}get zNc(){return this.tZ.has(2)||this.tZ.has(3)}get Bdf(){const a=[];this.tZ.forEach(b=>
{switch(b){case 3:b=iPw[b](this.jEn);break;default:b=iPw[b]()}a.push(b)});return a}constructor(a,b,c,d){this.u_=a;this.jEn=b;this.UAn=c;this.Fse=(fJw.G(this),hPw);this.Av={name:"",Bv:"",mga:"",description:""};this.jZ=[];this.state="loading";this.fGc=!1;this.tZ=new Set;this.jNb=this.dHc=!1;this.vUe=d>0?d:3}};iPw={[1]:()=>M("R6Ro/Q"),[2]:()=>M("adO5AA"),[3]:a=>J("O227zA",[a])};var xJw=D_(({store:a,Ws:b,onClose:c,zGd:d,Fb:e,SCi:f,RCi:g,Pvc:h,VDi:k,nwc:l,fFh:n})=>{var p=a.xa;const q=!a.jNb&&!!a.Av.Bv;let r=a.error?[a.error,...a.Bdf]:a.Bdf;r=r.length===1?r[0]:r;d=B_("div",{className:!a.fGc&&a.nOg?"M0gq_w":void 0,children:[x_(Q,{weight:"bold",children:x_(__c.zD,{value:a.Av.name,placeholder:M("ylhVxw"),Gja:a.fGc,Wv:d,RDa:({active:t})=>g(t),maxLength:24})}),a.Av.id&&x_(Q,{size:"small",children:M("YbpjFg")})]});k=B_(br,{spacing:"1u",children:[a.Av.id&&x_(__c.Rzc,{ariaLabel:M("3Ws7cw"),
onClick:k,icon:__c.Ix,disabled:p}),x_(hd,{onClick:c,disabled:p})]});c=x_(Tc,{spacing:"0",align:"end",children:x_(R,{padding:"1.5u",children:x_(__c.ov,{margins:"none",count:a.Av.mga.length,max:a.UAn})})});e=x_(id,{Wu:b,start:x_(pr,{onClick:e}),title:d,end:k,padding:b?void 0:"0"});f=x_(TC,{value:a.Av.mga,placeholder:M("K1SWTw"),required:!0,Ln:10,error:a.zNc,footer:c,disabled:p,onChange:f,ft:b});d=x_(TC,{value:a.Av.description,placeholder:M("5XOlIA"),Ln:12,disabled:!0});p=q?x_(Wi,{type:"submit",variant:"primary",
icon:a.state==="saving"?cE:void 0,disabled:p,stretch:b,children:M("ko25oQ")}):void 0;n=a.dHc?x_(n,{}):void 0;return b?x_(jPw,{store:a,header:e,bbf:d,Cxd:r,Pvc:h,nwc:l,Ayc:p,c4e:f,ZBe:n}):x_(kPw,{store:a,header:e,bbf:d,Ayc:p,Cxd:r,Pvc:h,nwc:l,ZBe:n,c4e:f})}),jPw=({store:a,header:b,c4e:c,bbf:d,Cxd:e,Pvc:f,nwc:g,ZBe:h,Ayc:k})=>{const l=!!a.Av.Bv,[n,p]=zOw("sampleText");var q=a.jNb&&!!a.Av.mga;const r=()=>p("toneOfVoice");q=x_(Wi,{variant:k?"secondary":"primary",icon:a.state==="analyzing"?cE:void 0,disabled:a.zNc||
a.xa||!q,onClick:()=>f(r),stretch:!0,children:M("KXZ+ug")});q=n==="sampleText"?q:k;c=B_(R,{padding:"0",children:[!l&&x_(R,{tp:"1.5u",paddingTop:"1u",children:x_(Q,{size:"medium",weight:"bold",children:M("6YN75w")})}),c]});return h?h:x_(Yo,{onSubmit:n==="toneOfVoice"?g:void 0,children:B_(Tc,{spacing:"0",children:[b,x_(R,{padding:"2u",children:B_(Tc,{spacing:"1u",children:[!!k&&x_(__c.xx,{options:[{label:M("cLkJkQ"),value:"sampleText"},{label:M("+F+ong"),value:"toneOfVoice"}],value:n,onChange:t=>{p(t)},
disabled:a.xa}),n==="sampleText"?c:d,x_(__c.DC,{id:"configure_voice_error",tone:"critical",children:e})]})}),x_(R,{padding:"2u",borderTop:"low",children:q})]})})},kPw=({store:a,header:b,c4e:c,bbf:d,Cxd:e,Pvc:f,nwc:g,Ayc:h,ZBe:k})=>{const l=a.jNb&&!!a.Av.mga;a=x_(Wi,{variant:h?"secondary":"primary",icon:a.state==="analyzing"?cE:void 0,disabled:a.zNc||a.xa||!l,onClick:()=>f(),children:M("KXZ+ug")});return B_(Yo,{onSubmit:g,children:[!!k&&k,x_(R,{padding:"1.5u",children:b}),x_(Qt,{}),x_(R,{padding:"1.5u",
children:B_($q,{Fa:"start",spacing:"1u",children:[x_(Yq,{children:B_(Tc,{spacing:"1u",children:[x_(Q,{weight:"bold",children:M("6YN75w")}),c]})}),x_(Yq,{children:B_(Tc,{spacing:"1u",children:[x_(Q,{weight:"bold",children:M("lyxYaw")}),d]})})]})}),x_(Qt,{}),x_(R,{padding:"1.5u",children:B_($q,{spacing:"1.5u",align:"end",Fa:"center",children:[x_(Yq,{children:x_(__c.DC,{id:"configure_voice_error",tone:"critical",children:e})}),x_(Yq,{width:"content",children:a}),!!h&&x_(Yq,{width:"content",children:h})]})})]})};var kJw=({label:a,wgh:b,OWj:c})=>{const [d,e]=zOw(!1),f=()=>{e(g=>!g)};b=b(f);return B_(br,{spacing:"0.5u",Fa:"center",children:[x_(kv,{open:d,Mx:f,trigger:({...g})=>x_(Lt,{variant:"unstyled",onClick:()=>{},children:x_("div",{...g,className:d?"osKaDQ":"_7vMatQ",children:a})}),children:b}),c]})},hJw=D_(({jZ:a,kr:b,whg:c,z4g:d,b8g:e,Z7g:f,a8g:g,d7g:h,oa:k,Qqh:l,Nz:n})=>{const p=()=>{f();k()},q=a.length>=l,r=__c.Zc({default:!0,ie:!1}),t=c==="default"||c===void 0;return B_(So,{oa:k,className:"k8CYQQ",
children:[(b||h)&&B_(E_,{children:[!r&&x_(Tt,{children:B_(R,{width:"full",display:"flex",justifyContent:"spaceBetween",children:[x_(Q,{size:"small",tone:"tertiary",weight:"bold",children:M("hqidOw")}),h&&x_(Q,{size:"small",tone:"tertiary",weight:"bold",children:x_(Lt,{variant:"unstyled",onClick:h,children:M("IAh/NQ")})})]})}),b?x_(lv,{onClick:p,start:x_(Kz,{size:"medium"}),end:c===b.id?x_(sr,{size:"medium"}):void 0,children:b.name}):x_(R,{width:"full",Lb:"2u",Pc:"1u",children:x_(Q,{tone:"tertiary",
children:M("T1SyEw")})}),r&&h&&x_(lv,{onClick:h,children:M("IAh/NQ")}),x_(Tt,{})]}),x_(lv,{onClick:()=>{e();k()},end:t?x_(sr,{size:"medium"}):void 0,children:M("c6N+Dg")}),a.map(v=>x_(lv,{onClick:()=>{g(v.id);k()},end:c===v.id?x_(sr,{size:"medium"}):void 0,children:v.name},v.id)),q?x_(R,{width:"full",Lb:"2u",Pc:"1u",children:x_(Q,{tone:"tertiary",children:J("W+tl6w",[l])})}):x_(lv,{onClick:d,start:x_(Gu,{size:"medium"}),end:x_(n,{}),children:M("hSYMCA")})]})}),iJw=a=>{const b=a.wEk?"tertiary":"primary";
return B_(br,{spacing:"0.5u",Fa:"center",children:[x_(pD,{size:"small",tone:b}),x_(dr,{size:"xxsmall",tone:b,children:a.text}),x_(Rt,{size:"medium"})]})},jJw=a=>x_(Wi,{ariaLabel:M("4LrC/w"),variant:"tertiary",size:"xsmall",icon:__c.$x,Qc:"small",onClick:a.onClick});var wJw=D_(function({Fb:a,onClose:b,children:c}){return B_(E_,{children:[x_(id,{Wu:!0,start:x_(pr,{onClick:a}),end:x_(hd,{onClick:b}),title:M("vxW/ug")}),c]})});var eJw=class{static G(a){O(a,{A$d:C_,F9c:C_,mAd:C_,Y5d:C_,h8m:C_,i8m:C_,j8m:C_,x8m:C_,y9m:C_,r8m:C_,gNg:C_,tKo:C_,jAh:C_,cjh:C_,jmd:C_,pRd:C_,aRd:C_,dispose:C_})}async A$d(a,b){a.state="loading";if(a.u_.status!==Jx.ei)a.state="loaded";else{var c=(await this.controller.PIe()).map(({type:e,...f})=>f),d=await this.Bfk(c,b);w_(()=>{a.jZ=c;a.fU=d;a.state="loaded"})}}F9c(a){this.controller.Obf();this.controller.Dgc(hPw.voice.id,1);a.fU=__c.hPw}mAd(a,b){(b=b.kr)?(this.controller.Obf(),this.controller.Dgc(b.id,
2),a.fU={voice:b,Sn:2}):this.F9c(a)}Y5d(a,b){this.controller.Obf();const c=a.jZ.find(d=>d.id===b);c&&(this.controller.Dgc(b,3),a.fU={voice:c,Sn:3})}h8m(a,b){a.Av.name=b.substring(0,24);this.jmd(a)}i8m(a,b){a.fGc=b}j8m(a,b){a.error=void 0;a.jNb=!0;a.Av.mga=b.substring(0,a.UAn);this.pRd(a,{kYl:!1})}x8m(a){a.fU.Sn===3&&(a.Av={...a.fU.voice})}async y9m(a,b){this.jmd(a);this.pRd(a);a.tZ.size>0||(a.Av.id?await this.jAh(a,b):await this.cjh(a,b))}async r8m(a,b){if(a.Av.id){this.controller.TQl();await this.controller.$Be({id:a.Av.id});
var c=a.Av.id===a.fU.voice.id;c&&this.controller.Dgc(hPw.voice.id,1);w_(()=>{c&&(a.fU=__c.hPw);a.jZ=a.jZ.filter(d=>d.id!==a.Av.id);a.dHc=!1});b()}}async gNg(a,b){this.pRd(a);if(!a.zNc){a.error=void 0;var c=a.Av.mga.trim();a.state="analyzing";this.controller.vQl(c);var d=await this.controller.uAj({mga:c});w_(()=>{switch(d.status){case "complete":a.Av.Bv=d.Bv;a.Av.description=d.description;a.jNb=!1;b?.();break;case "input_moderation_error":case "output_moderation_error":a.error=M("H3JPtQ");break;case "unsupported_language":a.error=
M("uU+a3g");break;case "error":a.error=M("BblqIQ");break;default:throw new u(d);}a.state="loaded"})}}tKo(a){a.dHc=!a.dHc}async jAh(a,b){a.Av.id&&(a.state="saving",a.Av.name||a.fU.Sn!==3||(a.Av.name=a.fU.voice.name),this.controller.ZRl(),await this.controller.Scf({id:a.Av.id,name:a.Av.name,description:a.Av.description,Bv:a.Av.Bv,mga:a.Av.mga}),this.controller.Dgc(a.Av.id,3),w_(()=>{const c={...a.Av};a.fU={voice:c,Sn:3};const d=a.jZ.findIndex(e=>e.id===a.Av.id);a.jZ[d]=c;a.state="loaded"}),b())}async cjh(a,
b){a.state="saving";if(!a.Av.name){let d=a.jZ.length+1,e=J("7G8Odw",[d]);for(;a.jZ.find(f=>f.name===e);)d+=1,e=J("7G8Odw",[d]);a.Av.name=e}this.controller.RQl();const c=await this.controller.MAe({...a.Av});this.controller.Dgc(c,3);w_(()=>{const d={...a.Av,id:c};a.fU={voice:d,Sn:3};a.jZ.push(d);a.state="loaded"});b()}jmd(a){const b=!!a.jZ.find(c=>c.id!==a.Av.id&&c.name===a.Av.name);this.aRd(a,1,b)}pRd(a,b){const c=!!a.Av.mga.trim();this.aRd(a,2,!c);this.aRd(a,3,(b?.kYl??!0)&&c&&a.Av.mga.length<a.jEn)}aRd(a,
b,c){c?a.tZ.add(b):a.tZ.has(b)&&a.tZ.delete(b)}async Bfk(a,b){const c=await this.controller.Wfk();if(!c.length)return hPw;const {id:d,Sn:e}=c.map(f=>f.item)[0];switch(e){case 1:return hPw;case 2:return d!==b.kr?.id?hPw:{voice:b.kr,Sn:e};case 3:return(a=a.find(f=>f.id===d))?{voice:a,Sn:e}:hPw;default:throw new u(e);}}dispose(a){a.state="loaded";a.Av.id=void 0;a.Av.mga="";a.Av.description="";a.Av.Bv="";a.Av.name="";a.fGc=!1;a.jNb=!1;a.tZ=new Set;a.error=void 0}constructor(a){this.controller=a;eJw.G(this)}};var gJw=class{static G(a){O(a,{kr:F_})}get kr(){if(this.dH.status===Jx.ei){var a=this.Bc.Nc?.id,b=this.Bc.Nc?.name??M("NCow3Q"),c=this.Bc.Nc?.content.kr?.content;if(a&&c)return{id:a,name:b,Bv:c}}}constructor(a,b){this.Bc=a;this.dH=b;gJw.G(this)}};var lPw=2*Uc,mPw=90*Uc,DJw=({zul:a,k8:b,children:c})=>x_(BOw,{bounds:!0,children:({measureRef:d,contentRect:e})=>{var f=e.bounds?.width??0;var g=e.bounds?.height??0;e={};if(f&&g){var h=a.Tn.y+2*lPw+g>b.Tn.y;a.tl.y-2*lPw-g<b.tl.y&&h?e.top=b.c.y-g/2:h?e.bottom=window.innerHeight-a.tl.y+lPw:e.top=a.Tn.y+lPw;g=a.c.x-f/2-2*lPw<b.Ub.x;h=a.c.x+f/2+2*lPw>b.r.x;e.left=g&&h?b.c.x-f/2:g?b.Ub.x+lPw:h?b.r.x-f-lPw:a.c.x-f/2;f=e}else f={left:"100%"};return x_("div",{style:{position:"fixed",...f,width:Math.min(b.width-
2*lPw,mPw)},ref:d,children:c})}});var nPw={eventType:"magic_summary_interacted",Oa(a){return __c.jf({selected_lines_number:a.tjo,selected_sticky_notes_number:a.iWi,selected_text_elements_number:a.lWi,selected_shapes_number:a.fWi,selection_width:a.a0f,selection_height:a.T_f,time_to_first_response_chunk_ms:a.kJo,total_response_generation_duration_ms:a.YLo,source:a.source,location:a.location,editing_context:a.Ca==null?void 0:__c.mf(a.Ca)})}};var MJw=class{static G(a){O(a,{T9d:H_.ref,VDc:H_.ref,afh:C_,cKa:F_,eBh:F_,tya:F_,JWb:F_,Tcf:C_,resizeTo:C_,V2e:C_})}async KLj(){if(!this.VDc){var a=await this.Ra.Qja(new __c.sI({user:this.X.user.id,types:[627]}));w_(()=>{this.VDc=__c.OA(627,a?.actions)})}}mCc(a){return this.viewport.ey().transform(this.viewport.hm(a))}get cKa(){return this.Pa.mode===40&&this.JWb!=null}get eBh(){return this.VDc}get tya(){const a=this.selection.Ma;return a&&a.type==="elements"?a:void 0}get JWb(){var a=this.tya;if(a&&
a.Ri()){var b=a.Hg,c=a.box,d=a.container;a=(b?[b]:a.elements).reduce((e,f)=>{f.type==="group"?e.push(...f.pb.filter(LJw)):LJw(f)&&e.push(f);return e},[]);if(!(a.length<2))return{dh:d,elements:a,box:m(c,"Selection box must be set")}}}CUj(a){const b=[],c=[];a.elements.forEach(d=>{switch(d.type){case "text":b.push(this.xHj(d));break;case "shape":b.push(this.uHj(d));break;case "line":c.push(this.rHj(d));break;default:throw new u(d);}});return{elements:b,links:c}}xHj(a){return new etr({id:a.anchor,text:IJw(a.text),
elementType:"text"})}rHj(a){const b=a.start,c=a.end;a=a.ed.first()?.text;const d=[b.marker,c.marker].filter(e=>e===2||e===3).length;return new __c.gtr({x3i:b.anchor?.SI,e9h:c.anchor?.SI,g3h:d===0?3:d===1?1:2,text:a?IJw(a):""})}uHj(a){sa(!a.ed.empty,"Shape element must have at least 1 text content.");const b=a.ed.map(c=>c.text);return Wj(a)?new etr({id:a.anchor,text:IJw(b[0]),elementType:"sticky-note",Zla:b[1]?IJw(b[1]):void 0}):new etr({id:a.anchor,text:b[0]?IJw(b[0]):"",elementType:"shape"})}HUj(a){this.afh();
const {element:b,page:c}=this.qTj();this.Tcf(a,b,"");a.dh.page===c&&(this.V2e(a,b),this.mCc(a.dh).tD(Oj(b))||this.viewport.HC(c,this.viewport.lT(c),{center:Oj(b).tl,animate:!0}));return{onComplete:C_(()=>{this.T9d=b;KJw(this);this.s0g?.()}),onProgress:C_(({text:d,onCancel:e})=>{c.elements.has(b)?(this.Tcf(a,b,d),this.Uak(b),this.V2e(a,b)):e()})}}zRj(a){const b=this.Esa(),c=[...a.elements.map(e=>e.text),...a.links.map(e=>e.text)].filter(e=>e).join("\n"),d=a.links.length;a=a.elements.reduce((e,f)=>
{f.elementType==="sticky-note"?e.iWi++:f.elementType==="text"?e.lWi++:f.elementType==="shape"&&e.fWi++;return e},{iWi:0,lWi:0,fWi:0});return{gbk:c,Amk:()=>this.Esa()-b,jAj:{...a,tjo:d}}}nRl(a){const b=this.JWb;this.P.track(nPw,{...a,a0f:b?.box?.width?Math.ceil(b?.box?.width):void 0,T_f:b?.box?.height?Math.ceil(b?.box?.height):void 0,source:"editor"})}qTj(){const a=this.viewport.Vg;sa(a.type!=="responsive-page");const b=this.qc.Baa(oPw,"text-generator",{Ig:"none",Xc:"text_generator",span:void 0},{Xe:a});
this.resizeTo(b,360);return{element:b,page:a.page}}Tcf(a,b,c){var d=m(b.ed.first(),"Shape must have at least 1 text content");d=__c.YRc.snapshot(d);c=[`### **${c?M("ZrGRYw"):M("eLMUdQ")}**`,c].join("\n\n");a=this.O4d(a);({text:a}=__c.Pgi(c,new __c.Moi(this.eH,void 0,a)).transform());b.ed.set(0,{...d,text:a});this.kd.Wka(b)}Uak(a){a.height/a.width<2.5||this.resizeTo(a,Math.sqrt(a.height*a.width/2.5))}resizeTo(a,b){const c=this.Wc.Eoc(a);a=Oj(a);b=__c.Ej(b,0).transformPoint(a.tl);c.lw(a.Ub,a.r,b,!0,
!0);c.destroy()}V2e(a,b){const c=this.Wr.W3a([b]),d=Oj(b);a=sj(this.Ofk(a,b),d.tl);c.translate(a.x,a.y)}Ofk(a,b){var c=a.box;const d=this.viewport.lS(a.dh);var e=wj(c.tr,new pj(20,0));if(!d){const g=this.mCc(a.dh);a=h=>g.tD(Oj({top:h.y,left:h.x,width:b.width,height:b.height}));if(a(e))return e;c=sj(c.tl,new pj(b.width+20,0));return a(c)?c:e}const f=d.transform(this.viewport.hm(a.dh));a=g=>f.tD(Oj({top:g.y,left:g.x,width:b.width,height:b.height}));if(a(e))return e;e=sj(c.tl,new pj(b.width+20,0));if(a(e))return e;
e=wj(c.Tn,new pj(0,20));if(a(e))return e;e=sj(c.tl,new pj(0,20+b.height));return a(e)?e:wj(c.tl,new pj(20,20))}sck(a){a=a.elements.map(b=>{a:switch(b.type){case "text":b=b.text;break a;case "line":b=b.ed.first()?.text;break a;case "shape":b=b.ed.first()?.text;break a;default:throw new u(b);}return b}).filter(sb).reduce((b,c)=>{[...c.SD("font-size")["font-size"]].filter(sb).forEach(d=>{const e=b.get(d)??0;b.set(d,e+1)});return b},new Map);return(a=__c.Di(a,([,b])=>b))?{"font-size":a[0]}:{}}constructor(a,
b,c,d,e,f,g,h,k,l,n,p,q=()=>Date.now()){this.X=a;this.viewport=b;this.Pa=c;this.selection=d;this.qc=e;this.kd=f;this.Wc=g;this.Wr=h;this.P=k;this.eH=l;this.Ra=n;this.s0g=p;this.Esa=q;this.T9d=(MJw.G(this),void 0);this.VDc=!1;this.afh=()=>{this.Ra.Wj(new __c.ht({user:this.X.user.id,types:[627]}));this.VDc=!0};this.O4d=r=>{const t=this.eH.anc;let v={style:"body"};t&&(v={...v,...t});return{...v,...this.sck(r)}}}},oPw=new __c.fv({viewBox:{top:0,left:0,height:64,width:64},paths:[new __c.ev({d:"M0 0H64V64H0z",
fill:{...__c.ks,color:"#ffffff"},stroke:{...__c.ls,weight:2,color:"#d9d9d9"},qb:20})],slice:{horizontal:1,source:{top:0,left:0,height:64,width:64},Qp:64,eq:64,vertical:1},ed:[{box:{top:0,left:0,width:64,height:64},RK:20,Ki:1}],Lq:{dT:!1,j$:!1}});__c.pPw=class{static G(a){O(a,{Ez:F_})}KSa(a,b,c,d){this.L.Mnb(this.store,a,b,c);this.L.xaf=d}gDf(a){this.L.gDf(this.store,a)}oNg(){this.L.oNg(this.store)}handleError(a){this.L.handleError(this.store,a)}Wmh(a){this.L.Wmh(this.store,a)}get Ez(){return this.store.Ez}constructor(a,b,c){this.store=a;this.L=b;this.IZe=c;__c.pPw.G(this)}};var qPw;
qPw=class{static G(a){O(a,{uke:C_})}get eB(){return this.controller.u8a.eB}observer(a,b,c,d,e){return{next:C_(f=>{switch(f.status){case "in_progress":this.KR?.gDf(f.text);e?.(f.text);break;case "complete":b(f.text);c?.end();this.KR?.oNg();break;case "server_error":this.KR?this.KR.handleError(f.endUserMessage||M("g+AkHA")):this.showError(a,f.endUserMessage||M("g+AkHA"));c?.end("error",new Map([["error_type",f.status]]));break;case "input_moderation_error":case "output_moderation_error":this.KR?this.KR.handleError(ZIw(f.category)):
this.showError(a,ZIw(f.category));c?.end("ok",new Map([["error_type",f.status]]));break;case "unsupported_language":this.KR?this.KR.handleError(M("uU+a3g")):this.showError(a,M("uU+a3g"));c?.end("ok",new Map([["error_type",f.status]]));break;default:throw c?.end("error"),new u(f);}}),error:()=>{this.uke(a);c?.end("error")},complete:C_(()=>{a.dm=!1;d?.()})}}uke(a){a.dm=!1;this.showError(a,M("g+AkHA"))}constructor(a,b,c){this.u_=a;this.controller=b;this.KR=c;qPw.G(this)}};
__c.rPw=class extends qPw{static G(a){O(a,{Txc:C_,Ovn:C_,showError:C_,cid:C_})}Txc(a,b){return this.controller.xTe({va:b})}async Ovn(a,b){if(a.usage.state==="none")a.usage={state:"loading"};else if(a.usage.state==="loading"){b.abort();return}let c;try{c=await DIw(this.controller,{va:b})}catch{a.usage.state==="loading"&&w_(()=>{a.usage={state:"none"}});b.end("error",new Map([["error_type","failed_to_load_usage"]]));return}w_(()=>{const d=c.gt;a.usage=c.lSb===2&&d>this.Mga?{state:"none"}:{state:"loaded",
gt:d}});return c}async init(a){const {store:b,cvq:c=!1}=a;w_(()=>{b.dm=!0});(a=await PJw(this,b,a.span))&&this.KR&&(c?this.KR.Wmh(!0):await OJw(this.KR,b.CM));return a}showError(a,b){this.ma.Ib({Db:b})}cid(a,b){a.NBb=b}constructor(a,b,c,d,e){super(a,b,c);this.ma=d;this.Mga=e;this.KFp=(__c.rPw.G(this),"editor_magic_write_toolbar")}};var sPw=class{static G(a){O(a,{dm:H_.ref,NBb:H_.ref,error:H_.ref,usage:H_.ref,B8b:F_,cKa:F_,O5e:F_,H1i:F_,xqh:F_,y0i:F_,CM:F_,tya:F_,fqn:F_,JWb:F_,qOg:F_})}get B8b(){return this.osb.cKa&&!this.O5e}get cKa(){return this.Pa.mode===40&&this.fqn&&!!this.JWb&&!this.O5e}get lqh(){return!1}get O5e(){return!!this.tya?.elements.some(a=>a.zm!=null?!0:a.type==="group"?a.pb.some(b=>b.zm!=null):!1)}get H1i(){return!this.tGe&&this.CM}get xqh(){return this.tGe&&this.CM}get y0i(){return this.CM}get CM(){return this.cKa||
this.B8b}get tya(){const a=this.selection.Ma;return a&&a.type==="elements"?a:void 0}get fqn(){var a=this.tya;if(!a||!a.Ri()||a.elements.find(b=>b.type==="text"&&b.nT))return!1;a=a.elements;return a.length===1&&QJw(a[0])||a.filter(b=>b.type==="text").length===a.length}get JWb(){const a=this.tya;if(a&&a.Ri()&&!a.elements.find(d=>d.type==="text"&&d.nT)){var b=a.container,c=a.Hg;if(c?.type==="text"||c?.type==="shape")return this.qOg?void 0:{page:b.ia,dh:b,elements:[c],group:a.inner?.type==="group"?a.inner.group:
void 0};c=[];for(const d of a.elements)d.type==="group"?c.push(...d.pb.filter(e=>e.type==="text")):d.type==="text"&&c.push(d);return c.length>0?{page:b.ia,dh:b,elements:c}:void 0}}get qOg(){const a=this.mc.attributes.link;return a.size===[...a].filter(b=>b!=="").length}constructor(a,b,c,d,e){this.Pa=a;this.selection=b;this.mc=c;this.tGe=d;this.osb=e;this.dm=(sPw.G(this),!1);this.NBb="";this.usage={state:"none"}}},tPw=class extends __c.rPw{Klm(a){const b=a.tya,c=a.mc?.state;b&&c?.type==="focused"&&
a.mc.Vld(b)}async XCf({store:a,XXc:b,span:c,location:d}){const e=b?.kr?.Bv;if(e){var f=await RJw(this,a,c);if(f){var g=f.selection;f=f.gt;var h=HJw(g.elements),k=b?.kr.id;k&&this.controller.gne(k);var l={location:d,gt:f,vO:"selection",wJ:[...h].length,GC:eU(h),cCc:!0,imd:!1};this.controller.D9("APPLY_TONE_OF_VOICE",l);var {G3:n,F3:p}=await this.woc.Prc({page:g.page,elements:g.elements}),q=new __c.$sr({prompt:h,G3:n,F3:p,Bv:{type:"BRAND_VOICE",voice:e}}),r=b?.kr?.name||"";return new Promise(t=>{t=
this.controller.kfa(q).subscribe(this.observer(a,v=>{this.KR||this.OUc(g,v,c)},c,t));this.KR?.KSa(r,q,l,t)})}c?.abort()}else this.uke(a),c?.end("error",new Map([["error_type","missing_brand_voice"]]))}async qNg({store:a,span:b,location:c}){var d=await TJw(this,a,b);if(d){var e=d.selection,f=d.osb;d=d.gt;var g=f.CUj(e),{Amk:h,gbk:k,jAj:l}=f.zRj(g);this.controller.D9("CREATE_SUMMARY_FIXED",{location:c,gt:d,vO:"selection",wJ:k.length,GC:eU(k)});var {onComplete:n,onProgress:p}=f.HUj(e),q,{G3:r,F3:t}=
await this.woc.Prc({page:e.dh.page,elements:e.elements}),v=__c.htr.dpa({G3:r,F3:t,elements:g.elements,links:g.links});return new Promise(w=>{const x=this.controller.kfa(v).subscribe(this.observer(a,y=>{n(y);f.nRl({...l,kJo:q,YLo:h(),location:"floating_toolbar"})},b,w,p?y=>{q||(q=h());p({text:y,onCancel:()=>{a.dm=!1;x.unsubscribe()}})}:void 0))})}b?.abort()}async H9m({store:a,span:b,location:c}){var d=await RJw(this,a,b);if(d){var e=d.selection;d=d.gt;var f=HJw(e.elements),g={location:c,gt:d,vO:"selection",
wJ:[...f].length,GC:eU(f)};this.controller.D9("SUMMARIZE_FIXED_EDITOR",g);var {G3:h,F3:k}=await this.woc.Prc({page:e.page,elements:e.elements}),l=new __c.wtr({prompt:f,G3:h,F3:k});return new Promise(n=>{n=this.controller.kfa(l).subscribe(this.observer(a,p=>{this.KR||this.OUc(e,p,b)},b,n));this.KR?.KSa(M("Kdi2Qw"),l,g,n)})}b?.abort()}async z8m({store:a,span:b,location:c}){var d=await RJw(this,a,b);if(d){var e=d.selection;d=d.gt;var f=HJw(e.elements),{G3:g,F3:h}=await this.woc.Prc({page:e.page,elements:e.elements}),
k={location:c,gt:d,vO:"selection",wJ:[...f].length,GC:eU(f)};this.controller.D9("CONTINUE",k);var l=new __c.ctr({prompt:f,G3:g,F3:h});return new Promise(n=>{n=this.controller.kfa(l).subscribe(this.observer(a,p=>{if(!this.KR){if(e.elements.length!==1)return this.Doc(p,b);var [q]=e.elements;GJw(q).length<70||q.type!=="text"?this.Doc(p,b):this.controller.K9a({...e,hSb:q},p,b)}},b,n));this.KR?.KSa(M("smevxA"),l,k,n)})}b?.abort()}async v9m({store:a,span:b,location:c}){var d=await RJw(this,a,b);if(d){var e=
d.selection;d=d.gt;var f=HJw(e.elements),g={location:c,gt:d,vO:"selection",wJ:[...f].length,GC:eU(f)};this.controller.D9("REWRITE",g);var {G3:h,F3:k}=await this.woc.Prc({page:e.page,elements:e.elements}),l=new __c.ttr({prompt:f,G3:h,F3:k});return new Promise(n=>{n=this.controller.kfa(l).subscribe(this.observer(a,p=>{this.KR||this.OUc(e,p,b)},b,n));this.KR?.KSa(M("lqWfBQ"),l,g,n)})}b?.abort()}async p9m({store:a,span:b,location:c}){var d=await RJw(this,a,b);if(d){var e=d.selection;d=d.gt;var f=HJw(e.elements),
g={location:c,gt:d,vO:"selection",wJ:[...f].length,GC:eU(f)};this.controller.D9("REPHRASE_FUN",g);var {G3:h,F3:k}=await this.woc.Prc({page:e.page,elements:e.elements}),l=new __c.str({prompt:f,G3:h,F3:k});return new Promise(n=>{n=this.controller.kfa(l).subscribe(this.observer(a,p=>{this.KR||this.OUc(e,p,b)},b,n));this.KR?.KSa(M("O5RcRg"),l,g,n)})}b?.abort()}async o9m({store:a,span:b,location:c}){var d=await RJw(this,a,b);if(d){var e=d.selection;d=d.gt;var f=HJw(e.elements),g={location:c,gt:d,vO:"selection",
wJ:[...f].length,GC:eU(f)};this.controller.D9("REPHRASE_FORMAL",g);var {G3:h,F3:k}=await this.woc.Prc({page:e.page,elements:e.elements}),l=new __c.rtr({prompt:f,G3:h,F3:k});return new Promise(n=>{n=this.controller.kfa(l).subscribe(this.observer(a,p=>{this.KR||this.OUc(e,p,b)},b,n));this.KR?.KSa(M("1dppbg"),l,g,n)})}b?.abort()}async n9m({store:a,span:b,location:c}){var d=await RJw(this,a,b);if(d){var e=d.selection;d=d.gt;var f=HJw(e.elements),g={location:c,gt:d,vO:"selection",wJ:[...f].length,GC:eU(f)};
this.controller.D9("REPHRASE_FANTASTICAL",g);var {G3:h,F3:k}=await this.woc.Prc({page:e.page,elements:e.elements}),l=new __c.qtr({prompt:f,G3:h,F3:k});return new Promise(n=>{n=this.controller.kfa(l).subscribe(this.observer(a,p=>{this.KR||this.OUc(e,p,b)},b,n));this.KR?.KSa(M("iMJNJQ"),l,g,n)})}b?.abort()}async D8m({store:a,span:b,location:c}){var d=await RJw(this,a,b);if(d){var e=d.selection;d=d.gt;var f=HJw(e.elements),g={location:c,gt:d,vO:"selection",wJ:[...f].length,GC:eU(f)};this.controller.D9("FIX_SPELLING_GRAMMAR",
g);var {G3:h,F3:k}=await this.woc.Prc({page:e.page,elements:e.elements}),l=new __c.jtr({prompt:f,G3:h,F3:k});return new Promise(n=>{n=this.controller.kfa(l).subscribe(this.observer(a,p=>{this.KR||this.OUc(e,p,b)},b,n));this.KR?.KSa(M("P03bvQ"),l,g,n)})}b?.abort()}async T5d({store:a,W1i:b,hGl:c,span:d,location:e}){if(b&&b!==hPw.voice.id){var f=await RJw(this,a,d);if(f){var g=f.selection;f=f.gt;var h=HJw(g.elements),k={location:e,gt:f,vO:"selection",wJ:[...h].length,GC:eU(h),cCc:!1,imd:!0};this.controller.D9("APPLY_TONE_OF_VOICE",
k);var {G3:l,F3:n}=await this.woc.Prc({page:g.page,elements:g.elements}),p=new __c.$sr({prompt:h,G3:l,F3:n,Bv:{type:"CUSTOM_VOICE",id:b}});return new Promise(q=>{q=this.controller.kfa(p).subscribe(this.observer(a,r=>{this.KR||this.OUc(g,r,d)},d,q));this.KR?.KSa(c||"",p,k,q)})}d?.abort()}else this.uke(a),d?.end("error",new Map([["error_type","default_signature_voice_id_supplied"]]))}async Xsk({store:a,XXc:b,span:c,location:d}){const e=b?.kr?.Bv;if(e){var f=await SJw(this,a,c);if(f){var g=f.Mu;f=f.gt;
var h=b?.kr.id;h&&this.controller.gne(h);var k={location:d,gt:f,vO:"selection",cCc:!0,imd:!1};this.controller.D9("APPLY_TONE_OF_VOICE_TABLE_COLUMN",k);var l=new __c.btr({Mu:g.YEa,DE:g.DE,Bv:{type:"BRAND_VOICE",voice:e}}),n=b?.kr?.name||"";return new Promise(p=>{p=this.controller.kfa(l).subscribe(this.observer(a,UJw,c,p));this.KR?.KSa(n,l,k,p)})}c?.abort()}else this.uke(a),c?.end("error",new Map([["error_type","missing_brand_voice"]]))}OUc(a,b,c){const [d]=a.elements;a.elements.length!==1||d.type!==
"text"?this.Doc(b,c):this.controller.OUc({...a,hSb:d},b,c)}Doc(a,b){this.controller.Doc(a,b)}constructor(a,b,c,d,e,f,g,h){super(a,b,c,d,e);this.Ac=f;this.woc=g;this.osb=h}};var uPw='<svg width="24" height="24" fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path fill-rule="evenodd" clip-rule="evenodd" d="M16.45 7.792c-.6.606-.9 1.469-.9 2.588 0 1.035.264 1.85.792 2.445.528.591 1.253.887 2.175.887.745 0 1.356-.219 1.832-.657.478-.438.775-1.006.891-1.705h-1.326c-.09.33-.203.579-.34.744-.246.307-.604.461-1.074.461-.458 0-.837-.178-1.136-.535-.295-.36-.443-.899-.443-1.618 0-.72.14-1.275.422-1.666a1.341 1.341 0 0 1 1.152-.592c.479 0 .84.14 1.084.418.136.156.248.388.335.696h1.34c-.02-.4-.169-.8-.444-1.197C20.31 7.354 19.522 7 18.443 7c-.806 0-1.47.264-1.992.792zM4.707 11.11h1.626l-.8-2.523-.826 2.523zm.082-3.99h1.514l2.27 6.413H7.12l-.413-1.318H4.344l-.443 1.318H2.5l2.288-6.412zm5.903 1.114V9.65h1.575c.281 0 .509-.052.683-.156.177-.108.265-.296.265-.566 0-.299-.116-.496-.348-.592a2.48 2.48 0 0 0-.765-.1h-1.41zm0 2.476v1.71h1.575c.281 0 .5-.038.657-.114.284-.139.426-.406.426-.8 0-.334-.138-.563-.413-.688-.154-.07-.37-.105-.648-.108H10.69zm1.836-3.59c.786.012 1.343.24 1.67.684.198.272.296.599.296.979 0 .391-.098.706-.296.944-.11.133-.272.255-.487.365.328.119.574.307.74.566.168.258.252.57.252.94 0 .379-.096.72-.287 1.021a1.772 1.772 0 0 1-1.188.827 4.46 4.46 0 0 1-.909.087H9.412V7.122h3.115zm4.836 9.739a1.25 1.25 0 0 1 1.336-.032l1.415.849a.75.75 0 0 0 .772-1.286l-1.415-.85a2.75 2.75 0 0 0-2.94.07l-.838.56c-.42.279-.966.279-1.386 0l-.782-.522a2.75 2.75 0 0 0-3.05 0l-.782.521c-.42.28-.966.28-1.386 0l-.838-.558a2.75 2.75 0 0 0-2.94-.07l-1.415.849a.75.75 0 1 0 .772 1.286l1.415-.849a1.25 1.25 0 0 1 1.336.032l.838.558a2.75 2.75 0 0 0 3.05 0l.782-.52c.42-.28.966-.28 1.386 0l.782.52a2.75 2.75 0 0 0 3.05 0l.838-.558z" fill="currentColor"/></svg>';var dKw=__c.Uq({medium:uPw});var nKw=()=>M("4amPbw"),mKw=a=>{const b=a.RUe,c=a.oa,d=a.V;var e=a.tGd,f=a.owc,g=a.oHd,h=a.JYe,k=a.Qdd,l=a.QYe,n=a.PYe,p=a.OYe,q=a.KYe;const r=a.mHd;var t=a.uGd;const v=a.y4g,w=a.P6a;var x=a.djd;const y=(C,G)=>async(...H)=>{c();var K=await b();if(K!=="never"&&K!=="recently"){K=d.wb("editor.text_generator.edit_text",{Hb:{name:"editor.text_generator.edit_text",type:G,attrs:new Map([["location","floating_toolbar"]])}});try{await C(K,...H),K.qe()}catch{K.end("error")}}},z=()=>{w?.();c()};var B=null;if(a.xEl){B=
r?async()=>{c();await b()!=="never"&&await r()}:void 0;const C=y(t,"apply_signature_voice");t=v?async()=>{c();await b()!=="never"&&await v()}:void 0;e=e?y(e,"apply_brand_voice"):void 0;h=y(h,"expand");g=y(g,"summarize");k=y(k,"rewrite");l=y(l,"rephrase_fun");n=y(n,"rephrase_formal");p=y(p,"rephrase_fantastical");q=y(q,"fix_spelling");x=x.length>0?x.map(G=>x_(lv,{start:x_(pD,{size:"medium"}),onClick:()=>C(G.id,G.name),children:G.name},G.id)):null;x=B_(kv,{label:M("yCQBWg"),icon:__c.HEi,children:[(e||
x||t)&&x_(Tt,{}),e&&x_(lv,{onClick:e,start:x_(Kz,{size:"medium"}),children:M("l/AxZQ")}),x,t&&x_(lv,{onClick:t,start:x_(Gu,{size:"medium"}),end:x_(a.Nz,{}),children:M("WtbZSA")})]});B=B_(E_,{children:[B&&x_(lv,{onClick:B,start:x_(pD,{size:"medium"}),children:M("Qb4YPw")}),x_(lv,{onClick:k,start:x_(Guh,{size:"medium"}),children:M("lqWfBQ")}),x_(lv,{onClick:q,start:x_(dKw,{size:"medium"}),children:M("P03bvQ")}),x_(lv,{onClick:h,start:x_(Euh,{size:"medium"}),children:M("smevxA")}),x_(lv,{onClick:g,start:x_(Cuh,
{size:"medium"}),children:M("Kdi2Qw")}),x_(lv,{onClick:l,start:x_(qD,{size:"medium"}),children:M("O5RcRg")}),x_(lv,{onClick:n,start:x_(Iuh,{size:"medium"}),children:M("1dppbg")}),x_(lv,{onClick:p,start:x_(tB,{size:"medium"}),children:M("iMJNJQ")}),x]})}x=null;a.wEl&&f&&(f=f?y(f,"create_summary"):void 0,x=x_(lv,{onClick:f,start:x_(rPr,{size:"medium"}),end:a.PHb&&x_(a.PHb,{}),children:M("h21PXA")}));return B_(So,{oa:c,className:"sy_bVg",children:[x,B,x_($Jw,{usage:a.usage,Nz:a.Nz,P6a:w&&z,Mga:a.Mga})]})};var aKw=class{get eXl(){return this.L.eB}async refresh(a){this.L.Txc(this.store,a)}async QCn(){return await PJw(this.L,this.store,this.x2q)<=0?!0:!1}constructor(a,b,c){this.store=a;this.L=b;this.x2q=c}};var oKw=a=>{const b=a.tGd;var c=a.uGd;const d=a.y4g;var e=a.djd;const f=a.V,g=a.Nz,h=a.RUe,k=a.oa,l=(p,q)=>async(...r)=>{k();var t=await h();if(t!=="never"&&t!=="recently"){t=f.wb("editor.text_generator.edit_text",{Hb:{name:"editor.text_generator.edit_text",type:q,attrs:new Map([["location","generator_menu"]])}});try{await p(t,...r),t.qe()}catch{t.end("error")}}};a=b?l(b,"apply_brand_voice"):void 0;const n=l(c,"apply_signature_voice");c=d?async()=>{await h()!=="never"&&(await d(),k())}:void 0;e=e.length>
0?e.map(p=>x_(lv,{start:x_(pD,{size:"medium"}),onClick:()=>n(p.id,p.name),children:p.name},p.id)):null;return B_(E_,{children:[(a||e||c)&&x_(Tt,{}),b&&x_(lv,{onClick:a,start:x_(Kz,{size:"medium"}),children:M("l/AxZQ")}),e,c&&x_(lv,{onClick:c,start:x_(Gu,{size:"medium"}),end:x_(g,{}),children:M("WtbZSA")})]})};var qKw=()=>M("Zisnxw");var jKw=a=>{const b=fKw(a);return B_(R,{padding:"2u",paddingTop:"1u",children:[x_(gKw,{usage:a.usage,Nz:a.Nz,Nza:a.Nza}),x_(__c.jd,{size:"2u",direction:"vertical"}),x_(Tc,{spacing:"3u",children:b.map(c=>x_(vPw,{loading:a.loading,NBb:a.NBb,Y0s:c,cid:a.cid,IWg:a.IWg},c.label))})]})},iKw=a=>{const b=[];a.XWc?(a.owc&&b.push({label:M("V/YGCQ"),Icon:rPr,onClick:a.owc}),a.YWc&&b.push({label:M("6fSbqw"),Icon:Guh,onClick:a.Qdd})):b.push({label:M("6fSbqw"),Icon:Guh,onClick:a.Qdd},{label:M("gAfhgg"),Icon:Cuh,
onClick:a.oHd});return x_(R,{paddingBottom:"1u",children:x_(__c.ar,{columns:2,spacing:"1u",children:b.map(c=>x_(__c.vD,{shape:"rectangle",size:"medium",text:c.label,ib:c.label,kx:!a.IWg(c.label),ariaLabel:c.label,start:a.loading&&a.NBb===c.label?x_(__c.e3f,{size:"medium"}):c.Icon?x_(c.Icon,{size:"medium"}):void 0,onClick:()=>{a.cid(c.label);c.onClick()},disabled:a.loading},c.label))})})},vPw=({loading:a,NBb:b,Y0s:c,cid:d,IWg:e})=>x_("div",{children:B_(Tc,{spacing:"1u",children:[x_(dr,{size:"xsmall",
tone:"secondary",children:c.label}),x_(__c.ar,{columns:2,spacing:"1u",children:c.options.map(f=>x_(__c.vD,{shape:"rectangle",size:"medium",text:f.label,ib:f.label,kx:!e(f.label),ariaLabel:f.label,start:a&&b===f.label?x_(__c.e3f,{size:"medium"}):f.Icon?x_(f.Icon,{size:"medium"}):void 0,onClick:()=>{d(f.label);f.onClick()},disabled:a},f.label))})]})}),hKw=()=>{const a=document.createElement("canvas").getContext("2d");return b=>{a&&(a.font='400 calc(var(----lgQg, 0.1rem)*8/8*14) "Canva Sans", "Noto Sans Variable", "Noto Sans", -apple-system, BlinkMacSystemFont, "Segoe UI", Helvetica, Arial, sans-serif');
return a?.measureText(b).width||0}};var SKw=class{async Prc({page:a,elements:b}){let c,d;try{const e=__c.Bn.snapshot(a),f=await this.Oqk(e),g=a.elements.toArray(),h=f.map(l=>l.oN!=null?g[l.BJ].pb.toArray()[l.oN]:g[l.BJ]),k=b.map(l=>h.indexOf(l));c=vKw(h.slice(0,Math.min(...k)));d=k.length>0?vKw(h.slice(Math.max(...k)+1)):""}catch(e){this.errorService.ra(e,{La:"fixed_context_controller context from page: "})}return{G3:c,F3:d}}async Oqk(a){const b=__c.Wg.hWc(a);ra(b.type==="FIXED");a=new __c.q3h({pages:[b],io:a.dimensions??this.document.dimensions,
qk:1,Aue:!0});a=(await this.wY.$0c(a)).pages[0].lYa;a=__c.ihi([a],uKw);return wKw(a[0])}constructor(a,b,c){this.wY=a;this.document=b;this.errorService=c}};var wPw=class{transform(){return this.g9s}oNa(a){this.g9s=this.CIc(a)}CIc(a){if(this.PRa){var b=[],c=new Map([]);for(let e=0;e<a.children.length;e++){const f=a.children[e];for(let g=0;g<f.children.length;g++){var d=f.children[g];c.set(__c.D2h(g,e),{Ki:__c.E2h(a.align?.[g]??null)});({text:d}=__c.B2h(d.children,new __c.G2h(this.eH,this.PRa,this.Ae)).transform());b.push({text:d,row:e,column:g})}}return b}}At(){}y2a(){}tZc(){}z2a(){}Z8a(){}$8a(){}Fmd(){}constructor(a,b){this.eH=a;this.PRa=b;this.Ae={}}};var RKw=class{static G(a){O(a,{kN:F_,isEmpty:F_,fwa:F_,jng:F_,Ymf:F_,CM:F_,hOa:F_,scrollTop:F_,insertText:C_.bound,I9c:F_,tya:F_,Q$m:F_,O5e:F_,Mu:F_,GGg:F_,B5m:C_,Uin:C_})}vR(){if(this.viewport.ya.type==="responsive")return this.Yka.vR()}N1k(a){return this.viewport.ya.type==="responsive"?this.Yka.N1k(a):()=>{}}M1k(a){return this.viewport.ya.type==="responsive"?this.Yka.M1k(a):()=>{}}XLg(){return this.viewport.ya.type==="responsive"?this.Yka.XLg():[]}Mtl(a){if(this.viewport.ya.type==="responsive")return this.Yka.Mtl(a)}lpf(a){if(this.viewport.ya.type===
"responsive")return this.Yka.lpf(a)}qpc(a){if(this.viewport.ya.type==="responsive")return this.Yka.qpc(a)}PIg(a){return this.viewport.ya.type==="responsive"?this.Yka.PIg(a):[]}blk(a){if(this.viewport.ya.type==="responsive")return this.Yka.blk(a)}wZk(a,b){if(this.viewport.ya.type==="responsive")return this.Yka.wZk(a,b)}qaf(a,b){return this.viewport.ya.type==="responsive"?this.Yka.qaf(a,b):!1}Z6i(a,b){return this.viewport.ya.type==="responsive"?this.Yka.Z6i(a,b):!1}S_j(a,b){if(this.viewport.ya.type===
"responsive")return this.Yka.S_j(a,b);throw Error("Method not implemented.");}BWj(a){return this.viewport.ya.type==="responsive"?this.Yka.BWj(a):!1}TWg(a){return this.viewport.ya.type==="responsive"?this.Yka.TWg(a):!1}qv(a,b){if(this.viewport.ya.type==="responsive")return this.Yka.qv(a,b)}get kN(){return this.viewport.ya.type}get isEmpty(){return this.viewport.ya.type==="responsive"?this.Yka.isEmpty:this.document.pages.empty}get fwa(){return this.viewport.ya.type==="responsive"?this.Yka.fwa:!!this.Mu}get jng(){return this.viewport.ya.type===
"responsive"?this.Yka.jng:this.osb.cKa&&!this.O5e}get Ymf(){return this.viewport.ya.type==="responsive"?this.Yka.Ymf:!this.I9c}get CM(){return this.viewport.ya.type==="responsive"?this.Yka.CM:this.Pa.mode===40&&!!this.selection.Ma}get hOa(){return this.viewport.ya.type==="responsive"?this.Yka.hOa:this.I9c}get scrollTop(){return this.viewport.ya.type==="responsive"?this.Yka.scrollTop:this.viewport.scrollTop}UGg(){if(this.viewport.ya.type==="responsive")return this.Yka.UGg()}iCb(){this.fwa&&this.mZ.iCb?.()}Lqb(){if(this.viewport.ya.type===
"responsive")return this.Yka.Lqb();const a=this.y5h;if(a)return a.ljc.map(BKw).join("\n").trimEnd()}async insertText(a,b){if(this.viewport.ya.type==="responsive")return this.Yka.insertText(a,b);const c=b.action;var d=b.Igm;b=b.va;if(this.fwa)this.Uin(a,b,d);else{var e=this.undo.startBuffering(),f=this.y5h;if(f)switch(d=f.Xe,b=f.ljc,f=f.group,c){case "add_below":await DKw(this,a);break;case "append":await this.K9a(a,b,d,f);break;case "replace":await this.Lwa(a,b,d,f);break;default:throw new u(c);}else await DKw(this,
a);w_(()=>{e.stop()})}}async Qzd(){if(this.viewport.ya.type==="responsive")return this.Yka.Qzd();const a=this.y5h,b=a?.Xe.page??this.viewport.ya;return b&&b.type==="fixed"?await this.woc.Prc({page:b,elements:a?.ljc??[]}):{G3:void 0,F3:void 0}}s5d(){if(this.viewport.ya.type==="responsive")return this.Yka.s5d();if(this.fwa)return this.B5m();const a=this.tya?.box;if(this.viewport.uh&&a){var b=this.viewport.hm(this.tya.container).invert();return __c.Nj(a).transform(b)}}P8c(){if(this.viewport.ya.type===
"responsive")return this.Yka.P8c();if(this.viewport.uh)return this.viewport.ey()}I$c(a){if(this.viewport.ya.type==="responsive")return this.Yka.I$c(a);throw Error("Method not supported in Fixed doctype.");}A2b(){if(this.viewport.ya.type==="responsive")return this.Yka.A2b();throw Error("Method not supported in Fixed doctype.");}get I9c(){return this.Pa.mode===40&&!!this.y5h}get tya(){const a=this.selection.Ma;return a&&a.type==="elements"&&a.Ri()?a:void 0}get y5h(){const a=this.tya;if(a&&!a.elements.find(d=>
d.type==="text"&&d.nT)&&!this.O5e){var b=a.Hg,c=a.container;if(b&&b.type==="text"&&b.text.Ya.trim().length>0)return this.Q$m?void 0:{Xe:c,ljc:[b],group:a.inner?.type==="group"?a.inner.group:void 0};b=[];for(const d of a.elements)d.type==="text"&&d.text.Ya.trim().length>0&&b.push(d);return b.length>0?{Xe:c,ljc:b}:void 0}}get Q$m(){return[...this.mc.attributes.link].filter(a=>a!=="").length>0}get O5e(){return!!this.tya?.elements.some(a=>a.zm!=null?!0:a.type==="group"?a.pb.some(b=>b.zm!=null):!1)}async K9a(a,
b,c,d){if(b.length>1)await DKw(this,a);else{b=b[0];b.text.setAttributes(this.Y6i);var e=yKw(a);a=d?c.Me(d).Me(b):c.Me(b);c=new __c.WA(b.text,a,c);m(this.KWa).wrapText(c).Cya(f=>{e.forEach((g,h)=>{const {text:k,attributes:l}=EKw(g,h<e.length-1);f.append({text:k,attributes:l})})})}}async Lwa(a,b,c,d){if(b.length>1){for(const f of b)c.page.elements.delete(f);await DKw(this,a)}b=b[0];b.text.setAttributes(this.Y6i);const e=yKw(a);a=d?c.Me(d).Me(b):c.Me(b);c=new __c.WA(b.text,a,c);m(this.KWa).wrapText(c).Cya(f=>
{f.Er();e.forEach((g,h)=>{const {text:k,attributes:l}=EKw(g,h<e.length-1);f.append({text:k,attributes:l})})})}get Mu(){return this.viewport.ya.type==="responsive"?this.Yka.Mu:this.GGg}get GGg(){const a=this.selection.Ma;if(a?.Ri()&&a.inner?.type==="sheet"){if(a.type==="pages")var b=a.inner.page.sheet;else if(this.K$j&&a.type==="elements")b=a.inner.sheet.config;else return;var c=!1,d=!1,e=Infinity,f=-Infinity,g=Infinity,h=-Infinity,k=new Set,l=new Set;for(const {row:p,column:q}of a.inner.cells)k.add(p),
l.add(q),this.hLd(b,p,q)?.trim()?c=!0:d=!0,e=Math.min(e,b.kL(p)),f=Math.max(f,b.kL(p)),g=Math.min(g,b.zL(q)),h=Math.max(h,b.zL(q));f=`${`${__c.Om(g)}${`${e+1}`}`}:${`${__c.Om(h)}${`${f+1}`}`}`;h=a.inner.rows.size>0;var n=1;a.inner.columns.size>0?n=2:h&&(n=3);return{sheet:b,YEa:this.AJl(b),selection:{xGg:{row:m(b.nEb(e)),column:m(b.$xb(g))},range:f,Pt:k.size,xT:l.size,eym:c,aym:d,yB:n}}}}AJl(a){const b=new Map;a.layout.cells.forEach((c,d)=>{if(c.content.ref){c=d.ec;var e=d.$b;d=Nm({column:c,row:e},
a);c=this.hLd(a,e,c);d&&c&&b.set(d,c)}});return b}B5m(){var a=this.selection.Ma;if(a&&a.inner&&a.inner.type==="sheet"&&a.inner.Iu!=null){var b;a.type==="pages"?b=new __c.Xz(a.container.xb(a.inner.page),this.viewport,this.Pa):a.type==="elements"&&(b=new __c.Wz(a.container.Me(a.inner.sheet),this.viewport));if(b!=null){var c=b.sheet,d=b.gM,e=b.vB;b=b.$R;a=Array.from(a.inner.cells);var {row:f,column:g}=a[0],{row:h,column:k}=a[a.length-1];a=__c.Ak(c,g,f);var l=__c.Ak(c,k,h),n=a.union(l);a=__c.yk(c).find(p=>
p.box.tD(n));d=c.direction==="rtl"?sj(e.tr,d.tr):sj(e.tl,d.tl);e=b.then(e.Fn());c=__c.zk(c,d,a).then(e.invert());return __c.Nj(n.transform(c))}}}Uin(a,b,c){if(this.GGg&&this.PRa&&this.fd){var d=this.GGg.sheet,e=this.GGg.selection.xGg,f=e.row,g=e.column,h=C2h(a,new wPw(this.eH,this.PRa)).transform();if(h){var k=d.kL(f),l=d.zL(g);e=this.selection.Ma;if(e?.Ri()&&e.inner?.type==="sheet"&&e.type==="elements"){var n=h[h.length-1];e=k+n.row;n=l+n.column;const p=d.layout.rows.count(),q=d.layout.cols.count();
this.wSk(d,f,g,e-p+1,n-q+1,b)}this.fd.Ew(p=>{for(const q of h){const r=d.nEb(k+q.row),t=d.$xb(l+q.column);if(r&&t){let v=d.layout.attrs.get(__c.Ee.ht,r,t);v={...v,UK:c?"wrap":v?.UK,n1:c&&q.row===0?"#f4f4f4":v?.n1};p.KEb(d,{row:r,column:t},__c.Fg.create(q.text));v&&p.setAttributes(d,{row:r,column:t},v)}else this.errorService.error("Invalid cell accessed")}})}else this.fd.Ew(p=>{p.RIa(d,{row:f,column:g},a)}),this.errorService.error("Table parsing failed, inserting into singular cell")}}wSk(a,b,c,d,
e,f){d>0&&(f.ob().addEvent(`sheet_element_${d}_rows_added`),this.hj.addRows(a,b,"after",d,f,"magic_write"));e>0&&(f.ob().addEvent(`sheet_element_${e}_columns_added`),this.hj.bUb(a,c,"after",e,f,"magic_write"))}hLd(a,b,c){if(a=this.fd?.getContent(a,b,c))return a.hU}constructor(a,b,c,d,e,f,g,h,k,l,n,p,q,r,t,v,w,x,y,z){this.Yka=a;this.viewport=b;this.document=c;this.Pa=d;this.mc=e;this.woc=f;this.qc=g;this.hj=h;this.PRa=k;this.KWa=l;this.undo=n;this.eH=p;this.mZ=q;this.fd=r;this.selection=t;this.errorService=
v;this.osb=w;this.K$j=x;this.dF=(RKw.G(this),new __c.mu);this.O4d=()=>{const B=this.eH.anc;let C={style:"body"};B&&(C={...C,...B});return C};this.gmk=()=>{const B=this.eH.L7i;let C={style:"title","font-size":__c.Qje("supertitle").size*16/12,"font-weight":"bold"};B&&(C={...C,...B});return C};a={"font-kerning":"normal"};y&&(a["font-feature-liga"]="on",a["font-feature-clig"]="on",a["font-feature-calt"]="on");this.oNl=a;y={"font-kerning":"normal"};z&&(y["font-feature-liga"]="on",y["font-feature-clig"]=
"on",y["font-feature-calt"]="on");this.Y6i=y}};var xPw={[1]:Ae.Nf.fontSize*2,[2]:Ae.Nf.fontSize*1.5,[3]:Ae.Nf.fontSize*1.17,[4]:Ae.Nf.fontSize*1,[5]:Ae.Nf.fontSize*.83,[6]:Ae.Nf.fontSize*.67},yPw={strong:{fontWeight:"bold"},emphasis:{fontStyle:"italic"}},zPw=class{transform(){return this.builder.build()}Cda(){this.trd||(this.builder.Xb("\n"),this.zba="\n")}dOa(a){a=a.replace(/\n/g,"\u2028");this.builder.Xb(a);this.zba=a}Rga(a,b,c){const d=this.GP;this.GP={...this.GP,...a};this.builder.attrs(a);c();this.builder.attrs({...b,...d});this.GP={...this.GP,
...b,...d}}WFc(a){this.Cda();this.builder.attrs(__c.de(this.GP,()=>{}));this.builder.item(a);this.builder.attrs(this.GP);this.zba=a}At(a,b){const c={},d={};(a=yPw[a.type])&&__c.we(Ae,a,"inline",(e,f)=>{c[f]==null&&(c[f]=e,d[f]=void 0)});this.Rga(c,d,b)}Fmd(a,b){b&&this.Cda();this.dOa(a.value);b&&this.Cda()}OSb(a,b){b();this.dOa("\n")}tZc(){this.dOa("\u2028")}$8a(a,b){this.Cda();b();this.GP.fontSize&&(a=this.Zn?.a2,this.GP.fontSize>(a?.fontSize||Ae.Nf.fontSize)&&(a={fontSize:void 0,...a},this.builder.attrs(a),
this.GP={...this.GP,...a}))}y2a(a,b){a=this.snk(a)||{fontSize:xPw[a.depth]};const c={fontSize:void 0,...this.Zn?.a2};this.Cda();this.Rga(a,c,()=>{b();this.Cda()})}z2a(a,b,c){this.Cda();a=this.xda;this.xda={type:b?"numbered":"bulleted",level:a.level+1};b={Mk:this.xda.level,Dk:cz(this.xda.type,this.xda.level)};const d=a.level>0?{Mk:a.level,Dk:cz(a.type,a.level)}:{Mk:void 0,Dk:void 0};this.Rga(b,d,()=>{c()});this.xda=a}Z8a(a,b){b();this.Cda()}nef(a){(a=(new DOMParser).parseFromString(a.value,"text/html").body.firstChild)&&
a.nodeName.toLowerCase()==="item"&&(a=parseInt(a.getAttribute("idx"),10),isNaN(a)||a<0||a>=this.rxd.length||this.gJj!==!0&&this.WAh[a]||(this.WFc(this.rxd[a]),this.WAh[a]=!0))}SRd(){}oNa(){}snk(a){switch(a.depth){case 1:return this.Zn?.Iwa;case 2:return this.Zn?.pEa;default:return{...this.Zn?.pEa,fontSize:xPw[a.depth]}}}get trd(){return typeof this.zba!=="string"||this.zba.endsWith("\n")}constructor(a,b,c,d){this.rxd=a;this.JS=b;this.attrs=c;this.Zn=d;this.gJj=!1;this.xda={type:"none",level:0};b=
__c.Rce(Ae,c||d?.a2||{});this.builder=__c.Qk.qd().attrs(b);this.GP=b;this.WAh=Array(a.length).fill(!1)}};var KKw=class extends zPw{transform(){return this.builder.build()}SRd(){this.WFc({...__c.lZc})}oNa(a){a=this.CIc(a);this.WFc(a)}CIc(a){const b=[],c=new Map([]);for(let e=0;e<a.children.length;e++){const f=a.children[e];for(let g=0;g<f.children.length;g++){var d=f.children[g];c.set(__c.D2h(g,e),{Ki:__c.E2h(a.align?.[g]??null)});d=__c.B2h(d.children,new KKw(this.rxd,this.Zn,this.JS,this.attrs)).transform();b.push({text:__c.Qk.qd().append(d).Xb("\n").build(),rows:[e],columns:[g]})}}a=__c.xpg(this.JS,
b);return{...a,cells:__c.nd(a.cells,(e,f)=>({...e,...c.get(f)}))}}constructor(a,b,c,d){super(a,c,d,b);this.rxd=a;this.Zn=b}};var GKw=class{transform(){const a=this.cMj(this.Sc);return{text:this.jdl(a),Vka:this.Vka}}LLg(a){const b=[].find(([d])=>d.fontSize?.toFixed(2)===a.fontSize?.toFixed(2)),c=[];a.fontWeight==="bold"&&c.push("bold");a.fontStyle==="italic"&&c.push("italic");b&&c.push(b[1]);return c}c0g(a,b){if(a==="\n")return a;const [c,...d]=a.split(/(\s+$)/gm);return b.reduce((e,f)=>{switch(f){case "heading":case "subheading":return e;case "bold":return`**${e}**`;case "italic":return`_${e}_`;default:throw new u(f);}},
c)+d.join("")}cMj(a){const b=[];a.forEach({item:(c,d,e)=>{if(c=this.lrk(c))d=this.LLg(e),b.push([c,{...e},d])},Ya:(c,d,e)=>{d=this.LLg(e);b.push([c,{...e},d])}});return b}wfk(a){return a.find(b=>b[0].endsWith("\n")||b[0].startsWith("\n")||b[1].Mk||b[1].Dk)}jdl(a){let b="",c=!1,d=[],e=[],f=!1;const g=a.reduce((h,[k])=>h+k.split(/(\n)/g).filter(l=>l.length>0).length,0);a.forEach(([h,k,l],n)=>{const p=h.split(/\n/).filter(q=>q.length>0);p.forEach((q,r)=>{var t=this.wfk(a.slice(n+1)),v=!h.endsWith("\n")&&
r===p.length-1&&n!==a.length-1;const w=v?t?.[1]||{}:k;if(w.Mk){for(;w.Mk>d.length;)d.unshift(0);for(;w.Mk<d.length;)d.shift();for(;e.length<w.Mk;)e.push(e[e.length-1]??0);for(;e.length>w.Mk;)e.pop()}w.Mk&&w.Dk&&w.Dk!=="none"||!c||(b+="\n",d=[],e=[],c=!1);if(!q.startsWith("\n")&&w.Dk&&w.Dk!=="none"&&g>1&&!f){const x=this.qKg(w.Dk,d[0]+1),y=" ".repeat(e[e.length-1]??0);q=q.split("\u2028");t=t?a.indexOf(t):-1;f=v&&n+1!==t;q.forEach((z,B)=>{B=B===0?x:Array.from({length:x.length},()=>" ").join("");z=this.c0g(z,
l);b+=`${y}${B}${z}`;f||(b+="\n")});d[0]+=1;c=!0;r===p.length-1&&e.push((e[e.length-1]??0)+x.length)}else if(q=q.replace(/\u2028/g,"\n"),g>1&&(q=this.c0g(q,l)),b+=q,v=(v=a[n+1]?.[0])?v.endsWith("\n"):!1,f)b+="\n",f=!1;else if(r<p.length-1||h.endsWith("\n")||v)b+="\n\n"})});return b.trimEnd()}qKg(a,b){switch(a){case "disc":case "circle":case "square":case "unchecked":case "checked":return"- ";case "decimal":case "lower-alpha":case "lower-roman":return`${b}. `;default:throw new u(a);}}lrk(a){switch(a.display){case 2:return this.krk(a);
case 1:case void 0:return this.irk(a);default:throw new u(a.display);}}krk(a){switch(a.type){case "pill":return a.Sh.text;case "controlled":case "chart":case "design":case "embed":case "layout":case "rect":case "break":case "separator":case "sheet":case "table":break;case "shape":throw new __c.vv;default:throw new u(a);}}irk(a){switch(a.type){case "break":case "separator":return"***\n";case "controlled":case "chart":case "design":case "embed":case "layout":case "rect":case "sheet":case "table":const b=
document.createElement("item");b.setAttribute("idx",this.Vka.length.toString());this.Vka.push(a);return b.outerHTML;case "pill":break;case "shape":throw new __c.vv;default:throw new u(a);}}Ane(a){switch(a.type){case "pill":return a.Sh.text;case "controlled":case "chart":case "design":case "embed":case "layout":case "rect":case "break":case "separator":case "sheet":case "table":break;case "shape":throw new __c.vv;default:throw new u(a);}}constructor(a,b,c){this.Sc=a;this.Zn=b;this.lki=c;this.Vka=[]}};var APw=class{transform(){return this.k9s}oNa(a){this.k9s=this.CIc(a)}CIc(a){const b=[];for(let c=0;c<a.children.length;c++){const d=a.children[c];for(let e=0;e<d.children.length;e++){const f=__c.B2h(d.children[e].children,new KKw([],this.Zn,this.JS)).transform();b.push({text:__c.Qk.qd().append(f).Xb("\n").build(),row:c,column:e})}}return b}At(){}y2a(){}tZc(){}z2a(){}Z8a(){}$8a(){}Fmd(){}constructor(a,b){this.Zn=a;this.JS=b}};__c.QKw=class{static G(a){O(a,{lpf:C_,qpc:C_,kN:F_,isEmpty:F_,fwa:F_,Mu:F_,jng:F_,Ymf:F_,CM:F_,hOa:F_,qv:C_.bound,insertText:C_.bound,Sin:C_,vR:C_.bound,I$c:C_.bound,A2b:C_.bound,idr:F_,gan:F_,jan:F_})}N1k(a){return this.Za.una(b=>{b.Fuh&&a()})}M1k(a){return this.Za.una(b=>{b.M_f&&b.j9f&&a()})}XLg(){var a=this.CMa.blocks;const b=[];for(const d of a){a=d.range;const e=d.Sc;if(e.isEmpty)continue;var c=this.mapping.Grb(e)?.s1;if(!c)continue;const f=__c.d9f(c,a);f.size>0?(a=FKw(this,e,f,a),b.push(...a)):
(c=a9f(c,a),c!==""&&c!=="\n"&&b.push({type:"textBlock",id:Qb(),text:c,Oh:{type:"responsive",Sc:e,range:a,snapshot:c,container:this.pd.m5a(e)}}))}return b}blk(a){sa(MKw(a));const b=this.viewport.iN;if(this.viewport.MF&&b)return a=a.Oh,this.pd.XCa(a.Sc,a.range)}PIg(a){sa(MKw(a));var b=a.Oh;a=b.container;var c=this.pd.w5d(b.Sc,b.range);b=[];for(const d of c)(c=a?.qgb(d))&&b.push(c);return b}qaf(a,b){sa(MKw(a));sa(MKw(b));return a.Oh.Sc!==b.Oh.Sc?!1:this.Za.$oa(a.Oh.Sc,a.Oh.range,b.Oh.range).equals}Z6i(a,
b){sa(MKw(a));sa(MKw(b));if(a.Oh.Sc!==b.Oh.Sc)return!1;const c=this.Za.$oa(a.Oh.Sc,a.Oh.range,b.Oh.range).intersects;a=this.Za.$oa(b.Oh.Sc,b.Oh.range,a.Oh.range).intersects;return c||a}wZk(a,b){sa(MKw(a));var c=a.Oh,d=c.range;c=c.Sc;var e=this.mapping.Grb(c);if(e)return d=zIw(d,b.length),b=Gw.offset(d,b.offset),e=a9f(e.s1,b),c={type:"textBlock",id:Qb(),text:e,Oh:{type:"responsive",range:b,Sc:c,snapshot:e}},a.type==="observableTextBlock"?this.lpf(c):c}lpf(a){sa(MKw(a));var b=a.Oh;const c=b.Sc;b=b.range;
const d=this.mapping.Grb(c);if(d){var e=this.Za.f9b(c,b);return{type:"observableTextBlock",id:a.id,text:F_(()=>a9f(d.s1,e)),Oh:{type:"responsive",Sc:c,snapshot:a.Oh.snapshot,range:e,container:this.pd.m5a(c)}}}}qpc(a){sa(a.type==="observableTextBlock"&&a.Oh.type==="responsive");a=a.Oh.range;a?.connected&&a.disconnect()}get context(){return this.getContext()}get kN(){return"responsive"}get isEmpty(){const a=this.context;return a?a.marker.Pg.ref==null&&a.text.isEmpty:!0}get fwa(){return!!this.Mu}get Mu(){if(this.Joh&&
this.K$j){var a=this.Joh.sheet,b=this.Joh.rows,c=this.Joh.cols,d=this.Joh.cells,e=!1,f=!1,g=Infinity,h=-Infinity,k=Infinity,l=-Infinity,n=new Set,p=new Set;for(const {row:q,column:r}of d)n.add(q),p.add(r),this.hLd(a,q,r)?.trim()?e=!0:f=!0,g=Math.min(g,a.kL(q)),h=Math.max(h,a.kL(q)),k=Math.min(k,a.zL(r)),l=Math.max(l,a.zL(r));d=`${`${__c.Om(k)}${`${g+1}`}`}:${`${__c.Om(l)}${`${h+1}`}`}`;b=b.length>0;h=1;c.length>0?h=2:b&&(h=3);return{sheet:a,YEa:this.AJl(a),selection:{xGg:{row:m(a.nEb(g)),column:m(a.$xb(k))},
range:d,Pt:n.size,xT:p.size,eym:e,aym:f,yB:h}}}}get Joh(){const a=this.vg.Kb;if(a!=null&&a.type===4)return{sheet:a.container.ia.config,rows:a.rows.map(b=>b),cols:a.columns.map(b=>b),cells:a.cells.map(b=>b)}}AJl(a){const b=new Map;a.layout.cells.forEach((c,d)=>{if(c.content.ref){c=d.ec;var e=d.$b;d=Nm({column:c,row:e},a);c=this.hLd(a,e,c);d&&c&&b.set(d,c)}});return b}hLd(a,b,c){if(a=this.fd?.getContent(a,b,c))return a.hU}get jng(){return!1}get Ymf(){const a=this.Za.state;return!!a&&a.type==="RANGE"&&
a.isCollapsed}get CM(){const a=this.Za.state;return!!a&&a.type==="RANGE"&&!a.isCollapsed}get hOa(){return this.gan&&!this.jan}UGg(){const a=this.Za.state?.Sc??this.context?.text;a&&this.Za.qv(a,Gw.end())}iCb(){}Lqb(){var a=this.Za.state;if(a&&a.type==="RANGE")return(a=this.Za.b8a())?HKw(this,a):void 0}async Qzd(){var a=this.Za.state;if(!a||a.type!=="RANGE")return{G3:void 0,F3:void 0};var b=a.range;a=Gw.collapseToStart(b);a=Gw.g7c([Gw.start(),a]);a=(a=this.Za.e9e(a))?HKw(this,a):void 0;b=Gw.collapseToEnd(b);
b=Gw.g7c([b,Gw.end()]);b=(b=this.Za.e9e(b))?HKw(this,b):void 0;return{G3:a,F3:b}}qv(a,b){this.Za.qv(a,b)}Mtl(a){sa(MKw(a));a=a.Oh;this.Za.qv(a.Sc,a.range)}async insertText(a,b){if(this.fwa)this.Sin(a,b.va,b.Igm);else{var c=b.action;b=b.EPs;var d=this.undo.startBuffering();IKw(this);switch(c){case "add_below":this.Za.n2g();break;case "append":JKw(this);break;case "replace":var e=__c.tef(this.Za);break;default:throw new u(c);}await LKw(this,a,e,b);w_(()=>{d.stop()})}}Sin(a,b,c){if(this.Mu&&this.JS&&
this.fd){var d=this.Mu.sheet,e=this.Mu.selection.xGg,f=e.row,g=e.column,h=C2h(a,new APw(this.Zn,this.JS)).transform();if(h){var k=d.kL(f),l=d.zL(g),n=h[h.length-1];e=k+n.row;n=l+n.column;var p=d.layout.rows.count(),q=d.layout.cols.count();this.wSk(d,f,g,e-p+1,n-q+1,b);this.fd.Ew(r=>{for(const t of h){const v=d.nEb(k+t.row),w=d.$xb(l+t.column);if(v&&w){let x=d.layout.attrs.get(__c.Ee.ht,v,w);x={...x,UK:c?"wrap":x?.UK,n1:c&&t.row===0?"#f4f4f4":x?.n1};r.Khc(d,{row:v,column:w},__c.Qk.create(t.text));
x&&r.setAttributes(d,{row:v,column:w},x)}else this.errorService.error("Invalid cell accessed")}})}else this.fd.Ew(r=>{r.RIa(d,{row:f,column:g},a)}),this.errorService.error("Table parsing failed, inserting into singular cell")}}wSk(a,b,c,d,e,f){d>0&&(f.ob().addEvent(`sheet_element_${d}_rows_added`),this.hj.addRows(a,b,"after",d,f,"magic_write"));e>0&&(f.ob().addEvent(`sheet_element_${e}_columns_added`),this.hj.bUb(a,c,"after",e,f,"magic_write"))}vR(){this.Za.vR()}s5d(){const a=this.Za.state,b=this.Za.NR,
c=this.viewport.iN;if(this.viewport.MF&&c&&b&&a&&a.type==="RANGE")return this.pd.XCa(a.Sc,a.range)?.transform(c.invert())||b.transform(c.invert())}P8c(){const a=this.viewport.h8;if(this.viewport.MF&&a)return a}get scrollTop(){return this.viewport.scrollTop}I$c(a){a&&this.context?.marker.Pg.set(a)}A2b(){this.context?.marker.Pg.set(void 0)}get idr(){const a=this.Za.state;return a&&a.type==="RANGE"?a.DUa:!1}get gan(){const a=this.Za.state;return a&&a.type==="RANGE"?this.Za.Dob(a.Sc,a.range).vNc:!1}get jan(){const a=
this.Za.attributes.link;return a.size===[...a].filter(b=>b!=="").length}S_j(a,b){sa(a.every(MKw));sa(b.every(MKw));const c=[],d=[],e=[],f=[];var g=PKw(a);const h=PKw(b);for(const l of b)if((b=g.get(l.Oh.Sc))&&b.length!==0)if(b=OKw(l,b,(n,p)=>this.qaf(n,p)))if(l.Oh.snapshot!==b.Oh.snapshot){var k=NKw(l);c.push({...k,id:b.id})}else k=NKw(l),f.push({...k,id:b.id});else b=NKw(l),d.push(b);else b=NKw(l),d.push(b);for(const l of a)(a=h.get(l.Oh.Sc))&&a.length!==0?(g=l.type==="observableTextBlock"?l.text.get():
l.text,g===""||g==="\n"?(a=NKw(l),e.push(a)):OKw(l,a,(n,p)=>this.qaf(n,p))||(a=NKw(l),e.push(a))):(a=NKw(l),e.push(a));return{added:d,deleted:e,modified:c,xTl:f}}BWj(a){sa(MKw(a));var b=a.Oh;a=b.Sc;b=b.range;const c=this.Za.state;return c&&c.type==="RANGE"&&c.isCollapsed&&c.Sc===a?this.Za.$oa(a,c.range,b).aHe:!1}TWg(a){return MKw(a)}constructor(a,b,c,d,e,f,g,h,k,l,n,p,q,r){this.Za=a;this.vg=b;this.Zn=c;this.undo=d;this.JS=e;this.viewport=f;this.pd=g;this.hj=h;this.fd=k;this.getContext=l;this.CMa=
p;this.errorService=q;this.K$j=r;this.mapping=(__c.QKw.G(this),void 0);this.dF=new __c.mu;this.mapping=n.jc(t=>t)}};var UKw=class{async Kxc(a){if(this.gha!=null)if(a=await this.gha?.getBlob(a),a!=null&&a.blob.type==="text/plain")try{return await this.cKd(a.blob)}catch(b){this.errorService.ra(b)}else this.errorService.error("Could not retrieve blob, or blob has incorrect mimetype");else this.errorService.error("Attempted to set prompt from blob when blobStorage is undefined")}cKd(a){return new Promise((b,c)=>{const d=new FileReader,e=()=>{d.removeEventListener("load",f);d.removeEventListener("error",g)},f=()=>{ra(typeof d.result===
"string");b(d.result);e()},g=()=>{c(d.error);e()};d.addEventListener("load",f);d.addEventListener("error",g);d.readAsText(a)})}constructor(a,b){this.errorService=a;this.gha=b}};var ZKw={[1]:"continue",[2]:"summarize",[3]:"rewrite",[4]:"rewrite_fun",[5]:"rewrite_formal",[6]:"rewrite_fantastical",[7]:"fix_spelling"};var bLw=class{static G(a){O(a,{T9d:H_.ref,VDc:H_.ref,afh:C_,cKa:F_,eBh:F_,tya:F_,JWb:F_,Tcf:C_,resizeTo:C_,V2e:C_})}async KLj(){if(!this.VDc){var a=await this.Ra.Qja(new __c.sI({user:this.X.user.id,types:[627]}));w_(()=>{this.VDc=__c.OA(627,a?.actions)})}}mCc(a){return this.viewport.ey().transform(this.viewport.hm(a))}get cKa(){return this.Pa.mode===40&&this.JWb!=null}get eBh(){return this.VDc}get tya(){const a=this.selection.Ma;return a&&a.type==="elements"?a:void 0}get JWb(){var a=this.tya;if(a&&
a.Ri()){var b=a.container,c=a.Hg,d=a.box;a=(c?[c]:a.elements).reduce((e,f)=>{f.type==="group"?e.push(...f.pb.filter($Kw)):$Kw(f)&&e.push(f);return e},[]);if(!(a.length<2)&&a.some(e=>{e=aLw(e);return!!e&&e.Ya.trim().length>0}))return{dh:b,elements:a,box:m(d,"Selection box must be set")}}}CUj(a){const b=[],c=[];a.elements.forEach(d=>{switch(d.type){case "text":b.push(this.xHj(d));break;case "shape":b.push(this.uHj(d));break;case "line":c.push(this.rHj(d));break;default:throw new u(d);}});return{elements:b,
links:c}}xHj(a){return new etr({id:a.anchor,text:AKw(a.text),elementType:"text"})}rHj(a){const b=a.start,c=a.end;a=a.ed.first()?.text;const d=[b.marker,c.marker].filter(e=>e===2||e===3).length;return new __c.gtr({x3i:b.anchor?.SI,e9h:c.anchor?.SI,g3h:d===0?3:d===1?1:2,text:a?AKw(a):""})}uHj(a){sa(!a.ed.empty,"Shape element must have at least 1 text content.");const b=a.ed.map(c=>c.text);return Wj(a)?new etr({id:a.anchor,text:AKw(b[0]),elementType:"sticky-note",Zla:b[1]?AKw(b[1]):void 0}):new etr({id:a.anchor,
text:b[0]?AKw(b[0]):"",elementType:"shape"})}HUj(a){this.afh();const {element:b,page:c}=this.qTj();this.Tcf(a,b,"");a.dh.page===c&&(this.V2e(a,b),this.mCc(a.dh).tD(Oj(b))||this.viewport.HC(c,this.viewport.lT(c),{center:Oj(b).tl,animate:!0}));return{onComplete:C_(()=>{this.T9d=b;KJw(this);this.s0g?.()}),onProgress:C_(({text:d,onCancel:e})=>{c.elements.has(b)?(this.Tcf(a,b,d),this.Uak(b),this.V2e(a,b)):e()})}}zRj(a){const b=this.Esa(),c=[...a.elements.map(e=>e.text),...a.links.map(e=>e.text)].filter(e=>
e).join("\n"),d=a.links.length;a=a.elements.reduce((e,f)=>{f.elementType==="sticky-note"?e.iWi++:f.elementType==="text"?e.lWi++:f.elementType==="shape"&&e.fWi++;return e},{iWi:0,lWi:0,fWi:0});return{gbk:c,Amk:()=>this.Esa()-b,jAj:{...a,tjo:d}}}nRl(a){const b=this.JWb;this.P.track(nPw,{...a,a0f:b?.box?.width?Math.ceil(b?.box?.width):void 0,T_f:b?.box?.height?Math.ceil(b?.box?.height):void 0,source:"editor"})}qTj(){const a=this.viewport.Vg;sa(a.type!=="responsive-page");const b=this.qc.Baa(BPw,"text-generator",
{Ig:"none",Xc:"text_generator",span:void 0},{Xe:a});this.resizeTo(b,360);return{element:b,page:a.page}}Tcf(a,b,c){var d=m(b.ed.first(),"Shape must have at least 1 text content");d=__c.YRc.snapshot(d);c=[`### **${c?M("ZrGRYw"):M("eLMUdQ")}**`,c].join("\n\n");a=this.O4d(a);({text:a}=C2h(c,new __c.G2h(this.eH,void 0,a)).transform());b.ed.set(0,{...d,text:a});this.kd.Wka(b)}Uak(a){a.height/a.width<2.5||this.resizeTo(a,Math.sqrt(a.height*a.width/2.5))}resizeTo(a,b){const c=this.Wc.Eoc(a);a=Oj(a);b=__c.Ej(b,
0).transformPoint(a.tl);c.lw(a.Ub,a.r,b,!0,!0);c.destroy()}V2e(a,b){const c=this.Wr.W3a([b]),d=Oj(b);a=sj(this.Ofk(a,b),d.tl);c.translate(a.x,a.y)}Ofk(a,b){var c=a.box;const d=this.viewport.lS(a.dh);var e=wj(c.tr,new pj(20,0));if(!d){const g=this.mCc(a.dh);a=h=>g.tD(Oj({top:h.y,left:h.x,width:b.width,height:b.height}));if(a(e))return e;c=sj(c.tl,new pj(b.width+20,0));return a(c)?c:e}const f=d.transform(this.viewport.hm(a.dh));a=g=>f.tD(Oj({top:g.y,left:g.x,width:b.width,height:b.height}));if(a(e))return e;
e=sj(c.tl,new pj(b.width+20,0));if(a(e))return e;e=wj(c.Tn,new pj(0,20));if(a(e))return e;e=sj(c.tl,new pj(0,20+b.height));return a(e)?e:wj(c.tl,new pj(20,20))}sck(a){a=a.elements.map(b=>aLw(b)).filter(sb).reduce((b,c)=>{[...c.SD("font-size")["font-size"]].filter(sb).forEach(d=>{const e=b.get(d)??0;b.set(d,e+1)});return b},new Map);return(a=__c.Di(a,([,b])=>b))?{"font-size":a[0]}:{}}constructor(a,b,c,d,e,f,g,h,k,l,n,p,q=()=>Date.now()){this.X=a;this.viewport=b;this.Pa=c;this.selection=d;this.qc=e;
this.kd=f;this.Wc=g;this.Wr=h;this.P=k;this.eH=l;this.Ra=n;this.s0g=p;this.Esa=q;this.T9d=(bLw.G(this),void 0);this.VDc=!1;this.afh=()=>{this.Ra.Wj(new __c.ht({user:this.X.user.id,types:[627]}));this.VDc=!0};this.O4d=r=>{const t=this.eH.anc;let v={style:"body"};t&&(v={...v,...t});return{...v,...this.sck(r)}}}},BPw=new __c.fv({viewBox:{top:0,left:0,height:64,width:64},paths:[new __c.ev({d:"M0 0H64V64H0z",fill:{...__c.ks,color:"#ffffff"},stroke:{...__c.ls,weight:2,color:"#d9d9d9"},qb:20})],slice:{horizontal:1,
source:{top:0,left:0,height:64,width:64},Qp:64,eq:64,vertical:1},ed:[{box:{top:0,left:0,width:64,height:64},RK:20,Ki:1}],Lq:{dT:!1,j$:!1}});var CPw=__c.F(()=>({type:__c.Wa(1,__c.ytr)}));var BLw=class{static G(a){O(a,{eB:H_.deep})}get kN(){return this.Ka==="responsive"?"responsive":this.viewport.ya.type}l1m(a,b){return gLw(this,a,b,{location:"presenter_notes"})}kfa(a,b){const c=this.kN;switch(c){case "fixed":case "concatenated-fixed":return gLw(this,new __c.mtr({prompt:a.prompt,...a.context}),b);case "responsive":return gLw(this,new __c.ntr({prompt:a.prompt,...a.context}),b);default:throw new u(c);}}uYc(a,b,c){const d=this.kN;switch(d){case "fixed":case "concatenated-fixed":return a=
wLw(a),gLw(this,a,b,c);case "responsive":return a=yLw(a),gLw(this,a,b,c);default:throw new u(d);}}zld(a,b){a=xLw(a);return gLw(this,a,b)}async Txc(a){try{return this.sqc?hLw(this):iLw(this,a)}catch(b){this.errorService.ra(b,{La:"text_generator_service_controller refreshUsage:"}),b instanceof Error?w_(()=>this.eB={state:"error",message:b.message}):w_(()=>this.eB={state:"error"})}return this.eB}async JEd(a){try{if(this.ewe&&this.Q1c.length!==0){var b=a.prompt;(0,a.H7r)?.();var c=this.Q1c[Math.floor(Math.random()*
this.Q1c.length)],d=await this.Vjk({prompt:b});return d==null?void 0:this.ewe.q2c({YH:d.title,ovb:d.subtitle,HFb:{type:"id",id:c}})}}catch(e){this.errorService.ra(e,{La:"responsive_text_generator_controller banner creation:"})}}async Hhi(){var a=this.kN;switch(a){case "fixed":case "concatenated-fixed":a=new CPw({type:1});break;case "responsive":a=new CPw({type:2});break;default:throw new u(a);}return(await this.NS.Hhi(a)).VTr.map(b=>({id:b.id,model:b.model}))}async Vjk(a){a=new __c.Pli({text:a.prompt});
a=await this.NS.Bsg(a);ra(a.type==="GENERATE_TEXT_TITLES");return a}constructor(a,b,c,d,e,f,g,h,k,l,n,p,q){this.P=a;this.jRd=b;this.Pqh=c;this.NS=d;this.v7=e;this.errorService=f;this.X=g;this.viewport=h;this.Ka=k;this.u_=l;this.ewe=n;this.sqc=p;this.Q1c=q;this.eB=(BLw.G(this),{state:"loading"})}};var CLw=class{async uAj(a){var b=new __c.aPr({mga:a.mga});const {wc:c}=await this.NS.Ytd(b);({result:b}=__c.Qh(async()=>{var d=await this.NS.pJd(new mOw({wc:c,userId:this.X.user.id,na:this.X.Ab.brand.id}));ra(d.response==="ANALYZE_TONE_OF_VOICE");switch(d.Pna.response){case "PENDING":break;case "SUCCESS":var e=d.Pna.Bv;d=d.Pna.description;this.P.uQl(d,{hp:a.hp});return{status:"complete",Bv:e,description:d};case "MODERATED":switch(e=d.Pna.ljb,d=d.Pna.owa,e){case 2:return this.P.Kwh("input",d,{hp:a.hp}),
{status:"input_moderation_error",category:d};case 3:return this.P.Kwh("output",d,{hp:a.hp}),{status:"output_moderation_error",category:d};case 4:return this.P.Lwh("input",{hp:a.hp}),{status:"input_unsupported_language"};case 5:return this.P.Lwh("output",{hp:a.hp}),{status:"output_unsupported_language"};default:throw new u(e);}case "ERROR":return this.P.tQl({hp:a.hp}),{status:"error",AY:d.Pna.AY};default:throw new u(d.Pna);}},1E3,{Js:3E4}));return await b}async PIe(a){a=new nOw({na:this.X.Ab.brand.id,
userId:this.X.user.id,limit:a?.limit});({HW:a}=await this.NS.PIe(a));return a}async MAe(a){a=new __c.bPr({...a});({id:a}=await this.NS.MAe(a));return a}async Scf(a){a=new __c.dPr({na:this.X.Ab.brand.id,userId:this.X.user.id,...a});await this.NS.Scf(a)}async $Be(a){const b=new oOw({na:this.X.Ab.brand.id,userId:this.X.user.id,...a});await this.NS.$Be(b);this.jRd.KYj(a.id,3)}constructor(a,b,c,d){this.P=a;this.jRd=b;this.NS=c;this.X=d}};var zLw=class{async Wfk(){const {usages:a}=await this.Ff.rqb(new __c.vjf({brand:this.X.Ab.brand.id,user:this.X.user.id,rf:40,type:[29],limit:1}));return a}async Dgc(a,b){await this.Ff.Gta(new __c.Iz({user:this.X.user.id,brand:this.X.Ab.brand.id,item:new __c.QSg({id:a,Sn:b}),gya:[40],timestamp:this.Sb.now(),context:__c.bTg.dpa({mi:1})}))}async Mqk(a,b){try{const {usage:c}=await this.Ff.hMg(new __c.Zmd({user:this.X.user.id,brand:this.X.Ab.brand.id,mBo:a,Sn:b,rf:40}));return c}catch(c){}}async KYj(a,
b){if(a=await this.Mqk(a,b))try{await this.Ff.Gvg(new __c.nej({user:this.X.user.id,brand:this.X.Ab.brand.id,rf:40,token:a.token}))}catch(c){this.errorService.ra(c,{La:"text_generator delete usage: "})}}constructor(a,b,c){this.X=a;this.Ff=b;this.errorService=c;this.Sb=__c.Tb}};var WNw=class{get eB(){return this.store.eB}get jZ(){return this.store.jZ}get pAa(){return this.store.pAa}async refresh(){await Promise.all([this.L.refresh(this.store),this.L.ZLf(this.store)])}open(a){switch(a.view){case "prompt_input":return ELw(this,a);case "configure_voice":return GLw(this,a);case "customisation":return HLw(this,a);default:throw new u(a);}}async kfa(a){const b=this.store;if(!await this.L.Uqb(b)){switch(a.Fdh){case "generic":this.L.Rqb(b,a.prompt);break;case "prompt_library":const c=
(b.pAa??[]).find(d=>d.id===a.nVu);if(!c)throw Error("Invalid prompt library id supplied");this.L.SYb(b,c);break;default:throw new u(a);}await this.L.xtk(b,a.PSa.source,a.PSa.FTe,a.PSa.Dpe)}}async uYc(a){const b=this.store;if(!a.text&&!b.hOa)throw Error("Missing text or editable selection on the editor");switch(a.action){case "apply_brand_voice":if(!b.kr)throw Error("Missing brand voice");await this.L.XCf(b,{text:a.text,location:a.PSa.location});break;case "apply_tone_of_voice":if(!b.jZ.find(c=>c.id===
a.Is))throw Error("Missing or invalid signature voice id");await this.L.T5d(b,{id:a.Is,text:a.text,location:a.PSa.location});break;case "customize":this.L.QMe(b,a.T$c??"");await this.L.Zsk(b,void 0,a.PSa.location,a.text);break;default:await this.L.PAb(b,{action:a.action,title:a.title,text:a.text,...a.PSa})}}gLj(a){const b=this.store;switch(a.Sn){case "default":this.L.F9c(b);break;case "brand_voice":this.L.mAd(b);break;case "custom_voice":if(!b.jZ.find(c=>c.id=a.id))throw Error("Missing or invalid voice id");
this.L.Y5d(b,a.id);break;default:throw new u(a);}}URk(){return this.L.Uqb(this.store)}constructor(a,b){this.store=a;this.L=b}};var DPw={voice:{id:"default",name:M("sWiSMA")},Sn:1},sNw={id:"deepseek-v3",model:M("o2uDnA")},EPw={"deepseek-v3":M("o2uDnA"),"qwen-turbo":M("DO9Rcg")},TNw=class{static G(a){O(a,{isOpen:H_.ref,view:H_.ref,iMa:H_.ref,z0c:H_.ref,hOa:F_,eB:F_,CM:F_,Z7e:F_,fwa:F_,JVi:F_,Fse:H_.ref,Av:H_.deep,jZ:H_.ref,fU:F_,kr:F_,mJj:F_,prompt:H_.ref,error:H_.ref,Cmb:H_.ref,SIa:H_.ref,Ibd:H_.ref,mTg:H_.ref,zoe:H_.ref,bLc:H_.ref,pAa:H_.ref,mRd:H_.ref,aHk:F_,ONb:H_.ref,EFl:F_,Uid:F_,zVf:F_,$El:F_,Ez:H_.ref,gea:H_.ref,pKd:H_.ref,
e0:H_.ref,sAb:H_.deep,vvd:H_.ref,RVd:H_.shallow,attachments:F_,sSp:F_,NQk:F_,Zob:F_,pGa:F_,Joc:F_,nDe:F_,sJa:F_,gwe:H_.ref,Zv:F_,nQe:F_,nkl:F_,vUf:H_.ref,xgb:H_.ref,fGc:H_.ref,tZ:H_.shallow,Aze:H_.ref,dHc:H_.ref,jNb:H_.ref,dng:F_,nOg:F_,zNc:F_,Bdf:F_,FTa:H_.ref,chb:F_,d0j:F_,Mqh:F_,NZd:F_,Vvj:H_.ref,zjd:F_,J7b:C_,hgh:C_,cnl:C_,qXf:C_,igh:C_,eJm:C_,suggestions:H_.deep,rth:F_,Juj:H_.ref,qDe:F_,Puj:H_.ref,UKa:F_,CBi:H_.ref})}get nLc(){return this.u_.status}get B8b(){return this.qa.status===1&&this.pr.jng}get hOa(){return this.qa.status===
1&&this.pr.hOa}get eB(){return this.$y.eB}get CM(){return this.pr.hOa}get Z7e(){return!this.pr.fwa}get fwa(){return this.pr.fwa}get JVi(){return this.z0c?.model??M("o2uDnA")}get fU(){return this.u_.status===Jx.ei?this.Fse:DPw}set fU(a){this.Fse=a}get kr(){if(this.dH.status===Jx.ei){var a=this.Bc.Nc?.id,b=this.Bc.Nc?.name??M("NCow3Q"),c=this.Bc.Nc?.content.kr?.content;if(a&&c)return{id:a,name:b,Bv:c}}}get mJj(){return!!this.Rp.z2f}get aHk(){return this.pr.fwa||this.pr.kN==="responsive"}get EFl(){if(this.pr.fwa)return!1;
const a=!!this.prompt.trim();return!a&&!this.Uid||a&&this.Cmb}get Uid(){return this.aHk&&this.view==="prompt_input"&&!this.prompt.trim()&&(!!this.pAa||this.ONb)&&this.attachments.length===0}get zVf(){return AIw(this.prompt)}get $El(){return this.zVf>=this.pge}get attachments(){return[...this.RVd.values()]}get sSp(){return this.attachments.some(a=>a.state==="pending")}get NQk(){return this.RVd.size>=this.nAn}get Zob(){if(this.e0>=0&&this.e0<this.sAb.Uya.length)return this.sAb.Uya[this.e0]}get pGa(){return this.Zob?.Pha}set pGa(a){this.e0>=
0&&this.e0<this.sAb.Uya.length&&(this.sAb.Uya[this.e0].Pha=a)}get Joc(){return this.Zob?.error}set Joc(a){this.e0>=0&&this.e0<this.sAb.Uya.length&&(this.sAb.Uya[this.e0].error=a)}get nDe(){return!!this.Joc||!this.pGa?.trim()}get sJa(){return this.sAb.Uya.length}get Zv(){return this.gwe?.case({fulfilled:a=>a})}get nQe(){return!!this.gwe?.case({pending:()=>!0,fulfilled:()=>!1})}get nkl(){return AIw(this.pKd)}get xa(){return this.xgb==="loading"||this.xgb==="analyzing"||this.xgb==="saving"}get dng(){return this.xgb===
"loaded"&&this.jZ.length<this.vUe}get nOg(){return this.tZ.has(1)}get zNc(){return this.tZ.has(2)||this.tZ.has(3)}get Bdf(){const a=[];this.tZ.forEach(b=>{switch(b){case 3:b=FPw[b](this.kxm);break;default:b=FPw[b]()}a.push(b)});return a}get chb(){return this.Ez||this.eB.state==="error"}get d0j(){const a=this.eB.state==="loaded"&&this.eB.kM.gt>0;return!this.FTa.trim()||this.chb||!a}get Mqh(){return this.NZd>=this.pge}get NZd(){return AIw(this.FTa)}get zjd(){return this.zMq&&this.pr.kN==="responsive"&&
this.Vvj}set zjd(a){this.Vvj=a}vbi(a){const b=JLw(this,a);return b?b:KLw(this,a)}J7b(a){const b=`${a.CT.toLowerCase()}`,c=this.suggestions.get(a.$lf);if(c){var d=c.get(b);d?d.push(a):c.set(b,[a])}else this.suggestions.set(a.$lf,new Map([[b,[a]]]))}hgh(a){const b=a.fFa,c=this.suggestions.get(a.$lf);if(c){a=`${a.CT.toLowerCase()}`;var d=c.get(a);d&&(d=d.filter(e=>this.pr.TWg(e.fFa)&&!this.pr.qaf(e.fFa,b)),d.length>0?c.set(a,d):(c.delete(a),c.size===0&&this.suggestions.delete(b.id)))}this.pr.qpc(b)}cnl(a,
b){const c=this.UKa;let d;for(const e of a)c&&!d&&this.pr.Z6i(c.Ou.fFa,e.fFa)&&(d={Ou:b,box:this.pr.PIg(b.fFa)[0]}),this.hgh(e);this.J7b(b);d&&(this.UKa=d)}qXf(a){a=a.toLowerCase();for(const [b,c]of this.suggestions.entries()){const d=c.get(a);d&&(d.forEach(e=>{this.pr.qpc(e.fFa)}),c.delete(a),c.size===0&&this.suggestions.delete(b))}}igh(a){const b=this.suggestions.get(a);if(b){for(const c of b.values())c.forEach(d=>{this.pr.qpc(d.fFa)});this.suggestions.delete(a)}}eJm(){for(const a of this.suggestions.values())for(const b of a.values())b.forEach(c=>
{this.pr.qpc(c.fFa)});this.suggestions.clear()}get rth(){const a=new Map;for(const [c,d]of this.suggestions.entries()){const e=new Map;for(const f of d.values())for(const g of f)if(this.pr.TWg(g.fFa)){var b=this.pr.PIg(g.fFa);b.length&&(b=b.map(h=>({box:h,Ou:g})),e.set(g,b))}else this.hgh(g);a.set(c,e)}return a}get qDe(){return this.Juj||this.pr.CM||!!this.UKa}set qDe(a){this.Juj=a}get UKa(){if(this.pr.CM)w_(()=>{this.Puj=void 0});else return this.Puj}set UKa(a){this.Puj=a}constructor(a,b,c,d,e,f,
g,h,k,l,n,p,q,r,t){this.$y=a;this.pr=b;this.u_=c;this.Bc=d;this.Rp=e;this.dH=f;this.qa=g;this.pge=h;this.zMq=k;this.OQa=l;this.Mga=n;this.kxm=p;this.jxm=q;this.nAn=t;this.isOpen=(TNw.G(this),!1);this.Xdf=[];this.iMa=!1;this.z0c=void 0;this.Fse=DPw;this.Av={name:"",Bv:"",mga:"",description:""};this.jZ=[];this.prompt="";this.zoe=this.mTg=this.Ibd=this.SIa=this.Cmb=!1;this.mRd=[sNw];this.gea=this.Ez=this.ONb=!1;this.pKd="";this.e0=0;this.sAb={target:"",Uya:[]};this.vvd=!1;this.RVd=new Map;this.hWd=this.C2e=
!1;this.xgb="loading";this.fGc=!1;this.tZ=new Set;this.jNb=this.dHc=!1;this.FTa="";this.Vvj=!0;this.suggestions=new Map;this.Juj=!1;this.CBi=[];this.vUe=r>0?r:3}},FPw={[1]:()=>M("R6Ro/Q"),[2]:()=>M("adO5AA"),[3]:a=>J("O227zA",[a])};var eMw=["image/gif","image/jpeg","image/png","image/webp"],bMw=[...eMw,"application/pdf","application/msword","application/vnd.openxmlformats-officedocument.wordprocessingml.document","application/vnd.ms-excel","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet","text/csv","text/html","text/markdown","text/plain"],UNw=class{static G(a){O(a,{refresh:C_,ZCa:C_,handleClose:C_,qba:C_,unh:C_,handleError:C_,dispose:C_,D1j:C_,XCf:C_,T5d:C_,Vsk:C_,F9c:C_,mAd:C_,Y5d:C_,itk:C_,b9m:C_,q8m:C_,
J9m:C_,btk:C_,atk:C_,g8m:C_,w9m:C_,gNg:C_,jmd:C_,pRd:C_,aRd:C_,jAh:C_,cjh:C_,A$d:C_,J1j:C_,Rqb:C_,nNg:C_,INg:C_,W7m:C_,X7m:C_,l9m:C_,t6f:C_,lLo:C_,xtk:C_,PUe:C_,SIa:C_,p0g:C_,Uqb:C_,ZLf:C_,sDo:C_,JEd:C_,oMc:C_,Mnb:C_,Q0f:C_,SYb:C_,j9m:C_,H8m:C_,J8m:C_,L9m:C_,D1a:C_,o8m:C_,jDf:C_,vNg:C_,T7m:C_,Pii:C_,d0g:C_,Wtk:C_,ave:C_,Gkf:C_,QMe:C_,Zsk:C_,PAb:C_,Vkl:C_,d9n:C_,u1j:C_,XSk:C_,CZm:C_,$Xn:C_,PRk:C_,t9n:C_,Usk:C_,$tk:C_,j$n:C_,Atk:C_,Wsk:C_,hvn:C_,K9m:C_,guk:C_,qXf:C_,Qii:C_,T8m:C_,Ktf:C_,Qvn:C_,GNg:C_})}async refresh(a){const b=
this.swd&&!a.fwa;await Promise.all([this.$y.Txc(),this.A$d(a),b&&this.Qvn(a)])}ZCa(a,b,c,d,e,f){const g=a.view;g!==b&&(this.pr.iCb(),a.view=b,a.Xdf.push(b),a.isOpen=!0,this.location=c,this.refresh(a),this.ZLf(a),g||(this.hp||(this.hp=Qb()),this.$y.P.WRa("shown",{location:c,FTe:d,gt:a.eB.state==="loaded"?a.eB.kM.gt:void 0,vO:a.CM?"selection":void 0,source:f??"editor",Dpe:e,hp:this.hp})),b==="configure_voice"&&(a.Av.id?this.$y.P.M9i({hp:this.hp}):this.$y.P.c9i({location:c,hp:this.hp})))}handleClose(a){a.iMa||
(this.d0g(a),this.$y.P.WRa("closed",{hp:this.hp}),a.isOpen=!1,this.dispose(a))}qba(a){if(!a.iMa){var b=a.Xdf.pop();b==="configure_voice"?this.J1j(a):b==="post-generation"&&(this.$y.P.WRa("back",{hp:this.hp}),this.D1j(a));a.Xdf.length?(a.view=a.Xdf[a.Xdf.length-1],this.refresh(a)):(a.view=void 0,a.Xdf=[],this.handleClose(a))}}unh(a,b){a.iMa=b}handleError(a,b){a.Ez=!1;a.iMa=!1;a.pGa="";a.Joc=b;a.error=b;this.Uac?.unsubscribe()}dispose(a){a.error=void 0;a.prompt="";a.SIa=!1;a.Cmb=!1;a.isOpen=!1;a.view=
void 0;a.Xdf=[];a.FTa="";a.iMa=!1;a.ONb=!1;a.pAa=void 0;a.RVd.clear();a.zoe=!1;this.hp=this.s1m=this.location=void 0;this.D1j(a);this.J1j(a)}D1j(a){a.pGa="";a.Ez=!1;a.sAb={target:"",Uya:[]};a.pKd="";a.e0=0;a.gea=!1;a.Joc="";a.vvd=!1;a.vUf=void 0;this.Uac?.unsubscribe()}async XCf(a,b){if(this.qa?.status===2)this.handleError(a,M("9JC53g"));else{var c=b.text,d=b.location;b=b.va;var e=a.kr;if(e)if(c=c??this.pr.Lqb()){a.Ez=!0;a.iMa=!0;this.ZCa(a,"post-generation",d);var {G3:f,F3:g}=await this.pr.Qzd(),
h={action:"apply_voice",input:c,Bv:{type:"BRAND_VOICE",voice:e.Bv},context:{G3:f,F3:g,hp:this.hp}},k=p=>this.oMc(a,p),l=p=>this.$y.uYc(h,k(p));d={wH:"apply_tone_of_voice",location:d,gt:a.eB.state==="loaded"?a.eB.kM.gt:void 0,vO:"selection",wJ:c.length,GC:AIw(c),cCc:!0,hp:this.hp};this.Q0f(a,c);this.Mnb(a,a.kr.name,l,d);if(await this.Uqb(a))b?.abort(),this.handleClose(a);else{this.$y.P.gne(e.id,this.location);this.$y.P.D9(d);var n=await l(b);w_(()=>{this.Uac=n});return new Promise(p=>{n?.add(p)})}}else b?.abort();
else this.handleError(a,M("g+AkHA")),b?.end("error",new Map([["error_type","missing_brand_voice"]]))}}async T5d(a,b){if(this.qa?.status===2)this.handleError(a,M("9JC53g"));else{var c=b.id,d=b.text,e=b.location;b=b.va;if(c)if(d=d??this.pr.Lqb()){a.Ez=!0;a.iMa=!0;this.ZCa(a,"post-generation");var {G3:f,F3:g}=await this.pr.Qzd(),h={action:"apply_voice",input:d,Bv:{type:"CUSTOM_VOICE",id:c},context:{G3:f,F3:g,hp:this.hp}},k=a.jZ.find(q=>q.id===c)?.name??"",l=q=>this.oMc(a,q),n=async q=>this.$y.uYc(h,
l(q));e={wH:"apply_tone_of_voice",location:e,gt:a.eB.state==="loaded"?a.eB.kM.gt:void 0,vO:"selection",wJ:d.length,GC:AIw(d),imd:!0,hp:this.hp};this.Q0f(a,d);this.Mnb(a,k,n,e);if(await this.Uqb(a))b?.abort(),this.handleClose(a);else{this.$y.P.D9(e);var p=await n(b);w_(()=>{this.Uac=p});return new Promise(q=>{p?.add(q)})}}else b?.abort();else b?.abort()}}async Vsk(a,b){FLw(this,"editor_magic_write_dialog","incidental")||(b=this.V.wb("editor.text_generator.open_dialog",{Hb:{name:"editor.text_generator.open_dialog",
attrs:new Map([["location",b],["view","configure_voice"]])}}),this.ZCa(a,"configure_voice"),b.qe())}F9c(a){this.$y.P.Obf({hp:this.hp});this.$y.jRd.Dgc(DPw.voice.id,1);a.fU=DPw}mAd(a){const b=a.kr;b?(this.$y.P.Obf({hp:this.hp}),this.$y.jRd.Dgc(b.id,2),a.fU={voice:b,Sn:2}):this.F9c(a)}Y5d(a,b){this.$y.P.Obf({hp:this.hp});const c=a.jZ.find(d=>d.id===b);c&&(this.$y.jRd.Dgc(b,3),a.fU={voice:c,Sn:3})}itk(a){FLw(this,"editor_magic_write_dialog","incidental")||(this.$y.P.M9i({hp:this.hp}),a.fU.Sn===3&&(a.Av=
{...a.fU.voice}),this.ZCa(a,"configure_voice"))}async b9m(a,b){this.Rp.z2f&&(a.iMa=!0,await this.Rp.z2f({onClose:()=>{a.iMa=!1},fRf:()=>this.mAd(a),dba:b}))}async q8m(a){if(a.Av.id){this.$y.P.TQl({hp:this.hp});await this.$y.Pqh.$Be({id:a.Av.id});var b=a.Av.id===a.fU.voice.id;b&&this.$y.jRd.Dgc(DPw.voice.id,1);w_(()=>{b&&(a.fU=DPw);a.jZ=a.jZ.filter(c=>c.id!==a.Av.id);a.dHc=!1;this.qba(a)})}}J9m(a){a.dHc=!a.dHc}btk(a,b){a.error=void 0;a.jNb=!0;a.Av.mga=b.substring(0,a.jxm);this.pRd(a,{kYl:!1})}atk(a,
b){a.Av.name=b.substring(0,24);this.jmd(a)}g8m(a,b){a.fGc=b}async w9m(a){this.jmd(a);this.pRd(a);a.tZ.size>0||(a.Av.id?await this.jAh(a):await this.cjh(a),w_(()=>{this.qba(a)}))}async gNg(a,b){this.pRd(a);if(!a.zNc){a.Aze=void 0;var c=a.Av.mga.trim();a.xgb="analyzing";this.$y.P.vQl(c,{hp:this.hp});var d=await this.$y.Pqh.uAj({mga:c,hp:this.hp});w_(()=>{switch(d.status){case "complete":a.Av.Bv=d.Bv;a.Av.description=d.description;a.jNb=!1;b?.();break;case "input_moderation_error":case "output_moderation_error":a.Aze=
M("H3JPtQ");break;case "input_unsupported_language":case "output_unsupported_language":a.Aze=M("uU+a3g");break;case "error":a.Aze=M("BblqIQ");break;default:throw new u(d);}a.xgb="loaded"})}}jmd(a){const b=!!a.jZ.find(c=>c.id!==a.Av.id&&c.name===a.Av.name);this.aRd(a,1,b)}pRd(a,b){const c=!!a.Av.mga.trim();this.aRd(a,2,!c);this.aRd(a,3,(b?.kYl??!0)&&c&&a.Av.mga.length<a.kxm)}aRd(a,b,c){c?a.tZ.add(b):a.tZ.has(b)&&a.tZ.delete(b)}async jAh(a){a.Av.id&&(a.xgb="saving",a.Av.name||a.fU.Sn!==3||(a.Av.name=
a.fU.voice.name),this.$y.P.ZRl({hp:this.hp}),await this.$y.Pqh.Scf({id:a.Av.id,name:a.Av.name,description:a.Av.description,Bv:a.Av.Bv,mga:a.Av.mga}),this.$y.jRd.Dgc(a.Av.id,3),w_(()=>{const b={...a.Av};a.fU={voice:b,Sn:3};const c=a.jZ.findIndex(d=>d.id===a.Av.id);a.jZ[c]=b;a.xgb="loaded"}))}async cjh(a){a.xgb="saving";if(!a.Av.name){let c=a.jZ.length+1,d=J("xhiPMA",[c]);for(;a.jZ.find(e=>e.name===d);)c+=1,d=J("xhiPMA",[c]);a.Av.name=d}this.$y.P.RQl({hp:this.hp});const b=await this.$y.Pqh.MAe({...a.Av});
this.$y.jRd.Dgc(b,3);w_(()=>{const c={...a.Av,id:b};a.fU={voice:c,Sn:3};a.jZ.push(c);a.xgb="loaded"})}async A$d(a){a.xgb="loading";if(this.u_.status!==Jx.ei)a.xgb="loaded";else{var b=(await this.$y.Pqh.PIe()).map(({type:d,...e})=>e),c=await this.Bfk(a,b);w_(()=>{a.jZ=b;a.fU=c;a.xgb="loaded"})}}async Bfk(a,b){const c=await this.$y.jRd.Wfk();if(!c.length)return DPw;const {id:d,Sn:e}=c.map(f=>f.item)[0];switch(e){case 1:return DPw;case 2:return d!==a.kr?.id?DPw:{voice:a.kr,Sn:e};case 3:return(a=b.find(f=>
f.id===d))?{voice:a,Sn:e}:DPw;default:throw new u(e);}}J1j(a){a.xgb="loaded";a.Av.id=void 0;a.Av.mga="";a.Av.description="";a.Av.Bv="";a.Av.name="";a.fGc=!1;a.jNb=!1;a.tZ=new Set;a.Aze=void 0}Rqb(a,b){this.PUe(a)||(a.Cmb=!1,a.prompt=b.trim()?b:"",a.error=void 0)}nNg(a){a.Cmb=!1;a.prompt="";a.error=void 0;a.RVd.clear()}async INg(a){await this.p0g(a);this.$y.P.WRa("try_example_clicked",{hp:this.hp});w_(()=>{const b=a.bLc?Array.from(a.bLc.keys()):[];a.prompt=b[this.taf]??"";a.Cmb=!0;a.error=void 0;this.taf=
(this.taf+1)%b.length})}W7m(a,b){a=a.RVd;var c=a.set,d=b.id,e=AOw.resolve;b={type:"DESIGN",id:b.id,thumbnail:aMw(b),title:b.draft.content.title,extension:b.xc.extension};c.call(a,d,e.call(AOw,b))}async X7m(a,b){const c=await fMw(b);w_(()=>a.RVd.set(c.id,AOw.resolve(c)))}l9m(a,b){a.RVd.delete(b)}t6f(a,b){a.mTg=b??!a.mTg}lLo(a){a.zoe=!a.zoe}async xtk(a,b,c,d){if(this.qa?.status===2)this.handleError(a,M("9JC53g"));else if(a.zVf>a.OQa)this.handleError(a,J("o15hng",[a.OQa]));else{a.Ez=!0;a.iMa=!0;a.vvd=
!0;a.hWd=!1;this.s1m="prompt_input";this.ZCa(a,"post-generation",void 0,c,d,b);var {G3:e,F3:f}=await this.pr.Qzd();b=await MLw(a);c=a.zoe?new __c.Ouh({ka:this.ea.id,extension:this.ea.extension}):void 0;var g={prompt:a.prompt,context:{G3:e,F3:f,Vka:b,hp:this.hp,fxj:c}};c=a.fU;switch(c.Sn){case 2:g.context.Bv={type:"BRAND_VOICE",voice:c.voice.Bv};this.$y.P.gne(c.voice.id,this.location);break;case 3:g.context.Bv={type:"CUSTOM_VOICE",id:c.voice.id}}d=this.pr.fwa;!d&&this.swd&&a.z0c?.id&&(g.context.WTr=
a.z0c.id);var h=p=>this.oMc(a,p,UJw,q=>this.sDo(a,q));c=d?p=>{var q=this.$y;p=h(p);return gLw(q,new __c.ltr({prompt:g.prompt,...g.context}),p)}:p=>this.$y.kfa(g,h(p));var k=a.prompt.trim(),l=a.bLc?.get(k);b={wH:d?"generate_table":"generic",vO:l?"sample_prompt":a.CM?"selection":void 0,mge:l,wJ:k.length,GC:a.zVf,jkm:a.hWd,cCc:a.fU.Sn===2,imd:a.fU.Sn===3,hp:this.hp,rQi:b.map(hMw)};this.Q0f(a,a.prompt);this.Mnb(a,a.prompt,c,b);this.$y.P.D9(b);var n=await c();w_(()=>{this.Uac=n});return new Promise(p=>
{n?.add(p)})}}PUe(a){return this.$y.eB.state==="loaded"&&this.$y.eB.kM.gt===0?(this.SIa(a),!0):!1}SIa(a){__c.tb.rd&&!a.SIa&&(a.SIa=!0,setTimeout(C_(()=>{a.SIa=!1}),750))}async p0g(a){if(!a.bLc){w_(()=>{a.Ibd=!0});const b=await this.DGr();w_(()=>{a.bLc=b;a.Ibd=!1})}}async Uqb(a){const b=await this.$y.Txc();if(b.state==="error")return this.handleError(a,M("g+AkHA")),!0;if(b.state==="loaded"&&b.kM.gt===0){if(b.kM.lSb===1)switch(this.u_.status){case Jx.Ak:FLw(this,"editor_magic_write_dialog","incidental");
break;default:this.SIa(a)}else this.SIa(a);return!0}return!1}async ZLf(a){a.aHk&&(this.thl||(a.ONb=!0,this.thl=await this.tHr()),w_(()=>{a.pAa=this.pr.fwa?this.thl?.sheet:this.thl?.doc;a.ONb=!1}))}async sDo(a,b){if(!(a.hWd||b.length<200)){var c=()=>{a.hWd=!0};this.vRi?a.gwe=AOw(this.JEd(b,c)):this.JEd(b,c).then(d=>{d!=null&&(a.C2e=!0,this.pr.I$c({...d,width:"100cqw",maxWidth:void 0}))})}}async JEd(a,b){if(this.pr.kN==="responsive"&&this.pr.isEmpty)return await this.$y.JEd({prompt:a,H7r:b})}Gtk(a,
b){this.handleError(a,ILw(b))}Xtk(a,b){this.handleError(a,b||M("g+AkHA"))}oMc(a,b,c,d){return{next:C_(e=>{switch(e.status){case "in_progress":b?.ob().addEvent("streamed_text_generation");a.pGa=e.text;d?.(e.text);break;case "complete":b?.ob().addEvent("fetched_text_generation_result");a.Ez=!1;a.iMa=!1;b?.end();c?.(e.text);break;case "input_moderation_error":case "output_moderation_error":this.Gtk(a,e.category);b?.end("ok",new Map([["error_type",e.status]]));break;case "input_unsupported_language":case "output_unsupported_language":this.handleError(a,
M("uU+a3g"));b?.end("ok",new Map([["error_type",e.status]]));break;case "server_error":this.Xtk(a,e.endUserMessage);b?.end("error",new Map([["error_type",e.status]]));break;default:throw new u(e);}}),error:()=>{this.handleError(a,M("g+AkHA"))},complete:C_(()=>{c?.(a.pGa??"")})}}Mnb(a,b,c,d){a.sAb.Uya.push({Pha:"",u1m:b,KGs:c,PSa:d,error:void 0});a.e0=a.sAb.Uya.length-1}Q0f(a,b){a.sAb={target:b,Uya:[...a.sAb.Uya]}}SYb(a,b){a.prompt=b.prompt;this.$y.P.LRl({id:b.id,hp:this.hp})}get CGs(){if(this.ub)return this.ub.oMb({oU:__c.Fv({source:"aigc",
contentId:this.ea.id,appName:"magic_write"})})}get HOp(){return this.rb.XK(new __c.pk({uri:"https://www.canva.com/policies/ai-product-terms/",target:1}))}j9m(a,b){a.pKd=b.trim()?b:"";a.error=void 0}H8m(a){this.$y.P.WRa("next_iteration_clicked",{hp:this.hp});a.e0=Math.min(a.e0+1,a.sAb.Uya.length-1)}J8m(a){this.$y.P.WRa("previous_iteration_clicked",{hp:this.hp});a.e0=Math.max(0,a.e0-1)}L9m(a,b){this.D1a(a,b);this.$y.P.WRa(b?"this_but_input_opened":"this_but_input_closed",{hp:this.hp})}D1a(a,b){a.gea=
b;a.pKd=""}o8m(a){a.pGa&&(this.$y.P.WRa("text_copied",{hp:this.hp}),navigator.clipboard.writeText(a.pGa),cc()&&this.ma.Ib({Db:M("c8AREg")}))}jDf(a){this.$y.P.oRl(a.pGa||"",{cCc:a.fU.Sn===2,wH:"generic",hp:this.hp});this.Uac?.unsubscribe();a.Ez=!1;a.iMa=!1}async vNg(a,b){if(this.qa?.status===2)this.handleError(a,M("9JC53g")),b?.abort();else{var c=a.Zob;this.$y.P.WRa("more_like_this_clicked",{hp:this.hp});if(c){a.error=void 0;a.Ez=!0;var d=await MLw(a),e={...c.PSa,YFb:a.sJa,tAb:a.e0,vO:"iterative_buttons",
mge:"more_like_this",wH:"generic",hp:this.hp,rQi:d.map(hMw)};this.$y.P.D9(e);var f=Pb("1b33b699",!1),g=c.KGs;if(f){const k={action:"more_like_this",input:c.Pha,SZe:a.sAb.target,context:{hp:this.hp,Vka:d}},l=n=>this.oMc(a,n);g=n=>this.$y.uYc(k,l(n))}this.Mnb(a,M("NYUEbw"),g,e);if(await this.Uqb(a))b?.abort(),this.handleClose(a);else{var h=await g(b);w_(()=>{this.Uac=h});return new Promise(k=>{h?.add(k)})}}else b.abort()}}T7m(a,b,c){const d=a.pKd;this.D1a(a,!1);this.$y.P.WRa("this_but_submit_clicked",
{hp:this.hp});a.pKd="";return this.pr.fwa?this.Gkf({store:a,Iyb:d,GC:a.nkl,u9f:!0,va:b,location:c}):this.ave({store:a,text:a.pGa||"",Iyb:d||"",GC:a.nkl,YFb:a.sJa,tAb:a.e0,u9f:!0,va:b,location:c})}Pii(a,b,c,d){const e=a.pGa;if(e){var f=a.Zv&&{...a.Zv,width:"100cqw",maxWidth:void 0};this.vRi&&f&&this.pr.I$c(f);this.$y.P.jxh(c,{YFb:a.sJa,tAb:a.e0,hp:this.hp});this.pr.insertText(e,{action:b,Igm:this.s1m==="prompt_input",va:d});a.C2e=!1;this.handleClose(a)}}d0g(a){a.C2e&&this.pr.A2b()}async Wtk(a,b){FLw(this,
"editor_magic_write_dialog","incidental")||(b=this.V.wb("editor.text_generator.open_dialog",{Hb:{name:"editor.text_generator.open_dialog",attrs:new Map([["location",b],["view","customisation"]])}}),this.ZCa(a,"customisation"),b.qe())}async ave({store:a,text:b,Iyb:c,GC:d,va:e,location:f,u9f:g,YFb:h,tAb:k}){if(this.qa?.status===2)this.handleError(a,M("9JC53g")),e?.abort();else if(d>a.OQa)this.handleError(a,J("o15hng",[a.OQa])),e?.abort();else if(b=b.trim(),c=c.trim(),b&&c){a.error=void 0;a.Ez=!0;this.ZCa(a,
"post-generation");var l=await MLw(a);d={wJ:[...c].length,GC:d,location:f,YFb:h,tAb:k,mge:g?"this_but":void 0,vO:g?"iterative_buttons":"selection",wH:"apply_customise_instruction",hp:this.hp,rQi:l.map(hMw)};this.$y.P.D9(d);var n=v=>this.oMc(a,v),{G3:p,F3:q}=await this.pr.Qzd();f=g&&a.zoe?new __c.Ouh({ka:this.ea.id,extension:this.ea.extension}):void 0;var r={action:"customize",input:b,prompt:c,context:{G3:p,F3:q,SZe:g?a.sAb.target:void 0,hp:this.hp,fxj:f,Vka:l}};g=v=>this.$y.uYc(r,n(v));this.Mnb(a,
c,g,d);if(await this.Uqb(a))e?.abort(),this.handleClose(a);else{var t=await g(e);w_(()=>{this.Uac=t});return new Promise(v=>{t?.add(v)})}}else e?.abort()}async Gkf({store:a,Iyb:b,GC:c,u9f:d,va:e,location:f}){if(this.qa?.status===2)this.handleError(a,M("9JC53g")),e?.abort();else if(c>a.OQa)this.handleError(a,J("o15hng",[a.OQa])),e?.abort();else{var g=b.trim(),h=this.pr.Mu;if(h&&h?.selection.range&&g){h.selection.Pt>20&&(a.vUf=J("DPXIkg",[20]));a.error=void 0;a.Ez=!0;this.ZCa(a,"post-generation");var k=
await MLw(a);b={wJ:[...g].length,location:f,mge:d?"this_but":void 0,wH:d?"iterate_table_bulk_action":"generate_table_column",hp:this.hp,rQi:k.map(hMw)};this.$y.P.D9(b);var l=a.zoe?new __c.Ouh({ka:this.ea.id,extension:this.ea.extension}):void 0,n=q=>this.oMc(a,q);if(d){const q=a.pGa;d=r=>this.$y.zld({action:"iterate_table",prompt:g,Och:q??"",Mu:h.YEa,DE:h.selection.range,context:{hp:this.hp,fxj:l,Vka:k}},n(r))}else d=q=>this.$y.zld({action:"autofill_with_prompt",prompt:g,Mu:h.YEa,DE:h.selection.range,
yB:h.selection.yB,context:{hp:this.hp}},n(q));this.Mnb(a,g,d,b);if(await this.Uqb(a))e?.abort(),this.handleClose(a);else{var p=await d(e);w_(()=>{this.Uac=p});return new Promise(q=>{p?.add(q)})}}else e?.abort()}}QMe(a,b){this.PUe(a)||(a.FTa=b.trim()?b:"",a.error=void 0)}Zsk(a,b,c,d){if(this.pr.fwa)return this.Gkf({store:a,Iyb:a.FTa,GC:a.NZd,va:b,location:c});d=d??this.pr.Lqb();if(!d)return Promise.resolve();this.Q0f(a,d);return this.ave({store:a,text:d,Iyb:a.FTa,GC:a.NZd,va:b,location:c})}async PAb(a,
b){if(this.qa?.status===2)this.handleError(a,M("9JC53g"));else{var c=b.action,d=b.location,e=b.va,f=b.text??this.pr.Lqb();if(f){a.Ez=!0;a.iMa=!0;a.vvd=c==="continue"?!0:!1;this.ZCa(a,"post-generation");var {G3:g,F3:h}=await this.pr.Qzd(),k={action:c,input:f,context:{G3:g,F3:h,hp:this.hp}},l=(q,r)=>this.oMc(a,q,r),n=(q,r)=>this.$y.uYc(k,l(q,r));d={wH:__c.Nuh[c],location:d,gt:a.eB.state==="loaded"?a.eB.kM.gt:void 0,vO:"selection",wJ:f.length,GC:AIw(f),hp:this.hp};b=b.title??GPw[c];this.Q0f(a,f);this.Mnb(a,
b,n,d);if(await this.Uqb(a))e?.abort(),this.handleClose(a);else{this.$y.P.D9(d);var p=await n(e);w_(()=>{this.Uac=p});return new Promise(q=>{p?.add(q)})}}else e?.abort()}}async Xsk(a,b){if(!FLw(this,b.Te??"","incidental"))if(this.qa?.status===2)this.handleError(a,M("9JC53g"));else{var c=b.location;b=b.va;var d=this.pr.Mu;if(d&&d.selection.range)if(d.selection.eym){var e=a.kr;if(e){d.selection.Pt>20&&(a.vUf=J("DPXIkg",[20]));a.Ez=!0;a.iMa=!0;a.vvd=!0;this.ZCa(a,"post-generation");var f=(k,l)=>this.oMc(a,
k,l),g=(k,l)=>this.$y.zld({action:"apply_brand_voice",Bv:{type:"BRAND_VOICE",voice:e.Bv},Mu:d.YEa,DE:d.selection.range,yB:d.selection.yB,context:{hp:this.hp}},f(k,l));c={location:c,gt:a.eB.state==="loaded"?a.eB.kM.gt:void 0,vO:"selection",hp:this.hp};this.Mnb(a,e.name,g,c);if(await this.Uqb(a))b?.abort(),this.handleClose(a);else{this.$y.P.gne(e.id,this.location);this.$y.P.D9(c);var h=await g(b);w_(()=>{this.Uac=h});return new Promise(k=>{h?.add(k)})}}else this.handleError(a,M("g+AkHA")),b?.end("error",
new Map([["error_type","missing_brand_voice"]]))}else this.ma.Ib({Db:M("fYA+rA")});else b?.abort()}}async qNg(a,b,c){const d=m(this.osb,"MagicSummaryPresenter is not initialized"),e=m(d.JWb,"Selection cannot be used with Magic Summary.");var f=e.dh;if(this.Ac?.nS(f))this.ma.Ib({Db:M("sZmqxA"),group:moe});else if(a.eB.state==="loaded"&&a.eB.kM.gt){f=d.CUj(e);var {Amk:g,gbk:h,jAj:k}=d.zRj(f);this.$y.P.D9({wH:"magic_summary",location:b,vO:"selection",wJ:h.length,GC:AIw(h),hp:this.hp});var {onComplete:l,
onProgress:n}=d.HUj(e),p,q={action:"create_summary",elements:f.elements,links:f.links,context:{hp:this.hp}},r=v=>this.oMc(a,v,w=>{l(w);d.nRl({...k,kJo:p,YLo:g(),location:"floating_toolbar"})},n?w=>{p||(p=g());n({text:w,onCancel:()=>{this.jDf(a)}})}:void 0),t=await (v=>this.$y.uYc(q,r(v)))(c);w_(()=>{this.Uac=t});return new Promise(v=>{t?.add(v)})}c?.abort()}Vkl(a){!a.zjd||this.G3f&&this.suggestions||(this.G3f=new FOw,this.suggestions=pLw(this.$y,this.G3f.asObservable()),this.t9n(a),this.EOd.trigger=
"design_open",this.dJm=PLw(this,a))}d9n(a){if(a.zjd&&!this.izh){var b=__c.Db(()=>this.XSk(a),250);this.izh=this.pr.M1k(b)}}u1j(a){this.izh?.();this.izh=void 0;a.UKa=void 0;a.qDe=!1}XSk(a){if(!this.pr.CM){var b=QLw(this,a);if(!b)a.UKa=void 0;else if(b!==a.UKa?.Ou){var c=this.pr.PIg(b.fFa);a.UKa={box:c[c.length-1],Ou:b}}}}CZm(a){const b=this.P0e,c=[];for(const d of b)this.pr.TWg(d)?c.push(d):(a.igh(d.id),this.pr.qpc(d));c.length!==b.length&&(this.P0e=c)}async $Xn(a,b,c){if(!SLw(this,b)){var d=[];for(const e of c)(b=
this.pr.blk(e))&&d.push({fFa:e,box:b});return new Promise(e=>{requestAnimationFrame(()=>{w_(()=>{a.CBi=d});e()})})}}PRk(a,b,c){if(!SLw(this,b)){var {added:d,modified:e,deleted:f,xTl:g}=this.pr.S_j(this.P0e,c);this.J3f.push(...f);c=[...d,...e];this.oWj=[...c,...g];c.length?this.Lkt(b,c):WLw(this,a,b)}}t9n(a){this.suggestions&&this.suggestions.pipe(GOw(b=>b.type==="PROGRESS")).subscribe({next:b=>{this.W3g--;const c=b.nlg,d=this.Ytf.get(b.id),e=!!c&&!SLw(this,c)&&!!d;e&&XLw(this,a,b.suggestions,d);(b=
b.metadata)&&YLw(this,b);if(b=this.W3g<=0)jMw(iMw(this.EOd)),ZLw(this);b&&e&&(this.izh&&w_(()=>{this.XSk(a)}),WLw(this,a,c))},error:()=>{this.Ktf(a)},complete:()=>{this.Ktf(a)}})}async Usk(a,b){const c=b.deb;b.hasError||(this.pr.Mtl(b.fFa),c[0].length===0?this.pr.vR():await this.pr.insertText(c[0],{action:"replace",EPs:!1}),w_(()=>{a.hgh(b);a.UKa=void 0}),kMw(this.EOd))}$tk(a,b){a.UKa?(clearTimeout(this.Jcn),clearTimeout(this.Lpl),this.Lpl=setTimeout(()=>{w_(()=>{a.UKa=b});this.Lpl=void 0},100)):
a.UKa=b}j$n(a){const b=QLw(this,a);b&&(a.UKa?.Ou.id===b.id&&(a.UKa=void 0),a.hgh(b))}Atk(a,b){const c=b.Ou;this.qXf(a,c.CT);this.pr.qpc(c.fFa);uLw(this.$y,this.ea.id,c.CT);$Lw(this,a,b)}Wsk(a,b){const c=b.Ou;this.qXf(a,c.CT);this.pr.qpc(c.fFa);vLw(this.$y,c.CT);$Lw(this,a,b)}hvn(a){const b=this.storage.getItem("editor:editing:design_automation:text_generator:spelling_and_grammar");a.zjd=b==null?!0:b==="true"}K9m(a){a.zjd?(this.Ktf(a),a.zjd=!1,this.storage.setItem("editor:editing:design_automation:text_generator:spelling_and_grammar",
"false"),CIw(this.$y.P,{trigger:"feature_toggled_off"})):(a.zjd=!0,this.storage.setItem("editor:editing:design_automation:text_generator:spelling_and_grammar","true"),this.Vkl(a),CIw(this.$y.P,{trigger:"feature_toggled_on"}))}guk(a,b){a.qDe=b??!a.qDe}qXf(a,b){a.qXf(b)}Qii(a,b){b.forEach(c=>{this.K3f.delete(c.id)})}async T8m(a,b){b.forEach(c=>{this.K3f.set(c.id,c)});this.ZXo.set(Array.from(this.K3f.values()));this.nWj||this.KUg||await this.XQr(a)}Ktf(a){if(this.G3f||this.suggestions)this.EOd.trigger=
"design_close",this.Uht(),VLw(this,this.P0e),this.P0e=[],this.J3f.forEach(b=>{a.igh(b.id)}),this.J3f=[],this.K3f.clear(),this.Ytf=new Map,this.W3g=0,this.dJm?.(),this.dJm=void 0,this.G3f?.unsubscribe(),this.suggestions=this.G3f=void 0,this.u1j(a),ZLw(this),a.eJm(),a.suggestions=new Map,a.UKa=void 0,a.CBi=[]}async Qvn(a){if(!(a.mRd.length>1)){var b=await this.$y.Hhi();a.mRd=b.map(c=>({id:c.id,model:EPw[c.model]??c.model}))}}GNg(a,b){const c=a.mRd.find(d=>d.id===b);c&&(a.z0c={id:c.id,model:c.model})}constructor(a,
b,c,d,e,f,g,h,k,l,n,p,q,r,t,v,w,x=window.localStorage){this.$y=a;this.pr=b;this.u_=c;this.ma=d;this.ea=e;this.ub=f;this.rb=g;this.qa=h;this.Rp=k;this.vRi=l;this.swd=n;this.DGr=p;this.tHr=q;this.V=r;this.EOd=t;this.Ac=v;this.osb=w;this.storage=x;this.Uac=(UNw.G(this),void 0);this.taf=0;this.Ytf=new Map;this.W3g=0;this.P0e=[];this.oWj=[];this.ZXo=H_.box([]);this.K3f=new Map;this.J3f=[];this.KUg=!1;this.tfq=()=>{let y,z;const B=()=>{clearTimeout(z);z=void 0;y?.();y=void 0};return async C=>{(y||z)&&B();
if(!SLw(this,C))return new Promise(G=>{z=setTimeout(()=>{B();G([])},3E3);y=pKw(()=>this.ZXo.get(),H=>{B();G(H)})})}};this.l9q=this.tfq();this.Lkt=C_((y,z)=>{if(!(this.W3g>0||z.length<=0)){var B=m(this.G3f);ZLw(this);this.Ytf=new Map;this.W3g=z.length;var C=0;for(const G of z){z=G.text;const H=this.pr.lpf(G);H&&(this.Ytf.set(G.id,H),C+=AIw(z),B.next({Dga:1,text:z,id:G.id,designId:this.ea.id,nlg:y,locale:void 0}))}this.EOd.ORg=C}});this.Uht=()=>{const y=this.EOd.getMetrics();CIw(this.$y.P,{...y});this.EOd.S_d()};
this.XQr=__c.Db(y=>{const z=RLw(this,y),B=Array.from(this.K3f.values());this.PRk(y,z,B)},3E3)}},GPw={continue:M("smevxA"),summarize:M("Kdi2Qw"),rewrite:M("lqWfBQ"),rewrite_fun:M("lqWfBQ"),rewrite_formal:M("1dppbg"),rewrite_fantastical:M("iMJNJQ"),fix_spelling:M("P03bvQ")},dMw={"application/pdf":5,"application/msword":7,"application/vnd.openxmlformats-officedocument.wordprocessingml.document":8,"application/vnd.ms-excel":9,"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet":10,"image/gif":1,
"image/jpeg":2,"image/png":3,"image/webp":4,"text/csv":6,"text/html":11,"text/markdown":13,"text/plain":12},gMw=Object.fromEntries(Object.entries(dMw).map(([a,b])=>[b,a]));var VNw=class{S_d(){this.Npf=this.Imf=this.R7f=this.ORg=this.cId=this.yBd=this.vvh=this.KWf=0;this.wFd="";this.LXg=-1}getMetrics(){return{KWf:this.KWf,vvh:this.vvh,yBd:this.yBd,cId:this.cId,ORg:this.ORg,R7f:this.R7f,Imf:this.Imf,Npf:this.Npf,wFd:this.wFd,LXg:this.LXg,trigger:this.trigger}}constructor(){this.trigger="design_open";this.Npf=this.Imf=this.R7f=this.ORg=this.cId=this.yBd=this.QX=this.vvh=this.KWf=0;this.wFd="";this.LXg=-1}};var HPw='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M5.2 4c1.678.002 3.301.336 4.625.97.89.424 1.654.997 2.175 1.712.521-.715 1.286-1.288 2.175-1.713 1.324-.633 2.947-.967 4.625-.969a.601.601 0 0 1 .6.6V6l.875-.187A.6.6 0 0 1 21 6.4V13h-1.2V7.144l-7.2 1.543v9.968l2.4-.516v1.23l-2.875.617a.598.598 0 0 1-.25 0l-8.4-1.8A.6.6 0 0 1 3 17.6V6.4a.602.602 0 0 1 .544-.6.6.6 0 0 1 .18.013L4.6 6V4.6a.602.602 0 0 1 .544-.6H5.2Zm-1 13.112 7.2 1.544V8.688L4.2 7.145v9.967ZM5.8 6.256l5.225 1.12c-.377-.513-.964-.965-1.718-1.326-.974-.466-2.208-.747-3.507-.818v1.024Zm12.4-1.024c-1.299.071-2.533.352-3.507.818-.752.36-1.334.814-1.712 1.325l5.22-1.119V5.232Z" fill="currentColor"/><path d="M19 14a.75.75 0 0 1 .75.75v1.5h1.5a.75.75 0 0 1 0 1.5h-1.5v1.5a.75.75 0 0 1-1.5 0v-1.5h-1.5a.75.75 0 0 1 0-1.5h1.5v-1.5A.75.75 0 0 1 19 14Z" fill="currentColor"/></svg>';var IPw=__c.Uq({medium:HPw});var sMw=a=>{const b=z_(null),c=a.box;return x_("div",{ref:b,className:y_("GMbIsQ",{PIXorw:a.mEl,_4aICjw:!0}),style:{width:c.width,height:c.height,top:c.top,left:c.left}})},qMw=a=>{const b=z_(null),c=z_(void 0),[d,e]=zOw(!1),f=a.box,g=a.onMouseEnter,h=a.onMouseLeave,k=a.Cuq,l=n=>{if(c.current){var p=c.current.top,q=c.current.bottom,r=c.current.right;if(n.clientX<c.current.left-.05||n.clientX>r+.05||n.clientY<p-.05||n.clientY>q+.05)h(),e(!1),c.current=void 0,document.removeEventListener("mousemove",
l)}};return x_("div",{ref:b,className:y_("GMbIsQ",{PIXorw:a.mEl,_4aICjw:k||d}),style:{width:f.width,height:f.height,top:f.top,left:f.left},onPointerEnter:()=>{if(!k){var n=b.current;n&&(g(),e(!0),c.current=n.getBoundingClientRect(),document.addEventListener("mousemove",l))}}})},pMw=a=>{const b=a.NBa,c=a.children;a=a.oa;if(b)return x_(__c.Ho,{open:!0,placement:"bottom-center",offset:"0.5u",width:"auto",reference:x_("div",{style:{pointerEvents:"none",position:"absolute",top:b.top,left:b.left,width:b.width,
height:b.height}}),Hx:!1,oa:a,children:c})},rMw=a=>{var b=a.rv;const c=a.onMouseEnter,d=a.onMouseLeave,e=a.O$,f=a.PEi,g=a.DJn;a=x_(Q,{tone:"primary",weight:"bold",size:"medium",children:a.deb});b=b?x_("s",{children:a}):a;return x_("div",{onMouseEnter:c,onMouseLeave:d,children:B_(R,{Pc:"1u",children:[x_(R,{Lb:"1u",children:x_(Wi,{stretch:!0,alignment:"start",variant:"tertiary",icon:void 0,disabled:!e,onClick:e,children:b})}),x_(R,{Lb:"1u",children:x_(Wi,{stretch:!0,alignment:"start",variant:"tertiary",
icon:IPw,onClick:g,children:x_(Q,{children:M("2Ml7Fw")})})}),x_(R,{Lb:"1u",children:x_(Wi,{stretch:!0,alignment:"start",variant:"tertiary",icon:__c.qv,onClick:f,children:x_(Q,{children:M("sHgS+w")})})}),x_(R,{Lb:"2u",Pc:"1u",children:x_(Q,{tone:"tertiary",size:"xsmall",children:x_(__c.Ui,{href:"https://canva.slack.com/archives/C093T3FD287/p1751536625568059",target:"_blank",variant:"subtle",tabIndex:-1,children:M("yhEy0A")})})})]})})};var zMw=a=>{const b=a.oa,c=a.owc;var d=a.oHd;const e=a.JYe,f=a.Qdd,g=a.QYe,h=a.PYe,k=a.OYe,l=a.KYe,n=a.mHd,p=a.P6a,q=a.wBe,r=()=>{p?.();b()};let t=null;a.xEl&&(t=B_(E_,{children:[n&&x_(lv,{onClick:n,start:x_(pD,{size:"medium"}),end:x_(a.Nz,{}),children:vMw(q)}),x_(lv,{onClick:f,start:x_(Guh,{size:"medium"}),children:M("lqWfBQ")}),x_(lv,{onClick:l,start:x_(dKw,{size:"medium"}),children:M("P03bvQ")}),x_(lv,{onClick:e,start:x_(Euh,{size:"medium"}),children:M("smevxA")}),x_(lv,{onClick:d,start:x_(Cuh,
{size:"medium"}),children:M("Kdi2Qw")}),a.MPd!=="B"&&x_(lv,{onClick:g,start:x_(qD,{size:"medium"}),children:M("O5RcRg")}),x_(lv,{onClick:h,start:x_(Iuh,{size:"medium"}),children:M("1dppbg")}),a.MPd!=="C"&&x_(lv,{onClick:k,start:x_(tB,{size:"medium"}),children:M("iMJNJQ")}),x_(kv,{label:M("yCQBWg"),icon:__c.HEi,children:a.D3p})]}));d=null;a.wEl&&c&&(d=x_(lv,{onClick:c,start:x_(rPr,{size:"medium"}),end:a.PHb&&x_(a.PHb,{}),children:M("h21PXA")}));return B_(So,{oa:b,className:"vOVuRg",children:[d,t,x_(xMw,
{usage:a.usage,Nz:a.Nz,P6a:p&&r,Mga:a.Mga,R2a:a.R2a})]})};var BMw=a=>{const b=a.tGd,c=a.uGd,d=a.y4g;var e=a.djd;a=a.WWl;e=e.length>0?e.map(f=>x_(lv,{start:x_(pD,{size:"medium"}),onClick:()=>c(f.id),children:f.name},f.id)):null;return B_(E_,{children:[(b||e||d)&&x_(Tt,{}),b&&x_(lv,{onClick:b,start:x_(Kz,{size:"medium"}),children:M("l/AxZQ")}),e,d&&x_(lv,{onClick:d,start:x_(Gu,{size:"medium"}),end:a,children:M("WtbZSA")})]})};var G_=(a,b,c,d)=>async(...e)=>{const f=c.wb("editor.text_generator.edit_text",{Hb:{name:"editor.text_generator.edit_text",type:d,attrs:new Map([["location","floating_toolbar"]])}});b?.();try{await a(f,...e),f.isRecording()&&f.qe()}catch{f.end("error")}};var CMw=xOw(({children:a})=>x_(__c.Nu,{tone:"infoLow",text:M("gCtVYA"),children:a}));var NMw=D_(({store:a,Ws:b,onClose:c,zGd:d,Fb:e,SCi:f,RCi:g,Pvc:h,VDi:k,nwc:l,fFh:n})=>{var p=a.xa;const q=!a.jNb&&!!a.Av.Bv;let r=a.Aze?[a.Aze,...a.Bdf]:a.Bdf;r=r.length===1?r[0]:r;d=B_("div",{className:!a.fGc&&a.nOg?"jXFLwg":void 0,children:[x_(Q,{weight:"bold",children:x_(__c.zD,{value:a.Av.name,placeholder:M("ylhVxw"),Gja:a.fGc,Wv:d,RDa:({active:t})=>g(t),maxLength:24})}),a.Av.id&&x_(Q,{size:"small",children:M("YbpjFg")})]});k=B_(br,{spacing:"1u",children:[a.Av.id&&x_(__c.Rzc,{ariaLabel:M("3Ws7cw"),
onClick:k,icon:__c.Ix,disabled:p}),x_(hd,{onClick:c,disabled:p})]});c=x_(Tc,{spacing:"0",align:"end",children:x_(R,{padding:"1.5u",children:x_(__c.ov,{margins:"none",count:a.Av.mga.length,max:a.jxm})})});e=x_(id,{Wu:b,start:x_(pr,{onClick:e}),title:d,end:k,padding:b?void 0:"0"});f=x_(TC,{value:a.Av.mga,placeholder:M("K1SWTw"),required:!0,Ln:10,error:a.zNc,footer:c,disabled:p,onChange:f,ft:b});d=x_(TC,{value:a.Av.description,placeholder:M("5XOlIA"),Ln:12,disabled:!0});p=q?x_(Wi,{type:"submit",variant:"primary",
icon:a.xgb==="saving"?cE:void 0,disabled:p,stretch:b,children:M("ko25oQ")}):void 0;n=a.dHc?x_(n,{}):void 0;return b?x_(JPw,{store:a,header:e,bbf:d,Cxd:r,Pvc:h,nwc:l,Ayc:p,c4e:f,ZBe:n}):x_(KPw,{store:a,header:e,bbf:d,Ayc:p,Cxd:r,Pvc:h,nwc:l,ZBe:n,c4e:f})}),JPw=({store:a,header:b,c4e:c,bbf:d,Cxd:e,Pvc:f,nwc:g,ZBe:h,Ayc:k})=>{const l=!!a.Av.Bv,[n,p]=zOw("sampleText");var q=a.jNb&&!!a.Av.mga;const r=()=>p("toneOfVoice");q=x_(Wi,{variant:k?"secondary":"primary",icon:a.xgb==="analyzing"?cE:void 0,disabled:a.zNc||
a.xa||!q,onClick:()=>f(r),stretch:!0,children:M("KXZ+ug")});q=n==="sampleText"?q:k;c=B_(R,{padding:"0",children:[!l&&x_(R,{tp:"1.5u",paddingTop:"1u",children:x_(Q,{size:"medium",weight:"bold",children:M("6YN75w")})}),c]});return h?h:x_(Yo,{onSubmit:n==="toneOfVoice"?g:void 0,children:B_(Tc,{spacing:"0",children:[b,x_(R,{padding:"2u",children:B_(Tc,{spacing:"1u",children:[!!k&&x_(__c.xx,{options:[{label:M("cLkJkQ"),value:"sampleText"},{label:M("+F+ong"),value:"toneOfVoice"}],value:n,onChange:t=>{p(t)},
disabled:a.xa}),n==="sampleText"?c:d,x_(__c.DC,{id:"configure_voice_error",tone:"critical",children:e})]})}),x_(R,{padding:"2u",borderTop:"low",children:q})]})})},KPw=({store:a,header:b,c4e:c,bbf:d,Cxd:e,Pvc:f,nwc:g,Ayc:h,ZBe:k})=>{const l=a.jNb&&!!a.Av.mga;a=x_(Wi,{variant:h?"secondary":"primary",icon:a.xgb==="analyzing"?cE:void 0,disabled:a.zNc||a.xa||!l,onClick:()=>f(),children:M("KXZ+ug")});return B_(Yo,{onSubmit:g,children:[!!k&&k,x_(R,{padding:"1.5u",children:b}),x_(Qt,{}),x_(R,{padding:"1.5u",
children:B_($q,{Fa:"start",spacing:"1u",children:[x_(Yq,{children:B_(Tc,{spacing:"1u",children:[x_(Q,{weight:"bold",children:M("6YN75w")}),c]})}),x_(Yq,{children:B_(Tc,{spacing:"1u",children:[x_(Q,{weight:"bold",children:M("lyxYaw")}),d]})})]})}),x_(Qt,{}),x_(R,{padding:"1.5u",children:B_($q,{spacing:"1.5u",align:"end",Fa:"center",children:[x_(Yq,{children:x_(__c.DC,{id:"configure_voice_error",tone:"critical",children:e})}),x_(Yq,{width:"content",children:a}),!!h&&x_(Yq,{width:"content",children:h})]})})]})};var PMw=D_(({input:a,$yb:b,onSubmit:c})=>{const d=[[Pk("Enter"),c]];return x_(Yo,{onSubmit:c,className:"fk4K8Q",children:x_(wp,{map:d,Hr:!0,children:B_(R,{Pc:"0.5u",du:"1u",display:"flex",alignItems:"center",className:"G_6Aig",children:[a,x_(ir,{variant:"primary",size:"xsmall",type:"submit",icon:tC,ib:M("e9v4Dw"),disabled:b})]})})})}),QMw=D_(({input:a,$yb:b,onSubmit:c})=>B_(R,{Pc:"1.5u",du:"1u",display:"flex",alignItems:"center",children:[a,x_(ir,{variant:"primary",size:"xsmall",icon:tC,onClick:c,
ib:M("e9v4Dw"),disabled:b})]}));var TMw=a=>{const b=a.xa,c=a.qml,[d,e]=zOw(500);a=bKw(h=>{h.client&&h.client.width>0&&e(h.client.width)},[]);const f=yOw(()=>LPw({vd:d,rI:Uc,Dvc:1,aspectRatio:10/3}),[d]),g=yOw(()=>c({vd:d,Df:f}),[c,d,f]);return B_(Tc,{spacing:"1u",align:"center",children:[x_(BOw,{client:!0,onResize:a,children:({measureRef:h})=>x_("div",{ref:h,style:{width:"100%",height:f},children:x_(__c.Nt,{expand:!0,loading:b,placeholder:x_(__c.Zy,{shape:"sharpRectangle"}),content:g})})}),x_(__c.jd,{size:"2u"})]})},LPw=({vd:a,
rI:b,Dvc:c,aspectRatio:d})=>(a-(c-1)*(b||0))/c/d;var PPw=({node:a})=>{let b=a;b.type==="paragraph"&&(b=__c.z2h(a));switch(b.type){case "emphasis":return x_(Q,{tagName:"span",children:x_("em",{children:MPw(b.children)})});case "strong":return x_(Q,{weight:"bold",tagName:"span",children:MPw(b.children)});case "list":return x_(Q,{lx:!0,tagName:"div",children:b.ordered?x_("ol",{className:"lhw4dw",start:b.start??void 0,children:MPw(b.children)}):x_("ul",{className:"lhw4dw",children:MPw(b.children)})});case "listItem":return x_("li",{children:MPw(b.children)});
case "link":return x_("b",{children:b.url});case "heading":return x_(NPw,{node:b});case "paragraph":return x_(Q,{lx:!0,children:MPw(b.children)});case "root":return x_(Tc,{spacing:"1u",children:MPw(b.children)});case "text":case "inlineCode":return b.value;case "table":return x_(OPw,{node:b});case "thematicBreak":return x_(Qt,{});case "break":return x_("br",{});case "code":return x_(Q,{lx:!0,children:b.value});default:return null}},OPw=({node:a})=>x_("table",{className:"bc1y0Q",children:a.children.map((b,
c)=>x_("tr",{children:b.children.map((d,e)=>{const f=a.align&&a.align[e]?a.align[e]:"left";return x_("td",{className:"KrG1Fw",children:d.children.map((g,h)=>x_(QPw,{content:g,alignment:RPw[f]},h))},e)})},c))}),QPw=({content:a,alignment:b})=>a.type==="text"?x_(Q,{alignment:b,lx:!0,children:a.value}):x_(PPw,{node:a}),NPw=({node:a})=>x_(dr,{size:SPw(a.depth),lx:!0,children:MPw(a.children)}),SPw=a=>{switch(a){case 1:return"medium";case 2:return"small";case 3:return"xsmall";case 4:case 5:case 6:return"xxsmall";
default:throw new u(a);}},MPw=a=>a.map((b,c)=>x_(PPw,{node:b},c)),RPw={left:"start",center:"center",right:"end"};var TPw=()=>{const a=nMw();return B_("svg",{width:"20",height:"20",viewBox:"0 0 20 20",className:"_FPBUg",children:[x_("defs",{children:B_("linearGradient",{id:a,gradientTransform:"rotate(45)",children:[x_("stop",{stopColor:"#00C4CC"}),x_("stop",{offset:"1",stopColor:"#7D2AE8"})]})}),x_("g",{className:"_2WB88Q",children:x_("circle",{cx:"10",cy:"10",r:"9",stroke:`url(#${a})`,strokeWidth:"2",fill:"none",strokeDasharray:"28px",strokeDashoffset:"20px",className:"b__z_Q"})}),B_("g",{children:[x_("path",
{className:y_("CUC0EA","SOT7Xg"),d:"M 11.6756 3.3582 c -0.01 -0.0506 -0.1013 -0.0506 -0.1112 0 c -0.1104 0.5561 -0.3959 1.6965 -0.9628 2.2634 c -0.5669 0.5669 -1.7073 0.8524 -2.2634 0.9628 c -0.0506 0.01 -0.0506 0.1013 0 0.1112 c 0.5561 0.1104 1.6965 0.3959 2.2634 0.9628 c 0.5669 0.5669 0.8524 1.7073 0.9628 2.2634 c 0.01 0.0506 0.1013 0.0506 0.1112 0 c 0.1104 -0.5561 0.3959 -1.6965 0.9628 -2.2634 c 0.5669 -0.5669 1.7073 -0.8524 2.2634 -0.9628 c 0.0506 -0.01 0.0506 -0.1013 0 -0.1112 c -0.5561 -0.1104 -1.6965 -0.3959 -2.2634 -0.9628 c -0.5669 -0.5669 -0.8524 -1.7073 -0.9628 -2.2634 z",
strokeWidth:"4px"}),x_("path",{className:y_("CUC0EA","SOT7Xg"),d:"M 16.6598 0.0398 c -0.0108 -0.0531 -0.1079 -0.0531 -0.1195 0 c -0.0954 0.4507 -0.3154 1.2533 -0.7262 1.6641 c -0.4108 0.4117 -1.2135 0.6308 -1.665 0.7262 c -0.0523 0.0108 -0.0523 0.1079 0 0.1195 c 0.4515 0.0954 1.2533 0.3154 1.665 0.7262 c 0.4117 0.4108 0.6308 1.2135 0.7262 1.6641 c 0.0108 0.0531 0.1079 0.0531 0.1195 0 c 0.0954 -0.4507 0.3154 -1.2533 0.7262 -1.6641 c 0.4108 -0.4117 1.2135 -0.6308 1.665 -0.7262 c 0.0523 -0.0108 0.0523 -0.1079 0 -0.1195 c -0.4515 -0.0954 -1.2533 -0.3154 -1.665 -0.7262 c -0.4117 -0.4108 -0.6308 -1.2135 -0.7262 -1.6641 z",
strokeWidth:"4px"}),x_("path",{className:"CUC0EA",d:"M 11.722 3.3715 c -0.01 -0.0508 -0.1017 -0.0508 -0.1117 0 c -0.1108 0.5583 -0.3975 1.7033 -0.9666 2.2724 c -0.5691 0.5691 -1.7141 0.8558 -2.2724 0.9666 c -0.0508 0.01 -0.0508 0.1017 0 0.1117 c 0.5583 0.1108 1.7033 0.3975 2.2724 0.9666 c 0.5691 0.5691 0.8558 1.7141 0.9666 2.2724 c 0.01 0.0508 0.1017 0.0508 0.1117 0 c 0.1108 -0.5583 0.3975 -1.7033 0.9666 -2.2724 c 0.5691 -0.5691 1.7141 -0.8558 2.2724 -0.9666 c 0.0508 -0.01 0.0508 -0.1017 0 -0.1117 c -0.5583 -0.1108 -1.7033 -0.3975 -2.2724 -0.9666 c -0.5691 -0.5691 -0.8558 -1.7141 -0.9666 -2.2724 z",
fill:`url(#${a})`}),x_("path",{className:"CUC0EA",d:"M 16.6598 0.0398 c -0.0108 -0.0531 -0.1079 -0.0531 -0.1195 0 c -0.0954 0.4507 -0.3154 1.2533 -0.7262 1.6641 c -0.4108 0.4117 -1.2135 0.6308 -1.665 0.7262 c -0.0523 0.0108 -0.0523 0.1079 0 0.1195 c 0.4515 0.0954 1.2533 0.3154 1.665 0.7262 c 0.4117 0.4108 0.6308 1.2135 0.7262 1.6641 c 0.0108 0.0531 0.1079 0.0531 0.1195 0 c 0.0954 -0.4507 0.3154 -1.2533 0.7262 -1.6641 c 0.4108 -0.4117 1.2135 -0.6308 1.665 -0.7262 c 0.0523 -0.0108 0.0523 -0.1079 0 -0.1195 c -0.4515 -0.0954 -1.2533 -0.3154 -1.665 -0.7262 c -0.4117 -0.4108 -0.6308 -1.2135 -0.7262 -1.6641 z",
fill:`url(#${a})`})]})]})};var VMw=D_(a=>{const b=a.Aud,c=a.mBe;var d=a.Fb;const e=a.D9c,f=a.Ez,g=a.sb,h=a.Zv,k=a.Q0j,l=COw(b,{extensions:[DOw()],mdastExtensions:[EOw()]}),n=z_(null);A_(()=>{if(f&&n.current){var q=n.current;q.scrollHeight-q.scrollTop-q.clientHeight<40&&(q.scrollTop=q.scrollHeight)}},[b,f]);const p=x_(Q,{size:"small",tone:"secondary",weight:"bold",lineClamp:1,children:a.FUa});d=f?x_(TPw,{}):a.sJa>1?x_(UPw,{$S:a.$S,total:a.sJa,Sza:a.nXe,onNext:a.mXe}):x_(pr,{onClick:d});return x_(wp,{map:[["Enter",q=>{c||f||
(e?e():(q.stopPropagation(),a.oQa()))}]],Hr:!0,children:B_("div",{className:y_("xDJHaQ","bN5nAQ"),children:[B_("div",{className:y_({d9vLmQ:f}),children:[x_(id,{start:d,title:p,padding:"1.5u",Wu:!1}),x_(R,{Lb:"1.5u",paddingTop:"0",paddingBottom:"2u",children:B_(Tc,{spacing:"1.5u",children:[a.info,x_("section",{className:"GTNo0Q EH4Rdg",ref:n,children:c?x_(Q,{tone:"critical",children:c}):B_(E_,{children:[h,x_(PPw,{node:l}),f&&x_("span",{className:"Iy2vCg"})]})}),!f&&b.trim().length>0&&x_(Q,{size:"xsmall",
tone:"tertiary",children:k})]})}),x_(Qt,{})]}),x_("div",{className:"T9VCqg",children:x_(g,{})})]})})}),UPw=({$S:a,total:b,Sza:c,onNext:d})=>B_(br,{spacing:"0.5u",Fa:"center",children:[x_(Wi,{variant:"tertiary",size:"small",icon:__c.lr,onClick:c,ariaLabel:M("Me7LTA"),disabled:a===1}),B_(dr,{size:"xsmall",ariaLabel:J("7Aha+w",[a,b]),children:[a,"/",b]}),x_(Wi,{variant:"tertiary",size:"small",icon:__c.mr,onClick:d,disabled:a===b,ariaLabel:M("PBVqiA")})]});var UMw=D_(a=>{var b=a.Ez,c=a.i7j;const d=a.gea,e=a.bDe,f=a.eB;var g=a.Iyb,h=a.Rk,k=a.XYe;const l=a.D1a,n=z_(null);A_(()=>{const z=n.current;z!=null&&(z.focus(),z.blur())},[b]);const {Jk:p,ifa:q}=SMw();A_(()=>{d&&q()},[p,d,q]);var r=x_(Sc,{light:e?"light":"dark",Qm:e?"light":"dark",children:z=>x_("div",{className:z.className,children:x_(Pc,{platform:a.platform,size:"medium",Xoa:"Enter",compact:!0})})});const t=x_(Wi,{variant:"secondary",size:"small",onClick:a.E0a,className:"n1SkiQ",children:B_(br,
{spacing:"1u",children:[M("xqSQtw"),x_(Pc,{platform:"apple",size:"medium",Xoa:"Escape"})]})}),v=a.onCopy?x_(VPw,{onClick:a.onCopy}):void 0;h=b?void 0:x_(Wi,{variant:"secondary",size:"small",onClick:h,className:"C2_Z0g",disabled:e,children:M("NYUEbw")});const w=b?void 0:x_(Wi,{variant:"secondary",size:"small",onClick:()=>l(!0),disabled:e,children:M("qgG9uA")});var x=x_(Wi,{variant:"secondary",size:"small",onClick:a.CRc,className:"RIYJQQ",disabled:e,children:x_(Q,{weight:"bold",tone:cr,lineClamp:1,
children:M("yZwLnA")})});const y=x_(Wi,{variant:"primary",size:"small",onClick:a.C0a,className:"RIYJQQ",disabled:e,children:B_(br,{spacing:"1u",align:"start",Fa:"center",children:[x_(Q,{weight:"bold",tone:cr,lineClamp:1,children:M("Zrw8Kg")}),r]})});r=x_(Wi,{variant:c?"secondary":"primary",size:"small",onClick:a.oQa,className:"RIYJQQ",disabled:e,children:B_(br,{spacing:"1u",align:"start",children:[x_(Q,{weight:"bold",tone:cr,lineClamp:1,children:M("lz+XXQ")}),r]})});c=c?B_(E_,{children:[x,y]}):r;
r=x_(Wi,{variant:"secondary",size:"small",icon:__c.or,ariaLabel:M("z7hZsg"),onClick:()=>l(!1)});x=!g.trim();k=x_(Wi,{variant:"primary",size:"small",type:"submit",onClick:k,disabled:x,children:B_(br,{tagName:"span",spacing:"1u",children:[M("64vVQQ"),x_(Sc,{light:x?"light":"dark",Qm:x?"light":"dark",children:z=>x_("div",{className:z.className,children:x_(Pc,{platform:a.platform,size:"medium",Xoa:"Enter",compact:!0})})})]})});g=B_($q,{spacing:"1u",align:"spaceBetween",Fa:"center",children:[B_(R,{Lb:"1u",
width:"full",display:"flex",alignItems:"center",children:[r,x_(rv,{type:"text",ref:p,value:g,onChange:a.hXe,ft:!0,placeholder:M("qgG9uA"),className:"_5TUvDw"})]}),x_(Yq,{width:"content",children:k})]});b=a.gea?g:B_($q,{spacing:"1u",align:"spaceBetween",Fa:"center",children:[x_(Yq,{children:f.state==="loaded"&&f.kM.gt===0?x_(Q,{size:"small",tone:"critical",children:M("s4tL4Q")}):B_(br,{spacing:"1u",children:[h,w]})}),x_(Yq,{width:"content",children:b?t:B_(br,{spacing:"1u",Fa:"center",children:[!e&&
v,c]})})]});return x_("div",{ref:n,tabIndex:-1,children:b})}),VPw=({onClick:a})=>{const [b,c]=zOw(!1),d=bKw(()=>{a();c(!0);setTimeout(()=>c(!1),3E3)},[a]);return x_(Wi,{variant:"tertiary",size:"small",onClick:d,className:"C2_Z0g",ariaLabel:M("ishvKw"),ib:b?M("c8AREg"):void 0,icon:b?sr:tD})};var WPw=a=>{const b=a.start,c=a.text;return x_(__c.hr,{className:"_3gMZcQ",onClick:a.onClick,children:B_(br,{spacing:"1u",children:[b&&x_(Q,{children:b}),x_(Q,{children:c})]})})};var XPw='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M17.69 10.345c-2.486-.496-3.558-1.694-4.056-4.115A.306.306 0 0 0 13.34 6c-.144 0-.26.1-.295.233-.497 2.483-1.631 3.616-4.054 4.112a.31.31 0 1 0 0 .62c2.485.497 3.552 1.67 4.05 4.09a.306.306 0 0 0 .299.256.306.306 0 0 0 .296-.24c.498-2.483 1.63-3.609 4.053-4.105a.31.31 0 1 0 0-.62Z" fill="url(#_2277882992__a)"/><path d="M8.553 13.584c.21 1.047.82 1.552 1.867 1.866a.228.228 0 1 1 0 .456c-1.048.21-1.553.819-1.867 1.866a.228.228 0 0 1-.457 0c-.21-1.047-.82-1.552-1.868-1.866a.228.228 0 1 1 0-.456c1.048-.21 1.553-.819 1.868-1.866a.228.228 0 0 1 .457 0Z" fill="url(#_2277882992__b)"/><defs><linearGradient id="_2277882992__a" x1="16.053" y1="26.301" x2="27.556" y2="13.524" gradientUnits="userSpaceOnUse"><stop stop-color="#AEADFF"/><stop offset="1" stop-color="#981BFA"/></linearGradient><linearGradient id="_2277882992__b" x1="16.053" y1="26.301" x2="27.556" y2="13.524" gradientUnits="userSpaceOnUse"><stop stop-color="#AEADFF"/><stop offset="1" stop-color="#981BFA"/></linearGradient></defs></svg>';var YPw='<svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M17.69 10.345c-2.486-.496-3.558-1.694-4.056-4.115A.306.306 0 0 0 13.34 6c-.144 0-.26.1-.295.233-.497 2.483-1.631 3.616-4.054 4.112a.31.31 0 1 0 0 .62c2.485.497 3.552 1.67 4.05 4.09a.306.306 0 0 0 .299.256.306.306 0 0 0 .296-.24c.498-2.483 1.63-3.609 4.053-4.105a.31.31 0 1 0 0-.62Z" fill="url(#_2443175181__a)"/><path d="M8.553 13.584c.21 1.047.82 1.552 1.867 1.866a.228.228 0 1 1 0 .456c-1.048.21-1.553.819-1.867 1.866a.228.228 0 0 1-.457 0c-.21-1.047-.82-1.552-1.868-1.866a.228.228 0 1 1 0-.456c1.048-.21 1.553-.819 1.868-1.866a.228.228 0 0 1 .457 0Z" fill="url(#_2443175181__b)"/><defs><linearGradient id="_2443175181__a" x1="16.053" y1="26.301" x2="27.556" y2="13.524" gradientUnits="userSpaceOnUse"><stop stop-color="#3C38FD"/><stop offset="1" stop-color="#981BFA"/></linearGradient><linearGradient id="_2443175181__b" x1="16.053" y1="26.301" x2="27.556" y2="13.524" gradientUnits="userSpaceOnUse"><stop stop-color="#3C38FD"/><stop offset="1" stop-color="#981BFA"/></linearGradient></defs></svg>';var ZPw=__c.cyc({small:YPw},{small:{light:YPw,dark:XPw}});var XMw=D_(a=>{var b=a.Aud;const c=a.mBe,d=a.Fb,e=a.D9c,f=a.Ez,g=a.sb,h=a.Zv,k=COw(b,{extensions:[DOw()],mdastExtensions:[EOw()]}),l=z_(null);A_(()=>{if(f&&l.current){var n=l.current;n.scrollHeight-n.scrollTop-n.clientHeight<40&&(n.scrollTop=n.scrollHeight)}},[b,f]);b=f?x_(TPw,{}):a.sJa>1?x_($Pw,{$S:a.$S,total:a.sJa,Sza:a.nXe,onNext:a.mXe}):x_(pr,{onClick:d});return B_(wp,{map:[["Enter",n=>{c||f||(e?e():(a.oQa(),n.stopPropagation()))}]],Hr:!0,children:[B_("div",{className:y_("xDJHaQ","bN5nAQ"),children:[x_(id,
{start:b,title:a.FUa,padding:"1.5u"}),x_(R,{padding:"2u",paddingTop:"1.5u",className:y_({d9vLmQ:f}),children:B_(Tc,{spacing:"2u",children:[a.info,x_("section",{className:"_e6iXQ GTNo0Q EH4Rdg",ref:l,children:c?x_(Q,{tone:"critical",children:c}):B_(E_,{children:[h,x_(PPw,{node:k}),f&&x_("span",{className:"Iy2vCg"})]})}),!f&&!c&&!a.gea&&B_(br,{spacing:"1u",Fa:"center",children:[x_(ZPw,{}),x_(WPw,{onClick:a.Rk,text:M("NYUEbw")}),x_(WPw,{onClick:()=>a.D1a(!0),text:M("qgG9uA")})]})]})}),!a.gea&&x_(Qt,
{})]}),x_(R,{padding:"2u",paddingTop:"1.5u",children:x_(g,{})})]})}),$Pw=({$S:a,total:b,Sza:c,onNext:d})=>B_(br,{spacing:"0.5u",Fa:"center",children:[x_(Wi,{variant:"subtleLinkButton",icon:__c.lr,onClick:c,ariaLabel:M("Me7LTA"),disabled:a===1}),B_(dr,{size:"xsmall",ariaLabel:J("7Aha+w",[a,b]),children:[a,"/",b]}),x_(Wi,{variant:"subtleLinkButton",icon:__c.mr,onClick:d,disabled:a===b,ariaLabel:M("PBVqiA")})]});var WMw=D_(a=>{const b=a.Ez;var c=a.i7j;const d=a.gea,e=a.bDe;var f=a.Iyb,g=a.XYe;const h=a.Q0j,{Jk:k,ifa:l}=SMw();A_(()=>{d&&l()},[k,d,l]);const n=x_(Wi,{variant:"secondary",size:"small",onClick:a.E0a,className:"n1SkiQ",stretch:!0,children:M("xqSQtw")}),p=a.onCopy?x_(aQw,{onClick:a.onCopy}):void 0;var q=x_(Wi,{variant:"secondary",onClick:a.CRc,className:"RIYJQQ",stretch:!0,disabled:e,children:M("yZwLnA")});const r=x_(Wi,{variant:"primary",onClick:a.C0a,className:"RIYJQQ",stretch:!0,disabled:e,children:M("Zrw8Kg")}),
t=x_(Wi,{variant:c?"secondary":"primary",onClick:a.oQa,className:"RIYJQQ",stretch:!0,disabled:e,children:M("lz+XXQ")});c=c?B_(E_,{children:[x_(Yq,{width:"fluid",children:q}),x_(Yq,{width:"fluid",children:r})]}):x_(Yq,{width:"fluid",children:t});q=x_(Wi,{variant:"tertiary",size:"small",icon:__c.or,ariaLabel:M("z7hZsg"),onClick:()=>a.D1a(!1)});g=x_(ir,{variant:"primary",size:"xsmall",type:"submit",icon:tC,ariaLabel:M("64vVQQ"),onClick:g,disabled:!f.trim()});f=B_(R,{Lb:"1u",width:"full",display:"flex",
justifyContent:"spaceBetween",alignItems:"center",className:"_4gkL1g",children:[x_(rv,{start:q,type:"text",ref:k,value:f,onChange:a.hXe,ft:!0,placeholder:M("qgG9uA"),className:"_5TUvDw"}),g]});return a.gea?f:x_(Tc,{spacing:"1u",children:b?n:B_(Tc,{spacing:"3u",children:[B_($q,{Fa:"start",spacing:"1u",children:[!e&&x_(Yq,{width:"content",children:p}),c]}),!b&&x_(R,{width:"full",display:"flex",flexDirection:"column",alignItems:"center",children:x_(Q,{size:"xsmall",tone:"tertiary",children:h})})]})})}),
aQw=({onClick:a})=>{const [b,c]=zOw(!1),d=bKw(()=>{a();c(!0);setTimeout(()=>c(!1),3E3)},[a]);return x_(Wi,{variant:"tertiary",onClick:d,className:"C2_Z0g",ariaLabel:M("ishvKw"),ib:b?M("c8AREg"):void 0,icon:b?sr:tD})};var cNw=a=>{const b=a.disabled,c=a.platform;return a.JMb?x_(ir,{className:"RSFr_Q",type:"submit",variant:"primary",icon:__c.Ot,size:"small",ib:M("64vVQQ"),disabled:a.disabled}):x_(Wi,{variant:"primary",size:"small",type:"submit",disabled:b,className:"RSFr_Q",children:B_(br,{tagName:"span",spacing:"1u",Fa:"center",children:[M("64vVQQ"),x_(Sc,{light:b?"light":"dark",Qm:b?"light":"dark",children:d=>x_("div",{className:d.className,children:x_(Pc,{platform:c,size:"medium",Xoa:Pk("Enter"),compact:!0})})})]})})},
eNw=a=>x_(ir,{variant:"secondary",icon:a.active?__c.cAj:__c.HD,size:"small",ib:M("+3mY/Q"),onClick:a.onClick,active:a.active}),dNw=a=>a.JMb?x_(ir,{variant:"tertiary",icon:__c.Ix,size:"small",ib:M("Ih+h2Q"),onClick:a.onClick}):x_(Wi,{variant:"tertiary",size:"small",onClick:a.onClick,children:M("Ih+h2Q")}),fNw=a=>{const b=a.retry?__c.Ju:tB;return x_("div",{className:"dXbVyQ",children:a.JMb?x_(ir,{variant:"tertiary",icon:b,size:"small",ib:a.retry?M("1Pv3Pg"):M("d4TDmg"),onClick:a.onClick,loading:a.loading,
disabled:a.disabled}):x_(Wi,{variant:"tertiary",onClick:a.onClick,size:"small",icon:b,Qc:"medium",alignment:"start",loading:a.loading,disabled:a.disabled,children:a.retry?M("1Pv3Pg"):M("d4TDmg")})})};var pNw=D_(a=>{const b=a.onSubmit,c=a.header,d=a.footer,e=a.input,f=[[Pk("Enter"),g=>{g.stopPropagation();b()}]];return x_(Yo,{onSubmit:b,className:"S1igRQ",children:B_(wp,{map:f,Hr:!0,children:[x_(R,{padding:"1.5u",paddingTop:"1u",children:B_(Tc,{spacing:"0.5u",children:[c,e]})}),a.pwq&&x_(Qt,{}),x_("div",{className:"IDRrEQ",children:d})]})})}),lNw=({$tq:a,onClose:b,start:c})=>B_(br,{tagName:"header",spacing:"0.5u",Fa:"center",align:"spaceBetween",children:[c,x_(Wi,{variant:"tertiary",size:"tiny",
Qc:"small",className:"BOQPgw",onClick:b,icon:__c.nr,disabled:a,ib:M("W+m9sQ")})]}),kNw=()=>B_(br,{spacing:"0.5u",Fa:"center",children:[x_(pD,{size:"small",tone:"tertiary"}),x_(dr,{size:"xxsmall",tone:"tertiary",children:M("thtTZw")})]});var mNw=D_(a=>B_(br,{spacing:"0.5u",align:"spaceBetween",Fa:"center",children:[x_(br,{spacing:"1u",align:"start",Fa:"center",children:a.start}),x_(br,{spacing:"1u",align:"end",Fa:"center",children:a.end})]})),nNw=D_(a=>B_(R,{Pc:"0.5u",children:[B_($q,{spacing:"1u",align:"spaceBetween",Fa:"center",children:[x_(Yq,{width:"content",children:a.kPh}),x_(Yq,{children:a.pAa}),x_(Yq,{width:"content",children:a.f5p}),a.ven&&x_(Yq,{width:"content",children:a.ven}),x_(Yq,{width:"content",children:a.F1q})]}),
a.Kbt]})),jNw=a=>x_("div",{className:"XAOHNw",children:x_(Q,{size:"xsmall",tone:"critical",children:a.error})});var oNw=uNw(({GC:a,Q$f:b,...c},d)=>{a=a!=null?x_(Tc,{spacing:"0",align:"end",children:x_(bQw,{count:a,max:b})}):null;return B_(R,{children:[B_("div",{className:"_5O6L0Q",children:[x_(TC,{...c,ref:d,className:"_2UX8hQ",maxRows:10,cOa:0,footer:a,placeholder:c.placeholder,tN:"JfZqhw",ft:!0,PK:!0}),c.Ukt]}),c.kPh]})}),bQw=({count:a,max:b})=>x_("div",{className:"ZCFrIw",children:x_(Q,{margins:"legacy",size:"xsmall",alignment:"end",tone:a>b?"critical":"tertiary",children:B_("span",{"aria-label":J("pBrsaw",
[a,b]),"aria-live":"polite",children:[a,"/",b]})})});var gNw=D_(a=>{const b=a.pAa,c=a.SYb,d=a.pDe;if(a.loading)return x_(cQw,{EWe:15});const [e,f]=ZMw(b);return x_($y,{kn:d?"none":"chevron",name:"prompt_library",children:[B_(Tc,{spacing:"1u",children:[B_(br,{spacing:"1u",Fa:"center",children:[x_(ZPw,{}),e.map((g,h)=>x_(WPw,{start:g.Bi,text:g.title,onClick:()=>c(g)},h))]}),x_(br,{spacing:"1u",children:f.map((g,h)=>x_(WPw,{start:g.Bi,text:g.title,onClick:()=>a.SYb(g)},h))})]},"carousel")]})}),cQw=a=>{const b=[];for(let e=0;e<a.EWe;e++)b.push([x_("div",
{className:"_9kUffw",children:x_(Xi,{shape:"rectangle"})},e)]);const [c,d]=ZMw(b);return x_($y,{kn:"none",name:"prompt_library",expand:"large",children:[B_(Tc,{spacing:"1u",children:[B_(br,{spacing:"1u",Fa:"center",children:[x_(ZPw,{}),c]}),x_(br,{spacing:"1u",Fa:"center",children:d})]},"carousel")]})};var hNw=D_(a=>{const b=a.pAa,c=a.SYb,d=a.pDe;return a.loading?x_(dQw,{EWe:15}):x_($y,{kn:d?"none":"chevron",name:"prompt_library",ku:"small",children:b.map((e,f)=>x_(WPw,{text:e.title,onClick:()=>c(e)},f))})}),dQw=a=>{const b=[];for(let c=0;c<a.EWe;c++)b.push([x_("div",{className:"_9kUffw",children:x_(Xi,{shape:"rectangle"})},c)]);return x_($y,{kn:"none",name:"prompt_library",expand:"large",ku:"small",children:b})};var vNw=D_(function(a){return B_("div",{className:"S1igRQ",children:[a.header,x_(R,{padding:"2u",children:x_(Yo,{onSubmit:a.onSubmit,children:B_(Tc,{spacing:"2u",children:[a.input,a.footer]})})})]})}),qNw=a=>B_(br,{spacing:"1.5u",Fa:"center",children:[x_(pD,{size:"medium",tone:"primary"}),x_(Lt,{onClick:a.p9k,variant:"unstyled",children:B_(br,{spacing:"0.5u",Fa:"center",children:[x_(dr,{size:"xsmall",children:a.dMh}),x_(Rt,{size:"medium"})]})})]}),rNw=a=>x_(br,{spacing:"1.5u",Fa:"center",children:x_(Lt,
{onClick:a.ejs,variant:"unstyled",children:B_(br,{spacing:"0.5u",Fa:"center",children:[x_(dr,{size:"xsmall",children:a.hMp}),x_(Rt,{size:"medium"})]})})}),tNw=a=>{const b=x_(hd,{onClick:a.onClose}),c=a.F5g?B_(br,{spacing:"1u",Fa:"center",children:[x_(Wi,{ariaLabel:M("4LrC/w"),variant:"tertiary",size:"tiny",icon:__c.$x,Qc:"small",onClick:a.F5g}),b]}):void 0;return x_(id,{Wu:!0,start:B_(E_,{children:[a.NPs,a.jio&&a.jio]}),end:c??b})};var aNw=({gt:a,Nza:b,Nz:c})=>B_($q,{spacing:"0.5u",Fa:"center",children:[c&&x_(Yq,{width:"content",children:x_(c,{})}),x_(Yq,{children:x_(Q,{tagName:"span",size:"xsmall",tone:"tertiary",children:b?x_(ak,{message:J("+sRnLQ",[a]),Kx:"subtle",uf:b}):J("V5hF/g",[a])})})]}),bNw=({gt:a,HT:b})=>{if(!b)return null;a=J("bn0llw",[a,new Date(b)]);return x_(Q,{size:"xsmall",tone:"tertiary",children:a})},$Mw=({Nza:a,R2a:b})=>x_($q,{spacing:"0.5u",Fa:"center",children:x_(Yq,{width:"content",children:x_(b,{UC:a})})}),
iNw=D_(({SIa:a,children:b})=>x_("div",{className:y_({_6LFCQQ:a}),children:b}));var zNw=({label:a,wgh:b})=>{const [c,d]=zOw(!1),e=()=>{d(f=>!f)};b=b(e);return x_(br,{spacing:"0.5u",Fa:"center",children:x_(kv,{open:c,Mx:e,trigger:({...f})=>x_(Lt,{variant:"unstyled",onClick:()=>{},children:x_("div",{...f,className:c?"_5rv6tw":"B8n0Jg",children:a})}),children:b})})},xNw=({mRd:a,Lbm:b,oa:c,GNg:d})=>x_(So,{oa:c,className:"LG1j5g",children:a.map(e=>x_(lv,{onClick:()=>{d(e.id);c()},end:b===e.id?x_(sr,{size:"medium"}):void 0,children:e.model},e.id))}),yNw=a=>B_(br,{spacing:"0.5u",Fa:"center",
children:[x_(dr,{size:"xxsmall",tone:a.dvr?"tertiary":"primary",children:a.text}),x_(Rt,{size:"medium"})]});var ANw=D_(function({Fb:a,onClose:b,children:c}){return B_(E_,{children:[x_(id,{Wu:!0,start:x_(pr,{onClick:a}),end:x_(hd,{onClick:b}),title:M("3dkRTw")}),c]})});var FNw=({label:a,wgh:b,OWj:c})=>{const [d,e]=zOw(!1),f=()=>{e(g=>!g)};b=b(f);return B_(br,{spacing:"0.5u",Fa:"center",children:[x_(kv,{open:d,Mx:f,trigger:({...g})=>x_(Lt,{variant:"unstyled",onClick:()=>{},children:x_("div",{...g,className:d?"a3HMwg":"_7696cw",children:a})}),children:b}),c]})},CNw=D_(({jZ:a,kr:b,whg:c,z4g:d,b8g:e,Z7g:f,a8g:g,d7g:h,oa:k,Qqh:l,Nz:n})=>{const p=()=>{f();k()},q=a.length>=l,r=__c.Zc({default:!0,ie:!1}),t=c==="default"||c===void 0;return B_(So,{oa:k,className:"_2MaNMw",
children:[(b||h)&&B_(E_,{children:[!r&&x_(Tt,{children:B_(R,{width:"full",display:"flex",justifyContent:"spaceBetween",children:[x_(Q,{size:"small",tone:"tertiary",weight:"bold",children:M("hqidOw")}),h&&x_(Q,{size:"small",tone:"tertiary",weight:"bold",children:x_(Lt,{variant:"unstyled",onClick:h,children:M("IAh/NQ")})})]})}),b?x_(lv,{onClick:p,start:x_(Kz,{size:"medium"}),end:c===b.id?x_(sr,{size:"medium"}):void 0,children:b.name}):x_(R,{width:"full",Lb:"2u",Pc:"1u",children:x_(Q,{tone:"tertiary",
children:M("T1SyEw")})}),r&&h&&x_(lv,{onClick:h,children:M("IAh/NQ")}),x_(Tt,{})]}),x_(lv,{onClick:()=>{e();k()},end:t?x_(sr,{size:"medium"}):void 0,children:M("c6N+Dg")}),a.map(v=>x_(lv,{onClick:()=>{g(v.id);k()},end:c===v.id?x_(sr,{size:"medium"}):void 0,children:v.name},v.id)),q?x_(R,{width:"full",Lb:"2u",Pc:"1u",children:x_(Q,{tone:"tertiary",children:J("W+tl6w",[l])})}):x_(lv,{onClick:d,start:x_(Gu,{size:"medium"}),end:x_(n,{}),children:M("hSYMCA")})]})}),DNw=a=>{const b=a.wEk?"tertiary":"primary";
return B_(br,{spacing:"0.5u",Fa:"center",children:[x_(pD,{size:"small",tone:b}),x_(dr,{size:"xxsmall",tone:b,children:a.text}),x_(Rt,{size:"medium"})]})},ENw=a=>x_(Wi,{ariaLabel:M("4LrC/w"),variant:"tertiary",size:"xsmall",icon:__c.$x,Qc:"small",onClick:a.onClick});var GNw=D_(function({Fb:a,onClose:b,children:c}){return B_(E_,{children:[x_(id,{Wu:!0,start:x_(pr,{onClick:a}),end:x_(hd,{onClick:b}),title:M("vxW/ug")}),c]})});var JNw=a=>x_("div",{className:"yQgXtA",children:a.children});var eQw=2*Uc,YNw=({zul:a,k8:b,children:c})=>x_(BOw,{bounds:!0,children:({measureRef:d,contentRect:e})=>{var f=e.bounds?.width??0,g=e.bounds?.height??0;const h={};var k=a.Tn.y+2*eQw+g>b.Tn.y;a.tl.y-2*eQw-g<b.tl.y&&k?h.top=b.c.y-g/2:k?h.bottom=window.innerHeight-a.tl.y+eQw:h.top=a.Tn.y+eQw;g=a.c.x-f/2-2*eQw<b.Ub.x;k=a.c.x+f/2+2*eQw>b.r.x;h.left=g&&k?b.c.x-f/2:g?b.Ub.x+eQw:k?b.r.x-f-eQw:a.c.x-f/2;return x_("div",{style:{position:"fixed",...h,opacity:e.bounds?.width?void 0:0},ref:d,children:c})}});var aOw=({B1:a,h8:b,AAj:c,children:d})=>x_(BOw,{bounds:!0,children:({measureRef:e,contentRect:f})=>{var g;if(g=a&&b){g=f.bounds?.height;var h=Math.max(document.documentElement.clientHeight-50||0,window.innerHeight-50||0),k=a.Tn.y;g=!g||k+g<h&&k>80?k:k>g?h-g:k<=80?80:h/2-g/2;c?(k=f.bounds?.width??0,h=a.Ub.x+(a.r.x-a.Ub.x)/2-k/2,k=window.innerWidth-100-k,h=h>k?k:h<100?100:h):h=b.tl.x;g={position:"fixed",top:g,left:h,opacity:f.bounds?.width?void 0:0}}return x_("div",{style:g,ref:e,children:d})}});__c.Wbf={Wjn:function(a,b,c,d){d=gOw(d);a.install(hOw({Era:d,execute:async()=>{b.QK({});c.vC(__c.Il.G2a,"editor_magic_write_quick_actions",{Uzc:"text_generator",hhd:"text_generator"});b.close({trigger:"show_dialog"})}}))}};__c.Wbf.iuu=kOw;
__c.Wbf.iCk=function(a){const b=a.bootstrap;if(b.RGq){const {HLb:N,$y:P}=fOw(a);return{KFb:N,seb:P}}var c=a.X;const d=a.Se;var e=a.fd,f=a.pg;const g=a.errorService.Ef("text_generator"),h=a.Ha.Vd("editor.editing.design_automation.text_generator");var k=new __c.LOw;e=e&&b.gMq?new KOw(e,a.selection,g,a.eH,a.JS):void 0;const l=new IOw(k,b.lRm,a.Ff,a.NS,g,c,a.P,e,a.selection,a.document,a.qc,a.JS,a.KWa,a.kd,a.eH,a.undo,a.Dzb,a.E4a),{show:n,dFf:p,Overlay:q,store:r,L:t,XXc:v,k3f:w,j3f:x}=FJw(a.ea.id,a.ub,
l,a.Vf,a.P,a.la,a.viewport,()=>{var N=H,P=a.viewport;var T=N.tya?.box;P.uh&&T?(N=P.hm(N.tya.container).invert(),T=__c.Nj(T).transform(N)):T=void 0;return T},b.Mga,b.pge,b.OQa,a.u_,a.dH,a.mr,a.qa,a.Jb,a.ma,b.Q6h,b.MBg,b.jGl,b.iGl,b.gGl,h);k=new __c.pPw(r,t,N=>C({location:N.location,state:"post-generation"}));const y=__c.bJw(c,f),{osb:z,PHb:B}=NJw({X:a.X,Ra:a.Ra,Rj:a.Rj,viewport:a.viewport,Kc:a.Kc,Pa:a.Pa,la:a.la,selection:a.selection,qc:a.qc,kd:a.kd,Wc:a.Wc,Wr:a.Wr,P:a.P,eH:a.eH}),C=async N=>{if(await y()!==
"never"){var P=h.wb("editor.text_generator.open_dialog",{Hb:{name:"editor.text_generator.open_dialog",attrs:new Map([["location",N.location]])}});if(a.Ac.nS(a.viewport.Vg)){a.ma.Ib({Db:M("sZmqxA"),group:moe});var T=!0}else T=!1;if(T)P.abort();else{T=H.JWb;var V=!!T;V&&(T=HJw(T.elements),p(T,{state:N.state??"default",CM:V}),P.ob().addEvent("set_initial_prompt_from_selection"));return new Promise(W=>{setTimeout(()=>{n({location:N.location,CM:V,state:N.state??"default"});P.end();W()})})}}};c=async N=>
{await C({location:"floating_toolbar",state:N})};f=async()=>{await C({location:"floating_toolbar",state:"configure_voice"})};const G=(e=a.jg&&b.tGe)&&b.eRm,H=new sPw(a.Pa,a.selection,a.mc,e,z);__c.iOw(a.he,()=>!H.cKa,async()=>{d.QK({});d.close({trigger:"show_dialog"});await C({location:"quick_actions"})},a.Jb);a.Kc.a8=D_(()=>r.isOpen?x_(q,{}):null);let K;const L=new tPw(a.u_,l,b.t7h?k:void 0,a.ma,b.Mga,a.Ac,new HOw(a.wY,a.document,g),z);kOw(a.he,()=>b.YCg&&!!l.Mu,()=>b.YCg&&l.Uom,async()=>{d.QK({});
d.close({trigger:"show_dialog"});await VJw(L,{store:H,location:"quick_actions"})},async()=>{d.QK({});d.close({trigger:"show_dialog"});await C({location:"quick_actions",state:"customisation"})},async()=>{d.QK({});d.close({trigger:"show_dialog"});await XJw(L,{store:H,location:"quick_actions"})},async()=>{d.QK({});d.close({trigger:"show_dialog"});await WJw(L,{store:H,location:"quick_actions"})},async()=>{d.QK({});d.close({trigger:"show_dialog"});await L.Xsk({store:H,XXc:v,location:"quick_actions"})},
a.Jb);b.QGq&&({U$f:K}=__c.rKw(a.Jd,a.ida,H,w,L,x,a.la,a.qa,a.Jb,a.u_,v,a.Pa,G,b.t7h?k:void 0,b.Mga,c,f,y,h,B));return{KFb:{open:N=>C({state:"default",location:N.PSa.location}),URk:()=>K?.QCn()??Promise.resolve(!1),eB:K?.eXl??{state:"loading"},gLj:N=>{switch(N.Sn){case "brand_voice":x.mAd(w,v);break;case "custom_voice":x.Y5d(w,N.id);break;default:x.F9c(w)}}},seb:void 0}};__c.Wbf.kuu=__c.iOw;
}).call(self, self._456c437108d2d2713799e19380be528d);}

}])
//# sourceMappingURL=sourcemaps/48ac76ca8c539755.js.map